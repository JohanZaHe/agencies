(self.webpackChunkagencias=self.webpackChunkagencias||[]).push([[179],{255:e=>{function o(d){return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+d+"'");throw v.code="MODULE_NOT_FOUND",v})}o.keys=()=>[],o.resolve=o,o.id=255,e.exports=o},378:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(e){return function(){return aa[e].apply(this,arguments)}}function ca(e,o){return aa[e]=o}function da(e){var o=0;return function(){return o<e.length?{done:!1,value:e[o++]}:{done:!0}}}function ea(e){var o="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return o?o.call(e):{next:da(e)}}function fa(e){for(var o,d=[];!(o=e.next()).done;)d.push(o.value);return d}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(e,o,d){e!=Array.prototype&&e!=Object.prototype&&(e[o]=d.value)},ia="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ja(e,o){if(o){var d=ia;e=e.split(".");for(var v=0;v<e.length-1;v++){var w=e[v];w in d||(d[w]={}),d=d[w]}(o=o(v=d[e=e[e.length-1]]))!=v&&null!=o&&ha(d,e,{configurable:!0,writable:!0,value:o})}}function la(){la=function(){},ia.Symbol||(ia.Symbol=ma)}function na(e,o){this.a=e,ha(this,"description",{configurable:!0,writable:!0,value:o})}ja("Array.prototype.find",function(e){return e||function(o,d){t:{var v=this;v instanceof String&&(v=String(v));for(var w=v.length,j=0;j<w;j++){var Z=v[j];if(o.call(d,Z,j,v)){o=Z;break t}}o=void 0}return o}}),na.prototype.toString=function(){return this.a};var ma=(o=0,function e(d){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(d||"")+"_"+o++,d)}),o,ra;function oa(){la();var e=ia.Symbol.iterator;e||(e=ia.Symbol.iterator=ia.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&ha(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(e){return oa(),(e={next:e})[ia.Symbol.iterator]=function(){return this},e}function qa(e,o){oa(),e instanceof String&&(e+="");var d=0,v={next:function(){if(d<e.length){var w=d++;return{value:o(w,e[w]),done:!1}}return v.next=function(){return{done:!0,value:void 0}},v.next()}};return v[Symbol.iterator]=function(){return v},v}if(ja("Array.prototype.keys",function(e){return e||function(){return qa(this,function(o){return o})}}),"function"==typeof Object.setPrototypeOf)ra=Object.setPrototypeOf;else{var sa;t:{var ta={rg:!0},ua={};try{ua.__proto__=ta,sa=ua.rg;break t}catch(e){}sa=!1}ra=sa?function(e,o){if(e.__proto__=o,e.__proto__!==o)throw new TypeError(e+" is not extensible");return e}:null}var va=ra;ja("Object.setPrototypeOf",function(e){return e||va}),ja("Promise",function(e){function o(Z){this.b=0,this.c=void 0,this.a=[];var _e=this.f();try{Z(_e.resolve,_e.reject)}catch(Ki){_e.reject(Ki)}}function d(){this.a=null}function v(Z){return Z instanceof o?Z:new o(function(_e){_e(Z)})}if(e)return e;d.prototype.b=function(Z){if(null==this.a){this.a=[];var _e=this;this.c(function(){_e.g()})}this.a.push(Z)};var w=ia.setTimeout;d.prototype.c=function(Z){w(Z,0)},d.prototype.g=function(){for(;this.a&&this.a.length;){var Z=this.a;this.a=[];for(var _e=0;_e<Z.length;++_e){var Ki=Z[_e];Z[_e]=null;try{Ki()}catch(_u){this.f(_u)}}}this.a=null},d.prototype.f=function(Z){this.c(function(){throw Z})},o.prototype.f=function(){function Z(_u){return function(fd){Ki||(Ki=!0,_u.call(_e,fd))}}var _e=this,Ki=!1;return{resolve:Z(this.R),reject:Z(this.g)}},o.prototype.R=function(Z){if(Z===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(Z instanceof o)this.u(Z);else{t:switch(typeof Z){case"object":var _e=null!=Z;break t;case"function":_e=!0;break t;default:_e=!1}_e?this.s(Z):this.i(Z)}},o.prototype.s=function(Z){var _e=void 0;try{_e=Z.then}catch(Ki){return void this.g(Ki)}"function"==typeof _e?this.Wa(_e,Z):this.i(Z)},o.prototype.g=function(Z){this.j(2,Z)},o.prototype.i=function(Z){this.j(1,Z)},o.prototype.j=function(Z,_e){if(0!=this.b)throw Error("Cannot settle("+Z+", "+_e+"): Promise already settled in state"+this.b);this.b=Z,this.c=_e,this.m()},o.prototype.m=function(){if(null!=this.a){for(var Z=0;Z<this.a.length;++Z)j.b(this.a[Z]);this.a=null}};var j=new d;return o.prototype.u=function(Z){var _e=this.f();Z.gf(_e.resolve,_e.reject)},o.prototype.Wa=function(Z,_e){var Ki=this.f();try{Z.call(_e,Ki.resolve,Ki.reject)}catch(_u){Ki.reject(_u)}},o.prototype.then=function(Z,_e){function Ki(oy,dy){return"function"==typeof oy?function(_y){try{_u(oy(_y))}catch(Ay){fd(Ay)}}:dy}var _u,fd,iy=new o(function(oy,dy){_u=oy,fd=dy});return this.gf(Ki(Z,_u),Ki(_e,fd)),iy},o.prototype.catch=function(Z){return this.then(void 0,Z)},o.prototype.gf=function(Z,_e){function Ki(){switch(_u.b){case 1:Z(_u.c);break;case 2:_e(_u.c);break;default:throw Error("Unexpected state: "+_u.b)}}var _u=this;null==this.a?j.b(Ki):this.a.push(Ki)},o.resolve=v,o.reject=function(Z){return new o(function(_e,Ki){Ki(Z)})},o.race=function(Z){return new o(function(_e,Ki){for(var _u=ea(Z),fd=_u.next();!fd.done;fd=_u.next())v(fd.value).gf(_e,Ki)})},o.all=function(Z){var _e=ea(Z),Ki=_e.next();return Ki.done?v([]):new o(function(_u,fd){function iy(_y){return function(Ay){oy[_y]=Ay,0==--dy&&_u(oy)}}var oy=[],dy=0;do{oy.push(void 0),dy++,v(Ki.value).gf(iy(oy.length-1),fd),Ki=_e.next()}while(!Ki.done)})},o}),ja("Object.entries",function(e){return e||function(o){var v,d=[];for(v in o)Object.prototype.hasOwnProperty.call(o,v)&&d.push([v,o[v]]);return d}});var wa="function"==typeof Object.assign?Object.assign:function(e,o){for(var d=1;d<arguments.length;d++){var v=arguments[d];if(v)for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(e[w]=v[w])}return e};ja("Object.assign",function(e){return e||wa}),ja("Math.log2",function(e){return e||function(o){return Math.log(o)/Math.LN2}});var ya=this||self;function za(e,o,d){(e=e.split("."))[0]in(d=d||ya)||void 0===d.execScript||d.execScript("var "+e[0]);for(var v;e.length&&(v=e.shift());)e.length||void 0===o?d=d[v]&&d[v]!==Object.prototype[v]?d[v]:d[v]={}:d[v]=o}function Aa(){}function Ba(e){var o=typeof e;if("object"==o){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return o;var d=Object.prototype.toString.call(e);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==o&&void 0===e.call)return"object";return o}function Ca(e){var o=Ba(e);return"array"==o||"object"==o&&"number"==typeof e.length}function Da(e){return"function"==Ba(e)}function Ea(e){var o=typeof e;return"object"==o&&null!=e||"function"==o}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function Ha(e,o,d){return e.call.apply(e.bind,arguments)}function Ia(e,o,d){if(!e)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,v),e.apply(o,w)}}return function(){return e.apply(o,arguments)}}function Ja(e,o,d){return(Ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ha:Ia).apply(null,arguments)}function Ka(e,o){var d=Array.prototype.slice.call(arguments,1);return function(){var v=d.slice();return v.push.apply(v,arguments),e.apply(this,v)}}function t(e,o){za(e,o,void 0)}function u(e,o){function d(){}d.prototype=o.prototype,e.l=o.prototype,e.prototype=new d,e.prototype.constructor=e,e.Co=function(v,w,j){for(var Z=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)Z[_e-2]=arguments[_e];return o.prototype[w].apply(v,Z)}}function La(e){if(Error.captureStackTrace)Error.captureStackTrace(this,La);else{var o=Error().stack;o&&(this.stack=o)}e&&(this.message=String(e))}function Ma(e,o){this.c=e,this.f=o,this.b=0,this.a=null}function Na(){this.b=this.a=null}u(La,Error),La.prototype.name="CustomError",Ma.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Ma.prototype.put=function(e){this.f(e),100>this.b&&(this.b++,e.next=this.a,this.a=e)};var Pa=new Ma(function(){return new Oa},function(e){e.reset()});function Oa(){this.next=this.b=this.a=null}Na.prototype.add=function(e,o){var d=Pa.get();d.set(e,o),this.b?this.b.next=d:this.a=d,this.b=d},Na.prototype.remove=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e},Oa.prototype.set=function(e,o){this.a=e,this.b=o,this.next=null},Oa.prototype.reset=function(){this.next=this.b=this.a=null};var Qa=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ra(e,o){return-1!=e.indexOf(o)}function Sa(e,o){return e<o?-1:e>o?1:0}function Ta(e,o){for(var d in e)if(o.call(void 0,e[d],d,e))return!0;return!1}function Ua(e){for(var o in e)return!1;return!0}function Va(e){var d,o={};for(d in e)o[d]=e[d];return o}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ya;function Xa(e,o){for(var d,v,w=1;w<arguments.length;w++){for(d in v=arguments[w])e[d]=v[d];for(var j=0;j<Wa.length;j++)d=Wa[j],Object.prototype.hasOwnProperty.call(v,d)&&(e[d]=v[d])}}t:{var Za=ya.navigator;if(Za){var $a=Za.userAgent;if($a){Ya=$a;break t}}Ya=""}function ab(e){return Ra(Ya,e)}var bb=Array.prototype.indexOf?function(e,o){return Array.prototype.indexOf.call(e,o,void 0)}:function(e,o){if("string"==typeof e)return"string"!=typeof o||1!=o.length?-1:e.indexOf(o,0);for(var d=0;d<e.length;d++)if(d in e&&e[d]===o)return d;return-1};function cb(e,o){this.b=e===db&&o||"",this.a=eb}var eb={},db={},fb=new cb(db,"");function gb(e,o){this.b=e===hb&&o||"",this.a=ib}gb.prototype.kc=function(){return 1};var ib={},hb={};function jb(){this.b="",this.c=kb,this.a=null}function lb(){return mb instanceof jb&&mb.constructor===jb&&mb.c===kb?mb.b:(Ba(mb),"type_error:SafeHtml")}jb.prototype.kc=function(){return this.a};var kb={};function nb(e){var o=new jb;return o.b=e,o.a=0,o}nb("<!DOCTYPE html>");var mb=nb("");function ob(e){var o=new gb(hb,fb instanceof cb&&fb.constructor===cb&&fb.a===eb?fb.b:"type_error:Const");o instanceof gb&&o.constructor===gb&&o.a===ib?o=o.b:(Ba(o),o="type_error:TrustedResourceUrl"),e.src=o.toString()}function pb(e){return pb[" "](e),e}function qb(e,o){var d=rb;return Object.prototype.hasOwnProperty.call(d,e)?d[e]:d[e]=o(e)}nb("<br>"),pb[" "]=Aa;var sb=ab("Opera"),tb=ab("Trident")||ab("MSIE"),ub=ab("Edge"),vb=ab("Gecko")&&!(Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"))&&!(ab("Trident")||ab("MSIE"))&&!ab("Edge"),wb=Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"),zb,e;function xb(){var e=ya.document;return e?e.documentMode:void 0}t:{var Ab="",Bb=(e=Ya,vb?/rv:([^\);]+)(\)|;)/.exec(e):ub?/Edge\/([\d\.]+)/.exec(e):tb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):wb?/WebKit\/(\S+)/.exec(e):sb?/(?:Version)[ \/]?(\S+)/.exec(e):void 0);if(Bb&&(Ab=Bb?Bb[1]:""),tb){var Cb=xb();if(null!=Cb&&Cb>parseFloat(Ab)){zb=String(Cb);break t}}zb=Ab}var rb={},Eb,Hb,Kb;function Db(e){return qb(e,function(){for(var o=0,d=Qa(String(zb)).split("."),v=Qa(String(e)).split("."),w=Math.max(d.length,v.length),j=0;0==o&&j<w;j++){var Z=d[j]||"",_e=v[j]||"";do{if(Z=/(\d*)(\D*)(.*)/.exec(Z)||["","","",""],_e=/(\d*)(\D*)(.*)/.exec(_e)||["","","",""],0==Z[0].length&&0==_e[0].length)break;o=Sa(o=0==Z[1].length?0:parseInt(Z[1],10),0==_e[1].length?0:parseInt(_e[1],10))||Sa(0==Z[2].length,0==_e[2].length)||Sa(Z[2],_e[2]),Z=Z[3],_e=_e[3]}while(0==o)}return 0<=o})}function Fb(e){var o=document;return e=String(e),"application/xhtml+xml"===o.contentType&&(e=e.toLowerCase()),o.createElement(e)}function Gb(e){ya.setTimeout(function(){throw e},0)}function Ib(){var e=ya.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ab("Presto")&&(e=function(){var w=Fb("IFRAME");w.style.display="none",ob(w),document.documentElement.appendChild(w);var j=w.contentWindow;(w=j.document).open(),w.write(lb()),w.close();var Z="callImmediate"+Math.random(),_e="file:"==j.location.protocol?"*":j.location.protocol+"//"+j.location.host;w=Ja(function(Ki){("*"==_e||Ki.origin==_e)&&Ki.data==Z&&this.port1.onmessage()},this),j.addEventListener("message",w,!1),this.port1={},this.port2={postMessage:function(){j.postMessage(Z,_e)}}}),void 0!==e&&!ab("Trident")&&!ab("MSIE")){var o=new e,d={},v=d;return o.port1.onmessage=function(){if(void 0!==d.next){var w=(d=d.next).Ni;d.Ni=null,w()}},function(w){v.next={Ni:w},v=v.next,o.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in Fb("SCRIPT")?function(w){var j=Fb("SCRIPT");j.onreadystatechange=function(){j.onreadystatechange=null,j.parentNode.removeChild(j),j=null,w(),w=null},document.documentElement.appendChild(j)}:function(w){ya.setTimeout(w,0)}}function Jb(e,o){Kb||Lb(),Mb||(Kb(),Mb=!0),Nb.add(e,o)}function Lb(){if(ya.Promise&&ya.Promise.resolve){var e=ya.Promise.resolve(void 0);Kb=function(){e.then(Ob)}}else Kb=function(){var o=Ob;!Da(ya.setImmediate)||ya.Window&&ya.Window.prototype&&!ab("Edge")&&ya.Window.prototype.setImmediate==ya.setImmediate?(Hb||(Hb=Ib()),Hb(o)):ya.setImmediate(o)}}Eb=ya.document&&tb?xb():void 0,!vb&&!tb||tb&&9<=Number(Eb)||vb&&Db("1.9.1"),tb&&Db("9");var Mb=!1,Nb=new Na;function Ob(){for(var e;e=Nb.remove();){try{e.a.call(e.b)}catch(o){Gb(o)}Pa.put(e)}Mb=!1}function Pb(e){if(this.a=Qb,this.j=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,e!=Aa)try{var o=this;e.call(void 0,function(d){Rb(o,Sb,d)},function(d){Rb(o,Tb,d)})}catch(d){Rb(this,Tb,d)}}var Qb=0,Sb=2,Tb=3;function Ub(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Ub.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Vb=new Ma(function(){return new Ub},function(e){e.reset()});function Wb(e,o,d){var v=Vb.get();return v.f=e,v.b=o,v.c=d,v}function Yb(e){if(e instanceof Pb)return e;var o=new Pb(Aa);return Rb(o,Sb,e),o}function Zb(e){return new Pb(function(o,d){d(e)})}function $b(){var e,o;return new ac(new Pb(function(v,w){e=v,o=w}),e,o)}function dc(e,o){if(e.a==Qb)if(e.c){var d=e.c;if(d.b){for(var v=0,w=null,j=null,Z=d.b;Z&&(Z.g||(v++,Z.a==e&&(w=Z),!(w&&1<v)));Z=Z.next)w||(j=Z);w&&(d.a==Qb&&1==v?dc(d,o):(j?((v=j).next==d.f&&(d.f=v),v.next=v.next.next):ec(d),fc(d,w,Tb,o)))}e.c=null}else Rb(e,Tb,o)}function gc(e,o){e.b||e.a!=Sb&&e.a!=Tb||hc(e),e.f?e.f.next=o:e.b=o,e.f=o}function bc(e,o,d,v){var w=Wb(null,null,null);return w.a=new Pb(function(j,Z){w.f=o?function(_e){try{var Ki=o.call(v,_e);j(Ki)}catch(_u){Z(_u)}}:j,w.b=d?function(_e){try{var Ki=d.call(v,_e);void 0===Ki&&_e instanceof cc?Z(_e):j(Ki)}catch(_u){Z(_u)}}:Z}),w.a.c=e,gc(e,w),w.a}function Rb(e,o,d){if(e.a==Qb){e===d&&(o=Tb,d=new TypeError("Promise cannot resolve to itself")),e.a=1;t:{var v=d,w=e.s,j=e.R;if(v instanceof Pb){gc(v,Wb(w||Aa,j||null,e));var Z=!0}else{if(v)try{var _e=!!v.$goog_Thenable}catch(_u){_e=!1}else _e=!1;if(_e)v.then(w,j,e),Z=!0;else{if(Ea(v))try{var Ki=v.then;if(Da(Ki)){ic(v,Ki,w,j,e),Z=!0;break t}}catch(_u){j.call(e,_u),Z=!0;break t}Z=!1}}}Z||(e.j=d,e.a=o,e.c=null,hc(e),o!=Tb||d instanceof cc||jc(e,d))}}function ic(e,o,d,v,w){function j(Ki){_e||(_e=!0,v.call(w,Ki))}var _e=!1;try{o.call(e,function(Ki){_e||(_e=!0,d.call(w,Ki))},j)}catch(Ki){j(Ki)}}function hc(e){e.i||(e.i=!0,Jb(e.m,e))}function ec(e){var o=null;return e.b&&(e.b=(o=e.b).next,o.next=null),e.b||(e.f=null),o}function fc(e,o,d,v){if(d==Tb&&o.b&&!o.g)for(;e&&e.g;e=e.c)e.g=!1;if(o.a)o.a.c=null,lc(o,d,v);else try{o.g?o.f.call(o.c):lc(o,d,v)}catch(w){mc.call(null,w)}Vb.put(o)}function lc(e,o,d){o==Sb?e.f.call(e.c,d):e.b&&e.b.call(e.c,d)}function jc(e,o){e.g=!0,Jb(function(){e.g&&mc.call(null,o)})}Pb.prototype.then=function(e,o,d){return bc(this,Da(e)?e:null,Da(o)?o:null,d)},Pb.prototype.$goog_Thenable=!0,Pb.prototype.cancel=function(e){if(this.a==Qb){var o=new cc(e);Jb(function(){dc(this,o)},this)}},Pb.prototype.s=function(e){this.a=Qb,Rb(this,Sb,e)},Pb.prototype.R=function(e){this.a=Qb,Rb(this,Tb,e)},Pb.prototype.m=function(){for(var e;e=ec(this);)fc(this,e,this.a,this.j);this.i=!1};var mc=Gb;function cc(e){La.call(this,e)}function ac(e,o,d){this.wk=e,this.resolve=o,this.reject=d}u(cc,La),cc.prototype.name="cancel";var x=this;function nc(){return Object.create(y,void 0)}var A=Ja,oc=String,pc=x.Object.freeze||function(e){return e};function qc(e){for(var v,o=Object.keys(e),d=o.length;d--;)Ea(v=e[o[d]])&&qc(v);return pc(e)}function rc(e){var o=Ba(e);if("object"==o||"array"==o){if(Da(e.clone))return e.clone();for(var d in o="array"==o?[]:{},e)e.hasOwnProperty(d)&&(o[d]=rc(e[d]));return o}return e}var B=[].pop(),y=/x/.exec("");function sc(e,o){return oc(e).split(o!==B?o:" ")}var tc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(e,o,d,v,w){if(!(o=e instanceof o)&&d)throw new D(d,v,uc(w)?w:e);return o}function vc(e,o){if(!0===(C(e,o)&&e.constructor===o))throw new TypeError("Illegal constructor "+wc(o))}function xc(e,o,d,v,w){if(!(o=yc(e)===o)&&d)throw new D(d,v,uc(w)?w:e);return o}function zc(e,o,d,v){return xc(e,"Array",o,d,v)}function uc(e){return e!==B}function Ac(e){return"string"==typeof e}t("H.lang.isArray",zc),t("H.lang.isString",Ac);var Bc=parseInt,Cc=parseFloat,E=isNaN;function Dc(e){return e===+e}function Ec(e){return!E(+e)}function yc(e){var o=Object[tc[0]][tc[6]].call(e).match(/^\[object (\w+)\]$/);return o?o[1]:typeof e}t("H.lang.isNumber",Dc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return"number"==typeof e&&e%1==0});var Fc=[];function Gc(e){0>Fc.indexOf(e)&&Fc.push(e)}function wc(e,o,d,v){var Z,w="",j=2>arguments.length;return j&&(o={H:x.H},d="",v=Fc.slice()),Hc(o,!0,function(_e,Ki){try{if(Ki=Ic(_e,Z=_e[Ki]),!(Ea(Z)&&Z.window===Z&&Z.self===Z||Ea(Z)&&0<Z.nodeType&&Da(Z.cloneNode))&&Ea(Z)){if(Z===e)return w=d+"."+Ki,!0;if(0>v.indexOf(Z)&&(v.push(Z),w=wc(e,Z,d+"."+Ki,v)))return!0}}catch(_u){}}),j&&(w=w?w.substr(1).replace("."+tc[0]+".","#"):"~"+(Da(e)?Jc(e)+"()":yc(e))),w}function Ic(e,o){var d=[];return Hc(e,!1,function(v,w){v[w]===o&&d.push(w)}),d.sort(Kc)[0]}function Kc(e,o){return o.length-e.length}Gc(Fc);var Lc=Object[tc[0]][tc[2]];function Hc(e,o,d){var v;if(e){for(w in e)if((!o||Lc.call(e,w))&&d(e,w,!0))return;for(v=tc.length;v--;){var w=tc[v];if((!o||Lc.call(e,w))&&d(e,w,!1))break}}}function Jc(e){return(e=/^\s*function ([^\( ]+)/.exec(e))?e[1]:"anonymous"}function Mc(e,o,d){d[o]="#"+o}var Nc=!!x.__karma__;function Oc(){throw Error("unimplemented method")}function Pc(e,o){"status"in(o=o||{})&&(this.status=+o.status),"statusText"in o&&(this.statusText=o.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,e?"string"==typeof e?this.c=e:(o=x.ArrayBuffer)&&o.prototype.isPrototypeOf(e)?this.a=e:o&&e.buffer?this.a=e.buffer:x.Blob.prototype.isPrototypeOf(e)&&(this.b=e):this.c=""}function Qc(e){if(e.f)return Zb(new TypeError("Already read"));e.f=!0}function Rc(e){var o=new FileReader;return o.readAsText(e),new Pb(function(d,v){o.onload=function(){d(o.result)},o.onerror=function(){v(o.error)}})}function D(e,o,d){var v=arguments.length;if((o=o!==B?+o:o)!==B){var w=(w=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?sc(w[1].replace(/\s+/g,""),","):[];w.forEach(Mc),w=w[o]||"#"+o}var j=e?wc(e):"";return v=2<v?oc(d):"",(w||v)&&(j+=" (Argument "+(w||"")+(v?" "+v:"")+")"),v=Error(j),Object.setPrototypeOf(v,D.prototype),v}function Sc(e,o,d){var w,j,Z,fd,iy,_e=d&&d.headers||{},Ki={},_u=this;if(!Da(o))throw new D(Sc,1,"function required");Xa(_e,Vc.headers,_e),Xa(Ki,Vc,d||{}),Ki.headers=_e,this.c=o,this.a=w=new XMLHttpRequest,o=Ki.method;try{for(j in w.open(o,e,!0),_e)_e.hasOwnProperty(j)&&(Z=_e[j])&&w.setRequestHeader(j,Z);w.withCredentials=!!Ki.withCredentials,fd=A(_u.b,_u),iy=+Ki.timeout||0,Tc?(Uc(_u,"timeout",fd),w.timeout=iy):iy&&(_u.f=setTimeout(function(){w.abort(),_u.b({type:"timeout"})},iy)),Uc(_u,"error",fd),Uc(_u,"load",fd),w.send(Ki.data)}catch(fd){this.b({type:"cors"})}}t("H.net.Response",Pc),Pc.prototype.type="default",Pc.prototype.type=Pc.prototype.type,Pc.prototype.status=200,Pc.prototype.status=Pc.prototype.status,Pc.prototype.statusText="OK",Pc.prototype.statusText=Pc.prototype.statusText,Pc.error=function(){return Pc.a||(Pc.a=new Pc(null,{status:0,statusText:""}),Pc.a.type="error"),Pc.a},Pc.error=Pc.error,Pc.prototype.text=function(){var e=Qc(this);if(!e)if(this.c)e=Yb(this.c);else if(this.a){var v,o=(e=new Uint8Array(this.a)).length,d=Array(o);for(v=0;v<o;v++)d[v]=String.fromCharCode(e[v]);e=Yb(d.join(""))}else e=this.b?Rc(this.b):Zb("Unsupported response body");return e},Pc.prototype.json=function(){return this.text().then(x.JSON.parse)},Pc.prototype.blob=function(){var e,o=Qc(this);return o||(this.b?e=this.b:this.a&&(e=new Blob([this.a],{type:"application/octet-stream"}))),o||Yb(e)},Pc.prototype.arrayBuffer=function(){return this.a?Qc(this)||Yb(this.a.slice(0)):this.blob().then(Pc.b)},Pc.b=function(e){var o=new FileReader;return o.readAsArrayBuffer(e),new Pb(function(d,v){o.onload=function(){d(o.result)},o.onerror=function(){v(o.error)}})},!Nc&&x.Response&&x.Response.error&&(Pc=x.Response,Gc(Pc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Sc);var Vc={method:"GET",headers:{},data:null},Wc="withCredentials"in new XMLHttpRequest,Tc="timeout"in new XMLHttpRequest,Zc,$c,ad,dd,ed;function Uc(e,o,d){Wc?e.a.addEventListener(o,d):e.a["on"+o]=d}function Xc(e,o,d){Wc?e.a.removeEventListener(o,d):e.a["on"+o]=null}function Yc(e,o){var d=[];return e&&d.push(wc(e)),1<arguments.length&&d.push(""+o),d=Error(d.join(" ")),Object.setPrototypeOf(d,Yc.prototype),d}function bd(){if(this.constructor=this.constructor,!Ac("STATIC_DB"))throw new D(this.constructor,0);if(this.g=cd(),!this.g)throw new Yc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Kh=A(this.Kh,this)}function kd(e,o,d){if(e.b)e.a?(e.a.push(o),d&&e.c.push(d)):e.f?d&&d(e.f):o(e.b.result);else{e.b=e.g.open("H_STATIC_DB",1),e.b.onupgradeneeded=e.Kh;var v=e.b.onerror=function(){clearTimeout(e.i),e.f=this.error,e.c.forEach(function(w){w(e.f)}),delete e.a,delete e.c};e.i=setTimeout(function(){v.call({error:Error("DbOpenTimeoutError")})},500),e.b.onsuccess=function(){clearTimeout(e.i),e.a?(e.a.forEach(function(w){w(this.result)},this),delete e.a,delete e.c):(delete e.b,delete e.f,e.a=[],e.c=[])},e.a.push(o),d&&e.c.push(d)}}function hd(e,o,d){kd(e,function(v){v=v.transaction(["data"],"readwrite"),o(v.objectStore("data"))},d)}function id(e,o,d){o&&(e.onsuccess=function(){o(this.result)}),d&&(e.onerror=function(){d(this.error)})}function gd(e){var o=Object.prototype.toString.call(e);return"[object Blob]"===o||"[object ArrayBuffer]"===o||Ac(e)||Ea(e)}function ld(){return dd||(dd=new bd),dd}function cd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function md(){var e="";if(!uc(ed))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ed=!1;else{try{var o=cd();e="H_TEST_DB";var d=o&&o.open(e,1)}catch(v){}ed=!!d&&null===d.onupgradeneeded,d&&o.deleteDatabase&&o.deleteDatabase(e)}return ed}function nd(){0!=pd&&(qd[this[Fa]||(this[Fa]=++Ga)]=this),this.ud=this.ud,this.Wa=this.Wa}Sc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Sc.prototype.abort=Sc.prototype.abort,Sc.prototype.b=function(e){var d,o=e.type;e=this.a,this.f&&clearTimeout(this.f),"load"===o?e instanceof XMLHttpRequest&&200!==e.status&&(d="network"):d=4===e.readyState&&0===e.status&&"error"==o?"cors":"error"!=o?o:"network",Xc(this,"timeout",o=this.b),Xc(this,"error",o),Xc(this,"load",o),e=0===e.status||d&&"network"!==d?Pc.error():new Pc(e.responseText||null,e),d=this.c,delete this.b,delete this.c,delete this.a,d(e)},u(Yc,Error),t("H.lang.IllegalOperationError",Yc),Yc.prototype.name="IllegalOperationError",p=bd.prototype,p.put=function(e,o,d,v){if(!Ac(e)&&!Dc(e))throw new D(this.put,0);if(!gd(o))throw new D(this.put,1);hd(this,function(w){id(w.put(o,e),d,v)},v)},p.get=function(e,o,d){var v;if(!Ac(e)&&!Dc(e))throw new D(this.get,0);if(!Da(o))throw new D(this.get,1);return hd(this,function(w){id(v=w.get(e),o,d)},d),{cancel:function(){v&&(v.onsuccess=jd)}}},p.remove=function(e,o,d){if(!Ac(e)&&!Dc(e))throw new D(this.remove,0);hd(this,function(v){id(v.delete(e),o,d)},d)},p.clear=function(e,o){hd(this,function(d){id(d.clear(),e,o)},o)},p.Kh=function(){var e=this.b.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",ld),t("H.util.IndexedDBStorage.isSupported",md);var pd=0,qd={};function rd(e){e&&"function"==typeof e.C&&e.C()}function sd(e,o){this.type=e,this.currentTarget=this.target=o,this.c=this.a=!1,this.Ek=!0}function td(e,o,d){td.l.constructor.call(this,e,d),this.data=o}function ud(e,o,d){ud.l.constructor.call(this,e,d),this.message=o}nd.prototype.ud=!1,nd.prototype.C=function(){if(!this.ud&&(this.ud=!0,this.o(),0!=pd)){var e=this[Fa]||(this[Fa]=++Ga);if(0!=pd&&this.Wa&&0<this.Wa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete qd[e]}},nd.prototype.mb=function(e,o){this.ud?void 0!==o?e.call(o):e():(this.Wa||(this.Wa=[]),this.Wa.push(void 0!==o?Ja(e,o):e))},nd.prototype.o=function(){if(this.Wa)for(;this.Wa.length;)this.Wa.shift()()},sd.prototype.stopPropagation=function(){this.a=!0},sd.prototype.preventDefault=function(){this.c=!0,this.Ek=!1},t("H.util.Event",sd),sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.CAPTURING_PHASE=1,sd.prototype.CAPTURING_PHASE=sd.prototype.CAPTURING_PHASE,sd.prototype.AT_TARGET=2,sd.prototype.AT_TARGET=sd.prototype.AT_TARGET,sd.prototype.BUBBLING_PHASE=3,sd.prototype.BUBBLING_PHASE=sd.prototype.BUBBLING_PHASE,sd.prototype.eventPhase=0,sd.prototype.eventPhase=sd.prototype.eventPhase,u(td,sd),t("H.util.DataEvent",td),u(ud,sd),t("H.util.ErrorEvent",ud);var vd=Math,wd=vd.min,xd=vd.max,yd=vd.round,zd=vd.floor,Ad=vd.ceil,Bd=vd.abs,Cd=vd.log,Dd=vd.sqrt,Ed=vd.pow,Fd=vd.exp,Gd=vd.sin,Hd=vd.asin,Id=vd.cos,Jd=vd.tan,Kd=vd.atan,Ld=vd.atan2,Md=vd.LN2,Nd=vd.PI,Od=Nd/2,Pd=Nd/4,Qd=2*Nd,Rd=3*Nd,Sd=Nd/180,Td=180/Nd,Ud=1/0,Vd=Ed(-2,53),Wd=Wd||function(e){return Cd(e)/Md};function Xd(e,o){var d;return 0>(d=e%o)==0>o?d:d+o}function Yd(e,o,d){return o-=d=d||0,(e-=d)-zd(e/o)*o+d}function Zd(e,o,d){return e>d?d:e<o?o:e}function $d(e,o,d,v){return v||(v=0),o<d?e>=o-v&&e<=d+v:e>=d-v&&e<=o+v}function ae(e,o,d,v,w,j){return Dd(Ed((e-w)*(v-j)-(o-j)*(d-w),2)/(Ed(d-w,2)+Ed(v-j,2)))}t("H.math.normalize",Yd),t("H.math.clamp",Zd);var be={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ce(e,o,d,v,w,j){var Z=d.length,_e=Z,Ki=d[0],_u=0,fd=0,iy=0;v=v/2||0;var oy=j||2;j=oy*(w?0:1)+1;for(var dy=oy-2;1!=_u&&_e>j;){_e-=dy;var _y=d[--_e];oy=d[--_e];var Ay=d[_e?_e-dy-1:(Z+(_e-dy-1))%Z],ky=d[_e?_e-dy-2:(Z+(_e-dy-2))%Z];oy>=e-v&&oy<=e+v&&_y>=o-v&&_y<=o+v||ky>=e-v&&ky<=e+v&&Ay>=o-v&&Ay<=o+v?_u=1:_u||oy!==e?!_u&&$d(e,oy,ky,v)&&((oy<e&&ky>e||oy>e&&ky<e)&&(fd+=(Ki=_y+(e-oy)/(ky-oy)*(Ay-_y))>o,iy+=Ki<o),_u=$d(o,_y,Ay,v)&&ae(e,o,oy,_y,ky,Ay)<=v?2:0):(ky===e&&(_y<o&&Ay>o||_y>o&&Ay<o)||(Ki<=e&&ky>e||Ki>=e&&ky<e)&&(_y>=o?++fd:++iy),_u=$d(o,_y,Ay,v)&&ae(e,o,oy,_y,ky,Ay)<=v?2:0),Ki=oy}return!_u&&w&&0!==iy&&fd%2!=0&&(_u=3),_u}function de(e,o){return ce(e.x,e.y,o,0,!0)!==be.NONE}function ee(e){for(var o=e.length,d=new Float64Array(2*o),v=o&&uc(e[0].x);o--;){var w=e[o],j=o<<1;d[j]=v?w.x:w[0],d[j+1]=v?w.y:w[1]}return d}function fe(){}function ge(e,o,d){this.type=e,this.data=o,this.c=$b(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=he,d!==B&&(this.priority=d),this.Sg().add(this)}t("H.math.CoverType",be),t("H.math.isPointInsidePolygon",de),t("H.math.flatten",ee),t("H.util.ICancelable",fe),fe.prototype.cancel=function(){},fe.prototype.cancel=fe.prototype.cancel;var he=1,ie={wo:0,zo:he,uo:2};function je(e){var o;for(o in this.a={},ie)this.a[ie[o]]=[];this.Re=e,this.Re.addEventListener("allocatable",A(this.b,this))}p=ge.prototype,p.then=function(e,o,d){return this.c.wk.then(e,o,d)},p.resolve=function(e){this.Ud=3,this.c.resolve(e)},p.reject=function(e){this.Ud=5,this.c.reject(e)},p.Ud=0,p.cancel=function(){3>this.Ud&&(this.ie(),this.Sg().remove(this),this.Ud=4)},ge.prototype.cancel=ge.prototype.cancel,t("H.util.JobManager",je);var ke=Object.keys(ie).map(function(e){return ie[e]}).sort().reverse();function le(e,o,d){var v=[],w=arguments.length;return e&&v.push(wc(e)),1<w&&(w=2<w&&zc(d)?" out of ["+d[0]+"..."+d[1]+"]":"",v.push("("+o+w+")")),v=Error(v.join(" ")),Object.setPrototypeOf(v,le.prototype),v}je.prototype.add=function(e){C(e,ge,this.add,0),this.a[e.priority].push(e),this.b()},je.prototype.contains=function(e){return-1<this.a[e.priority].indexOf(e)},je.prototype.remove=function(e){var o=e.priority,d=this.a[o].indexOf(e);return-1<d?(this.a[o].splice(d,1),!0):(e.wi&&this.Re.mf(e.wi),!1)},je.prototype.b=function(){ke.forEach(function(e){this.a[e]=this.a[e].filter(function(o){var d;if((d=this.Re.wg(o))===y)return!0;var v=A(this.Re.mf,this.Re,d,o);o.wi=d,o.then(v,v),o.Ud=o.bj(d)?1:5},this)},this)},u(le,Error),t("H.lang.OutOfRangeError",le),le.prototype.name="OutOfRangeError";var me="closure_listenable_"+(1e6*Math.random()|0);function ne(e){return!(!e||!e[me])}var oe=0;function pe(e,o,d,v,w){this.listener=e,this.proxy=null,this.src=o,this.type=d,this.capture=!!v,this.Bf=w,this.key=++oe,this.Xd=this.ff=!1}function qe(e){e.Xd=!0,e.listener=null,e.proxy=null,e.src=null,e.Bf=null}function re(e){this.src=e,this.a={},this.b=0}function te(e,o){var d=o.type;if(!(d in e.a))return!1;var j,v=e.a[d],w=bb(v,o);return(j=0<=w)&&Array.prototype.splice.call(v,w,1),j&&(qe(o),0==e.a[d].length&&(delete e.a[d],e.b--)),j}function ue(e,o){var d=void 0!==o,v=d?o.toString():"";return Ta(e.a,function(w){for(var j=0;j<w.length;++j)if(!d||w[j].type==v)return!0;return!1})}function se(e,o,d,v){for(var w=0;w<e.length;++w){var j=e[w];if(!j.Xd&&j.listener==o&&j.capture==!!d&&j.Bf==v)return w}return-1}re.prototype.add=function(e,o,d,v,w){var j=e.toString();(e=this.a[j])||(e=this.a[j]=[],this.b++);var Z=se(e,o,v,w);return-1<Z?(o=e[Z],d||(o.ff=!1)):((o=new pe(o,this.src,j,!!v,w)).ff=d,e.push(o)),o},re.prototype.remove=function(e,o,d,v){if(!((e=e.toString())in this.a))return!1;var w=this.a[e];return-1<(o=se(w,o,d,v))&&(qe(w[o]),Array.prototype.splice.call(w,o,1),0==w.length&&(delete this.a[e],this.b--),!0)},re.prototype.ka=function(e){e=e&&e.toString();var d,o=0;for(d in this.a)if(!e||d==e){for(var v=this.a[d],w=0;w<v.length;w++)++o,qe(v[w]);delete this.a[d],this.b--}return o};var ve=!tb||9<=Number(Eb),we=tb&&!Db("9");!wb||Db("528"),vb&&Db("1.9b")||tb&&Db("8")||sb&&Db("9.5")||wb&&Db("528"),vb&&!Db("8")||tb&&Db("9");var xe=function(){if(!ya.addEventListener||!Object.defineProperty)return!1;var e=!1,o=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ya.addEventListener("test",Aa,o),ya.removeEventListener("test",Aa,o)}catch(d){}return e}();function ye(e,o){if(sd.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,e){var d=this.type=e.type,v=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=o,o=e.relatedTarget){if(vb){t:{try{pb(o.nodeName);var w=!0;break t}catch(j){}w=!1}w||(o=null)}}else"mouseover"==d?o=e.fromElement:"mouseout"==d&&(o=e.toElement);this.relatedTarget=o,v?(this.clientX=void 0!==v.clientX?v.clientX:v.pageX,this.clientY=void 0!==v.clientY?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ze[e.pointerType]||"",this.b=e,e.defaultPrevented&&this.preventDefault()}}u(ye,sd);var ze={2:"touch",3:"pen",4:"mouse"};ye.prototype.stopPropagation=function(){ye.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.l.preventDefault.call(this);var e=this.b;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,we)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(o){}};var Ae="closure_lm_"+(1e6*Math.random()|0),Be={},Ce=0;function De(e,o,d,v,w){if(v&&v.once)return Ee(e,o,d,v,w);if("array"==Ba(o)){for(var j=0;j<o.length;j++)De(e,o[j],d,v,w);return null}return d=Fe(d),ne(e)?e.R.add(String(o),d,!1,Ea(v)?!!v.capture:!!v,w):Ge(e,o,d,!1,v,w)}function Ge(e,o,d,v,w,j){if(!o)throw Error("Invalid event type");var Z=Ea(w)?!!w.capture:!!w,_e=He(e);if(_e||(e[Ae]=_e=new re(e)),(d=_e.add(o,d,v,Z,j)).proxy)return d;if(v=Ie(),d.proxy=v,v.src=e,v.listener=d,e.addEventListener)xe||(w=Z),void 0===w&&(w=!1),e.addEventListener(o.toString(),v,w);else if(e.attachEvent)e.attachEvent(Je(o.toString()),v);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(v)}return Ce++,d}function Ie(){var e=Ke,o=ve?function(d){return e.call(o.src,o.listener,d)}:function(d){if(!(d=e.call(o.src,o.listener,d)))return d};return o}function Ee(e,o,d,v,w){if("array"==Ba(o)){for(var j=0;j<o.length;j++)Ee(e,o[j],d,v,w);return null}return d=Fe(d),ne(e)?e.R.add(String(o),d,!0,Ea(v)?!!v.capture:!!v,w):Ge(e,o,d,!0,v,w)}function Le(e,o,d,v,w){if("array"==Ba(o)){for(var j=0;j<o.length;j++)Le(e,o[j],d,v,w);return null}return v=Ea(v)?!!v.capture:!!v,d=Fe(d),ne(e)?e.R.remove(String(o),d,v,w):!!(e&&(e=He(e))&&(o=e.a[o.toString()],e=-1,o&&(e=se(o,d,v,w)),d=-1<e?o[e]:null))&&Me(d)}function Me(e){if("number"==typeof e||!e||e.Xd)return!1;var o=e.src;if(ne(o))return te(o.R,e);var d=e.type,v=e.proxy;return o.removeEventListener?o.removeEventListener(d,v,e.capture):o.detachEvent?o.detachEvent(Je(d),v):o.addListener&&o.removeListener&&o.removeListener(v),Ce--,(d=He(o))?(te(d,e),0==d.b&&(d.src=null,o[Ae]=null)):qe(e),!0}function Je(e){return e in Be?Be[e]:Be[e]="on"+e}function Ne(e,o,d,v){var w=!0;if((e=He(e))&&(o=e.a[o.toString()]))for(o=o.concat(),e=0;e<o.length;e++){var j=o[e];j&&j.capture==d&&!j.Xd&&(j=Oe(j,v),w=w&&!1!==j)}return w}function Oe(e,o){var d=e.listener,v=e.Bf||e.src;return e.ff&&Me(e),d.call(v,o)}function Ke(e,o){if(e.Xd)return!0;if(!ve){if(!o)t:{o=["window","event"];for(var d=ya,v=0;v<o.length;v++)if(null==(d=d[o[v]])){o=null;break t}o=d}if(o=new ye(v=o,this),d=!0,!(0>v.keyCode||null!=v.returnValue)){t:{var w=!1;if(0==v.keyCode)try{v.keyCode=-1;break t}catch(Z){w=!0}(w||null==v.returnValue)&&(v.returnValue=!0)}for(v=[],w=o.currentTarget;w;w=w.parentNode)v.push(w);for(e=e.type,w=v.length-1;!o.a&&0<=w;w--){o.currentTarget=v[w];var j=Ne(v[w],e,!0,o);d=d&&j}for(w=0;!o.a&&w<v.length;w++)o.currentTarget=v[w],j=Ne(v[w],e,!1,o),d=d&&j}return d}return Oe(e,new ye(o,this))}function He(e){return(e=e[Ae])instanceof re?e:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(e){return Da(e)?e:(e[Pe]||(e[Pe]=function(o){return e.handleEvent(o)}),e[Pe])}function F(){nd.call(this),this.R=new re(this),this.gn=this,this.Eg=null}function Qe(e){var o=(e=e||{}).callback;this.b=e.label,Da(o)&&(this.callback=o),this.a=!!e.disabled,Qe.l.constructor.call(this)}u(F,nd),F.prototype[me]=!0,p=F.prototype,p.Eb=function(){return this.Eg},p.ga=function(e){this.Eg=e},p.addEventListener=function(e,o,d,v){De(this,e,o,d,v)},p.removeEventListener=function(e,o,d,v){Le(this,e,o,d,v)},p.dispatchEvent=function(e){var o,d=this.Eb();if(d)for(o=[];d;d=d.Eb())o.push(d);d=this.gn;var v=e.type||e;if("string"==typeof e)e=new sd(e,d);else if(e instanceof sd)e.target=e.target||d;else{var w=e;Xa(e=new sd(v,d),w)}if(w=!0,o)for(var j=o.length-1;!e.a&&0<=j;j--){var Z=e.currentTarget=o[j];w=Z.dd(v,!0,e)&&w}if(e.a||(w=(Z=e.currentTarget=d).dd(v,!0,e)&&w,e.a||(w=Z.dd(v,!1,e)&&w)),o)for(j=0;!e.a&&j<o.length;j++)w=(Z=e.currentTarget=o[j]).dd(v,!1,e)&&w;return w},p.o=function(){F.l.o.call(this),this.R&&this.R.ka(void 0),this.Eg=null},p.dd=function(e,o,d){if(!(e=this.R.a[String(e)]))return!0;e=e.concat();for(var v=!0,w=0;w<e.length;++w){var j=e[w];if(j&&!j.Xd&&j.capture==o){var Z=j.listener,_e=j.Bf||j.src;j.ff&&te(this.R,j),v=!1!==Z.call(_e,d)&&v}}return v&&0!=d.Ek},t("H.util.EventTarget",F),F.prototype.ga=F.prototype.ga,F.prototype.setParentEventTarget=F.prototype.ga,F.prototype.Eb=F.prototype.Eb,F.prototype.getParentEventTarget=F.prototype.Eb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.C=F.prototype.C,F.prototype.dispose=F.prototype.C,F.prototype.mb=F.prototype.mb,F.prototype.addOnDisposeCallback=F.prototype.mb,F.prototype.hn=F.prototype.dd,F.prototype.dd=function(e,o,d){var v,w,j=!0,Z=d[d.currentTarget===d.target?"AT_TARGET":o?"CAPTURING_PHASE":(v=!0,"BUBBLING_PHASE")];return(!v||"pointerenter"!==(w=d.type)&&"pointerleave"!==w)&&(d.eventPhase=Z,j=F.prototype.hn.apply(this,arguments),v&&this.Eb&&null===this.Eb()&&delete d.eventPhase),j},u(Qe,F),t("H.util.ContextItem",Qe),Qe.prototype.ze=function(){return this.b},Qe.prototype.getLabel=Qe.prototype.ze,Qe.prototype.Bc=function(e){return this.b!==e&&(this.b=e,this.dispatchEvent("update")),this},Qe.prototype.setLabel=Qe.prototype.Bc,Qe.prototype.Wb=function(){return this.a},Qe.prototype.isDisabled=Qe.prototype.Wb,Qe.prototype.ta=function(e){return e!==this.a&&(this.a=e,this.dispatchEvent("update")),this},Qe.prototype.setDisabled=Qe.prototype.ta;var Re=new Qe;function Se(){if(x.document){var e=document.createElement("canvas");return e.width=e.height=1,e.getContext("2d")}return null}function Te(){return window.devicePixelRatio||1}Qe.SEPARATOR=Re,t("H.util.getPixelRatio",Te);var Ue=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(e){var o=Xe[e],d=x.RegExp;return o||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(v){return v instanceof Number?Array(v):v.map(function(w){return Zd(yd(w),0,255)})}),"none"===e?o=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=e,Ue.test(Ye.fillStyle)?o=new Uint8ClampedArray([d.$1,d.$2,d.$3,255*d.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),o=Ye.getImageData(0,0,1,1).data)),Xe[e]=o),o}function Ze(e){return"none"!==e&&0<We(e)[3]}var Xe=nc(),$e=!!x.VBArray;function af(e,o){return e!==B?e:o}function bf(e){return/^<svg/.test(e)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e):e}function cf(e){this.Yb=0<+e?vd.round(e):0}t("H.util.eval",function(a){return eval(a)}),t("H.util.provide",function(e){var o=ya.$jscomp;if(o&&"function"==typeof o.Pl&&o.Pl())throw Error("goog.provide cannot be used within a module.");za(e,void 0)}),cf.prototype.next=function(e){if(9007199254740992===this.Yb)throw new le(e,this.Yb,[0,9007199254740991]);return this.Yb++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function jd(){}var hf=pc([]),jf=pc({});function kf(e){return"CANVAS"===e.tagName?[e]:e.getElementsByTagName("CANVAS")}function lf(e,o,d){var v;if(o=e.ownerDocument===o?e.cloneNode(!0):o.importNode(e,!0),d)for(e=kf(e),v=(d=kf(o)).length;v--;)d[v].getContext("2d").drawImage(e[v],0,0);return o}var Ye=Se(),mf=Se();function nf(e){var o=e.complete,d=0<e.naturalWidth;if(o&&!d&&$e)try{mf.drawImage(e,0,0),d=!0}catch(v){}return o&&d}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(e,o){if(o=o||"",of){var d=new of;d.append(e),e=d.getBlob(o)}else e=new Blob([e],{type:o});return e}var qf=x.navigator;function rf(){var e=rf.a;return e||(rf.a=e=this,Gc(rf.a),F.call(e),sf(this)),e}function sf(e){e.g=10,e.i=6,e.a=nc(),e.b=nc(),e.c=0}function tf(e,o,d,v){if(!uf[e])throw new D(tf,0,"Mime type is not supported");this.f=e,"crossOrigin"in(e=v?Va(v):{})||(e.crossOrigin="anonymous"),this.a=e,vf.href=o.toString(),ge.call(this,vf.protocol+"//"+vf.hostname,o,d)}$c=/Edge\/\d+/.test(qf.appVersion),ad=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.l.o.call(this),sf(this)},rf.prototype.wg=function(e){var o=this.a[e=e.type]||0;if(this.c<this.g&&o<this.i){var d=++this.f;return this.c++,this.a[e]=o+1,this.b[d+""]=e,d}return y},rf.prototype.mf=function(e){var o=this.b[e];if(!uc(o)||!this.a[o])throw new Yc(this.mf,"Unknown requestId");this.c--,this.a[o]--,this.a[o]||delete this.a[o],delete this.b[e],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ge),tf.prototype.bj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.ie=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var e=this,o=wf(this.a),d=o.headers;return o.headers=d=d?Va(d):{},d.Accept="application/json",new Sc(this.data,function(v){200<=v.status&&300>v.status?e.resolve(v.json()):e.reject(v)},o)},"text/plain":function(){var e=this;return new Sc(this.data,function(o){200<=o.status&&300>o.status?e.resolve(o.text()):e.reject(o)},wf(this.a))},image:function(){var e=x.document.createElement("img"),o=this,d=this.data;return e.onload=A(this.resolve,this,e),e.onerror=function(){o.reject(Pc.error())},e.crossOrigin=this.a.crossOrigin,e.src=d,{abort:function(){e.onerror=e.onload=null,$e&&nf(e)||e.removeAttribute("src")}}}};!function(){try{var e=new XMLHttpRequest;e.open("get","/",!0)}catch(o){e={}}"response"in e&&(uf.arraybuffer=function(){var j,o=new XMLHttpRequest,d=this,v=this.a,w=v.headers;if(o.open("GET",this.data),xf(o,v),o.responseType="arraybuffer",w)for(j in w)o.setRequestHeader(j,w[j]);return o.onerror=o.ontimeout=function(){d.reject(Pc.error())},o.onload=function(){d.resolve(new Pc(o.response))},o.send(),o})}();var yf=new je(new rf);tf.prototype.Sg=function(){return yf};var vf=x.document.createElement("a");function wf(e){var o=Va(e);return delete o.crossOrigin,xf(o,e),o}function xf(e,o){e.withCredentials="use-credentials"===o.crossOrigin}function G(e,o){this.x=+e,this.y=+o}function zf(e){if(!e)throw Error("invalid argument");return e instanceof G?e:new G(e.x,e.y)}function Af(e){var o=Bf[e];if(!o)if(e in Cf)o=Bf[e]=e;else{o=Df.length;var d="",v=e.charAt(0).toUpperCase()+e.substr(1),w="",j=!1;for((Ef&&(j=(w=Ef+v)in Cf));o--&&!j;)j=(w=(d=Df[o])+v)in Cf;if(j&&(Ef=d),!(o=j?w:null))throw Error("Could not find any variant of CSS property ["+e+"]");Bf[e]=o}return o}t("H.math.Point",G),G.prototype.set=G,G.prototype.set=G.prototype.set,G.prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new G(this.x,this.y),e},G.prototype.clone=G.prototype.clone,G.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},G.prototype.add=G.prototype.add,G.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},G.prototype.sub=G.prototype.sub,G.prototype.scale=function(e,o){return this.x*=e,this.y*=void 0===o?e:o,this},G.prototype.scale=G.prototype.scale,G.prototype.round=function(){return this.x=yd(this.x),this.y=yd(this.y),this},G.prototype.round=G.prototype.round,G.prototype.floor=function(){return this.x=zd(this.x),this.y=zd(this.y),this},G.prototype.floor=G.prototype.floor,G.prototype.ceil=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},G.prototype.ceil=G.prototype.ceil,G.prototype.ea=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},G.prototype.equals=G.prototype.ea,G.prototype.qj=function(e,o){var d=o.x-e.x,v=o.y-e.y,w=e;if(d||v){var j=((this.x-e.x)*d+(this.y-e.y)*v)/(d*d+v*v);w=0>=j?e:1<=j?o:new G(e.x+j*d,e.y+j*v)}return w},G.prototype.getNearest=G.prototype.qj,G.prototype.Sa=function(e){return Dd(Ed(this.x-e.x,2)+Ed(this.y-e.y,2))},G.prototype.distance=G.prototype.Sa,G.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(e,o,d,v){if(!e||!o||!d)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=e,this.version=o,this.revision=d,v&&Xa(this,v)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var e,o=[];for(e in this)Ac(this[e])&&o.push(this[e]);return o.join(";")};var Gf={};function Hf(e,o,d,v){if(!e)throw new D(Hf,1,"Must specify a name parameter");return Gf[e]||(Gf[e]=new Ff(e,o,d,v))}function If(){If.l.constructor.call(this),this.a=Jf(this),this.f=nc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(e){var o=e.type,v=e.data,w=Kf++,j=v&&v.no?v.no:B,Z=!0;return this.f[o]?(this.b[w]=e,Lf(this,o,w,v&&v.message,j)):(e.reject(new D(this.g,0,"processor_not_found")),Z=!1),Z},If.prototype.c=function(e){var o=this.b[(e=e.data).taskId],d=e.taskId,v=e.data,w=this;if(2===e.type)new tf("arraybuffer",v).then(function(j){return j.arrayBuffer()}).then(function(j){w.a.postMessage(["3",d,[j]],[j])},function(){w.a.postMessage(["3",d,[null,"ERROR"]])});else{if(o){switch(e.type){case 1:o.resolve(v);break;case 0:o.reject(v)}delete this.b[d]}this.dispatchEvent(new sd(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(e,o,d){var w,v=Kf++;return e.b[v]=w=$b(),Lf(e,o,v,d),w.wk}function Lf(e,o,d,v,w){v===B||Ca(v)||(v=[v]);try{e.a.postMessage([o,d,v],w)}catch(j){(e=e.b[d]).reject(j.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch(e){}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(e){F.call(this),this.a=e}function Nf(e){F.call(this),this.a=e,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var e=Qf;return e||(e=Qf=this,F.call(e),Rf(this)),e}function Rf(e){var d,o=e.b;if(o)for(d=o.length;d--;)o[d].C();e.b=[],Gc(e.b),e.c={},e.f=nc()}function Sf(e,o,d){ge.call(this,e,o,d)}function Uf(e,o,d,v,w,j){var Z,_e,_u,fd,Ki=e.length;if(Ki)for(Z=[];Ki--;){var iy=e[Ki],oy=iy.length,dy=0;for(_u=1;_u<oy;_u++)if(fd=Vf(iy[_u-1],iy[_u],d,o,v,w)){var Ay=fd[1];dy&&dy.ea(fd[0])?_e.push(Ay):Z.push(_e=fd),dy=Ay,j&&(_u=oy,Ki=0)}}else Z=e;return Z}function Vf(e,o,d,v,w,j){var Z=e.x;e=-e.y;var _e=o.x;if(o=-o.y,d=-d,j=-j,Z>_e){if(_e>w||Z<v)return;var Ki=Z,_u=e;Z=_e,e=o,_e=Ki,o=_u,Ki=1}else if(Z>w||_e<v)return;if(e>o){if(o>d||e<j)return;var fd=1;e=-e,o=-o,_u=j,j=-d,d=-_u}else if(e>d||o<j)return;if(Z<v){if((e+=(v-Z)*(o-e)/(_e-Z))>d)return;Z=v}if(e<j){if((Z+=(j-e)*(_e-Z)/(o-e))>w)return;e=j}return _e>w&&(o=e+(w-Z)*(o-e)/(_e-Z),_e=w),o>d&&(_e=Z+(d-e)*(_e-Z)/(o-e),o=d),fd&&(e=-e,o=-o),Ki?[new G(_e,-o),new G(Z,-e)]:[new G(Z,-e),new G(_e,-o)]}function Wf(e,o,d){e=Xf(e,!0),o=Xf(o,!1);var v,w,j={},Z=v=1;switch(~~(d||0)){case 1:Z=v=0;break;case 2:v=0,Z=1;break;case 3:v=1,Z=0}d=v;var _e=Z;if(o&&e){for(o.me=new Yf(o.x,o.y,null,Zf(o)),e.me=new Yf(e.x,e.y,null,Zf(e)),Z=o;Z.next;Z=Z.next)if(!Z.Ua)for(v=e;v.next;v=v.next)if(!v.Ua){var Ki=$f(Z.next),_u=$f(v.next);if(w=ag(Z,Ki,v,_u,j)){var fd=j.kl,iy=j.qo,oy=j.ro;bg(w=new Yf(iy,oy,null,null,null,null,!0,0,0,w=j.jl),Z,Ki),bg(Ki=new Yf(iy,oy,null,null,null,null,!0,0,0,fd),v,_u),w.Eh=Ki,Ki.Eh=w}}for(j=de(o,cg(e)),d&&(j=!j),Z=o;Z;Z=Z.next)Z.Ua&&(Z.gh=j,j=!j);for(j=de(e,cg(o)),_e&&(j=!j),v=e;v.next;v=v.next)v.Ua&&(v.gh=j,j=!j);for(dg(o),dg(e);(e=fg(o))!=o;){for(d=null;!e.ig;e=e.Eh){for(j=e.gh;(d=new Yf(e.x,e.y,d)).artificial=e.Ua||e.Lj,e.ig=1,e=j?e.next:e.Zb;)if(e.Ua){e.ig=1;break}if(!e)break}d.Fh=dy||null;var dy=d}return dy}}function Yf(e,o,d,v,w,j,Z,_e,Ki,_u){this.x=e,this.y=o,this.next=d||null,this.Zb=v||null,this.Fh=w||null,this.Eh=j||null,this.Ua=!!Z,this.gh=!!_e,this.ig=Ki||0,this.alpha=_u||0,v&&(v.next=this),d&&(d.Zb=this),this.Lj=!1,this.me=null}function $f(e){for(;e&&e.Ua;)e=e.next;return e}function Zf(e){if(e)for(;e.next;)e=e.next;return e}function fg(e){var o=e;if(o)do{o=o.next}while(o!=e&&(!o.Ua||o.Ua&&o.ig));return o}function dg(e){var o=Zf(e);o.Zb.next=e,e.Zb=o.Zb}function ag(e,o,d,v,w,j){var Z,_e=o.x-e.x,Ki=o.y-e.y,_u=v.x-d.x,fd=v.y-d.y,iy=_e*fd-Ki*_u;return!iy||(_u=((d.x-e.x)*fd-(d.y-e.y)*_u)/iy,iy=(Ki*(d.x-e.x)-_e*(d.y-e.y))/iy,0>_u||1<_u||0>iy||1<iy)?0:(0===_u?Z=e:1===_u?Z=o:0===iy?Z=d:1===iy&&(Z=v),Z&&!j?(Z.x+=2480549651603763e-20,Z.y+=7321997314118067e-20,Z.me&&(Z.me.x=Z.x,Z.me.y=Z.y),ag(e,o,d,v,w)):(w.qo=e.x+_u*_e,w.ro=e.y+_u*Ki,w.jl=_u,w.kl=iy,1))}function cg(e){for(var o=[];e;)o.push(e.x,e.y),e=e.next;return o}function bg(e,o,d){for(o=o.next;o!==d&&o.alpha<=e.alpha;)o=o.next;e.next=o,e.Zb=o.Zb,e.next.Zb=e,e.Zb.next=e}function Xf(e,o){for(var d,v=null,w=0,j=e.length;w<j;w++)(d=new Yf(e[w].x,e[w].y,v)).Lj=o,(d.next=v)&&(v.Zb=d),v=d;return v}function gg(e,o,d){var v=Zd(+e,-90,90);if(o&&E(v))throw new D(o,d,e);return v}function hg(e,o,d){var v=+e;if((-180>v||180<v)&&(v=Xd(v+180,360)-180),o&&E(v))throw new D(o,d,e);return v}function ig(e,o,d){var v;if(e!==B&&E(v=+e)&&o)throw new D(o,d,e);return v}function jg(e,o){return 0>e!=0>o&&180<Bd(o-e)}function kg(){vc(this,kg)}function lg(e,o,d){this.lat=gg(e,lg,0),this.lng=hg(o,lg,1),d!==B&&(this.alt=ig(d,lg,2))}function mg(e,o,d){var v=Ea(e)&&!(E(e.lat=gg(e.lat))||E(e.lng=hg(e.lng))||e.alt!==B&&E(e.alt=ig(e.alt)));if(!v&&o)throw new D(o,d,e);return v}function ng(e){if(!e)throw new D(ng,0,e);return new lg(e.lat,e.lng,e.alt)}function K(e,o,d,v){og(this,gg(e,K,0),hg(o,K,1),gg(d,K,2),hg(v,K,3))}function og(e,o,d,v,w){return e.a=d,e.b=w,o<v&&(d=o,o=v,v=d),e.c=o,e.f=v,e.j=e.g=e.i=null,e}function qg(e,o){return(e=o-e)+(0>e?360:0)}function pg(e,o){return(e+=o/2)-(180<e?360:0)}function rg(e,o,d,v,w,j,Z,_e,Ki){d=wd(d,Z),e=xd(e,w);var _u=pg(o,w=qg(o,v)),fd=pg(j,Z=qg(j,_e))-_u;if(180>(fd+=0>fd-1e-6?360:0)-1e-6){_u=o;var iy=_e}else fd=360-fd,_u=j,iy=v;return 360<=(fd=fd+w/2+Z/2)+5e-7?(_u=-180,iy=180):fd-5e-7<w?(_u=o,iy=v):fd-5e-7<Z&&(_u=j,iy=_e),Ki?og(Ki,e,_u,d,iy):new K(e,_u,d,iy)}function sg(e,o,d){return d||(mg(e,sg,0),mg(o,sg,1)),new K(e.lat,e.lng,o.lat,o.lng)}function tg(e,o){var d=1,v=e.length,w=null;if(!Ca(e))throw new D(tg,0,e);if(0<v){var j=e[0];for(w=sg(j,j,o);d<v;d++)w.Rc((j=e[d]).lat,j.lng,o,w)}return w}function ug(e,o){var w,d=3,v=e.length;if(!(o||e&&null!=e.length))throw new D(ug,0,e);if(0<v)for(w=new K(e[0],e[1],e[0],e[1]);d<v;d+=3)w.Rc(e[d],e[d+1],o,w);return w}function vg(e,o){var w,d=1,v=e.length;if(o&&(!e||null==e.length))throw new D(vg,0,e);if(0<v)for(w=new K(e[0].c,e[0].a,e[0].f,e[0].b);d<v;d++)w.Xb(e[d],o,w);return w}function wg(e,o,d,v,w,j){vc(this,wg),this.c=e||10,this.b=null,this.f=v||0,this.g=w||0,this.i=o||1,this.j=d||1,this.s=!!j,this.flush()}function xg(e){var o=e.b;if(e.s&&!o){var d=e.head;(d.entries||d[0]||d[1]||d[2]||d[3])&&(o=yg([o=[d],o,o,o],[d[6],d[7],d[4],d[5]]),e.b=o)}return o}function yg(e,o){var d,v,w,j,Z=0;for(d=3;0<=d;d--){var _e=d+4,Ki=0<d%3,_u=[],fd=o[d],iy=e[d];for(v=iy.length;v--;){var oy=iy[v];if(w=oy.entries)for(j=w.length;j--;){var dy=w[j].a(d);(Ki?dy>fd:dy<fd)&&(fd=dy)}for(j=4;j--;)(w=oy[j])&&(Ki?w[_e]>fd:w[_e]<fd)&&_u.push(w)}Z+=_u.length,o[d]=fd,e[d]=_u}return Z&&(o=yg(e,o)),o}function zg(e,o,d){var v,w;if(e.s&&(v=e.b))for(w=3;0<=w;w--){var j=o.a(w);if(w%3?j>=v[w]:j<=v[w]){if(!d){e.b=null;break}v[w]=j}}}function Bg(e,o){var v,d=e.head;if(o){var w=o;if(w!==d)for(d=w;w=w.parent;)(w.entries||1<w.a)&&(d=w)}else for(;!d.entries&&2>(v=d.a)&&v;)d=w;e.head=d}function Cg(e,o,d,v,w,j,Z,_e,Ki){var ky,_u=o.entries,fd=o[7],iy=o[4],oy=o[5],dy=o[6],_y=o[8],Ay=o[9];if(_u){var Xy=_u.length;if(w>iy||v>fd||Z<dy||j<oy)for(;Xy--;)iy=(fd=_u[Xy]).a(3),oy=fd.a(0),dy=fd.a(1),fd.a(2)>=w&&dy>=v&&(oy<Z||_e&&oy==Z)&&(iy<j||Ki&&iy==j)&&d.push(fd);else for(;Xy--;)d.push(_u[Xy])}(j>_y||Ki&&j==_y)&&(w<Ay&&(ky=o[1])&&Cg(e,ky,d,v,w,j,Z,_e,Ki),(Z>Ay||_e&&Z==Ay)&&(ky=o[3])&&Cg(e,ky,d,v,w,j,Z,_e,Ki)),v<_y&&(w<Ay&&(ky=o[0])&&Cg(e,ky,d,v,w,j,Z,_e,Ki),(Z>Ay||_e&&Z==Ay)&&(ky=o[2])&&Cg(e,ky,d,v,w,j,Z,_e,Ki))}If.prototype.A={IDLE:"idle",yi:"error"},If.prototype.i=function(e,o){var d=this.j||(this.j=new sd(this.A.yi));d.data=o,delete this.f[e],this.dispatchEvent(d)},u(Of,F),Of.prototype.postMessage=function(e){x.setTimeout(A(this.b,this,e),0)},Of.prototype.b=function(e){var o=new sd("message");o.data=e,this.a.dispatchEvent(o)},Of.prototype.terminate=function(){this.a.C(),this.C()},u(Nf,F),Nf.prototype.postMessage=function(e){var o=new sd("message");o.data=e,x.setTimeout(A(this.a.c,this.a,o),0)},u(Pf,F),Pf.prototype.o=function(){Pf.l.o.call(this),Rf(this)},Pf.prototype.wg=function(e){var o;if(!(o=this.f[e=e.type]))throw new Yc(this.wg,'Unknown type "'+e+'"');var d=this.b,v=d[0];return v||(v=d[0]=new If,this.mb(Ka(rd,v)),Ua(this.c)||Mf(v,"0",d=x.Object.keys(this.c))),(d=v).f[e]||(d.f[e]=o,Mf(d,"1",[e,Da(o)?o+"":o]).then(jd,A(d.i,d,e))),v},Pf.prototype.mf=function(){},Pf.prototype.a=function(e,o){var d=this.f,v=d[e];if(v){if(o!==v)throw new Yc(this.a,'Type "'+e+'" is already registered')}else d[e]=o},u(Sf,ge),Sf.prototype.Sg=function(){return Tf||(Tf=new je(new Pf)),Tf},Sf.prototype.ie=function(){},Sf.prototype.bj=function(e){return e.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",jg),t("H.geo.AbstractGeometry",kg),kg.prototype.getBoundingBox=kg.prototype.F,kg.prototype.equals=kg.prototype.ea,kg.prototype.lb="",kg.prototype.zb="",kg.prototype.toString=function(){return this.Xc([this.lb.toUpperCase()," "]).join("")},kg.prototype.toString=kg.prototype.toString,kg.prototype.Cc=function(){return{type:this.zb,coordinates:this.Wc()}},kg.prototype.toGeoJSON=kg.prototype.Cc,kg.prototype.V=function(){return{type:this.lb,coordinates:this.jc(),boundingBox:this.F().V()}},kg.prototype.forWorkerMessage=kg.prototype.V,u(lg,kg),t("H.geo.Point",lg),lg.prototype.ea=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},lg.prototype.equals=lg.prototype.ea,lg.prototype.Sa=function(e){if(this===e||this.lat===e.lat&&this.lng===e.lng)e=0;else{var o=this.lat*Sd,d=e.lat*Sd;e=12742001.58*Hd(wd(1,Dd(Ed(Gd((o-d)/2),2)+Id(o)*Id(d)*Ed(Gd((this.lng*Sd-e.lng*Sd)/2),2))))}return e},lg.prototype.distance=lg.prototype.Sa,lg.prototype.jg=function(e,o,d){var v;if(d){if(v=o/6371000.79){o=e*Sd;var w=Gd(e=Sd*this.lat);d=Gd(v);var j=Id(v);v=Sd*this.lng;var Z=Id(e);e=Hd(Z*Id(o)*d+w*j),o=(v+(o=Ld(Gd(o)*Z*d,j-w*Gd(e)))+Nd)%(2*Nd)-Nd,w=new lg(e*Td,(540+(o*=Td))%360-180)}return w||this}return(90+(e=(e%360+360)%360))%180==0?(e=this.lng+o/(6371000.79*Qd*Id(this.lat*Sd))*(270===e?-360:360),new lg(this.lat,(e+540)%360-180)):((o/=6371000.79)&&(d=this.lng*Sd,j=(v=(w=this.lat*Sd)+o*Id(e*=Sd))-w,Z=Cd(Jd(v/2+Pd)/Jd(w/2+Pd)),Z=E(j/Z)?Id(w):j/Z,e=o*Gd(e)/Z,Bd(v)>Od&&(v=0<v?Nd-v:-(Nd+v)),v=new lg(v*Td,((d+e+Rd+(Bd(w+j)>Od?Nd:0))%Qd-Nd)*Td)),v||this)},lg.prototype.walk=lg.prototype.jg,lg.prototype.F=function(){return new K(this.lat,this.lng,this.lat,this.lng)},lg.prototype.getBoundingBox=lg.prototype.F,lg.validate=mg,lg.fromIPoint=ng,p=lg.prototype,p.lb="Point",p.Xc=function(e){return e.push("(",this.lng," ",this.lat,")"),e},p.zb="Point",p.Wc=function(){return[this.lng,this.lat,this.alt||0]},p.jc=function(){return[this.lat,this.lng,this.alt||0]},u(K,kg),t("H.geo.Rect",K),K.prototype.lb="Polygon",K.prototype.Xc=function(e){var o=this.c,d=this.a,v=this.f,w=this.b;return e.push("(","(",d," ",o,",",w," ",o,",",w," ",v,",",d," ",v,",",d," ",o,")",")"),e},K.prototype.ea=function(e){var o=this===e;return!o&&C(e,K)&&(o=this.c===e.c&&this.a===e.a&&this.f===e.f&&this.b===e.b),o},K.prototype.equals=K.prototype.ea,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Fb=function(){return this.j||(this.j=new lg(this.c,this.a)),this.j},K.prototype.getTopLeft=K.prototype.Fb,K.prototype.Bb=function(){return this.g||(this.g=new lg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Bb,K.prototype.Om=function(){return this.c},K.prototype.getTop=K.prototype.Om,K.prototype.Jl=function(){return this.f},K.prototype.getBottom=K.prototype.Jl,K.prototype.lm=function(){return this.a},K.prototype.getLeft=K.prototype.lm,K.prototype.Em=function(){return this.b},K.prototype.getRight=K.prototype.Em,K.prototype.Ya=function(){return this.i||(this.i=new lg(this.f+(this.c-this.f)/2,pg(this.a,this.sb()))),this.i},K.prototype.getCenter=K.prototype.Ya,K.prototype.sb=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.sb,K.prototype.Hd=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Hd,K.prototype.tb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.tb,K.prototype.Ef=function(){return!this.sb()&&!this.Hd()},K.prototype.isEmpty=K.prototype.Ef,K.prototype.F=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.F,K.prototype.jf=function(e,o,d){var v=this.Ya();return d||(e=gg(e,this.jf,0),o=hg(o,this.jf,1)),(e=(o=this.Rc(e,o,d)).Ya()).lat===v.lat&&e.lng===v.lng&&this.Hd()===o.Hd()&&this.sb()===o.sb()},K.prototype.containsLatLng=K.prototype.jf,K.prototype.ad=function(e,o){return o||mg(e,this.ad,0),this.jf(e.lat,e.lng,o)},K.prototype.containsPoint=K.prototype.ad,K.prototype.Cg=function(e,o){var d=this.Ya();if(!o&&!C(e,K))throw new D(this.Cg,0,e);return(e=(o=this.Xb(e,o)).Ya()).lat===d.lat&&e.lng===d.lng&&this.Hd()===o.Hd()&&this.sb()===o.sb()},K.prototype.containsRect=K.prototype.Cg,K.prototype.Rc=function(e,o,d,v){if(!d){if(E(e=gg(e)))throw new D(this.Rc,0,e);if(E(o=hg(o)))throw new D(this.Rc,1,o)}return rg(this.c,this.a,this.f,this.b,e,o,e,o,v)},K.prototype.mergeLatLng=K.prototype.Rc,K.prototype.ek=function(e,o,d){return o||mg(e,this.ek,0),this.Rc(e.lat,e.lng,o,d)},K.prototype.mergePoint=K.prototype.ek,K.prototype.Xb=function(e,o,d){if(!o&&!C(e,K))throw new D(this.Xb,0,e);return rg(this.c,this.a,this.f,this.b,e.c,e.a,e.f,e.b,d)},K.prototype.mergeRect=K.prototype.Xb,K.prototype.tc=function(e,o,d,v,w,j){return w||(e=gg(e,this.tc,0),o=hg(o,this.tc,1),d=gg(d,this.tc,2),v=hg(v,this.tc,3)),rg(this.c,this.a,this.f,this.b,e,o,d,v,j)},K.prototype.mergeTopLeftBottomRight=K.prototype.tc,K.prototype.hd=function(e,o){var d=this.a<=this.b,v=e.a<=e.b,w=this.a<e.b,j=e.a<this.b;if(!o&&!C(e,K))throw new D(this.hd,0,e);return this.f<=e.c&&e.f<=this.c&&(!d&&(!v||w||j)||!v&&(w||j)||w&&j)},K.prototype.intersects=K.prototype.hd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Dk=function(e,o){var d=this.a,v=this.c,w=this.b,j=this.f,Z=this.Ya().lng;mg(e,this.Dk,0);var _e=e.lat-j-(v-j)/2,Ki=e.lng-Z;return e=-180>(e=d+(0>(Ki=180<Ki||-180>Ki?-(Z+e.lng):Ki)?2*Ki:0))?360+e:e,w=180<(w+=0<Ki?2*Ki:0)?w-360:w,90<=(v=0<_e?v+2*_e:v)&&(v=90),-90>=(j=0>_e?j+2*_e:j)&&(j=-90),o?og(o,v,e,j,w):new K(v,e,j,w)},K.prototype.resizeToCenter=K.prototype.Dk,K.prototype.zb="Polygon",K.prototype.Wc=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.V=function(){return this.jc()},K.prototype.jc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(e){var o,d,v,w=!1;return e&&(o=e.node)&&o.b===this&&(d=o.entries)&&0<=(v=d.indexOf(e))&&(d.splice(v,1),this.m(o),zg(this,e,!1),w=!0),w},wg.prototype.flush=function(){var e=new Ag(B,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);e.b=this,this.head=this.a=e,this.b=null},wg.prototype.Ua=function(e,o,d,v,w,j){var Z=[],_e=this.head,Ki=this.a;return e<=_e[5]&&o<=_e[6]&&(w?d>=_e[7]:d>_e[7])&&(j?v>=_e[4]:v>_e[4])&&Cg(this,_e,Z,e,o,d,v,j||v>=Ki[6],w||d>=Ki[5]),Z},wg.prototype.Dc=ba(1);var Dg=0;function Ag(e,o,d,v,w,j){this.c=o,e&&(this.parent=e,this.b=e.b,1&o?(d=e[8],w=e[5]):(d=e[7],w=e[8]),2&o?(v=e[9],j=e[6]):(v=e[4],j=e[9])),this[7]=d,this[5]=w,this[8]=(d+w)/2,this[4]=v,this[6]=j,this[9]=(v+j)/2}function Eg(e,o){return e[o]||(++e.a,e[o]=new Ag(e,o))}function Fg(e,o){(e.entries||(e.entries=[])).push(o),o.node=e}function Gg(e,o,d,v,w){var j=e[5],Z=e[6];return e[7]<=o&&e[4]<=d&&(j>v||j===v&&j===e.b.a[5])&&(Z>w||Z===w&&Z===e.b.a[6])}function Hg(e,o,d,v,w,j){Hg.l.constructor.apply(this,arguments)}function Ig(e,o,d,v,w){if(Gg(e.a,o,d,v,w))return Jg(e,e.a,o,d,v,w,e.c);throw Error("Coordinates out of bounds")}function Jg(e,o,d,v,w,j,Z){var _e=o[8],Ki=o[9],_u=0,fd=0;return Z&&(w<_e||(_u=+(d>=_e)))&&(j<Ki||(fd=+(v>=Ki)))?d=Jg(e,Eg(o,_u|fd<<1),d,v,w,j,Z-1):(Fg(o,d=new Kg(d,v,w,j)),zg(e,d,!0),Bg(e,o)),d}function Kg(e,o,d,v){this.id=Dg++,this[0]=o,this[1]=d,this[2]=v,this[3]=e}function Lg(e){this.g=new Hg(+e||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(e,o,d,v,w,j){return j?(j=new Kg(w,-o,d+360,-v),e.f.push(j),e.i=!0,e.a&&e.a.tc(o,d,v,w,!0,e.a)):(j=Ig(e.g,d,-o,w,-v),e.b&&e.b.tc(o,d,v,w,!0,e.b)),++e.ph,e.c=null,j}function Ng(e,o,d,v,w,j,Z){var _u,_e=(e=e.f).length,Ki=[];if(_e){var fd=d+360;for(_u=w+360;_e--;){var iy=e[_e];(Og(iy,o,d,v,w,j,Z)||Og(iy,o,fd,v,_u,j,Z))&&Ki.push(iy)}}return Ki}function Og(e,o,d,v,w,j,Z){var _e=e[3],Ki=e[0],_u=e[1];return e=e[2],(j?Ki<=v:Ki<v)&&(Z?_e<=w:_e<w)&&e>=o&&_u>=d}function Pg(e,o){var d,v,w;if(d=o.length){var j=e.length;for(v={};j--;)v[e[j].id]=1;for(;d--;)(w=o[d]).id in v||e.push(w)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(e){var o=e.c;this[o]===e&&(delete this[o],delete e.parent,--this.a)},Ag.prototype.Dc=ba(0),u(Hg,wg),Hg.prototype.m=function(e){for(var o,d,v=this.head;e&&!((o=e.entries)&&o.length||(o&&delete e.entries,e.a||!(d=e.parent)));)d.removeChild(e),v===e&&(v=d),e=d;this.head!==v&&(this.head=v,Bg(this))},Hg.prototype.qc=function(e,o){return Ig(this,e,o,e,o)},Kg.prototype.a=function(e){return this[e]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.ph=0,p.Lc=function(){return this.ph},p.tb=function(){return this.i},p.F=function(){var e,o;if(!this.c){var v,w,j,d=[];if(!this.b&&(e=xg(this.g))&&(this.b=new K(-e[0],e[3],-e[2],e[1])),(o=this.b)&&d.push(o),!this.a&&(j=(w=this.f).length)){e=90;var Z=360,_e=-90;for(v=0;j--;){var Ki=w[j];e=wd(e,Ki[0]),Z=wd(Z,Ki[3]),_e=xd(_e,Ki[2]),v=xd(v,Ki[1])}this.a=new K(-e,Z,-_e,v-360)}(o=this.a)&&d.push(o),(o=d[0])&&(d[1]&&(o=o.Xb(d[1],!0)),this.c=o)}return this.c},p.qc=function(e){var o=e.lng;return Mg(this,e=e.lat,o,e,o,!1)},p.Ij=function(e){var o=e.Fb(),d=e.Bb();return(e=e.tb())?Mg(this,o.lat,d.lng,d.lat,o.lng,e):Mg(this,o.lat,o.lng,d.lat,d.lng,e)},Lg.prototype.insertBoundingBox=Lg.prototype.Ij,Lg.prototype.remove=function(e){var o;if(e.node){var d=this.g.remove(e);this.b=null}else(d=0<=(e=(o=this.f).indexOf(e)))&&(o.splice(e,1),this.i=0<o.length,this.a=null);return d&&(--this.ph,this.c=null),d},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Df=function(e,o,d){var v=this.g,w=e.Fb(),j=e.Bb(),Z=-w.lat;w=w.lng;var _e=-j.lat;return j=j.lng,!o&&Z===_e||!d&&w===j?e=[]:e.tb()?(Pg(e=v.Ua(-180,Z,j,_e,d,o),v.Ua(w,Z,180,_e,!1,o)),Pg(e,Ng(this,Z,j,_e,w+360,o,d))):Pg(e=v.Ua(w,Z,j,_e,d,o),Ng(this,Z,w,_e,j,o,d)),e},Lg.prototype.intersectBoundingBox=Lg.prototype.Df;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg="undefined"!=typeof BigInt?BigInt:Number;function Sg(e){var o=Rg(0),d=Rg(0),v=[];if(e.split("").forEach(function(w){w=Rg(Qg[w.charCodeAt(0)-45]),o|=(w&Rg(31))<<d,(w&Rg(32))===Rg(0)?(v.push(o),o=Rg(0),d=Rg(0)):d+=Rg(5)}),0<d)throw Error("Invalid encoding");return v}function Tg(e){return e&Rg(1)&&(e=~e),+(e>>=Rg(1)).toString()}function Ug(e){var o=void 0===e.precision?5:e.precision,d=void 0===e.Ze?0:e.Ze,v=void 0===e.$e?0:e.$e;e=e.Oh;var w=Math.pow(10,o),j=Math.pow(10,v);o=Vg(o,d,v);var Z=[],_e=Rg(0),Ki=Rg(0),_u=Rg(0);return e.forEach(function(fd){var iy=Rg(Math.round(fd[0]*w));Z.push(Wg(iy-_e)),_e=iy,iy=Rg(Math.round(fd[1]*w)),Z.push(Wg(iy-Ki)),Ki=iy,d&&(fd=Rg(Math.round(fd[2]*j)),Z.push(Wg(fd-_u)),_u=fd)}),(o instanceof Array?o:fa(ea(o))).concat(Z instanceof Array?Z:fa(ea(Z))).join("")}function Vg(e,o,d){if(0>e||15<e)throw Error("precision out of range. Should be between 0 and 15");if(0>d||15<d)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>o||7<o||4===o||5===o)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return e|=d<<7|o<<4,Xg(1)+Xg(e)}function Xg(e){var o="";for(e=Rg(e);31<e;)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e&Rg(31)|Rg(32)],e>>=Rg(5);return o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e]}function Wg(e){var o=0>(e=Rg(e));return e<<=Rg(1),o&&(e=~e),Xg(e)}function Yg(e){return Ug({Oh:e.polyline,precision:e.precision,Ze:e.thirdDim,$e:e.thirdDimPrecision})}function Zg(e){if(1!=+(e=Sg(e))[0].toString())throw Error("Invalid format version");var o=+e[1].toString();o={precision:15&o,Ze:o>>4&7,$e:o>>7&15};for(var d=Math.pow(10,o.precision),v=Math.pow(10,o.$e),w=o.Ze,j=0,Z=0,_e=0,Ki=[],_u=2;_u<e.length;){var fd=Tg(e[_u])/d;j+=fd,Z+=Tg(e[_u+1])/d,w?(fd=Tg(e[_u+2])/v,Ki.push([j,Z,_e+=fd]),_u+=3):(Ki.push([j,Z]),_u+=2)}if(_u!==e.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(e=Object.assign({},o,{Oh:Ki})).Oh,precision:e.precision,thirdDim:e.Ze,thirdDimPrecision:e.$e}}function L(e){L.l.constructor.call(this),e&&$g(e,L,0),this.W=e||[],this.a=ah(this,0,this.W.length)}function ah(e,o,d){e=e.W;var v=0;for(o=xd(o,0),d=wd(d,e.length),d-=2,o+=1;o<d;)v+=jg(e[o],e[o+=3]);return v}function bh(e,o,d,v,w){var j=e.W.length;o=gg(o,w),d=hg(d,w),e.W.push(gg(o,w),hg(d,w),v===B?0:ig(v,w)),j&&(e.a+=jg(e.W[j-2],d)),delete e.b,delete e.c}function $g(e,o,d){for(var j,v=e.length,w=!(v%3);w&&v;)w=!(E(e[--v]=ig((j=e[v])===B?0:j))||E(e[--v]=hg(e[v]))||E(e[--v]=gg(e[v])));if(!w&&o)throw new D(o,d,e)}function ch(e){var o=new L,d=0,v=e.length;if(v%2)throw new D(ch,0,e);for(;d<v;)bh(o,e[d++],e[d++],0,ch);return o}function dh(e,o){return e.b-o.b}function eh(e,o){var j,d=e.W,v=-2,w=[],Z=e.c;if(!Z){Z=e.c=new Lg;var _e=0,Ki=e.W,_u=Ki.length;for(j=0;j<_u;j+=3){var fd=Ki[j],iy=Ki[j+1];if(j){if(dy<iy)var oy=dy,dy=iy;else oy=iy;if(Ay<fd)var _y=fd;else{_y=Ay;var Ay=fd}(oy=Mg(Z,_y,oy,Ay,dy,180<dy-oy)).b=_e++}Ay=fd,dy=iy}}for(Ki=(Z=Z.Df(o).sort(dh)).length,o=0;o<Ki;o++){if(_u=3*(_e=(_e=Z[o]).b),_e>v+1){var ky=[d[_u],d[_u+1]];w.push(ky)}v=_e,ky.push(d[_u+3],d[_u+4])}if(e.a){for(d=[],v=w.length,o=0;o<v;o++)if(Z=(ky=w[o]).length){for(Ki=[],e=0;e<Z;e+=2)Ki.push(_e=ky[e],_u=ky[e+1]),j=ky[e-1],e&&jg(_u,j)&&(d.push(Ki),(Ki=[]).push(ky[e-2],j+=0>j?360:-360,_e,_u));d.push(Ki)}w=d}return w}function fh(e){var o=Zg(e);e=o.polyline;var d=o.thirdDim;if(o=2===d||3===d,d=0===d,!e)throw new D(fh,0,"data");if(o||d){d=e.length;for(var v=Array(3*d),w=0,j=0;w<d;w++){var Z=e[w];v[j++]=Z[0],v[j++]=Z[1],v[j++]=o?Z[2]:0}}if(!v)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(v)}function gh(e){vc(this,gh),gh.l.constructor.call(this),this.ha=hh(this,e,this.constructor,0)}function hh(e,o,d,v){var w,j=[];if(!zc(o))throw new D(d,v);for(w=0;w<o.length;w++){if(!e.b(o[w]))throw new D(d,v);j.push(e.c(o[w]))}return j}function ih(e){ih.l.constructor.call(this,e)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,kg),t("H.geo.LineString",L),L.prototype.Sh=function(e,o,d){bh(this,e,o,d,this.Sh)},L.prototype.pushLatLngAlt=L.prototype.Sh,L.prototype.Xe=function(e,o,d){d&&$g(d,this.Xe,2),void 0===o&&(o=this.W.length),o&&(this.a-=ah(this,e-3,e+o+3));var v=d?this.W.splice.apply(this.W,[e,o].concat(d)):this.W.splice(e,o);return d&&(this.a+=ah(this,e-3,e+d.length+3)),o&&!d&&(this.a+=ah(this,e-3,e-3)),delete this.b,delete this.c,v},L.prototype.spliceLatLngAlts=L.prototype.Xe,L.prototype.Jj=function(e,o,d,v){this.Xe(e,0,[o,d,v])},L.prototype.insertLatLngAlt=L.prototype.Jj,L.prototype.zk=function(e){this.Xe(e,3)},L.prototype.removeLatLngAlt=L.prototype.zk,L.prototype.md=function(e){bh(this,e.lat,e.lng,e.alt,this.md)},L.prototype.pushPoint=L.prototype.md,L.prototype.qc=function(e,o){this.Jj(3*e,o.lat,o.lng,o.alt)},L.prototype.insertPoint=L.prototype.qc,L.prototype.Pe=function(e){this.zk(3*e)},L.prototype.removePoint=L.prototype.Pe,L.prototype.re=function(e,o){var d=this.W,v=3*e;e=d[v];var w=d[v+1];return d=d[v+2],o&&(o.lat=e,o.lng=w,o.alt=d),o||new lg(e,w,d)},L.prototype.extractPoint=L.prototype.re,L.prototype.yl=function(e,o,d){var v=this.W;o=o||0,d=af(d,v.length/3);for(var w=3*o;o<d;)e(v[w++],v[w++],v[w++],o++)},L.prototype.eachLatLngAlt=L.prototype.yl,L.isDBC=jg,L.prototype.Qg=function(e){var o=this.a;return e&&(o+=jg((e=this.W)[e.length-2],e[1])),o},L.prototype.getDBCs=L.prototype.Qg,L.prototype.Ae=function(){return this.W.length/3},L.prototype.getPointCount=L.prototype.Ae,L.prototype.jm=function(){return this.W},L.prototype.getLatLngAltArray=L.prototype.jm,L.prototype.b=y,L.prototype.F=function(){var e;if(!(e=this.b)){var v,w,o=(e=this.W).length,d=3,j=y;if(3<=o){var Z=v=e[0],_e=w=e[1];for(j=new K(Z,_e,v,w);d<o;d+=3){if(Z=e[d-3],v=e[d],(_e=e[d-2])>(w=e[d+1])&&180<w-_e||_e<w&&-180>_e-w||w<_e&&180>Bd(w-_e)){var Ki=_e;_e=w,w=Ki}Z<v&&(Ki=Z,Z=v,v=Ki),rg(j.c,j.a,j.f,j.b,Z,_e,v,w,j)}}e=this.b=j}return e},L.prototype.getBoundingBox=L.prototype.F,L.prototype.Ym=function(){return this.b!==y},L.prototype.hasBoundingBox=L.prototype.Ym,L.fromLatLngArray=ch,L.prototype.ea=function(e){var d,o=this===e;if(!o&&(o=C(e,L))){var v=this.W;for(o=(d=v.length)===(e=e.W).length;o&&d--;)o=v[d]==e[d]}return o},L.prototype.equals=L.prototype.ea,p=L.prototype,p.lb="LineString",p.Xc=function(e,o){var w,d=this.W,v=d.length;if(v){for(e.push("("),w=0;w<v;w+=3)w&&e.push(","),e.push(d[w+1]," ",d[w]);o&&(d[0]!==d[v-3]||d[1]!==d[v-2])&&e.push(",",d[1]," ",d[0]),e.push(")")}else e.push("EMPTY");return e},p.zb="LineString",p.Wc=function(){var v,e=[],o=this.W,d=o.length;for(v=0;v<d;v+=3)e.push([o[v+1],o[v],o[v+2]]);return e},p.jc=function(){var o,e=this.W;if(this.F().tb()){var d=1;for(o=(e=e.slice()).length;d<o;d+=3)0>e[d]&&(e[d]+=360)}return e},p.lo=function(e){e=void 0===e?5:e;for(var o=this.W,d=o.length,v=[],w=0;w<d;w+=3)v.push([o[w],o[w+1],o[w+2]]);return Yg({polyline:v,precision:e,thirdDim:2,thirdDimPrecision:e})},L.prototype.toFlexiblePolyline=L.prototype.lo,L.fromFlexiblePolyline=fh,u(gh,kg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(e,o,d){return e=[e],o!==B&&e.push(o),d&&(o=hh(this,d,this.splice,2),e=e.concat(o)),this.a=y,this.ha.splice.apply(this.ha,e)},gh.prototype.splice=gh.prototype.splice,gh.prototype.$b=function(e){var o=this.ha.length;if(!(0<=e&&e<o))throw new le(this.$b,e,[0,o-1]);return this.a=y,this.ha.splice(e,1)[0]},gh.prototype.removeAt=gh.prototype.$b,gh.prototype.remove=function(e){if(0<=(e=this.ha.indexOf(e))){var o=this.ha.splice(e,1)[0];this.a=y}return o||y},gh.prototype.remove=gh.prototype.remove,gh.prototype.am=function(){return this.ha},gh.prototype.getGeometries=gh.prototype.am,gh.prototype.push=function(e){var o=hh(this,[e],this.push,0)[0];this.a&&(this.a=this.a.Xb(e.F())),this.ha.push(o)},gh.prototype.push=gh.prototype.push,gh.prototype.F=function(){var e,o,d;if(!(e=this.a)&&(e=y,this.ha.length))for(e=this.ha[0].F(),d=1;d<this.ha.length;d++)(o=this.ha[d].F())&&(e=e?e.Xb(o):o);return this.a=e},gh.prototype.getBoundingBox=gh.prototype.F,gh.prototype.a=y,gh.prototype.c=function(e){return e},gh.prototype.ea=function(e){var d,o=this===e;if(!o&&(o=C(e,this.constructor))){var v=this.ha;for(o=(d=v.length)===(e=e.ha).length;o&&d--;)o=v[d].ea(e[d])}return o},gh.prototype.equals=gh.prototype.ea,gh.prototype.Xc=function(e){var v,w,o=this.ha,d=o.length,j=!1;if(d){for(e.push("("),v=0;v<d;v++)(w=0<v&&j)&&e.push(","),o[v].Xc(e),"EMPTY"===e[e.length-1]?e.splice(-1-+w,+w+1):j=!0;j?e.push(")"):e.splice(-1,1,"EMPTY")}else e.push("EMPTY");return e},gh.prototype.jc=function(){for(var e=[],o=this.ha,d=o.length;d--;)e[d]=o[d].jc();return e},gh.prototype.V=function(){var e=gh.l.V.call(this);return e.type=this.lb,e},gh.prototype.Wc=function(){for(var e=[],o=this.ha,d=o.length;d--;)e[d]=o[d].Wc();return e},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(e){return C(e,L)},ih.prototype.lb="Multi"+L.prototype.lb,ih.prototype.zb="Multi"+L.prototype.zb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Vd,jh.prototype.update=function(e,o){o!==kh.NONE&&(this.a=e,o&kh.SPATIAL&&(this.f=e),o&kh.VISUAL&&(this.g=e),o&kh.ADD&&(this.b=e),o&kh.REMOVE&&(this.c=e),o&kh.Z_ORDER&&(this.j=e),o&kh.VOLATILITY&&(this.i=e))},jh.prototype.update=jh.prototype.update,jh.prototype.pm=function(){return this.a},jh.prototype.getMark=jh.prototype.pm,jh.prototype.a=Vd,jh.prototype.bn=function(e){return this.a>e},jh.prototype.isAny=jh.prototype.bn,jh.prototype.g=Vd,jh.prototype.Rd=function(e){return this.g>e},jh.prototype.isVisual=jh.prototype.Rd,jh.prototype.f=Vd,jh.prototype.jh=function(e){return this.f>e},jh.prototype.isSpatial=jh.prototype.jh,jh.prototype.b=Vd,jh.prototype.Kj=function(e){return this.b>e},jh.prototype.isAdd=jh.prototype.Kj,jh.prototype.c=Vd,jh.prototype.Ff=function(e){return this.c>e},jh.prototype.isRemove=jh.prototype.Ff,jh.prototype.j=Vd,jh.prototype.kh=function(e){return this.j>e},jh.prototype.isZOrder=jh.prototype.kh,jh.prototype.i=Vd,jh.prototype.fn=function(e){return this.i>e},jh.prototype.isVolatility=jh.prototype.fn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(e){lh.l.constructor.call(this),void 0!==e&&(this.data=e)}function M(e){if(vc(this,M),M.l.constructor.call(this,e?e.data:B),this.X=mh.next(),e){var o="min";Dc(e[o])&&(this.s=e[o]),Dc(e[o="max"])&&(this.m=e[o]),(o="visibility")in e&&(this.u=!!e[o]),(o="volatility")in e&&(this.S=!!e[o]),(o="zIndex")in e&&(this.j=+e[o]||0),(o="provider")in e&&!C(e[o],N)&&(this.ja=e[o],this.pa(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.l.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(e,o,d){var v,w;if(!d||e[0]|o[0]){var j=e.length,Z=o.length,_e=wd(j,Z),Ki=1;for(w=+d+1;Ki<_e;Ki+=w)if(v=e[Ki]-o[Ki])return v}return d?0:j-Z}function ph(e,o){return e.Oi(o)}function qh(e,o,d){if(null===o||o===B)return null;if(0<=Object.keys(o).length&&"[object Object]"!==Object.prototype.toString.call(o))throw Error(vh(e,d));try{return JSON.stringify(o),o}catch(v){throw Error(vh(e,d))}}function vh(e,o){return"Object Remote-Id: "+e.i+" - "+(o?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(e){var o;if(e){var d=xh;for(o=C(e,wh);d--;){var v=yh[d];if(e.hasOwnProperty(v)){var w=e[v];if(o)this[v]=w;else{if((w=zh[d](w))===Ah)throw new D(wh,0,v+": "+e[v]);w!==this[v]&&w!==B&&(this[v]=w)}}}(d=o?e.b:this.lineWidth&&Ze(this.strokeColor))||(this.b=d),(d=o?e.Gb:Ze(this.fillColor))||(this.Gb=d),(d=o?e.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=d)}pc(this)}M.Type=nh,M.prototype.Za=function(){return this.X},M.prototype.getId=M.prototype.Za,M.prototype.ki=function(e){if(!Dc(e)&&!Ac(e))throw new D(this.ki,0,"id must be a number or a string");return this.i=e,this},M.prototype.setRemoteId=M.prototype.ki,M.prototype.Dm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Dm,M.prototype.s=-1/0,M.prototype.m=1/0,M.prototype.nj=function(e){var o=this.m;if(e)for(e=this;e=e.Ca;)o=wd(o,e.m);return o},M.prototype.getMax=M.prototype.nj,M.prototype.pj=function(e){var o=this.s;if(e)for(e=this;e=e.Ca;)o=xd(o,e.s);return o},M.prototype.getMin=M.prototype.pj,M.prototype.u=!0,M.prototype.jb=function(e){return(e=!!e)!==this.u&&(this.u=e,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.jb,M.prototype.oc=function(e){for(var d,o=this;(d=o.u)&&e&&(o=o.Ca););return d},M.prototype.getVisibility=M.prototype.oc,M.prototype.S=!1,M.prototype.Af=function(e){for(var d,o=this;!(d=o.S)&&e&&(o=o.Ca););return d},M.prototype.getVolatility=M.prototype.Af,M.prototype.Qk=function(e){var o=this.S;return o!==!!e&&(this.S=!o,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Qk,M.prototype.j=B,M.prototype.Bj=function(){return this.j},M.prototype.getZIndex=M.prototype.Bj,M.prototype.ae=function(e){return e!==this.j&&(this.Qe(),this.j=e,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ae,M.prototype.I=B,M.prototype.Oc=function(){var o,d,e=this.I;if(!e){var v=+((o=this.j)!==B);(e=this.Ca)?(e=e.Oc().slice())[0]|=v:e=[v],e.push(o||0,0>(d=this.ni)?this.X:d),this.I=e}return e},M.prototype.getZInfo=M.prototype.Oc,M.prototype.Qe=function(){this.I=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.Oi=function(e){return this.ca-e.ca||oh(this.Oc(),e.Oc(),!1)},M.prototype.compareZOrder=M.prototype.Oi,p=M.prototype,p.previousSibling=y,p.nextSibling=y,p.ni=-1,p.Ca=y,p.tm=function(){return this.Ca},M.prototype.getParentGroup=M.prototype.tm,M.prototype.Ub=function(){for(var o,e=this;o=e.Ca;)e=o;return e},M.prototype.getRootGroup=M.prototype.Ub,M.prototype.contains=function(e){return this===e},M.prototype.contains=M.prototype.contains,M.prototype.ga=function(e){if(this.Ca)throw new Yc(this.ga,"Not allowed for a child of a group");M.l.ga.call(this,e)},M.prototype.setParentEventTarget=M.prototype.ga,M.prototype.draggable=!1,M.prototype.ja=y,M.prototype.ia=function(){return this.ja},M.prototype.getProvider=M.prototype.ia,M.prototype.$d=function(e,o){var v,d=this.ja;if(v=d!==e){if(o&&(d&&!C(d,N)||e&&!C(e,N)))throw new Yc(o,"Only LocalObjectProvider allows an object transfers");o=this.type!==nh.GROUP,d&&(this.invalidate(kh.REMOVE),o&&d.Da(this)),(this.ja=e)&&(o&&e.aa(this),this.ra=y,this.invalidate(kh.ADD))}return v},M.prototype.ra=y,M.prototype.Db=function(){return this.ra||(this.ra=new jh)},M.prototype.getInvalidations=M.prototype.Db,M.prototype.pa=function(e){var d,o=this.ia();return(d=!!o)&&o.invalidateObject(this,e),d},M.prototype.invalidate=M.prototype.pa,M.prototype.o=function(){this.Ca&&this.Ca.Da(this),M.l.o.call(this)},M.prototype.setData=function(e){return this.data=e,this},M.prototype.setData=M.prototype.setData,M.prototype.Cc=function(e){var o;if(e&&!Da(e))throw new D(M.prototype.Cc,0,"opt_callback must be a function");return e=qh(this,e?e(this.data):this.data,!!e),o=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:e,geometry:this.ba().Cc()}:{type:"FeatureCollection",features:hf},this.i&&(o.id=this.i),o},M.prototype.toGeoJSON=M.prototype.Cc,M.prototype.V=function(){return{id:this.X,properties:{min:this.pj(),max:this.nj(),zIdx:this.j,sIdx:this.ni,parent:this.Ca?this.Ca.Za():0,visible:this.oc(),volatile:this.Af()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.V,t("H.map.SpatialStyle",wh),wh.prototype.Gb=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.ln=hf,wh.prototype.lineDash=wh.prototype.ln,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.mn=B,wh.prototype.lineHeadCap=wh.prototype.mn,wh.prototype.nn=B,wh.prototype.lineTailCap=wh.prototype.nn;var xh=yh.length;wh.prototype.ea=function(e){var o=this===e;if(!o&&e){for(o=0;o<xh;o++){var d=yh[o];if(this[d]!==e[d])break}o=o===xh}return o},wh.prototype.equals=wh.prototype.ea,wh.prototype.fj=function(e){if(e){var o={};Xa(o,this,e)}else o=this;return new wh(o)},wh.prototype.getCopy=wh.prototype.fj;var Ah=pc({}),zh=[function(e){return e?oc(e):Ah},function(e){return e?oc(e):Ah},function(e){return 0<=e&&100>=e?+e:Ah},function(e){return"butt"===(e=oc(e))||"square"===e||"round"===e||"arrow-head"===e||"arrow-tail"===e?e:Ah},function(e){return"round"===e||"bevel"===e||"miter"===e?e:Ah},function(e){return 0<e&&100>=e?+e:Ah},function(e){return e&&e.every&&e.every(Ec)?e:Ah},function(e){return E(+e)?Ah:+e},function(e){return uc(e)?zh[3](e):B},function(e){return uc(e)?zh[3](e):B}];wh.MAX_LINE_WIDTH=100;var Bh=new wh;wh.DEFAULT_STYLE=Bh;var Ch="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Dh(e){var o;if(e){var d=C(e,Dh);for(o in e)if(o in this){var v=e[o];v!==this[o]&&("fillColor"===o||0<(v=+v))&&(this[o]=v)}(e=d?e.Gb:!!(Ze(this.fillColor)&&this.width&&this.width))||(this.Gb=e)}pc(this)}function Eh(e,o){var d;Eh.l.constructor.call(this,o),o&&this.bc(o.style),e&&(this.g=!0),o&&(d=o.arrows)&&this.Ik(d)}function Fh(e,o){var w,d=!1,v=!1;if(o.length){for(d=0;d<o.length;d++)if(o[d]!==Gh){v=!0;break}o=e.style,d=v?o.b||o.Gb&&e.g||(w=e.c||!1)&&o.a&&w.Gb:o.Gb}return d&&e.oc(!0)}function Hh(e,o){Hh.l.constructor.call(this,e,o)}function Ih(e,o,d,v){var Z,w=[],j=o.length;for(Z=0;Z<j;Z++){var _e=o[Z];_e.length&&w.push(Jh(e,_e,d,v))}return w}function Jh(e,o,d,v){var w,j=[],Z=o.length,_e=0;for(e.ya=0,w=w||0;_e<Z;)j.push(Kh(e,o[_e++],o[_e++],w,v));return d&&j.push(Kh(e,o[0],o[1],w,v)),j}function Kh(e,o,d,v,w){var j=e.ya;return j&&180<Bd(j-d)&&(d+=0>j?-360:360),e.ya=d,w.lh(o,d+v)}function Lh(e,o,d){for(var w,Z,_e,v=o,j=e.length+o;v--;){for(Z=(o=e[v]).length,w=Array(Z);Z--;)w[Z]=new G((_e=o[Z]).x+d,_e.y);e[--j]=w}}function Mh(e,o,d){this.paths=this.a=e,o!==B&&(this.interiorsIndex=this.b=o),d!==B&&(this.outlinesIndex=this.c=d)}wh.prototype.V=function(){for(var d,e={},o=Ch.length;o--;)e[d=Ch[o]]=this[d];return e},wh.prototype.forWorkerMessage=wh.prototype.V,t("H.map.ArrowStyle",Dh),Dh.prototype.Gb=!0,Dh.prototype.fillColor="rgba(255,255,255,.75)",Dh.prototype.width=1.2,Dh.prototype.length=1.6,Dh.prototype.frequency=5,Dh.prototype.ej=function(){return new Dh(this)},Dh.prototype.ea=function(e){var o=this===e;return!o&&e&&(o=e.width===this.width&&e.fillColor===this.fillColor&&e.length===this.length&&e.frequency===this.frequency),o},Dh.prototype.equals=Dh.prototype.ea,u(Eh,M),t("H.map.Spatial",Eh),Eh.prototype.type=nh.SPATIAL,Eh.prototype.ca=0,Eh.prototype.style=Bh,Eh.prototype.na=function(){return this.style},Eh.prototype.getStyle=Eh.prototype.na,Eh.prototype.bc=function(e){var o=!0;return e?this.style=C(e,wh)?e:new wh(e):this.style?delete this.style:o=!1,o&&this.invalidate(kh.VISUAL),this},Eh.prototype.setStyle=Eh.prototype.bc,Eh.prototype.Gl=function(){return this.c},Eh.prototype.getArrows=Eh.prototype.Gl,Eh.prototype.Ik=function(e){var o=this.c,d=!1;return!e&&o?(delete this.c,d=!0):!e||o&&o.ea(e)||(this.c=new Dh(e),d=!0),d&&"none"!==this.style.strokeColor&&this.pa(1),this},Eh.prototype.setArrows=Eh.prototype.Ik,Eh.prototype.g=!1,Eh.prototype.cn=function(){return this.g},Eh.prototype.isClosed=Eh.prototype.cn,Eh.prototype.getGeometriesForTile=Eh.prototype.Gd,Eh.prototype.Tg=function(){return B},Eh.prototype.getLabels=Eh.prototype.Tg,u(Hh,Eh),t("H.map.GeoShape",Hh),Hh.prototype.getBoundingBox=Hh.prototype.F,Mh.prototype.b=Ud,Mh.prototype.interiorsIndex=Mh.prototype.b,Mh.prototype.c=Ud,Mh.prototype.outlinesIndex=Mh.prototype.c;var Gh=qc(new Mh([])),Nh=pc([]),Qh;function th(e,o){th.l.constructor.call(this,!1,o),this.$(e)}function Oh(e,o){if(!C(e,L)||2>e.Ae())throw new D(o,0)}function Ph(e,o,d,v){var w=eh(o,d.wf());if(w.length&&(w=(e=Ih(e,w,!1,o=d.yf())).length)){var j=d.Ce();o=o.w,d.x||Lh(e,w,-o),d.x===(1<<d.z)-1&&Lh(e,w,o),(d=Uf(e,j.left,j.top,j.right,j.bottom,!1)).length&&v.push(new Mh(d))}}function Rh(e,o){if(x.URL)return new x.URL(e,o).toString();if(!e||!Sh(e))return e;if(!o||Sh(o))throw new TypeError("Failed to construct 'URL': Invalid base URL");Qh||Gc(Qh=document.createElement("a"));var d=Qh;return d.href=o,"/"!==e[0]?e=d.href.replace(/\/[^\/]*$/,"/")+e:((o=d.origin)||(o=d.protocol+"//"+d.host),e=o+e),e}function Sh(e){var o=!1;return"string"==typeof e&&(o=!(-1<e.search(/^(http|https|data|blob):/)||"//"===e.substr(0,2))),o}function Th(e,o){if(Th.l.constructor.call(this),o&&Sh(o))throw new D(Th,1,"Base URL must be absolute");this.i=Uh.INIT,this.a=null,this.m=o}u(th,Hh),t("H.map.Polyline",th),th.prototype.F=function(){return this.a.F()},th.prototype.getBoundingBox=th.prototype.F,th.prototype.$=function(e){var d,v,o=this.$;if(C(e,ih)){var w=e.ha;if(!(d=w.length))throw new D(o,0);for(v=0;v<d;v++)Oh(w[v],o)}else Oh(e,o);return this.b=!!w,this.a=e,this.pa(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.$,th.prototype.ba=function(){return this.a},th.prototype.getGeometry=th.prototype.ba,th.prototype.clip=function(e){var o=this.a;return eh(this.b?o.ha[0]:o,e)},th.prototype.clip=th.prototype.clip,th.prototype.Gd=function(e){var d,o=this.a,v=[];if(this.b)for(d=(o=o.ha).length;d--;)Ph(this,o[d],e,v);else Ph(this,o,e,v);return v.length?v:B},th.prototype.getGeometriesForTile=th.prototype.Gd,th.prototype.V=function(){var e=th.l.V.call(this),o=e.properties;return e.geometry=this.ba().V(),o.style=this.na().V(),o.height=0,e},th.prototype.forWorkerMessage=th.prototype.V,u(Th,F),t("H.map.render.Style",Th),Th.prototype.load=Th.prototype.load,Th.prototype.getState=function(){return this.i},Th.prototype.getState=Th.prototype.getState,Th.prototype.O=function(e){this.i=e},Th.prototype.setState=Th.prototype.O,Th.prototype.Ab=function(){return this.m},Th.prototype.getBaseUrl=Th.prototype.Ab,Th.prototype.Kc=function(){return rc(this.a)},Th.prototype.getConfig=Th.prototype.Kc,Th.prototype.Nl=function(){return this.a},Th.prototype.getConfigReference=Th.prototype.Nl,Th.prototype.rd=function(e){this.a=e},Th.prototype.setConfig=Th.prototype.rd,Th.prototype.yb=function(e){this.a=null,this.O(Uh.ERROR),ue(this.R,void 0!==Vh?String(Vh):void 0)?this.dispatchEvent(new ud(Vh,e,this)):console.error(e)},Th.prototype.dispatchError=Th.prototype.yb,Th.prototype.o=function(){Th.l.o.call(this),this.a=null};var Vh="error",Wh={Zc:"change",yi:Vh},Uh={ERROR:-1,INIT:0,LOADING:1,READY:2};function Xh(e,o){var d,w,j,v=arguments.length;for(d=1;d<v;d++)if((w=arguments[d])&&w!==e&&w!==Z){var Z=w;for(j in w){var _e=w[j];e[j]!==_e&&(Yh(_e)?e[j]=Yh(e[j])?Xh(e[j],_e):rc(_e):void 0!==_e&&(e[j]=rc(_e)))}}return e}Th.State=Uh,t("H.util.webgl.mergeObjects",Xh);var Zh=nc();function $h(e,o,d){var v=d[e];return o&&v in o&&0>tc.indexOf(v)?(o=o[v],++e<d.length?$h(e,o,d):o):Zh}var ai=$h.bind(null,0),bi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},ci={data:1,draw:1,enabled:1,filter:1,properties:1},di=Object.keys(ci);function ei(e,o,d,v,w,j){var Z=v[e],_e=d[Z];if(++e<v.length){var Ki=o[Z]||{};for(d=di.length;d--;){var _u=di[d];if("draw"!==_u||!j){var fd=_e[_u];fd!==B&&(Ki[_u]=rc(fd))}}ei(e,Ki,_e,v,w,j)}else w?Ki=rc(_e):(Ki=_e,delete d[Z]);o[Z]=o[Z]?Xh(o[Z],Ki):Ki}var fi=ei.bind(null,0);function gi(e,o){e in bi&&(o[e]=1)}function hi(e,o,d){var v,w,j;for(v in e)if(ci[v]){if("draw"===v){var Z=e[v];for(w in Z){var _e=Z[w];(j=_e.style)?(_e.style=o+j,gi(j,d)):(delete Z[w],Z[o+w]=_e,gi(w,d))}}}else hi(e[v],o,d)}function ii(e,o){var v,w,j,Z,d={};if(o+="_",v=(e=Xh({},e)).styles)for(w in v){var _e=v[w];if(delete v[w],v[o+w]=_e,j=_e.mix)for(Ac(j)&&(j=[j]),Z=j.length;Z--;)gi(j[Z],d),j[Z]=o+j[Z];(Z=_e.base)&&(j||(j=_e.mix=[]),j.unshift(o+Z),delete _e.base,gi(Z,d)),gi(w,d)}else v=e.styles={};if(_e=e.layers)for(w in _e)j=_e[w],delete _e[w],(Z=j.data)&&!Z.layer&&(Z.layer=w),_e[o+w]=j,hi(j,o,d);for(w in d)v[o+w]={base:w};return e}function ji(e,o){var j,d=e.sources,v=Object.keys(d)[0],w=Xh(d[v],{uid:o});for(j in d=e.layers,e.sources={},e.sources[o]=w,d)(e=d[j]).data?e.data.source===v&&(e.data.source=o):e.data={source:o}}function ki(e,o){var d,v=e.textures;for(d in e=e.fonts,v){var w=v[d];w.url&&(w.url=Rh(w.url,o))}for(d in e)if(zc(w=e[d]))for(v=0;v<w.length;v++){var j=w[v];j.url=j.url&&Rh(j.url,o)}else(j=w).url=j.url&&Rh(j.url,o)}function li(e,o){return"function(){return feature."+e+(o||"")+";}"}function mi(e){return li("style."+e,void 0)}function ni(e,o,d,v){return e={base:e,blend:o,blend_order:d},v&&(e.clean_depth=!!v),e}function oi(e){var o={};return o["translucent-"+(e?"extruded-":"")+"polygons"]={color:mi("fillColor"),order:1,interactive:!0,extrude:e},o}function pi(e,o,d,v){return e={data:{source:e,layer:o}},d&&(e.draw=d),v&&(e.filter=v),e}function Yh(e){return Ea(e)&&!zc(e)}function qi(e,o){if(qi.l.constructor.call(this,e,o),Ac(e))ri.test(e)&&-1===e.indexOf("import:")?(this.c=e,o||(this.j=Sh(this.c)?B:this.c)):this.f=e;else{if(!Ea(e))throw new D(qi,0,"invalid style configuration");this.rd(rc(e))}}function xi(e){var d,o=e.a;if(Ea(o)){var v;if(v=e.g){for(var w in v=!1,o=o&&o.sources)if(o[w].type===e.g){v=!0;break}v=!(!o||v)}v&&(d="invalid source, the only valid type is "+e.g)}else d="invalid style configuration";return d&&e.yb(d),!d}function vi(e){e.dispatchEvent(new sd("change",e))}function ti(e){if(e.getState()!==Uh.READY)throw new Yc(e.Fe,"style is not ready yet")}function ui(e,o,d,v){var Z,_e,w=[],j=zc(o)?o:[o];for(void 0===v&&(v=!0),j=j.sort().reverse();Z=j.pop();){o=String(Z).split(".");for(var Ki=e.a,_u=o.length;_u--&&!ci[o[_u]];);if(Ki&&0>_u&&Yh(Ki=ai(Ki.layers,o))||(Ki=Zh),Ki===Zh)throw new D(d,0,'Unresolvable layer ID "'+Z+'"');if(w.push({id:o,$a:Ki}),v)for(_e in Ki)!ci[_e]&&Yh(Ki[_e])&&j.push(Z+"."+_e)}return w}function wi(e,o){var v,d=0;for(v=o.length;d!==v;){var w=o[d++],j=e;if(!(e=j[w]))break}return d===v?{node:e,parent:j,Rf:w}:void 0}u(qi,Th),t("H.map.render.webgl.Style",qi),qi.prototype.load=function(){var e=this,o=this.Ab();this.c?(this.O(Uh.LOADING),new tf("text/plain",this.c).then(function(d){var v={};return si(d,o,!1,(v[o]=!0,v))}).then(function(d){return e.rd(d)},function(d){return e.yb(d.message)}),delete this.c):this.f&&(this.O(Uh.LOADING),si(this.f,o).then(function(d){return e.rd(d)},function(d){return e.yb(d.message)}),delete this.f)},qi.prototype.load=qi.prototype.load,qi.prototype.Nk=function(e,o,d){var v;for(ti(this),e=ui(this,e,this.Nk,d),d=0;d<e.length;d++){var w=e[d].$a.draw;for(v in w){var j=w[v];Yh(j)&&(j.interactive=!!o)}}vi(this)},qi.prototype.setInteractive=qi.prototype.Nk,qi.prototype.setProperty=function(e,o,d){var v,w=e.split("."),j=0,Z=w.length;if(ti(this),!uc(o))throw new D(this.setProperty,1,"value");if(v=wi(this.a,w)){if(!(v.parent instanceof Object)||v.parent instanceof Array){if(!d)throw new D(this.setProperty,0,e+" property is not primitive type");w.pop(),w=wi(this.a,w),v.parent=w.parent[w.Rf]={}}v.parent[v.Rf]=o}else{for(v=this.a;j!==Z-1;)v[w[j]]={},v=v[w[j++]];v[w[j]]=o}xi(this)&&vi(this)},qi.prototype.setProperty=qi.prototype.setProperty,qi.prototype.Yg=function(e){return ti(this),(e=wi(this.a,e.split(".")))?rc(e.node):void 0},qi.prototype.getProperty=qi.prototype.Yg,qi.prototype.removeProperty=function(e){ti(this),(e=wi(this.a,e.split(".")))&&e.parent&&e.parent.hasOwnProperty(e.Rf)&&(delete e.parent[e.Rf],xi(this)&&vi(this))},qi.prototype.removeProperty=qi.prototype.removeProperty,qi.prototype.qe=function(e,o,d){var v;ti(this);var w=this.a,j=w.layers,Z=ui(this,e,this.qe,!1);for(e=Z.length,v={};e--;)fi(v,j,Z[e].id,!!o,!!d);for(d={},e=(Z=Object.keys(w)).length;e--;){var _e=Z[e],Ki=w[_e];d[_e]=Ki===j?v:rc(Ki)}return o||vi(this),d},qi.prototype.extractConfig=qi.prototype.qe,qi.prototype.Fe=function(e){if(ti(this),!Ea(e))throw new D(this.Fe,0,"config");this.rd(Xh(this.a,e))},qi.prototype.mergeConfig=qi.prototype.Fe,qi.prototype.b=ba(2),qi.prototype.toString=function(){return this.getState()===Uh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},qi.prototype.o=function(){qi.l.o.call(this),delete this.f,delete this.c};var ri=/^(http[s]?)?.*\.ya?ml/i;function si(e,o,d,v){d=void 0!==d&&d,v=void 0===v?{}:v;try{var w=x.H.gl.yaml.safeLoad(e,{json:!0})}catch(j){return Promise.reject(j)}return w&&(Ac(e=w.import)&&(e=[e]),d&&o&&yi(w,o),delete w.import,zc(e)&&e.length)?(d=e.reduce(function(j,Z){var _e=o?Rh(Z,o):Z;return v[_e]||(v[_e]=!0,j.push(new tf("text/plain",_e).then(function(Ki){return si(Ki,_e,!0,v)}))),j},[]),Promise.all(d).then(function(j){var Z={};return j.forEach(function(_e){return _e&&Xh(Z,_e)}),Xh(Z,w),Z})):Promise.resolve(w)}function yi(e,o){function d(Z){Z.url&&(Z.url=Rh(Z.url,o))}var v=e&&e.fonts;if(v)for(var w in v)zc(v[w])?v[w].forEach(d):d(v[w]);if(e=e&&e.textures)for(var j in e)d(e[j])}function O(e,o){var d;if(O.l.constructor.call(this),C(e,L,O,0),o!==B&&zc(o,O,1)){for(d=0;d<o.length;d++)C(o[d],L,O,1,"index "+d);this.a=o}else this.a=[];this.b=e,this.c=[]}function zi(e){var o=O,d=L,v=e.c,w=e.a,j=e.f,Z=e.b;return w=[v,w,B,v,Z,B,j,Z,B,j,w,B],180<=e.sb()&&(w.splice(9,0,j,e=e.Ya().lng,B),w.splice(3,0,v,e,B)),new o(new d(w))}qi.normalize=yi,qi.prototype.rd=function(e){qi.l.rd.call(this,e),xi(this)&&(this.O(Uh.READY),vi(this))},qi.prototype.Kc=function(){return qi.l.Kc.call(this)},qi.prototype.getConfig=qi.prototype.Kc,qi.prototype.Ab=function(){return this.j||qi.l.Ab.call(this)},qi.prototype.getBaseUrl=qi.prototype.Ab,t("H.map.Style",qi),qi.State=Uh,u(O,kg),t("H.geo.Polygon",O),O.fromRect=zi;var Ai={NORTH:90,SOUTH:-90};function Bi(e,o){var d,v,w;return(w=e.F())&&((d=e.Qg(!0))&&(v=e.Ae())&&(w=w.Xb(tg([e.re(0),e.re(v-1)],!0),!0)),360===w.sb()&&d%2==1&&(w=w.Rc(o,0))),w}function Ci(e,o,d,v){v=void 0===v||v;var w=e.a,j=Di.bind(null,o,d);return!(ce(o,d,e.b.W,0,!0,3)===be.NONE||v&&w.some(j))}function Di(e,o,d){return ce(e,o,d.W,0,!0,3)===be.SURFACE}function Ei(e,o){var d,v,w=(o=o.W).length-3,j=(e=e.b.W).length-3,Z={};for(d=0;d<w;d+=3){var _e=o[d],Ki=o[d+1],_u=o[d+3],fd=o[d+4];for(v=0;v<j;v+=3){var iy=e[v],oy=e[v+1],dy=e[v+3],_y=e[v+4];if(ag(new Yf(Ki,_e),new Yf(fd,_u),new Yf(oy,iy),new Yf(_y,dy),Z,!0))return!0}}return!1}function Fi(e,o){var d=o.b,v=o.a,w=v.length,j=d.W,Z=j.length,_e=e.b.W,Ki=_e.length;if(Ei(e,d))return!0;for(d=0;d<Z;d+=3)if(Ci(e,j[d],j[d+1]))return!0;for(d=0;d<Ki;d+=3)if(Ci(o,_e[d],_e[d+1]))return!0;for(d=0;d<w;d++)if(Ei(e,v[d]))return!0;return!1}function Gi(e){Gi.l.constructor.call(this,e)}function uh(e,o){var d=o&&(+o.extrusion||+o.extrude)||0,v=o&&+o.elevation||0,w=0;if(uh.l.constructor.call(this,!0,o),0<v&&(w+=v,this.b=v),0<d&&(w+=d,this.f=d),2047<w)throw new le(uh,w,[0,2047]);C(e,L)?this.$(new O(e)):this.$(e)}O.Direction=Ai,O.prototype.kd=Ai.NORTH,O.prototype.Ok=function(e){return this.kd!==e&&(this.f=y,this.c.length=0,this.kd=e),this},O.prototype.setPoleCovering=O.prototype.Ok,O.prototype.wm=function(){return this.kd},O.prototype.getPoleCovering=O.prototype.wm,O.prototype.Xl=function(){return this.b},O.prototype.getExterior=O.prototype.Xl,O.prototype.Lk=function(e){if(!C(e,L))throw new D(this.Lk,0,e);this.b=e,this.f=y},O.prototype.setExterior=O.prototype.Lk,O.prototype.fm=function(){return this.a},O.prototype.getInteriors=O.prototype.fm,O.prototype.hg=function(e,o,d){var w,v=arguments.length;for(w=2;w<v;w++)C(arguments[w],L,this.hg,w);var j=this.a.splice.apply(this.a,arguments);for(w=2;w<v;w++)arguments[w]=B;return this.c.splice.apply(this.c,arguments),j},O.prototype.spliceInteriors=O.prototype.hg,O.prototype.Sn=function(e){return this.hg(e,1)[0]},O.prototype.removeInteriorAt=O.prototype.Sn,O.prototype.Rn=function(e){return 0>(e=this.a.indexOf(e))?B:this.hg(e,1)[0]},O.prototype.removeInterior=O.prototype.Rn,O.prototype.xk=function(e){if(!C(e,L))throw new D(this.xk,0,e);this.a.push(e)},O.prototype.pushInterior=O.prototype.xk,O.prototype.F=function(){var e=this.f;return e||(this.f=e=Bi(this.b,this.kd)),e},O.prototype.getBoundingBox=O.prototype.F,p=O.prototype,p.dj=function(e){var o=this.a.length;if(0>e||e>=o)throw new le(this.dj,e,[0,o-1]);return(o=this.c[e])||(this.c[e]=o=Bi(this.a[e],this.kd)),o},p.lb="Polygon",p.Xc=function(e){var v,o=this.a,d=o.length;if(this.b.Ae()){for(e.push("("),this.b.Xc(e,!0),v=0;v<d;v++)o[v].Ae()&&(e.push(","),o[v].Xc(e,!0));e.push(")")}else e.push("EMPTY");return e},p.zb="Polygon",p.Wc=function(){var e,o=[],d=this.a,v=this.b.Wc();for(v[0].toString()!==v[v.length-1].toString()&&v.push(v[0]),o.push(v),e=0;e<d.length;e++)(v=d[e].Wc())[0].toString()!==v[v.length-1].toString()&&v.push(v[0]),o.push(v);return o},p.V=function(){var e=O.l.V.call(this);return this.F().tb()&&(e.type="Multi"+e.type),e},p.jc=function(){var e=[],o=this.a,d=o.length;for(e.push(this.b.jc());d--;)e[d+1]=o[d].jc();return this.F().tb()?[e]:e},p.ea=function(e){var o=!1;if(C(e,O)){var d=e.a,v=this.a.length;o=d.length;var w=0;for(o=this.b.ea(e.b)&&v===o;o&&w<v;)o=o&&this.a[w].ea(d[w]),w++}return o},O.prototype.equals=O.prototype.ea,u(Gi,gh),t("H.geo.MultiPolygon",Gi),Gi.prototype.b=function(e){return C(e,O)},Gi.prototype.lb="Multi"+O.prototype.lb,Gi.prototype.zb="Multi"+O.prototype.zb,u(uh,Hh),t("H.map.Polygon",uh);var Hi=new O(new L([0,0,0,0,0,0,0,0,0]));function Ii(e,o,d,v){var w,j,Z=0,_e=!0;if(w=Ji(e,o.b,d,v,o.F())){var Ki=new Mh(w),_u=o.a;if(j=_u.length)for(Ki.b=Ki.a.length;Z<j;Z++)(w=Ji(e,_u[Z],d,v,o.dj(Z)))&&(Ki.a=Ki.a.concat(w));for(j=Ki.a.length,Z=0;Z<j;Z++)if(Ki.a[Z]!==Nh){_e=!1;break}_e&&(Ki=Z%2?Gh:B)}return Ki}function Ji(e,o,d,v,w){var oy,j=d.Ce(),Z=w,_e=Z.sb(),Ki=[[]],_u=o.W,fd=[],iy=_u.length,dy=!1;for(oy=0;oy<iy;oy+=3){var _y=_u[oy],Ay=_u[oy+1];dy||180!=Bd(Ay)||(fd.push(_y),fd.push(Ay),fd.push(_y),fd.push(-Ay),dy=!0),fd.push(_y),fd.push(Ay)}if(_u=fd,360>_e&&-180==Z.a&&(Z=new K(Z.c,180,Z.f,Z.b)),360>_e&&180==Z.b&&(Z=new K(Z.c,Z.a,Z.f,-180)),Z.tb()){for(_y=(_e=_u).length,_u=-1,fd=0;fd<_y-2;fd+=2)if(jg(_e[fd+1],_e[fd+3])){_u=fd+2;break}-1===_u&&jg(_e[_y-1],_e[1])&&(_u=_y),-1!==_u&&(fd=_e[_u-1],oy=_e[_u%_y],dy=_e[(_u+1)%_y],180!==Bd(iy=_e[_u-2])&&180!==Bd(oy)&&(Ay=Bd(oy-iy),_y=Bd(dy-fd),_y+=180<_y?-360:0,dy=Bd(180-dy),dy+=180<dy?-360:0,_y&&dy&&(Ay/=Bd(_y)/Bd(dy),_e.splice(_u,0,iy=oy+(oy>iy?-Ay:Ay),fd=0<fd?180:-180,iy,-fd)))),_u=_e}if(Ki[0]=Li(_u.concat(),Z.a),360>Z.sb()&&Z.ad(new lg(Z.c,180))&&(_u=Li(_u.concat(),Z.b),Ki.push(_u)),e=Ih(e,Ki,!0,Z=d.yf()),360===w.sb()&&o.Qg(!0)%2==1){for(o=e,e=d.Ce(),o[0][1].x>o[0][o[0].length-1].x&&(o[0]=o[0].reverse()),_u=[],_e=o[0].length-1,Ki=0;Ki<_e;Ki++)_u[Ki]=new G((fd=o[0][Ki]).x-2*Z.w,fd.y),_u[Ki+_e]=new G(fd.x-Z.w,fd.y),_u[Ki+2*_e]=new G(fd.x,fd.y),_u[Ki+3*_e]=new G(fd.x+Z.w,fd.y),_u[Ki+4*_e]=new G(fd.x+2*Z.w,fd.y);o[0]=_u,(Ki=Z.lh(v,0)).y=2*e[v===Ai.NORTH?"top":"bottom"],v=Ki.clone(),Ki.x=o[0][o[0].length-1].x+1,v.x=o[0][0].x-1,o[0].push(Ki,v),e=o}if(Uf(e,v=j.left,o=j.top,Ki=j.right,j=j.bottom,!0).length){if(!d.wf().Cg(w)){for(d=e,w=[new G(v,o),new G(Ki,o),new G(Ki,j),new G(v,j)],j=[],e=d.length;e--;)if(v=Wf(w,d[e]))for(o=Mi(v),j.push(o);v.Fh;)o=Mi(v=v.Fh),j.push(o);e=j}}else d=Ni(v,o,e[0]),e[1]&&(d=d!==Ni(v,o,e[1])),e=d?[Nh]:B;return e}function Ni(e,o,d){var v,w,j,Z=v=d[0].x,_e=w=d[0].y,Ki=1;for(j=d.length;Ki<j;Ki++){var _u=d[Ki].x,fd=d[Ki].y;_u>v?v=_u:_u<Z&&(Z=_u),fd>w?w=fd:fd<_e&&(_e=fd)}return Z<=e&&e<=v&&_e<=o&&o<=w&&de({x:e,y:o},ee(d.concat(d[0])))}function Mi(e){var o=[],d=e;do{var v=yd(100*(d.Jn?d.Jn:d.x))/100,w=yd(100*(d.Kn?d.Kn:d.y))/100;if(!j||.01<Dd(Ed(j.x-v,2)+Ed(j.y-w,2))){var j=new G(v,w);o.push(j)}d=d.next}while(d&&d!==e);return o}function Li(e,o){var d,v=Number.POSITIVE_INFINITY,w=-1,j=e.length;for(d=0;d<j;d+=2){var Z=Bd(e[d+1]-o);(Z+=180<Z?360-Z:Z)<v&&(v=Z,w=d)}return 0<d?(o=e.splice(w,e.length-w)).concat(e):e}function Oi(e,o,d){Oi.l.constructor.call(this,Hi,d),this.cg(e),this.ji(o),d&&"precision"in d&&this.ii(d.precision)}function Pi(e){e.a!==y&&Oi.l.$.call(e,Qi(e))}function Qi(e){var o=e.N,d=o.lat,v=e.Y,w=0,j=new L;if(90===Bd(d))for(d=o.jg(0,v,!0).lat;360>w;w+=120)j.Sh(d,w-180,B);else for(e=360/(e=e.B);360>w;w+=e)j.md(o.jg(w,v,!0));return o=new O(j),0>d&&o.Ok(Ai.SOUTH),o}function Ri(e,o){if(!C(e,Element)){if(Si.innerHTML=e,!(e=Si.firstElementChild))throw new D(Ri,0,"No element data");Si.removeChild(e);var d=!0;Si.innerHTML=""}this.a=0!==kf(e).length,this.f=d?e:lf(e,x.document,this.a),o&&((d="onAttach")in o&&xc(e=o[d],"Function",Ri,1,d)&&(this.Gh=e),(d="onDetach")in o&&xc(e=o[d],"Function",Ri,1,d)&&(this.b=e))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Hi,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.ai=function(e){var o=+e;if(o!==e)throw new D(this.ai,0,e);if(0>o||2047<this.b+o)throw new le(this.ai,this.b+o,[0,2047]);this.f=o,this.pa(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.ai,uh.prototype.Yl=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.Yl,uh.prototype.$h=function(e){var o=+e;if(o!==e)throw new D(this.$h,0,e);if(0>o||2047<this.f+o)throw new le(this.$h,this.f+o,[0,2047]);this.b=o,this.pa(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.$h,uh.prototype.Ul=function(){return this.b},uh.prototype.getElevation=uh.prototype.Ul,uh.prototype.ba=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ba,uh.prototype.$=function(e){if(C(e,O))var o=!1;else C(e,Gi,this.$,0),o=!0;return this.v=o,o=this.a,this.a=e,o!==Hi&&this.pa(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.$,uh.prototype.F=function(){return this.ba().F()},uh.prototype.getBoundingBox=uh.prototype.F,uh.prototype.Gd=function(e){var o,v,w,d=this.ba();if(this.v){var j=0;for(w=(d=d.ha).length;j<w;j++)(v=Ii(this,d[j],e,d[j].kd))&&(o||(o=[]),o.push(v))}else(v=this.Xa)===B&&(v=this.v?Ai.NORTH:this.ba().kd),(v=Ii(this,d,e,v))&&(o=[v]);return o},uh.prototype.getGeometriesForTile=uh.prototype.Gd,uh.prototype.oa=y,uh.prototype.V=function(){var v,e=uh.l.V.call(this),o=this.ba(),d=this.v?o.ha:[o],w=e.properties,j=e.geometry=o.V();if(w.style=this.na().V(),w.height=this.f+this.b,w.min_height=this.b,this.F().tb()&&(j.type="MultiPolygon",this.v)){var Z=[];d.forEach(function(_e,Ki){v=j.coordinates[Ki],_e.F().tb()?Z=Z.concat(v):Z.push(v)}),j.coordinates=Z}return e},uh.prototype.forWorkerMessage=uh.prototype.V,u(Oi,uh),t("H.map.Circle",Oi),Oi.prototype.cg=function(e){(e=ng(e)).ea(this.N)||(this.N=e,Pi(this))},Oi.prototype.setCenter=Oi.prototype.cg,Oi.prototype.Ya=function(){return this.N},Oi.prototype.getCenter=Oi.prototype.Ya,Oi.prototype.ji=function(e){if(E(e=Zd(e,0,6371000.79*Nd/2)))throw new D(this.ji,0,e);this.Y!==e&&(this.Y=e,Pi(this))},Oi.prototype.setRadius=Oi.prototype.ji,Oi.prototype.Cm=function(){return this.Y},Oi.prototype.getRadius=Oi.prototype.Cm,Oi.prototype.B=60,Oi.prototype.ii=function(e){if(!Dc(e))throw new D(this.ii,0,e);this.B!==(e=Zd(yd(e),4,360))&&(this.B=e,Pi(this))},Oi.prototype.setPrecision=Oi.prototype.ii,Oi.prototype.zm=function(){return this.B},Oi.prototype.getPrecision=Oi.prototype.zm,Oi.prototype.$=function(){return this},Oi.prototype.setGeometry=Oi.prototype.$,Oi.prototype.ba=function(){return this.a===Hi&&Oi.l.$.call(this,Qi(this)),this.a},Oi.prototype.getGeometry=Oi.prototype.ba,t("H.map.DomIcon",Ri);var Si=document.createElement("DIV");function Ti(e){Ti.l.constructor.call(this,e)}function Ui(e,o){this.w=+e,this.h=+o}function Vi(e,o){var d,v=e,w=o||[];if(e!==Wi.NONE){if(o=d=w.length,-1===Xi.indexOf(v))throw new D(Vi,0,e);if(!w)throw new D(Vi,1,w);for(;d--;)if(E(w[d]))throw new D(Vi,1,w);if(v===Wi.RECT&&3<o&&(w=[w[0],w[1],w[2],w[1],w[2],w[3],w[0],w[3]],v=Wi.POLYGON),v===Wi.CIRCLE&&2<o&&0<(e=w[2])){v=w[0];var j=w[1],Z=360/(d=wd(2*Ad(e),40));for(w=[];d--;){var _e=Z*d*Sd;w.push(v+Gd(_e)*e,j+Id(_e)*e)}v=Wi.POLYGON}if(v!==Wi.POLYGON||!o||w.length%2)throw new D(Vi,1,w);this.a=w}}Ri.prototype.Gh=null,Ri.prototype.b=null,Ri.prototype.ej=function(e){return lf(this.f,e,this.a)},Ri.prototype.a=!1,u(Ti,gh),t("H.geo.MultiPoint",Ti),Ti.prototype.b=function(e){return mg(e)},Ti.prototype.c=function(e){return C(e,lg)?e:ng(e)},Ti.prototype.lb="Multi"+lg.prototype.lb,Ti.prototype.zb="Multi"+lg.prototype.zb,t("H.math.Size",Ui),t("H.map.HitArea",Vi);var Wi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Vi.ShapeType=Wi;var Xi=[Wi.RECT,Wi.CIRCLE,Wi.POLYGON];function rh(e,o){var d;vc(this,rh),rh.l.constructor.call(this,o),this.$(e),o&&"icon"in o&&(d=o.icon),this.Ac(d||Yi(this))}function Yi(e){var o=e.c;return o||(o=e.constructor.prototype.c=e.b(Zi)),o}Vi.prototype.Cf=function(e,o,d){return this.a?ce(e,o,this.a,d,!0):be.NONE},Vi.prototype.hitTest=Vi.prototype.Cf,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ba=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ba,rh.prototype.$=function(e){var o=this.a;return C(e,lg)||C(e,Ti)?this.a=e:(mg(e,this.$,0),this.a=ng(e)),o&&this.pa(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.$,rh.prototype.F=function(){return this.a.F()},rh.prototype.pb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.pb,rh.prototype.Ac=function(e){var o=this.icon,d=!o;if(o!==e){if(!this.Oj(e))throw d?new D(this.constructor,1,e):new D(this.Ac,0,e);this.icon=e,d||this.pa(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ac;var Zi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ui(38,47),anchor:new G(19,45),hitArea:new Vi(Wi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function $i(e,o){$i.l.constructor.call(this,e,o)}function aj(e,o,d){aj.l.constructor.call(this,e),this.oldValue=d,this.newValue=o}function bj(e,o,d,v){bj.l.constructor.call(this,e,o,d),this.modifiers=v}rh.prototype.V=function(){var e=rh.l.V.call(this),o=this.pb(),d=o.qb(),v=o.ed();return e.geometry=this.ba().V(),d&&((o=e.properties.icon={id:o.uid}).size={w:d.w,h:d.h},o.offset=[d.w/2-(v?v.x:0),d.h/2-(v?v.y:0)]),e},rh.prototype.forWorkerMessage=rh.prototype.V,u($i,rh),t("H.map.DomMarker",$i),$i.prototype.type=nh.DOM_MARKER,$i.prototype.ca=2,$i.prototype.b=function(e){var o=new Ri(e.svg,e);return o.f.style.margin=-(e=e.anchor).y+"px 0 0 -"+e.x+"px",o},$i.prototype.Oj=function(e){return C(e,Ri)},u(aj,sd),t("H.util.ChangeEvent",aj),u(bj,aj),t("H.map.ChangeEvent",bj);var cj={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function dj(){this.a=[],dj.l.constructor.call(this)}function ej(e,o,d){if(e=e.a.length,d)var v=e;else if(E(v=0>(v=+o)?xd(0,e+v):wd(e,v)))throw new le(dj,o,[0,e-1]);return v}function gj(e,o){var d=e.a.splice(o,1)[0];return e.dispatchEvent(new fj(e,e.A.ee,o,null,d,null)),d}function fj(e,o,d,v,w,j){fj.l.constructor.call(this,o,e),this.idx=d,this.added=v,this.removed=w,this.moved=j}function hj(){}function ij(e){return wd(1,xd(0,.5-Cd(Jd(Pd+Od*e/180))/Nd/2))}function jj(e){return 0>=e?90:1<=e?-90:Td*(2*Kd(Fd(Nd*(1-2*e)))-Od)}bj.Type=cj,bj.prototype.el=cj.SIZE,bj.prototype.SIZE=bj.prototype.el,bj.prototype.Fi=cj.POSITION,bj.prototype.POSITION=bj.prototype.Fi,bj.prototype.zi=cj.HEADING,bj.prototype.HEADING=bj.prototype.zi,bj.prototype.Hi=cj.TILT,bj.prototype.TILT=bj.prototype.Hi,bj.prototype.Ai=cj.INCLINE,bj.prototype.INCLINE=bj.prototype.Ai,bj.prototype.Ii=cj.ZOOM,bj.prototype.ZOOM=bj.prototype.Ii,bj.prototype.xi=cj.BOUNDS,bj.prototype.BOUNDS=bj.prototype.xi,u(dj,F),t("H.util.OList",dj),dj.prototype.add=function(e,o){o=ej(this,o,E(o)),this.a.splice(o,0,e),this.dispatchEvent(new fj(this,this.A.ce,o,e,null,null))},dj.prototype.add=dj.prototype.add,dj.prototype.$b=function(e){return this.get(e),gj(this,e)},dj.prototype.removeAt=dj.prototype.$b,dj.prototype.remove=function(e){return 0<=(e=this.indexOf(e))&&(gj(this,e),!0)},dj.prototype.remove=dj.prototype.remove,dj.prototype.set=function(e,o){if(0!==this.a.length||0!==e){this.get(e),e=ej(this,e,!1);var d=this.a[e]}return this.a[e]=o,this.dispatchEvent(new fj(this,this.A.fe,e,o,d,null)),d},dj.prototype.set=dj.prototype.set,dj.prototype.indexOf=function(e){return this.a.indexOf(e)},dj.prototype.indexOf=dj.prototype.indexOf,dj.prototype.get=function(e){var o=ej(this,e,!1),d=this.a;if(o>=d.length)throw new le(this.get,e,[0,d.length-1]);return d[o]},dj.prototype.get=dj.prototype.get,dj.prototype.mm=function(){return this.a.length},dj.prototype.getLength=dj.prototype.mm,dj.prototype.Ha=function(){return this.a.concat()},dj.prototype.asArray=dj.prototype.Ha,dj.prototype.flush=function(){for(var e=this.a.length;e--;)gj(this,e)},dj.prototype.flush=dj.prototype.flush,dj.prototype.o=function(){this.flush(),dj.l.o.call(this)},dj.prototype.A={ce:"add",ee:"remove",fe:"set",yo:"move"},u(fj,sd),dj.Event=fj,hj.prototype.Gf=function(e,o,d){return d?(d.x=o/360+.5,d.y=ij(e)):d=new G(o/360+.5,ij(e)),d},hj.prototype.latLngToPoint=hj.prototype.Gf,hj.prototype.Ic=function(e,o){return this.Gf(e.lat,e.lng,o)},hj.prototype.geoToPoint=hj.prototype.Ic,hj.prototype.Ka=function(e,o,d){return d?(d.lat=jj(o),d.lng=360*(1===e?1:Xd(e,1))-180):d=new lg(jj(o),360*(1===e?1:Xd(e,1))-180),d},hj.prototype.xyToGeo=hj.prototype.Ka,hj.prototype.Qf=function(e,o){return this.Ka(e.x,e.y,o)},hj.prototype.pointToGeo=hj.prototype.Qf;var kj=new hj;function lj(e,o){this.projection=e||kj,this.b=0,this.a=this.exp=Cd(o||256)/Md,mj(this),this.y=this.x=0}t("H.geo.mercator",kj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",lj);var nj=Bd(24)+Bd(-8);function mj(e){e.a>nj&&(e.a=nj),e.w=Ed(2,e.a),e.h=Ed(2,e.a)}function oj(e){e=e||{},oj.l.constructor.call(this),this.min=0,this.max=22,this.sl=this.dark=!!e.dark,e.min&&this.ei(e.min),e.max&&this.ci(e.max),this.pixelProjection=new lj(e.projection,e.minWorldSize),e.provider&&(this.ja=e.provider,this.Ra=A(this.Ra,this),this.ja.addEventListener(P.prototype.A.xa,this.Ra,!1,this),this.bb=A(this.bb,this),this.ja.addEventListener(P.prototype.A.de,this.bb,!1,this))}function pj(e,o,d){var v=e[o],w="min"===o;if(d!==v){if(!(w?d<=e.max:d>=e.min))throw new D(w?e.ei:e.ci,0,"Invalid condition min <= max");e[o]=d,e.Ra(),e.bb(),e.dispatchEvent(new aj(w?e.A.Ei:e.A.Di,d,v))}return e}function qj(e){var o;if(qj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),e){var d=e.length;for(o=0;o<d;o++)this.add(e[o])}}function rj(e,o){var d=o.getProvider&&o.getProvider();d&&(sj[d.uid]=d),o.ga(e)}function tj(e){var o=e.getProvider&&e.getProvider();o&&delete sj[o.uid],e.ga(null)}lj.prototype.vk=kj,lj.prototype.projection=lj.prototype.vk,lj.prototype.x=0,lj.prototype.x=lj.prototype.x,lj.prototype.y=0,lj.prototype.y=lj.prototype.y,lj.prototype.po=Ed(2,nj),lj.prototype.w=lj.prototype.po,lj.prototype.Wm=Ed(2,nj),lj.prototype.h=lj.prototype.Wm,lj.prototype.Ja=function(e){if(E(e))throw new D(this.Ja,0,e);var o=this.x/this.w,d=this.y/this.h;this.b=e,this.a=this.exp+e,mj(this),this.x=o*this.w,this.y=d*this.h},lj.prototype.rescale=lj.prototype.Ja,lj.prototype.Cj=function(){return this.b||0},lj.prototype.getZoomScale=lj.prototype.Cj,lj.prototype.cb=function(e,o){return(e=this.projection.Gf(e.lat,e.lng,o)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},lj.prototype.geoToPixel=lj.prototype.cb,lj.prototype.Ie=function(e,o){return this.projection.Ka((e.x+this.x)/this.w,(e.y+this.y)/this.h,o)},lj.prototype.pixelToGeo=lj.prototype.Ie,lj.prototype.Ka=function(e,o,d){return this.projection.Ka((e+this.x)/this.w,(o+this.y)/this.h,d)},lj.prototype.xyToGeo=lj.prototype.Ka,lj.prototype.lh=function(e,o,d){return(e=this.projection.Gf(e,o,d)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},lj.prototype.latLngToPixel=lj.prototype.lh,lj.prototype.Vd=function(e){return new G(e.x*this.w-this.x,e.y*this.h-this.y)},lj.prototype.pointToPixel=lj.prototype.Vd,u(oj,F),t("H.map.layer.Layer",oj),oj.prototype.min=0,oj.prototype.min=oj.prototype.min,oj.prototype.max=22,oj.prototype.max=oj.prototype.max,oj.prototype.A={xa:"update",de:"configchange",Ei:"minchange",Di:"maxchange"},oj.prototype.ia=function(){return this.ja},oj.prototype.getProvider=oj.prototype.ia,oj.prototype.en=function(e){return this.min<=e&&e<=this.max},oj.prototype.isValid=oj.prototype.en,oj.prototype.ei=function(e){return pj(this,"min",+e)},oj.prototype.setMin=oj.prototype.ei,oj.prototype.ci=function(e){return pj(this,"max",+e)},oj.prototype.setMax=oj.prototype.ci,oj.prototype.Ra=function(){this.dispatchEvent(this.A.xa)},oj.prototype.bb=function(){this.dispatchEvent(this.A.de)},oj.prototype.o=function(){oj.l.o.call(this)},oj.prototype.la=function(){return null},oj.prototype.getCopyrights=oj.prototype.la,u(qj,dj),t("H.map.DataModel",qj),qj.prototype.add=function(e,o){C(e,oj,this.add,0),rj(this,e),qj.l.add.call(this,e,o)},qj.prototype.add=qj.prototype.add,qj.prototype.set=function(e,o){return C(o,oj,this.set,0),rj(this,o),(e=qj.l.set.call(this,e,o))&&tj(e),e},qj.prototype.set=qj.prototype.set,qj.prototype.$b=function(e){var o;return(o=qj.l.$b.call(this,e))&&tj(o),o},qj.prototype.removeAt=qj.prototype.$b,qj.prototype.remove=function(e){var o;return(o=qj.l.remove.call(this,e))&&tj(e),o},qj.prototype.remove=qj.prototype.remove,qj.prototype.flush=function(){for(var e=this.a.length;e--;)this.$b(e);qj.l.flush.call(this)},qj.prototype.flush=qj.prototype.flush;var sj={};function uj(e,o,d){if(e=sj[e])return C(e[o],Function,uj,1,"invalid method"),e[o].apply(e,d)}function vj(e,o){Da(e)&&(this.j=e),Dc(o)&&(this.b=o)}Gc(sj),qj.invoke=uj,t("H.util.Request",vj),vj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var wj=[0,1,2,3,4],Cj;function xj(e,o){e.c<e.b&&(uc(o)||(o=2),0===o||1===o||0!==e.a&&1!==e.a||(e.c++,2!==o&&e.i++,e.O(e.c<e.b?1:2)))}function yj(){}function zj(e,o){var d=e.L(),v=d.ownerDocument;zj.l.constructor.call(this),this.a=e,this.P=d=d.appendChild(Aj(v,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.ef=Aj(v,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),d.appendChild(this.ef),d=d.appendChild(Aj(v,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.g=d.appendChild(Aj(v,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.g.target="_blank",this.f=d.appendChild(Aj(v,"SPAN","margin:0px 8px")),this.j=Va(Bj),this.fi(o),this.c=A(this.c,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ci,this.c),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}vj.prototype.a=0,vj.prototype.getState=function(){return this.a},vj.prototype.getState=vj.prototype.getState,vj.prototype.O=function(e){if(0>wj.indexOf(e))throw new D(this.O,0,e);(this.a!==e||1===e&&1<this.b)&&(this.a=e,this.j&&this.j(this))},vj.prototype.b=1,vj.prototype.Pm=function(){return this.b},vj.prototype.getTotal=vj.prototype.Pm,vj.prototype.c=0,vj.prototype.Am=function(){return this.c},vj.prototype.getProcessed=vj.prototype.Am,vj.prototype.i=0,vj.prototype.Zl=function(){return this.i},vj.prototype.getFailed=vj.prototype.Zl,vj.prototype.ie=function(){},vj.prototype.cancel=function(){3!==this.a&&(this.ie(),this.O(3))},vj.prototype.cancel=vj.prototype.cancel,t("H.util.ICapturable",yj),yj.prototype.capture=function(){},yj.prototype.capture=yj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.mb=nd.prototype.mb,nd.prototype.addOnDisposeCallback=nd.prototype.mb,t("H.util.dispose",rd),nd.prototype.C=nd.prototype.C,nd.prototype.dispose=nd.prototype.C,nd.prototype.o=nd.prototype.o,nd.prototype.disposeInternal=nd.prototype.o,u(zj,nd),t("H.map.Imprint",zj);var Bj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};function Aj(e,o,d,v,w){return e=e.createElement(o),d&&(e.style.cssText=d),v&&(e.innerHTML=v),w&&(e.className=w),e}zj.prototype.fi=function(e){var o,d=this.ef.firstElementChild.firstElementChild.children;e||(this.j=Va(Bj));var v=this.j;for(o in v)e&&o in e&&(v[o]=e[o]);e=(this.hh=e=v.invert)?Dj:Ej,d[0].style.fill=e.Rk,d[0].style.fillOpacity=""+e.Sk,d[1].style.fill=e.Wk,d[1].style.fillOpacity=""+e.Xk,Fj[e=v.locale]||(v.locale=e="en-US"),this.g.innerHTML=Fj[e],e=e.split("-"),this.g.href=v.href.replace("{LN}",e[0]).replace("{CN}",e[1].toLowerCase()),this.P.style.font=v.font},zj.prototype.setOptions=zj.prototype.fi,zj.prototype.L=function(){return this.P},zj.prototype.c=function(){this.f.innerHTML=this.i+" "+this.la()},zj.prototype.b=function(){this.c(),setTimeout(this.c,5e3)};var Ej={Wk:"#0F1621",Xk:.3,Rk:"#fff",Sk:.6},Dj={Wk:"#fff",Xk:1,Rk:"#0F1621",Sk:.7},Gj="1987&ndash;"+xd(2015,(new Date).getFullYear())+" HERE";function Hj(e,o,d,v){Ij(A(function(w){w?d(this.hh?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((w=this.ef.cloneNode(!0)).firstChild.setAttribute("style","font:"+o),d(bf(w.innerHTML)))},e),v)}function Ij(e,o){var d="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),v=Cj;uc(v)?e(v):new tf("image",d).then(function(w){Ye.drawImage(w,0,0);try{Ye.getImageData(0,0,1,1),v=!1}catch(j){v=18===j.code}finally{Cj=v,e(v)}},o)}zj.prototype.la=function(){var Z,_e,Ki,e=this.a,o=e.ib(),d=e.c.eb().bounds,v=(e=e.a).a.length,w={},j=0,_u=[Gj];if(d)for(;j<v;j++)if(_e=e.get(j).getCopyrights(d.F(),o))for(Z=0;Z<_e.length;Z++)w[Ki=_e[Z].label]||(_u.push(Ki),w[Ki]=1);return _u.join(", ")},zj.prototype.getCopyrights=zj.prototype.la,zj.prototype.na=function(){return this.P.style},zj.prototype.i=String.fromCharCode(169),zj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ci,this.c),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.P.parentNode){var e=this.P;e.parentNode.removeChild(e)}},zj.prototype.disposeInternal=zj.prototype.o,zj.prototype.capture=function(e,o,d,v){var zy,w=e.getContext("2d"),j=window.getComputedStyle(this.f.parentElement),Z=2*Bc(j.paddingLeft,10),_e=(this.f.offsetWidth+2*Z)*o,Ki=this.f.offsetHeight*o,_u=Cc(j.getPropertyValue("font-size")),fd=this.P.ownerDocument,iy=+e.width,oy=+e.height,dy=16*o,_y=this.ef.childNodes[0].getBoundingClientRect(),Ay=_y.width*o,ky=_y.height*o,Xy=jd;Da(v)&&(Xy=function(){v("capture_error")}),w.fillStyle=j.backgroundColor,w.fillRect(iy-_e,oy-Ki,_e,Ki),_e=this.i+" "+((zy=Aj(fd,"div",null,zy=this.la())).textContent||zy.innerText||""),w.font=_u*o+"px "+j.getPropertyValue("font-family"),w.fillStyle=j.getPropertyValue("color"),w.textBaseline="bottom",w.textAlign="right",w.fillText(_e,iy-Z*o,oy),Hj(this,w.font,function(zy){new tf("image",zy).then(function(h0){w.drawImage(h0,dy,oy-(ky+dy),Ay,ky),d(e)},Xy)},Xy)},zj.prototype.capture=zj.prototype.capture,zj.prototype.hh=!1,zj.prototype.hl=function(e,o){Fj[e]=o},zj.prototype.addL11NString=zj.prototype.hl;var Fj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function Q(e){var o={};this.f=o.previousSibling=o.nextSibling=o,this.g=new cf,Q.l.constructor.call(this,e),e&&"objects"in e&&this.Qb(e.objects)}function Jj(e,o,d){e.$d(d.ja)}function Kj(e){e.Qe()}function Lj(e,o,d){e.pa(d.c)}function Mj(e){this.push(e)}function Nj(e,o){for(var w,j,d=0,v=o.length,Z=[];d<v;d++)j=(w=o[d])instanceof Q?{type:"GeometryCollection",geometries:Nj(e,w.Na())}:w instanceof rh||w instanceof sh||w instanceof th||w instanceof uh?w.ba().Cc():{type:"FeatureCollection",features:hf},Z.push(j);return Z}u(Q,M),t("H.map.Group",Q),Q.prototype.type=nh.GROUP,Q.prototype.$d=function(e,o){return this.b=!0,e=Q.l.$d.call(this,e,o),this.b=!1,e&&this.forEach(Jj,!0),e},Q.prototype.setProvider=Q.prototype.$d,Q.prototype.contains=function(e){var o=this===e;if(!o&&this.a&&C(e,M))for(;!o&&e;)e===this?o=!0:e=e.Ca;return o},Q.prototype.contains=Q.prototype.contains,Q.prototype.Qe=function(){this.I=B,this.forEach(Kj,!0)},Q.prototype.resetZInfo=Q.prototype.Qe,Q.prototype.b=!1,Q.prototype.pa=function(e){var o=Q.l.pa.call(this,e);return o&&!this.b&&(this.c=e,this.forEach(Lj,!0),delete this.c),o},Q.prototype.invalidate=Q.prototype.pa,Q.prototype.forEach=function(e,o,d){var v;if(this.a){var w=this.f,j=w.nextSibling;for(v=0;j!==w;){var Z=j.nextSibling;e.call(d,j,v++,this),o&&C(j,Q)&&j.forEach(e,o,d),j=Z}}},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.Na=function(e){var o=[];return this.forEach(Mj,e,o),o},Q.prototype.getObjects=Q.prototype.Na,Q.prototype.F=function(){var e=null;return this.a&&this.forEach(function(o){o.F&&(o=o.F())&&(e=e?e.Xb(o):o)}),e},Q.prototype.getBoundingBox=Q.prototype.F,Q.prototype.a=0,Q.prototype.Ll=function(){return this.a},Q.prototype.getChildCount=Q.prototype.Ll,Q.prototype.aa=function(e){var o=this.f,d=o.previousSibling;if(C(e,M,this.aa,0),e.contains(this))throw new Yc(this.aa,"The new object contains the parent group");var v=e.Af(!0),w=e.Ca;if(w!==this){if(w){var j=e.nextSibling;(w=e.previousSibling).nextSibling=j,j.previousSibling=w}e.Ca=this,M.l.ga.call(e,this),d.nextSibling=e,e.previousSibling=d,e.nextSibling=o,o.previousSibling=e,this.a++}return e.ni=this.g.next(),e.Qe(),o=e.$d(this.ja,this.aa),e.Af(!0)!==v&&e.pa(kh.VOLATILITY),o||e.pa(kh.Z_ORDER),e},Q.prototype.addObject=Q.prototype.aa,Q.prototype.Qb=function(e){var o;zc(e,this.Qb,0);var d=e.length;for(o=0;o<d;o++)this.aa(e[o])},Q.prototype.addObjects=Q.prototype.Qb,Q.prototype.Da=function(e){if(!e||e.Ca!==this)throw new Yc(this.Da,"object not found");var o=e.previousSibling,d=e.nextSibling;return o.nextSibling=d,d.previousSibling=o,e.Ca=null,M.l.ga.call(e,null),delete e.previousSibling,delete e.nextSibling,C(e.ja,N)&&e.$d(null,this.Da),this.a--,e},Q.prototype.removeObject=Q.prototype.Da,Q.prototype.nd=function(e){var o;zc(e,this.nd,0);var d=e.length;for(o=0;o<d;o++)this.Da(e[o])},Q.prototype.removeObjects=Q.prototype.nd,Q.prototype.ka=function(){var e=this.Na();this.nd(e)},Q.prototype.removeAll=Q.prototype.ka,Q.prototype.Cc=function(e){for(var j,Z,_e,o=this.Na(),d=0,v=o.length,w=[];d<v;d++)(_e=o[d])instanceof Q?(Z=qh(this,j=e?e(_e.getData()):_e.getData(),!!e),(j={type:"Feature"}).properties=Z,_e.i&&(j.id=_e.i),j.geometry={},j.geometry.type="GeometryCollection",j.geometry.geometries=Nj(this,_e.Na()),w.push(j)):w.push(_e.Cc(e));return{type:"FeatureCollection",features:w}},Q.prototype.toGeoJSON=Q.prototype.Cc,Q.prototype.V=function(){var e=Q.l.V.call(this);return e.type="Group",e},Q.prototype.forWorkerMessage=Q.prototype.V;var Oj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Pj(e,o,d,v,w){switch(o&&(this.g=o),uc(d)&&(this.c=!!d),this.c&&v&&(this.xg=new Ui(v.w,v.h)),uc(w)&&(this.i={crossOrigin:w}),Qj[yc(e)]){case 2:this.a=e,Rj(this,1);break;case 1:if(nf(e)){this.a=e,Sj(this),Rj(this,1);break}e=e.src;case 0:if(e){e=bf(e),this.b=new tf("image",e,B,this.i),this.b.then(A(this.Gn,this),A(this.Fn,this));break}default:throw Rj(this,-1),new D(Pj,0,"No image data")}}function Rj(e,o){e.f=o,delete e.b,e.g&&e.g(o,e)}function Sj(e){if(e.c){var o=e.a,d=Tj(e),v=d&&d.w||+o.width,w=d&&d.h||+o.height,j=Te();if(C(o,x.HTMLCanvasElement))d=o;else{(d=o.ownerDocument.createElement("canvas")).width=Ad(v*j),d.height=Ad(w*j);var Z=d.getContext("2d");Z.scale(j,j),Z.drawImage(o,0,0,v,w),$c&&(Z.clearRect(0,0,v,w),Z.drawImage(o,0,0,v,w))}e.a=d}}t("H.map.provider.Capabilities",Oj),Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Oj.PROVIDES_SPATIALS|Oj.PROVIDES_OVERLAYS|Oj.PROVIDES_MARKERS,Pj.prototype.f=0,Pj.prototype.getState=function(){return this.f},Pj.prototype.c=!0,Pj.prototype.getData=function(){return this.a||y};var Qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Tj(e){var d,o=e.xg;if(!o){var v=e.a;if(0===(o=v.naturalWidth||v.width)&&$e&&1===Qj[yc(v)]){var w=!0;if(d=v.parentNode)var j=v.nextSibling;document.body.appendChild(v)}e.xg=o=new Ui(v.naturalWidth||v.width,v.naturalHeight||v.height),w&&(d?d.insertBefore(v,j):document.body.removeChild(v))}return o}function Uj(e,o){var d,v="anonymous";if(this.uid=Vj.next(),Uj.l.constructor.call(this),o){var w="size";if(w in o){var j=o[w];if(!j||isNaN(j.w)||isNaN(j.h))throw new D(Uj,1,w);this.g=new Ui(j.w,j.h)}if((w="anchor")in o){if(!(j=o[w])||isNaN(j.x)||isNaN(j.y))throw new D(Uj,1,w);this.f=new G(j.x,j.y)}(w="hitArea")in o&&(C(j=o[w],Vi,Uj,1),this.c=o[w]),(w="asCanvas")in o&&(d=o[w]),(w="crossOrigin")in o&&(v=o[w]),(j=o.stickHeight)===+j&&0<j&&(this.fo=j),j=o[w="stickColor"],w in o&&Ac(j)&&(this.eo=j)}e=new Pj(e,A(this.i,this),d,this.g,v),0!==(o=this.j=e.getState())?this.i(o,e):this.b=e}p=Pj.prototype,p.xg=y,p.qb=function(){return 1===this.f?Tj(this):y},p.Gn=function(e){this.a=e,Sj(this),Rj(this,1)},p.Fn=function(){Rj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Uj,F),t("H.map.Icon",Uj);var Vj=new cf;function Wj(e,o,d,v,w,j){Wj.l.constructor.call(this,isNaN(e)?15:e,o,d,v,w,j)}function Xj(e,o,d,v,w){var j=o.entries;if(w)if(o.a)j=Yj(e,o,d,v,w);else if(j){var Z=Eg(o,+((j=j[0])[1]>=o[8])|+(j[0]>=o[9])<<1);Z.entries=o.entries,delete o.entries,j.node=Z,Bg(e,Z),j=Yj(e,o,d,v,w)}else Fg(o,j=new Zj(d,v)),Bg(e,o),zg(e,j,!0);else j||Bg(e,o),Fg(o,j=new Zj(d,v)),zg(e,j,!0);return j}function Yj(e,o,d,v,w){return Xj(e,Eg(o,+(d>=o[8])|+(v>=o[9])<<1),d,v,w-1)}function Zj(e,o){this.id=Dg++,this[0]=o,this[1]=e}function ak(){this.a=new Wj(10,180,90,0,0,!0)}function bk(e){this.a=e}function ck(e,o,d){this.c=e,this.a=o,this.g=d,this.f=this.c&Oj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function dk(e,o,d,v){this.a=e,this.b=o,this.c=d,this.af=v}function ek(e,o,d,v){return e={type:o,uid:e.b,tiled:d,max_zoom:e.c},v&&Xa(e,v),e}function fk(e,o,d,v,w){this.a=e,this.b=o,this.c=d,this.f=v,this.af=w}function gk(e){if(e.a&Oj.PROVIDES_DOM_MARKERS&&!(e.a&Oj.PROVIDES_MARKERS))return{};var o=new dk(e.a,e.b,e.c,e.af),d=new bk(e.a);e=new ck(e.a,e.b,e.f);var v={},w=o.b;if(o=o.a&Oj.PROVIDES_BY_VIEWPORT?ek(o,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(o.a&Oj.HAS_VOLATILE_DATA)}):o.a&Oj.PROVIDES_RASTERS?ek(o,"RemoteRasterTileSource",!0,{url:""}):ek(o,"ObjectTileSource",!0,{tile_size:o.af}),v[w]=o,o={},d.a&Oj.PROVIDES_RASTERS&&(o={"translucent-raster":ni("raster","inlay",1)}),d.a&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){w=!!(d.a&Oj.CROP_LINES_BY_TILE);var j={"translucent-polygons":ni("polygons","inlay",2),"translucent-extruded-polygons":ni("polygons","translucent",3),"translucent-pattern-lines":ni("pattern-lines","translucent",4),"translucent-overlays":ni("overlays","inlay",5),markers:ni("custom_icons","overlay",6,!1)};j["translucent-polygons"].crop_by_tile=!!(d.a&Oj.CROP_POLYGONS_BY_TILE),j["translucent-pattern-lines"].crop_by_tile=w,j.markers.suppress_fade=!0,j.markers.stick=!0,Xa(o,j)}if(e.c&Oj.PROVIDES_RASTERS&&(e.b["tile_layer_"+e.a]=pi(e.a,"_default",{"translucent-raster":{color:[1,1,1,e.g],order:0}})),e.c&Oj.PROVIDES_SPATIALS){d={"translucent-pattern-lines":{color:mi("strokeColor"),width:mi("lineWidth * $meters_per_pixel"),join:mi("lineJoin"),cap:mi("lineCap"),tail_cap:mi("lineTailCap"),head_cap:mi("lineHeadCap"),miter_limit:mi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:mi("lineDash"),extrude:!0,dash_phase:mi("lineDashOffset")}},w=e.b,j="polygon_layer_"+e.a;var Z=pi(e.a,"polygons",void 0,e.f);Z.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:oi(!1)},Z.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:oi(!0)},w[j]=Z,e.b["outline_layer_"+e.a]=pi(e.a,"outlines",d,e.f),e.b["polyline_layer_"+e.a]=pi(e.a,"polylines",d,e.f)}return e.c&Oj.PROVIDES_OVERLAYS&&(e.b["overlay_layer_"+e.a]=pi(e.a,"overlays",{"translucent-overlays":{color:[1,1,1,e.g],order:8190,interactive:!0}})),e.c&Oj.PROVIDES_MARKERS&&(e.b["marker_layer_"+e.a]=pi(e.a,"markers",{markers:{sprite:li("icon.id"),offset:li("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:li("icon.stick_color"),height:li("icon.stick_height")}}},e.f)),{sources:v,styles:o,layers:e.b}}function P(e){var d,o=""+ef();if(P.l.constructor.call(this),this.min=(e=e||{}).min||0,this.max=e.max||22,d=e.uri){if(/_/.test(d))throw new D(P,0,"uri "+d)}else d=o;if(this.uri=d||o,this.uid=o,e.getCopyrights&&xc(e.getCopyrights,"Function",P)&&(this.getCopyrights=e.getCopyrights),this.bb=this.bb.bind(this),this.ra=!0,this.c=e.engineType||hk,this.c===ik.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function jk(e,o){o=Zd(o,0,1),E(o)&&(o=1),e.f!==o&&(e.f=o,e.ra&&kk(e),e.bb(),e.Ra())}function kk(e){if(e.c===ik.WEBGL){var o=new fk(e.getCapabilities(),e.uid,e.max,e.f,e.tileSize);e.a=new qi(gk(o))}else e.c===ik.HARP&&H.map.render.harp&&(e.a=new H.map.render.harp.Style({}));e.ra=!0}function mk(e){var o;for(o in vc(this,mk),mk.l.constructor.call(this,e),this.Y=e=[],nh)e[nh[o]]=new jh}function N(e){N.l.constructor.call(this,e=e||{}),this.g=e=new Q({min:e.min,max:e.max}),e.ja=this,e.ga(this),e.pa(kh.ADD),this.u=new Lg,this.i=new Lg,this.m=new ak,this.s=new Lg,this.S=new ak,this.ca=new Lg}function nk(e,o,d,v,w,j,Z){if(Z=Z||[],o.Lc())for(e=o!==e.m&&o!==e.s,w=!w,d=(o=o.Df(d,j,j)).length,j=0;j<d;j++){var Ki,_e=o[j].c;if(Ki=void 0!==v){for(var _u=zd(v),fd=_e;(Ki=fd.s<=_u&&fd.m>=_u)&&(fd=fd.Ca););Ki=!Ki}Ki||!w&&!_e.oc(!0)||(e||1===_e.pb().getState())&&Z.push(_e)}return Z}function ok(e,o,d,v,w){var j=nk(e,e.m,o,d,v,w);return nk(e,e.s,o,d,v,w,j),j}function pk(e,o,d,v,w){var j=nk(e,e.S,o,d,v,w);return nk(e,e.ca,o,d,v,w,j),j}function qk(e,o,d){var w,v=d.ba(),j=rk.bind(null,e);e=sk.bind(null,e),C(d,th)?w=C(v,L)?j(v):v.ha.some(j):C(d,uh)?w=C(v,O)?e(v):v.ha.some(e):C(d,sh)&&(w=e(zi(v))),w&&o.push(d)}function rk(e,o){t:{var d=o.W,v=Ei(e,o);if(!v){o=o.W.length;for(var w=0;w<o;w+=3)if(Ci(e,d[w],d[w+1])){e=!0;break t}}e=v}return e}function sk(e,o){return Fi(e,o)}function tk(e,o,d){for(var v=e.length;v--;){var w=e[v],j=w.ba();if(C(j,Ti)){for(var _e,Z=(j=j.ha).length;Z--;)if(Ci(o,(_e=j[Z]).lat,_e.lng)){d.push(w);break}}else Ci(o,j.lat,j.lng)&&d.push(w)}}Uj.State={ERROR:-1,LOADING:0,READY:1},Uj.prototype.getState=function(){return this.j},Uj.prototype.getState=Uj.prototype.getState,Uj.prototype.i=function(e,o){if(this.a=o.getData(),1===e){var d=this.g;d||(d=this.g=o.qb()),this.f||(this.f=new G(d.w/2|0,d.h))}this.b&&(this.j=e,delete this.b,this.dispatchEvent("statechange"))},Uj.prototype.a=y,Uj.prototype.Jc=function(){return this.a},Uj.prototype.getBitmap=Uj.prototype.Jc,Uj.prototype.qb=function(){return this.g||y},Uj.prototype.getSize=Uj.prototype.qb,Uj.prototype.f=y,Uj.prototype.ed=function(){return this.f},Uj.prototype.getAnchor=Uj.prototype.ed,Uj.prototype.c=y,Uj.prototype.bm=function(){return this.c},Uj.prototype.getHitArea=Uj.prototype.bm,Uj.prototype.o=function(){Uj.l.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Wj,wg),Wj.prototype.m=function(e){for(var o,d,v=this.head,w=e;w;){if(e=w.entries)if(o=e.length){if(2>o&&(d=w.parent)&&1===d.a){d.removeChild(w),v===w&&(v=d),d.entries=e,w=e[0].node=d;continue}}else if(delete w.entries,(d=w.parent)&&(d.removeChild(w),v===w&&(v=d),1===d.a)){w=d.a?d[0]||d[1]||d[2]||d[3]:null;continue}break}this.head!==v&&(this.head=v,Bg(this))},Wj.prototype.qc=function(e,o){if(Gg(this.a,e,o,e,o))return Xj(this,this.a,e,o,this.c);throw Error("Coordinates out of bounds")},Zj.prototype.a=function(e){return this[e%2]},p=ak.prototype,p.oh=0,p.Lc=function(){return this.oh},p.Hf=null,p.F=function(){var o,e=this.Hf;return!e&&(o=xg(this.a))&&(this.Hf=e=new K(-o[0],o[3],-o[2],o[1])),e},p.qc=function(e){return++this.oh,this.Hf=null,this.a.qc(e.lng,-e.lat)},p.remove=function(e){return(e=this.a.remove(e))&&(--this.oh,this.Hf=null),e},p.Df=function(e,o,d){var v=this.a,w=e.Fb(),j=e.Bb(),Z=-w.lat;w=w.lng;var _e=-j.lat;return j=j.lng,e.tb()?v.Ua(-180,Z,j,_e,d,o).concat(v.Ua(w,Z,180,_e,d,o)):v.Ua(w,Z,j,_e,d,o)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={de:"configchange",xa:"update"},p.Ra=function(e,o){this.dispatchEvent(new td(this.A.xa,o,e))},p.bb=function(){this.dispatchEvent(this.A.de)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.bb),delete this.a)},p.la=function(){return null},P.prototype.getCopyrights=P.prototype.la,P.prototype.getCapabilities=function(){var e=0;return this.Ph()&&(e|=Oj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(e|=Oj.PROVIDES_RASTERS),this.providesSpatials()&&(e|=Oj.PROVIDES_SPATIALS),this.providesOverlays()&&(e|=Oj.PROVIDES_OVERLAYS),this.providesMarkers()&&(e|=Oj.PROVIDES_MARKERS),this.providesDomMarkers()&&(e|=Oj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(e|=Oj.PROVIDES_GEOJSON),this.providesOMV()&&(e|=Oj.PROVIDES_OMV),e},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.Ph=gf,P.prototype.Me=gf,P.prototype.providesRasters=P.prototype.Me,P.prototype.uc=gf,P.prototype.providesSpatials=P.prototype.uc,P.prototype.Rh=gf,P.prototype.providesOverlays=P.prototype.Rh,P.prototype.Jb=gf,P.prototype.providesMarkers=P.prototype.Jb,P.prototype.Ib=gf,P.prototype.providesDomMarkers=P.prototype.Ib,P.prototype.Qh=gf,P.prototype.providesGeoJSON=P.prototype.Qh,P.prototype.ld=gf,P.prototype.providesOMV=P.prototype.ld,P.prototype.Wl=function(){return this.c},P.prototype.getEngineType=P.prototype.Wl,P.prototype.Le=jd,P.prototype.preprocessData=P.prototype.Le,P.prototype.f=1,P.prototype.sm=function(){return this.f},P.prototype.getOpacityInternal=P.prototype.sm,P.prototype.Ob=function(e,o){var d=this;if(this.c===ik.WEBGL&&!C(e,qi)||this.c===ik.HARP&&!C(e,H.map.render.harp.Style))throw e=Object.entries(ik).find(function(v){return v[1]===d.c}),new D(this.Ob,0,"Invalid style for engineType "+e);this.a&&(this.a.removeEventListener("change",this.bb),this.a.removeEventListener(Vh,this.bb)),this.a=e,this.a.addEventListener("change",this.bb),this.a.addEventListener(Vh,this.bb),o||this.bb(),this.ra=!1},P.prototype.setStyleInternal=P.prototype.Ob,P.prototype.fb=function(){return this.a||kk(this),this.a},P.prototype.getStyleInternal=P.prototype.fb,P.prototype.tj=function(){var e=this.getCapabilities(),o=lk.FEATURE;return e&Oj.PROVIDES_BY_VIEWPORT?o=lk.SOURCE:e&Oj.PROVIDES_RASTERS?o=null:e&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(o=lk.PROVIDER),o},P.prototype.getPickingMode=P.prototype.tj,P.prototype.$l=function(){return!1},P.prototype.getFeatureProxy=P.prototype.$l,u(mk,P),t("H.map.provider.ObjectProvider",mk),mk.prototype.Ph=ff,mk.prototype.providesByViewport=mk.prototype.Ph,mk.prototype.Db=function(e){return this.Y[e||nh.ANY]},mk.prototype.getInvalidations=mk.prototype.Db,mk.prototype.Pd=function(e,o){if(o!==kh.NONE){var d=this.Y[nh.ANY],v=d.a+1;d.update(v,o),(d=this.Y[e.type]).update(v,o),e.Db().update(v,o),this.Ra(e)}},mk.prototype.invalidateObject=mk.prototype.Pd,mk.prototype.requestOverlays=mk.prototype.od,mk.prototype.requestSpatials=mk.prototype.Wf,mk.prototype.requestSpatialsByTile=mk.prototype.Xf,mk.prototype.ua=!1,mk.prototype.requestMarkers=mk.prototype.wc,mk.prototype.requestDomMarkers=mk.prototype.vc,u(N,mk),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Oj.PROVIDES_BY_VIEWPORT|Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Oj.PROVIDES_DOM_MARKERS|Oj.CROP_LINES_BY_TILE},N.prototype.fb=function(){if(!this.B&&(this.B=N.l.fb.call(this),this.B instanceof qi)){var e=new fk(this.getCapabilities()|Oj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.f,this.tileSize);this.B.Fe(gk(e))}return this.B},N.prototype.getStyleInternal=N.prototype.fb,N.prototype.Ub=function(){return this.g},N.prototype.getRootGroup=N.prototype.Ub,N.prototype.Pd=function(e,o){o&kh.SPATIAL&&this.aa(e),N.l.Pd.call(this,e,o)},N.prototype.invalidateObject=N.prototype.Pd,N.prototype.aa=function(e){var o;if(C(e,M,this.aa,0),e.ja!==this)throw new Yc(this.aa,"foreign object");this.Da(e);var d=e.type;if(d===nh.MARKER)if((o=e.ba())instanceof lg){var v=!0;d=this.m}else d=this.s;else d===nh.DOM_MARKER?(o=e.ba())instanceof lg?(v=!0,d=this.S):d=this.ca:d=d===nh.OVERLAY?this.u:this.i;(v=v?d.qc(o):d.Ij(e.F())).c=e,e.ua=v},N.prototype.Da=function(e){var o;if(e)if(e.ja!==this){if(C(e,M))throw new Yc(this.Da,"foreign object")}else if(o=e.ua){var d=e.type;d===nh.MARKER?this.m.remove(o)||this.s.remove(o):d===nh.DOM_MARKER?this.S.remove(o)||this.ca.remove(o):d===nh.OVERLAY?this.u.remove(o):this.i.remove(o),delete o.c,delete e.ua}},N.prototype.removeObject=N.prototype.Da,N.prototype.Rh=function(){return 0<this.u.Lc()},N.prototype.providesOverlays=N.prototype.Rh,N.prototype.od=function(e,o,d){return nk(this,this.u,e,o,d,!1).filter(function(v){return v.Jc()})},N.prototype.requestOverlays=N.prototype.od,N.prototype.uc=function(){return 0<this.i.Lc()},N.prototype.providesSpatials=N.prototype.uc,N.prototype.Wf=function(e,o,d){return nk(this,this.i,e,o,d,!1)},N.prototype.requestSpatials=N.prototype.Wf,N.prototype.Xf=function(e,o){return nk(this,this.i,e.wf(),e.zL,o,!1)},N.prototype.requestSpatialsByTile=N.prototype.Xf,N.prototype.Jb=function(){return 0<this.m.Lc()+this.s.Lc()},N.prototype.providesMarkers=N.prototype.Jb,N.prototype.wc=function(e,o,d){return ok(this,e,o,d,!1)},N.prototype.requestMarkers=N.prototype.wc,N.prototype.Ib=function(){return 0<this.S.Lc()+this.ca.Lc()},N.prototype.providesDomMarkers=N.prototype.Ib,N.prototype.vc=function(e,o,d){return pk(this,e,o,d,!1)},N.prototype.requestDomMarkers=N.prototype.vc,N.prototype.Na=function(e,o,d,v,w){var j=this,Z=e.F(),_e=[],Ki=Yb(),_u=1;if(Z)for(;_u&nh.ANY;){if(_u&v)switch(_u){case nh.MARKER:Ki=Ki.then(function(){return ok(j,Z,d,o,!0)}).then(function(fd){return tk(fd,e,_e)});break;case nh.DOM_MARKER:Ki=Ki.then(function(){return pk(j,Z,d,o,!0)}).then(function(fd){return tk(fd,e,_e)});break;case nh.SPATIAL:Ki=Ki.then(function(){return nk(j,j.i,Z,d,o,!0)}).then(function(fd){fd.forEach(qk.bind(null,e,_e))});break;case nh.OVERLAY:Ki=Ki.then(function(){return nk(j,j.u,Z,d,o,!0)}).then(function(fd){fd.forEach(qk.bind(null,e,_e))})}_u<<=1}Ki.then(function(){return w(_e)})},N.prototype.o=function(){N.l.o.call(this),this.g.ka()};var uk={PENDING:0,ACTIVE:1,DONE:2};function vk(e,o){var d;if(o=o||{},!C(e,Element))throw new D(vk,0,e);var v=e.ownerDocument.createElement("div");this.P=e,vk.l.constructor.call(this),this.padding=new wk(0,0,0,0),this.center=new G(0,0),this.margin=0,this.element=v,v.style.zIndex=0,v.style.height=v.style.width="100%",v.style.direction="ltr",v.style.position="relative"===e.style.position?"absolute":"relative",this.resize(),e.appendChild(v),(d=o.padding)!==B&&this.gi(d.top,d.right,d.bottom,d.left),this.bi((d=o.margin)!==B?d:0)}function xk(e){var o=e.padding;e.center.set((e.width+o.left-o.right)/2<<0,(e.height+o.top-o.bottom)/2<<0)}function yk(e,o,d,v,w,j){var Z;for(Z=[];v<=w;v++)Z=Z.concat(zk(e,d,v));for(vj.call(this,j,e=Z.length),this.m=d=[],this.g=A(this.g,this),this.f=A(this.f,this),this.O(1);e--;)d.push(Ak(o,(j=Z[e])[0],j[1],j[2],this.g,this.f))}function Bk(e,o){var d=this;if(!Da(o))throw new D(Ck,1,o);if(!Da(e.next||Da(e.cycle)))throw new D(Bk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=e,this.i=o,this.j=function(){Dk(d)},this.a=null,this.f=function(){d.a||(d.a=x.setTimeout(d.j,1))}}function Dk(e){var o=e.c,d=0,v=e.g;for(v.a(),e.a=null;d<o.length;){var w=o[d];w.Nj?o.splice(d,1):d++}for(;w=v.next(e.b,e.c);)w.cancelled?w.done(null,"cancelled"):(o.push(w),e.i(w,w.data))}function Fk(){Ek(this,null,null,null)}function Ek(e,o,d,v){return e.data=o,e.cancelled=!1,e.Nj=!1,e.b=d,e.c=v,e.a=null,e}function Gk(){}t("H.map.render.RenderState",uk),u(vk,F),t("H.map.ViewPort",vk),vk.prototype.A={xa:"update",ge:"sync"},vk.prototype.bi=function(e){if(this.margin!==+e){if(E(this.margin=+e))throw new D(this.bi,0,e);xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setMargin=vk.prototype.bi,vk.prototype.gi=function(e,o,d,v){var w=this.padding;if(w.top!==e||w.right!==o||w.bottom!==d||w.left!==v){if(E(e+o+d+v))throw new D(this.gi);w.top=e,w.right=o,w.bottom=d,w.left=v,xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setPadding=vk.prototype.gi,vk.prototype.resize=function(){var e=this.P.offsetWidth,o=this.P.offsetHeight;(this.width!==e||this.height!==o)&&(this.a=new Ui(this.width,this.height),this.width=e,this.height=o,xk(this),this.dispatchEvent(this.A.xa))},vk.prototype.resize=vk.prototype.resize,vk.prototype.Va=function(e){this.dispatchEvent(new bj(this.A.ge,this.a,e,cj.SIZE))},vk.prototype.synchronize=vk.prototype.Va,vk.prototype.o=function(){this.P.removeChild(this.element),delete this.P,delete this.element,vk.l.o.call(this)},vk.prototype.ec=Oc,vk.prototype.startInteraction=vk.prototype.ec,vk.prototype.Vb=Oc,vk.prototype.interaction=vk.prototype.Vb,vk.prototype.ob=Oc,vk.prototype.endInteraction=vk.prototype.ob,u(yk,vj),yk.prototype.g=function(){xj(this,2)},yk.prototype.f=function(){xj(this,4)},yk.prototype.ie=function(){for(var e=this.m,o=e.length;o--;)e[o].cancel();delete this.m},t("H.util.AsyncQueue",Bk),Bk.prototype.push=function(e,o){if(!Da(o))throw new D(this.push,1,o);return e=Ek(new Fk,e,this.f,o),this.b.push(e),this.f(),e},Bk.prototype.push=Bk.prototype.push,Bk.Task=Fk,Fk.prototype.done=function(e,o){this.Nj=!0,this.b(),this.c(this,e,o)},Fk.prototype.done=Fk.prototype.done,Fk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Fk.prototype.cancel=Fk.prototype.cancel,Fk.prototype.Xn=function(e){return this.a=e,this},Fk.prototype.setCancelFn=Fk.prototype.Xn,Bk.Mode=Gk,Gk.prototype.next=function(){},Gk.prototype.a=function(){};var Hk,Ik=function(){function e(){}for(var o,d,v,w=sc("o ms moz webkit "),j=5;j--&&!o;)o=(d=x[(o=w[j])+(o?"R":"r")+"equestAnimationFrame"])&&!E(d.call(window,e))&&(v=x[o+(o?"C":"c")+"ancelAnimationFrame"]);return Hk=o?function(Z){return d.call(x,Z)}:function(Z){return x.setTimeout(Z,25)},o?function(Z){return v.call(x,Z)}:function(Z){return x.clearTimeout(Z)}}(),Jk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Kk(e,o){Kk.l.constructor.call(this,new Lk(e),o)}function Lk(e){if(isNaN(e)||0>e)throw new D(Kk,1,'Argument "maxTime" must be a positive number');this.c=e,this.b=Jk()}function Mk(e){if(vc(this,Mk),Mk.l.constructor.call(this,e),e&&"tileSize"in e){var o=Cd(+e.tileSize)/Md;if(isNaN(o)||o%1||0>o||30<o)throw new D(Mk,0,"tileSize: "+e.tileSize);this.tileSize=+e.tileSize}}function Nk(e,o){return Wd(e)-8-yd(Wd(o))}function Ok(){}function Pk(e,o,d){if(this.g=[],o&&this.Wd(o),d&&!Da(d))throw new D(Pk,2,d);this.b=0,this.filter=d,this.a={},this.f=this.c=null,this.di(e)}function Rk(e,o){return o&&(e.c=Sk(e,o,e.c)),o}function Tk(e){for(;e.b>e.i&&e.f;)Uk(e,e.f,!0)}function Sk(e,o,d){return d!==o&&((o.Yb||o.Tc)&&Uk(e,o,!1),(o.Yb=d)&&(o.Tc=d.Tc,d.Tc=o),o.Tc||(e.c=o),o.Yb||(e.f=o),e.b+=o.size),o}function Uk(e,o,d){var v=o.Tc,w=o.Yb;(v||w||o==e.c&&o==e.f)&&(v?v.Yb=w:e.c=w,w?w.Tc=v:e.f=v,e.b-=o.size,d&&(delete e.a[o.id],Qk(e,o))),o.Yb=o.Tc=null}function Qk(e,o){for(var d=e.g.length;d--;)e.g[d].call(e,o.id,o.data,o.size)}function Vk(e,o,d,v){this.key="",this.x=e,this.y=o,this.z=d,this.data=v,this.valid=!0}function Wk(e,o,d,v){return(e-=d)*e+(o-=v)*o}function Xk(e,o,d){return Yk(e,o*o,d||0,0,e.length-1)}function Yk(e,o,d,v,w){var j=0,Z=v,_e=e[v].x,Ki=e[v].y,_u=e[w].x,fd=e[w].y,iy=v+1,oy=Wk(_e,Ki,_u,fd);if(oy)for(;iy<w;){var dy=e[iy++],_y=dy.x,Ay=((_y-_e)*(_u-_e)+((dy=dy.y)-Ki)*(fd-Ki))/oy;(_y=0>Ay?Wk(_y,dy,_e,Ki):1<Ay?Wk(_y,dy,_u,fd):Wk(_y,dy,_e+Ay*(_u-_e),Ki+Ay*(fd-Ki)))>j&&(j=_y,Z=iy-1)}else for(;iy<w;)(_y=Wk(_y=(dy=e[iy++]).x,dy=dy.y,_e,Ki))>j&&(j=_y,Z=iy-1);return j>=o||0<d&&Z-v?(--d,1<Z-v?(v=Yk(e,o,d,v,Z)).splice(v.length-1,1):v=[e[v]],v=v.concat(1<w-Z?Yk(e,o,d,Z,w):e.slice(Z,w+1))):v=[e[v],e[w]],v}function Zk(e,o,d,v,w,j,Z,_e){Zk.l.constructor.call(this,o,d,v,null),this.key=e,this.R=_e,this.a=w,this.g=j,this.i={},this.zL=Z,this.s=Ad(wh.MAX_LINE_WIDTH/2*this.g+1)}function $k(e){return e.R.getInvalidations(nh.SPATIAL)}function al(e){var j,o=$k(e),d=o.a,v=e.c,w=v===d;if(!(w||o.Kj(v)||o.jh(v))){w=e.f;var Z=e.i;if(o.Ff(v))for(j=w.length;j--;){var _e=w[j];if(_e.Db().Ff(v)){w.splice(j,1);var Ki=Ki||bl(e,_e.Za())}}if(o.kh(v)){for(j=w.length;j--;)if((_e=w[j]).Db().kh(v)){var _u=1;if((_e=Z[_e.Za()])&&_e.a){Ki=1;break}}_u&&w.sort(cl)}if(!Ki&&o.Rd(v))for(j=w.length;j--;)if(w[j].Db().Rd(v)){var fd=1;break}e.u!==v||fd||(e.u=d,e.b!==v||Ki||(e.b=d)),e.c=d,w=!0}return w}function dl(e,o){this.b=e,this.a=o}function bl(e,o){var d=(e=e.i)[o];if(d)return delete e[o],d.a}function el(e){var w,o=$k(e),d=e.c,v=e.f;if(!al(e)){for(w=v.length;w--;){var j=v[w],Z=j.Db();(Z.Ff(d)||Z.jh(d))&&bl(e,j.Za())}e.f=e.R.requestSpatialsByTile(e,!1,!1).sort(cl),e.c=o.a}}function cl(e,o){return oh(e.Oc(),o.Oc(),!1)}u(Kk,Bk),t("H.util.SequentialQueue",Kk),Lk.prototype.next=function(e){return e.length&&Jk()-this.b<this.c?e=e.shift():null},Lk.prototype.a=function(){this.b=Jk()},u(Mk,P),t("H.map.provider.TileProvider",Mk),Mk.getZoomLevelOffset=Nk,Mk.prototype.requestTile=Mk.prototype.Oa,Mk.prototype.cancelTile=Mk.prototype.fc,Mk.prototype.cancelTileByKey=Mk.prototype.je,Mk.prototype.createTileInternal=Mk.prototype.Sb,Mk.prototype.gd=function(e,o,d){return this.uri.concat("_",e,"_",o,"_",d)},Mk.prototype.getTileKey=Mk.prototype.gd,Mk.prototype.af=256,Mk.prototype.tileSize=Mk.prototype.af,t("H.util.ICache",Ok),Ok.prototype.add=function(){},Ok.prototype.add=Ok.prototype.add,Ok.prototype.get=function(){},Ok.prototype.get=Ok.prototype.get,Ok.prototype.nf=function(){},Ok.prototype.drop=Ok.prototype.nf,Ok.prototype.forEach=function(){},Ok.prototype.forEach=Ok.prototype.forEach,Ok.prototype.ka=function(){},Ok.prototype.removeAll=Ok.prototype.ka,Ok.prototype.Wd=function(){},Ok.prototype.registerOnDrop=Ok.prototype.Wd,Ok.prototype.Gg=function(){},Ok.prototype.deRegisterOnDrop=Ok.prototype.Gg,t("H.util.Cache",Pk),Pk.prototype.add=function(e,o,d){var v,w;if(!Dc(d=+d)||0>d)throw new D(this.add,2,d);return e=String(e),(w=!this.filter||this.filter(e,o,d))&&((v=this.a[e])?(v.data!==o&&Qk(this,v),this.b+=d-v.size,v.size=d,v.data=o,Rk(this,v)):this.a[e]=Sk(this,{id:e,data:o,size:d,Yb:null,Tc:null},this.c),Tk(this)),w},Pk.prototype.add=Pk.prototype.add,Pk.prototype.Wd=function(e){if(!Da(e))throw new D(this.Wd,0,e);this.g.push(e)},Pk.prototype.registerOnDrop=Pk.prototype.Wd,Pk.prototype.Gg=function(e){this.g=this.g.filter(function(o){return o!==e})},Pk.prototype.deRegisterOnDrop=Pk.prototype.Gg,Pk.prototype.get=function(e,o){return(e=o?this.a[e]:Rk(this,this.a[e]))&&e.data},Pk.prototype.get=Pk.prototype.get,Pk.prototype.nf=function(e){var o;(o=this.a[e])&&Uk(this,o,!0)},Pk.prototype.drop=Pk.prototype.nf,Pk.prototype.forEach=function(e,o,d){var v;for(v in this.a){var w=this.a[v];(!d||d(v,w.data,w.size))&&e.call(o,v,w.data,w.size)}},Pk.prototype.forEach=Pk.prototype.forEach,Pk.prototype.ka=function(e){var o;for(o in this.a){var d=this.a[o];(!e||e(o,d.data,d.size))&&Uk(this,this.a[o],!0)}},Pk.prototype.removeAll=Pk.prototype.ka,Pk.prototype.di=function(e){if(!(0<+e))throw new D(Pk.prototype.di,0,e);return this.i=+e,Tk(this),this},Pk.prototype.setMaxSize=Pk.prototype.di,Pk.prototype.qm=function(){return this.i},Pk.prototype.getMaxSize=Pk.prototype.qm,Pk.prototype.Rl=function(){return this.b},Pk.prototype.getCurrentSize=Pk.prototype.Rl,t("H.map.provider.Tile",Vk),t("H.math.simplifyDP",Xk),u(Zk,Vk),t("H.map.provider.SpatialTile",Zk),Zk.prototype.c=Vd,Zk.prototype.u=Vd,Zk.prototype.b=Vd,Zk.prototype.Qd=function(){var e=$k(this),o=e.a,d=this.b,v=d===o;return v||(this.R.ua&&!e.Rd(d)?v=!0:al(this)&&(v=this.b===o)),v},Zk.prototype.isCanvasValid=Zk.prototype.Qd,Object.defineProperty(Zk.prototype,"valid",{get:function(){return this.Qd()},set:jd,configurable:!0}),Zk.prototype.f=hf,Zk.prototype.Na=function(){return this.f},Zk.prototype.getObjects=Zk.prototype.Na,Zk.prototype.Mm=function(){return this.a},Zk.prototype.getTileSize=Zk.prototype.Mm;var fl={};function hl(e,o,d,v,w,j,Z,_e,Ki){var _u=e.a,fd=-Z;if(Z=j+Z,_e=_e||0,Ki===B&&(Ki=_u.length),w&&e===Gh)o.fillRect(0,0,j,j);else if(Ki>_e){for(o.beginPath(),j=_e;j<Ki;j++){var iy=_u[j],oy=iy.length;if(iy===Nh)o.moveTo(fd,fd),o.lineTo(fd,Z),o.lineTo(Z,Z),o.lineTo(Z,fd);else{var dy=iy[0];for(o.moveTo(dy.x,dy.y),_e=1;_e<oy;_e++)o.lineTo((dy=iy[_e]).x,dy.y)}d&&o.closePath()}d&&w&&o.fill(e.b!==Ud?"evenodd":"nonzero"),v&&o.stroke()}}function gl(e,o,d){var v;e.strokeStyle=o.strokeColor,e.lineWidth=o.lineWidth*d,e.lineCap=o.lineCap,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.setLineDash&&(v=o.lineDash)!==hf&&(e.setLineDash(v),e.lineDashOffset=o.lineDashOffset)}function il(e,o){e.fillStyle=o.fillColor}function jl(e,o,d,v,w,j){var Z=w*v.width/2,_e=(w=w*v.length/2)/2;v=2*w*v.frequency;var Ki=Dd(Ed(w,2)+Ed(Z,2));e=new wk(Ki,Ki,e=e.a-Ki,e);var _u,fd,iy,oy,dy,_y,Ay,ky=Nd/2;for(j=j||0,Ki=(d=d.a).length;Ki-- >j;){var Xy=0,zy=d[Ki];if(fd=_u=zy.length){var h0=zy;for(fd=h0.length,iy=0;--fd;)iy+=h0[fd].Sa(h0[fd-1]);fd=(h0=iy)>=v}if(fd)for(iy=(fd=h0/((fd=wd(zd(h0/v),1e3))+1))/2;--_u;){for(oy=(dy=zy[_u]).Sa(_y=zy[_u-1]);iy<=Xy+oy;){var Gy=dy.x+(_y.x-dy.x)*(Ay=(iy-Xy)/oy);e.kf(Gy,Ay=dy.y+(_y.y-dy.y)*Ay)&&(o.save(),o.translate(Gy,Ay),o.rotate(-Kd((_y.y-dy.y)/(dy.x-_y.x))+(dy.x<_y.x?ky:-ky)),o.beginPath(),o.moveTo(-Z,-w),o.lineTo(0,w),o.lineTo(Z,-w),o.lineTo(0,-_e),o.closePath(),o.fill(),o.restore()),iy+=fd}Xy+=oy}}}Zk.prototype.Ce=function(){var e=this.a+"_"+this.g,o=fl[e];if(!o){var d=this.a-(o=-this.s);o=fl[e]=new wk(o,o,d,d)}return o},Zk.prototype.getPxClipRect=Zk.prototype.Ce,Zk.prototype.wf=function(){var e=this.Wa;if(!e){var o=this.yf();e=0;var d=this.a;this.z&&(d-=e+=this.Ce().top),e=this.Wa=sg(o.Ie(new G(e,e)),o.Ie(new G(d,d)))}return e},Zk.prototype.getGeoClipRect=Zk.prototype.wf,Zk.prototype.yf=function(){var e=this.v;if(!e){var o=this.a;(e=this.v=new lj(B,o)).Ja(this.z),e.x=this.x*o,e.y=this.y*o}return e},Zk.prototype.getPxProj=Zk.prototype.yf,Zk.prototype.Ta=function(){return this.g},Zk.prototype.getPixelRatio=Zk.prototype.Ta,Zk.prototype.Sf=function(){var e=this.data;return e&&(this.data=null,this.b=Vd),e},Zk.prototype.releaseCanvas=Zk.prototype.Sf,Zk.prototype.Tf=function(){this.i={},delete this.f,this.c=Vd},Zk.prototype.releaseData=Zk.prototype.Tf,Zk.prototype.T=function(e){var d,v,w,j,o=e.getContext("2d"),Z=0;if(el(this),this.b<this.c){var _e=this.f;if(d=_e.length){e.width=e.height=this.a,o.clearRect(0,0,this.a,this.a);var Ki=this.i;for(v=0;v<d;v++){var _u=_e[v],fd=_u.Za();if(j=(w=Ki[fd])?w.b:_u.getGeometriesForTile(this)){if(w)_u.Db().Rd(this.b)&&(w.a=Fh(_u,j)),w=w.a;else{w=Fh(_u,j);for(var iy,oy=j,dy=_u.g?2:0,_y=oy.length;_y--;){var Ay=oy[_y];if(Ay!==Gh){var ky=Ay.a;for(iy=ky.length;iy--;)4<(Ay=ky[iy]).length&&(ky[iy]=Xk(Ay,.6,dy))}}this.i[fd]=new dl(j,w)}if(w){for(o.save(),oy=_u.g?this.B:this.S,fd=0;fd<j.length;fd++)oy.call(this,_u,j[fd],_u.na(),o);if(j=_u.getLabels(this))for(_u=o,fd=j.length;fd--;)for(_u.font=(oy=(dy=j[fd]).size)+"px "+dy.font,_u.fillStyle=dy.color,_u.textAlign="center",_u.translate(dy.x,dy.y),_u.rotate(dy.angle),oy=dy.lineHeight||1.375*oy,dy=(_y=dy.lines).length;dy--;)_u.fillText(_y[dy],0,dy*oy);o.restore()}Z|=+w}}}this.data=Z?e:null,this.u=this.b=this.c}else this.data&&(Z=1);return 0<Z},Zk.prototype.render=Zk.prototype.T,Zk.prototype.data=null,Zk.prototype.S=function(e,o,d,v){var w;d.b&&(gl(v,d,this.g),hl(o,v,!1,!0,!1,this.a,this.s)),d.a&&(w=e.c)&&w.Gb&&(il(v,w),jl(this,v,o,w,d.lineWidth))},Zk.prototype.B=function(e,o,d,v){var Z,w=d.Gb,j=d.b,_e=this.a,Ki=this.s;if(o===Gh)w&&(il(v,d),v.fillRect(0,0,_e,_e));else{if(j&&gl(v,d,this.g),d.a&&(Z=e.c)){var _u=d.lineWidth;Z.Gb||(Z=null)}(e=o.c)===Ud?((j||w)&&(il(v,d),hl(o,v,!0,j,w,_e,this.s)),Z&&(il(v,Z),jl(this,v,o,Z,_u,0))):(w&&(il(v,d),hl(o,v,!0,!1,w,_e,Ki,0,e)),j&&hl(o,v,!1,j,!1,_e,Ki,e),Z&&(il(v,Z),jl(this,v,o,Z,_u,e)))}};var kl=[];function ll(e,o){var d;ll.l.constructor.call(this,o),this.v=e,this.S=e=o.pixelRatio,this.tileSize=d=1<<yd(Wd((o.tileSize||256)*e)),this.I=Nk(d,e),this.rh=A(this.rh,this),this.Hh=A(this.Hh,this),this.sh=A(this.sh,this),this.qh=A(this.qh,this),this.s=A(this.s,this),this.v.addEventListener(P.prototype.A.xa,this.s,!1,this),this.g=[],this.i=new Pk(o.tileCacheSize||256,this.rh),this.m=new Pk(o.dataCacheSize||512,this.Hh),this.B=new Kk(20,this.sh),this.b={},this.u=Jk()}function wk(e,o,d,v){this.left=+e,this.top=+o,this.right=+d,this.bottom=+v}function ml(e,o){return new wk(e.x,e.y,o.x,o.y)}function nl(e,o){if(o=o||{},!e)throw new D(nl,0,e);this.tileSize=e.tileSize,this.a={},oj.call(this,{min:void 0!==o.min?o.min:e.min,max:void 0!==o.max?o.max:e.max,minWorldSize:this.tileSize,projection:o.vk,dark:o.dark,provider:e})}function ol(e,o,d,v,w){v=zd(v);var j=Ed(2,v),Z=o.left,_e=o.top,Ki=o.right;d=Ki+(d?j+(Ki===o.left?0:1):1);var _u=o.bottom,fd=[];if(w)var iy=Z+(1+Ki-Z)/2+w.x/e.tileSize-.5,oy=_e+(1+_u-_e)/2+w.y/e.tileSize-.5;for(;Z<d;){for(_e=o.top;_e<=_u;)fd.push([e=Z%j,_e,v,w?Bd(iy-Z)+Bd(oy-_e):0]),_e++;Z++}return fd}function zk(e,o,d){d=zd(d),e.pixelProjection.Ja(d),o=e.ue(o);var v=e.Od(o,d);return ol(e,v,o.left>o.right,d)}function pl(e,o){return o[3]-e[3]}function ql(e,o){nl.call(this,e,o)}function rl(e,o){(o=o?Va(o):{}).tileSize=o.tileSize||256,o.pixelRatio=o.pixelRatio||Te(),o.max=24,this.a=new ll(e,o),this.b=new ql(this.a),o.minWorldSize=this.a.tileSize,o.provider=e,rl.l.constructor.call(this,o),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.xa,this.c),e.addEventListener(e.A.xa,this.c)}Zk.prototype.Ba=function(e,o,d){for(var j,Z,_e,Ki,_u,fd,oy,v=this.f,w=v.length,iy=hf,dy=this.g;w--;)if((Z=v[w]).oc(!0)&&(_e=this.i[Z.Za()])&&(Ki=_e.b)){for(fd="none"!==(j=Z.na()).fillColor&&Z.g,oy="none"===j.strokeColor?0:j.lineWidth*dy,j=Ki.length;j--;){var _y;if(_u=Ki[j],!(_y=fd&&_u===Gh)&&(_y=fd||oy)){var Ay;_y=e;var ky=o,Xy=fd,zy=oy,h0=_u.b,Gy=_u.c,O0=Gy!==Ud,N0=_u.a,s1=N0.length,S0=0,D1=0,cx=!1;for(_u=0;_u<s1;_u++){var N_=N0[_u],I_=_u>=Gy,iE=!I_&&_u>=h0;if(N_===Nh&&Xy)iE?S0++:D1++;else{var W_=N_.length;for(kl.length=2*W_,Ay=0;Ay<W_;Ay++){var LE=N_[Ay];kl[2*Ay]=LE.x,kl[2*Ay+1]=LE.y}if(Ay=Xy&&!I_,I_=O0&&!I_?0:zy,Ay||I_){if((I_=ce(_y,ky,kl,I_,Ay))===be.EDGE||I_===be.VERTEX){cx=!0;break}if(I_===be.SURFACE)if(iE)S0++;else if(D1++,h0===Ud)break}}}_y=cx||0<D1&&!(S0%2)}if(_y){iy===hf&&(iy=[]),iy.push(Z);break}}if(d&&iy.length)break}return iy},u(ll,Mk),ll.prototype.s=function(e){(e=e.target).type===nh.SPATIAL&&this.Ra(e)},ll.prototype.Oa=function(e,o,d,v){var j,w=this.getTileKey(e,o,d);if(j=this.i.get(w,v)){if(v||j.Qd())return j;v||this.i.nf(w)}if((j=this.m.get(w,v))&&(v||al(j)))return e=this.g.pop()||document.createElement("canvas"),j.T(e)||this.g.push(e),this.i.add(w,j,1),j;v||((j=this.b[w])?j.count++:((j=this.B.push([w,e,o,d],this.qh)).count=1,this.b[w]=j))},ll.prototype.requestTile=ll.prototype.Oa,ll.prototype.Sb=function(){},ll.prototype.createTileInternal=ll.prototype.Sb,ll.prototype.fc=function(e,o,d){this.je(this.getTileKey(e,o,d))},ll.prototype.cancelTile=ll.prototype.fc,ll.prototype.je=function(e){var o;(o=this.b[e])&&(o.count--,o.count||(o.cancel(),delete this.b[e]))},ll.prototype.cancelTileByKey=ll.prototype.je,p=ll.prototype,p.sh=function(e,o){var d=o[0],v=o[1],w=o[2],j=o[3];v=(d=this.i.get(d)||new Zk(d,v,w,j,this.tileSize,this.S,j+this.I,this.v)).data||this.g.pop()||document.createElement("canvas"),d.T(v)||this.g.push(v),o.push(d),e.done(d)},p.qh=function(e,o){e=e.data[0],o&&this.i.add(e,o,1),delete this.b[e],this.Ra()},p.rh=function(e,o){o.data&&this.g.push(o.Sf()),this.m.add(e,o,1)},p.Hh=function(e,o){o.Tf()},p.o=function(){for(var e in this.b)this.b[e].cancel();this.i.ka(),this.m.ka(),this.g.length=0,ll.l.o.call(this)},t("H.math.Rect",wk),wk.prototype.set=wk,wk.prototype.set=wk.prototype.set,wk.prototype.Fb=function(){return this.b||(this.b=new G(this.left,this.top))},wk.prototype.getTopLeft=wk.prototype.Fb,wk.prototype.Bb=function(){return this.a||(this.a=new G(this.right,this.bottom))},wk.prototype.getBottomRight=wk.prototype.Bb,wk.prototype.kf=function(e,o){return this.left<=e&&this.right>=e&&this.top<=o&&this.bottom>=o},wk.prototype.containsXY=wk.prototype.kf,wk.fromPoints=ml,wk.prototype.clone=function(){return new wk(this.left,this.top,this.right,this.bottom)},wk.prototype.clone=wk.prototype.clone,u(nl,oj),t("H.map.layer.BaseTileLayer",nl),nl.prototype.ue=function(e,o){var d=this.pixelProjection;if(!C(e,K))throw new D(this.ue,0,e);if(!E(o)){var v=d.Cj();d.Ja(o)}return e=ml(d.cb(e.Fb()),d.cb(e.Bb())),!E(v)&&d.Ja(v),e},nl.prototype.geoRectToRect=nl.prototype.ue,nl.prototype.Od=function(e,o){var d=Ed(2,zd(o)),v=this.tileSize;if(!C(e,wk))throw new D(this.Od,0,e);if(E(o=+o))throw new D(this.Od,1,o);(o=zd(e.left/v))===d&&--o;var w=zd(e.right/v);return w===d&&--w,new wk(o,Zd(zd(e.top/v),0,d-1),w,Zd(zd(e.bottom/v),0,d-1))},nl.prototype.getTileBounds=nl.prototype.Od,nl.prototype.Oa=function(e,o,d,v){return this.ja.requestTile(e,o,d,v)},nl.prototype.requestTile=nl.prototype.Oa,nl.prototype.fc=function(e,o,d){this.ja.cancelTile(e,o,d)},nl.prototype.cancelTile=nl.prototype.fc,nl.prototype.la=function(e,o){return this.ja.getCopyrights?this.ja.getCopyrights(e,o):null},nl.prototype.getCopyrights=nl.prototype.la,nl.prototype.Be=function(e,o,d,v,w,j){var Z,Ki,_e=[],_u=this.ja;j=null!=j?j:"__default__";var fd=_u.requestTile;if(!C(e,wk))throw new D(this.Be,0,e);if(E(d=+d))throw new D(this.Be,1,d);if(v||(Z={}),e=(o=ol(this,e,o,d,w)).length)for(v||o.sort(pl),d=e;d--;)w=o[d],v||(Z[_u.gd.apply(_u,w)]=!0),w[3]=+v,(Ki=fd.apply(_u,w))&&_e.push(Ki);if(!v){var iy;for(iy in v=Z,Z=this.a[j]||{})Z.hasOwnProperty(iy)&&Z[iy]&&!v[iy]&&this.ja.cancelTileByKey(iy);this.a[j]=v}return{total:e,tiles:_e}},nl.prototype.getProviderTiles=nl.prototype.Be,u(ql,nl),t("H.map.layer.TileLayer",ql),ql.prototype.pd=function(e,o,d,v,w){if(!C(e,K))throw new D(this.pd,0,e);if(E(o=+o))throw new D(this.pd,1,o);o=zd(o),this.pixelProjection.Ja(o),e=this.ue(e);var j=this.Od(e,o);return this.Be(j,e.left>e.right,o,d,v,w)},ql.prototype.requestTiles=ql.prototype.pd,u(rl,oj),t("H.map.layer.ObjectLayer",rl),rl.prototype.c=function(e){e.currentTarget!==this.a&&e.target.type===nh.SPATIAL||this.Ra()};var sl={markers:hf,total:0};rl.prototype.wc=function(e,o,d){var w,v=this.ja;return v.providesMarkers()&&(w=v.requestMarkers(e,o,!0,d)).length?{markers:w,total:w.length}:sl},rl.prototype.requestMarkers=rl.prototype.wc,rl.prototype.vc=function(e,o,d){var w,v=this.ja;return v.providesDomMarkers()&&(w=v.requestDomMarkers(e,o,!0,d)).length?{markers:w,total:w.length}:sl},rl.prototype.requestDomMarkers=rl.prototype.vc;var tl={tiles:hf,total:0};rl.prototype.pd=function(e,o,d,v){if(this.ja.providesSpatials()){var w=this.b.pd(e,o,d,v);d||(d=this.a,33<(w=Jk())-d.u&&(Dk(d.B),d.u=w),w=this.b.pd(e,o,!0,v))}else w=tl;return w},rl.prototype.requestTiles=rl.prototype.pd,rl.prototype.Oa=function(e,o,d,v){return this.b.Oa(e,o,d,v)},rl.prototype.requestTile=rl.prototype.Oa,rl.prototype.fc=function(e,o,d){this.b.fc(e,o,d)},rl.prototype.cancelTile=rl.prototype.fc;var ul={overlays:hf,total:0};function R(e){vc(this,R),R.l.constructor.call(this,e),this.Pb=new vl,this.Rb=A(this.Rb,this),this.S=wl,this.createTileInternal=this.Sb.bind(this)}rl.prototype.od=function(e,o,d){var v=this.ja,w=ul;return v.providesOverlays&&v.providesOverlays()&&(o=(e=v.requestOverlays(e,o,!0,d)).length)&&(w={overlays:e,total:o}),w},rl.prototype.requestOverlays=rl.prototype.od,rl.prototype.o=function(){this.a.C(),this.b.C(),this.ja.dispose(),rl.l.o.call(this)},u(R,Mk),t("H.map.provider.RemoteTileProvider",R),R.prototype.Ed=function(){return 1},R.prototype.getEntryWeight=R.prototype.Ed;var wl=new Pk(65536),xl={},yl={};function Ak(e,o,d,v,w,j){return e.requestInternal(o,d,v=~~v,function(Z,_e){e.g().put(e.gd(o,d,v),{raw:_e&&_e.raw||Z,timestamp:x.Date.now()},w,j)},j,0)}function Al(e){delete xl[e],delete yl[e]}function zl(e){for(var o in xl)e.Rb(o)&&e.cancelTileByKey(o)}R.prototype.Cb=function(){return this.S},R.prototype.getCache=R.prototype.Cb,R.prototype.m=ba(3),R.prototype.Rb=function(e){var o=this.uri;return!e.indexOf(o)&&"_"===e.charAt(o.length)},R.prototype.cacheFilter=R.prototype.Rb,R.prototype.oa=function(e,o){o.valid=!1},R.prototype.reload=function(e){var o=this.getCache();e?o.ka(this.Rb):o.forEach(this.oa,this,this.Rb),zl(this),this.Ra(this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.s=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.g=function(){return this.Pb},R.prototype.ca=function(e,o){o(e)},R.prototype.requestInternal=R.prototype.J,R.prototype.Oa=function(e,o,d,v){var w=this,j=this.getCache();if(E(e=+e))throw new D(this.Oa,0,e);if(E(o=+o))throw new D(this.Oa,0,o);if(E(d=+d))throw new D(this.Oa,0,d);var Z=this.getTileKey(e,o,d=~~d);return(j=j.get(Z))&&j.valid||v||xl[Z]||(j=B,this.requestTileAsPromise(e,o,d,v).then(function(_e){w.Ra(_e)},jd)),j},R.prototype.requestTile=R.prototype.Oa,R.prototype.Ck=function(e,o,d,v){var _e,Ki,w=this,j=this.getCache(),Z=this.getTileKey(e,o,d),_u=this.g();return yl[Z]?yl[Z]:(yl[Z]=_e=new Pb(function(fd,iy){function oy(dy){var Ay,_y=0,ky=function(Xy,zy){(Ay=w.createTileInternal(e,o,d,Xy,zy)).key=Z,j.add(Z,Ay,w.Ed(Xy)),fd(Ay),Al(Z)};dy&&(_y=x.Date.now()-dy.timestamp),dy&&_y<w.MAX_STORE_TIME?w.ca(dy.raw,ky):(0<_y&&_u.remove(Z),(Ay=j.get(Z))&&Ay.valid||v?fd(Ay||null):xl[Z]=w.requestInternal(e,o,d,ky,iy))}Ki=_u.get(Z,oy,oy)}),xl[Z]||(xl[Z]=Ki),_e.then(function(){Al(Z)},function(){Al(Z)}),_e)},R.prototype.requestTileAsPromise=R.prototype.Ck,R.prototype.Bk=function(e,o){var d=this,v=e.id,w=e.tile.coords;return new Pb(function(j,Z){d.Ck(w.x,w.y,w.z,o).then(function(_e){for(var fd,Ki=y,_u=(_e=_e.Na?_e.Na():_e.data).length;_u--;)if((fd=_e[_u]).Za()===v){Ki=fd;break}j(Ki)},Z)})},R.prototype.requestObjectAsPromise=R.prototype.Bk;var Bl={cancel:jd};function vl(){}function Ck(e){if(Ck.l.constructor.call(this,e),e&&(this.v={crossOrigin:e.crossOrigin||"anonymous",headers:e.headers||{}},this.u=e.getURL),!Da(this.u))throw new D(Ck,0,"getURL");if(jk(this,e.opacity),this.b=x.URL||x.webkitURL,!(e="anonymous"===(e=this.v.crossOrigin)||"use-credentials"===e)){e=this.u(0,0,0);var o=window.location,d=document.createElement("a");d.href=e,e=d.hostname===o.hostname&&d.port===o.port&&d.protocol===o.protocol}(this.I=e&&!!uf.arraybuffer&&!!this.b)&&this.Cb().Wd(A(this.X,this))}R.prototype.Sb=function(e,o,d,v){return new Vk(e,o,d,v)},R.prototype.createTileInternal=R.prototype.Sb,R.prototype.je=function(e){var o=xl[e];o&&(o.cancel(),Al(e))},R.prototype.cancelTileByKey=R.prototype.je,R.prototype.fc=function(e,o,d){this.cancelTileByKey(this.getTileKey(e,o,d))},R.prototype.cancelTile=R.prototype.fc,R.prototype.o=function(){R.l.o.call(this),this.getCache().ka(this.Rb),zl(this)},R.NullStorage=vl,vl.prototype.get=function(e,o){return o(),Bl},vl.prototype.get=vl.prototype.get,vl.prototype.put=function(e,o,d){d&&d()},vl.prototype.put=vl.prototype.put,vl.prototype.clear=function(e){e&&e()},vl.prototype.clear=vl.prototype.clear,vl.prototype.remove=function(e,o){o&&o()},vl.prototype.remove=vl.prototype.remove,u(Ck,R),t("H.map.provider.ImageTileProvider",Ck),Ck.prototype.ac=function(e){jk(this,e)},Ck.prototype.setOpacity=Ck.prototype.ac,Ck.prototype.Nc=function(){return this.f},Ck.prototype.getOpacity=Ck.prototype.Nc,Ck.prototype.Me=ff,Ck.prototype.providesRasters=Ck.prototype.Me,Ck.prototype.Ed=function(){return this.tileSize},Ck.prototype.getEntryWeight=Ck.prototype.Ed,Ck.prototype.J=function(e,o,d,v,w,j){var Ki,Z=this,_e=this.u(e,o,d);if(e=Bl,_e){var _u=x.setTimeout(function(){Z.I?(Ki=new tf("arraybuffer",_e,j,Z.v)).then(function(fd){return fd.blob()}).then(function(fd){var iy=new Image;iy.onload=A(v,null,iy,{raw:fd}),iy.onerror=A(w,null,"bad url");try{iy.src=Z.b.createObjectURL(fd)}catch(oy){}},w):(Ki=new tf("image",_e,j,Z.v)).then(v,w)},150);e={cancel:function(){Ki?Ki.cancel():x.clearTimeout(_u)}}}else v(null);return e},Ck.prototype.requestInternal=Ck.prototype.J,Ck.prototype.ca=function(e,o){var d=new Image;d.onload=function(){o(this)},d.src=this.b.createObjectURL(e)},Ck.prototype.X=function(e,o){(e=o.data)&&e instanceof HTMLImageElement&&this.b.revokeObjectURL(e.src)},t("H.util.events.listenOnce",Ee),t("H.util.events.dispatchEvent",function(e,o){return e.dispatchEvent(o)}),t("H.util.events.fireListeners",function(e,o,d,v){return ne(e)?e.dd(o,d,v):Ne(e,o,d,v)}),t("H.util.events.listen",De),t("H.util.events.unlisten",Le);var Cl=Oe;function Dl(e,o,d,v){var w=new wk(0,0,0,0);if(Dl.l.constructor.call(this),!e)throw new D(Dl,0,e);if(!o)throw new D(Dl,1,o);if(!d)throw new D(Dl,2,d);if("object"!=typeof v)throw new D(Dl,3,v+" is not an object");if("number"!=typeof v.pixelRatio)throw new D(Dl,3,v.pixelRatio+" is not a number");this.ma=v.pixelRatio,this.zoom=0,this.ab=Cd(this.ma)/Md,this.b=new lj,this.ua={1:w.clone(),2:w.clone(),4:w.clone()},this.m=new G(.5,.5),this.f=e,El(this,this.ma),this.ec=A(this.ec,this),this.Vb=A(this.Vb,this),this.ob=A(this.ob,this),e.startInteraction=this.ec,e.interaction=this.Vb,e.endInteraction=this.ob,e.addEventListener(e.A.xa,this.ca,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.td,this.relaunch=this.da,this.dispose=this.C,this.screenToGeo=this.Pa,this.geoToScreen=this.Aa,this.screenToLookAtData=this.$f,this.v=o,this.dc=A(this.dc,this),this.control=A(this.control,this),this.nb=A(this.nb,this),o.startControl=this.dc,o.control=this.control,o.endControl=this.nb,o.addEventListener(o.A.xa,this.yg,!1,this),this.c=d,this.Lf=A(this.Lf,this),this.De=A(this.De,this),this.Ee=A(this.Ee,this),this.Kf=A(this.Kf,this),d.addEventListener(oj.prototype.A.xa,this.Lf,!1,this),d.addEventListener(d.A.ce,this.De,!1,this),d.addEventListener(d.A.ee,this.Ee,!1,this),d.addEventListener(d.A.fe,this.Kf,!1,this)}function El(e,o){var d=e.f,v=d.width,w=d.height,j=d.padding,Z=j.top,_e=j.left,Ki=j.bottom,_u=-(v+_e-(j=j.right))/2<<0,fd=-(w+Z-Ki)/2<<0;(e=e.ua)[1].set((_u-(d=d.margin))*o,(fd-d)*o,((v+=_u)+d)*o,((w+=fd)+d)*o),e[2].set(_u*o,fd*o,v*o,w*o),e[4].set((_u+_e)*o,(fd+Z)*o,(v-j)*o,(w-Ki)*o)}function Gl(e,o){e.style.transition="opacity 1.5s",Ee(e,"transitionend",o,!1),e.style.opacity=0}Oe=function(e,o){var d,v,w=!0,j=o[o.currentTarget===o.target?"AT_TARGET":e.capture?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];return(!d||"pointerenter"!==(v=o.type)&&"pointerleave"!==v)&&(o.eventPhase=j,w=Cl(e,o),d&&e.src&&e.src.Eb&&null===e.src.Eb()&&delete o.eventPhase),w},u(Dl,F),t("H.map.render.RenderEngine",Dl),Dl.prototype.td=function(){},Dl.prototype.ca=function(){El(this,this.ma)},Dl.prototype.o=function(){var e=this.f,o=this.v,d=this.c;e.removeEventListener(e.A.xa,this.ca,!1,this),e.startInteraction===this.ec&&(e.startInteraction=vk.prototype.ec),e.interaction===this.Vb&&(e.interaction=vk.prototype.Vb),e.endInteraction===this.ob&&(e.endInteraction=vk.prototype.ob),o.removeEventListener(o.A.xa,this.yg,!1,this),o.startControl===this.dc&&(o.startControl=Fl.prototype.dc),o.control===this.control&&(o.control=Fl.prototype.control),o.endControl===this.nb&&(o.endControl=Fl.prototype.nb),d.removeEventListener(oj.prototype.A.xa,this.Lf,!1,this),d.removeEventListener(d.A.ce,this.De,!1,this),d.removeEventListener(d.A.ee,this.Ee,!1,this),d.removeEventListener(d.A.fe,this.Kf,!1,this)},Dl.prototype.Yh=function(e){this.og=e},Dl.prototype.setAnimationCallback=Dl.prototype.Yh,Dl.prototype.Th=function(){this.og=void 0},Dl.prototype.resetAnimationCallback=Dl.prototype.Th,Dl.prototype.control=function(){},Dl.prototype.capture=function(){return Zb(Error("not implemented"))};var Hl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Kl(e,o){return o.tilt=Ll(e,o.tilt),o.heading=Ml(e,o.heading),o.incline=e.getCapabilities().lookAt.incline.min,o}function Jl(e,o){var d=e.getCapabilities().lookAt.zoom;return Zd(o,xd(d.min,e.qg),wd(d.max,e.pg))}function Ll(e,o){return Zd(o,(e=e.getCapabilities().lookAt.tilt).min,e.max)}function Ml(e,o){return Zd((o%360+360)%360,(e=e.getCapabilities().lookAt.heading).min,e.max)}function Il(e,o,d){(d=d?o.addEventListener:o.removeEventListener).call(o,o.A.Ei,e.Jh,!1,e),d.call(o,o.A.Di,e.Jh,!1,e)}Dl.InteractionModifiers=Hl,p=Dl.prototype,p.A={Gi:"render"},p.Lf=function(e){this.ik(e),this.da()},p.De=function(e){this.Ge(e.idx,e.added)},p.Ee=function(e){this.Ih(e.idx,e.removed,e.type===this.c.A.fe)},p.Kf=function(e){e.removed&&this.Ee(e),this.De(e)},p.ik=jd,p.Ge=function(e,o){this.eh(e,o),0===e&&this.wb(),C(o,oj)&&Il(this,o,!0),this.Yd(),this.da()},p.wb=function(){var e=this.c.Ha();if(0<e.length){var o=e[0].max;this.qg=e[0].min,this.pg=o}else o=(e=this.getCapabilities().lookAt.zoom).max,this.qg=e.min,this.pg=o;(e=Jl(this,this.zoom))!==this.zoom&&(this.zoom=e,this.b.Ja(e),this.Va())},p.Va=function(e){this.S=this.eb(),e&&(this.S.position=e),this.S.zoom=this.zoom-this.ab,this.S.position.alt=0},p.Zk=0,p.heading=180,p.eb=function(){return Kl(this,{position:this.b.projection.Qf(this.m),zoom:this.zoom,tilt:this.Zk,heading:this.heading})},p.eh=jd,p.Ih=jd,p.Yn=function(e,o){this.B={before:e,after:o}},Dl.prototype.setOnRenderCallbacks=Dl.prototype.Yn;var Nl={P2D:0,WEBGL:1,HARP:2};Dl.EngineType=Nl;var Ol={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Pl(e){var o,d=this,v=x.H.gl;Pl.l.constructor.call(this),this.a=o=v.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Ql))),{viewport:e.viewport,container:e.gc,disableRenderLoop:!0,devicePixelRatio:e.devicePixelRatio,logLevel:"error"}),e.Hn&&o.subscribe({load:e.Hn}),o.subscribe({view_complete:function(){d.Vh=!0,e.kk()}});var w=o.requestRedraw;o.requestRedraw=function(){w.apply(o),e.kk()},this.Wh=A(this.Wh,this),this.Vf=A(this.Vf,this),this.f=0,this.c={},this.b={}}function Rl(e){var o;for(o in e=e.a.sources){var d=e[o];if(d.hasPendingCommands&&d.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Sl(e){e.Vh=!1,e.a.resetViewComplete()}function Tl(e){return e.a.view}function Ul(e,o){function d(){var _e,Ki,_u,iy,oy,w=o.Ha(),j={},Z={},fd=++e.f;for(Xh(Z,Ql),Ki=0;Ki<w.length;Ki++){var dy=w[Ki];if(_e=dy.ia()){var _y=_e.fb();if(_y.getState()===Uh.READY){var Ay=_y.Kc();if(!Ua(Ay)){for(_u in delete Ay.cameras,delete Ay.camera,j[Ki]=Ay=ii(Ay,Ki),!C(dy,rl)&&Ay.sources&&ji(Ay,_e.uid),Ay.sources){var ky=Ay.sources[_u];ky.max_zoom=wd(_e.max,Ol.lookAt.zoom.max),ky.max_display_zoom=dy.max,ky.min_display_zoom=dy.min,(oy=_e.tileSize)&&(2<=v&&256<oy&&_e instanceof Ck&&(oy/=2),ky.tile_size=oy)}(iy=_y.Ab())&&ki(Ay,iy),Xh(Z,Ay)}}}}return Xh(Z.layers.skybox.draw.skybox.color,Z.scene.sky),e.a.config=Z,e.a.updateConfig().then(function(){var zy,h0,Xy={};if(fd!==e.f)return!1;for(h0 in e.f=0,j){dy=w[+h0];var Gy=j[h0].sources;for(zy in Gy)(Gy=e.a.sources[zy])&&(Xy[zy]=Gy,Gy.initialize&&dy.getProvider()&&Gy.initialize(dy.getProvider(),e.Wh,e.a.getWorkers().length,Gy.tiled?B:e.a.tile_manager.getWorkerForTile(y,Gy)))}for(zy in e.c)!Xy[zy]&&e.c[zy].dispose&&e.c[zy].dispose();return e.c=Xy,!0})}var v=e.a.pixelRatio();e.a.initialized?d():e.a.load(y,{blocking:!1}).then(d)}function Vl(e,o){var d=e.a.tile_manager;d.removeTiles(e.Vf),d.updateTilesForView(),o&&d.removeCachedTiles(e.Vf),Sl(e),e.b={}}function Wl(e,o,d,v){e.a.getFeatureAt(o,d,v),e.a.update()}function Xl(e){return e.a.screenshot(void 0).then(function(o){return new Pb(function(d,v){new Pj(URL.createObjectURL(o.blob),function(w,j){1===w?d(j.getData()):v()},!1)})})}t("H.map.render.webgl.capabilities",Ol),u(Pl,nd),p=Pl.prototype,p.Vh=!1,p.T=function(){var e=x.H.gl.Task;return this.a.immediateRedraw(),e.setState({user_moving_view:this.a.view.user_input_active}),e.processAll(),this.Vh&&!this.a.dirty&&!this.a.building&&!Rl(this)&&!Object.keys(this.b).length},p.Wh=function(e,o,d){var v=this,w=this.a.sources[e],j=d&&d.isReload;o?!0!==this.b[e]&&(this.b[e]||(this.b[e]={Yk:{},Mi:[]}),C(o,Vk)?this.b[e].Yk[o.x+"/"+o.y+"/"+o.z]=!0:this.b[e].Mi.push(new K((o=o.boundingBox)[0],o[1],o[2],o[3]))):this.b[e]=!0,w&&w.has_volatile_data?Vl(this,j):(x.clearTimeout(this.g),this.g=x.setTimeout(function(){return Vl(v,j)},100))},p.Vf=function(e){var o=!1,d=this.b[e.source.name],v=x.H.gl;if(d)if(!0===d)o=!0;else{var w=v.Tile.coord(v.Geo.wrapTile(e.coords));if(!(o=!!d.Yk[w.key])){var j=v.Geo.getTileBoundingBox(w,e.source.tile_size,wh.MAX_LINE_WIDTH/2);j=sg(j.getTopLeft(),j.getBottomRight()),o=d.Mi.some(function(Z){return Z.hd(j,!0)||j.ad(Z.Ya(),!0)})}}return o},p.Kc=function(){return this.a.config},p.Ta=function(){return this.a.pixelRatio()},p.o=function(){var e=this.c;Pl.l.o.call(this),this.a.destroy(),this.b={},e&&Object.keys(e).forEach(function(o){e[o].dispose()}),x.clearTimeout(this.g),delete this.c,delete this.a},Pl.prototype.disposeInternal=Pl.prototype.o;var Ql={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},lk={FEATURE:1,SOURCE:2,PROVIDER:3};function Yl(e){return e}function Zl(e){return-e*(e-2)}function $l(e){return 1-Math.sqrt(1-e*e)}function am(e){return Dd(2*e-e*e)}function bm(e){return 1-Math.cos(e*Math.PI/2)}function cm(e){return Math.sin(e*Math.PI/2)}function dm(e,o){this.a={tilt:em(e.tilt,o.tilt),heading:em(e.heading,o.heading),zoom:o.zoom-e.zoom};var d=this.b=ng(e.position),v=o.position;e=v.lat*Sd;var w=d.lat*Sd;d=Gd(v=v.lng*Sd-d.lng*Sd)*Id(e),e=Id(w)*Gd(e)-Gd(w)*Id(e)*Id(v),e=Math.atan2(d,e),this.i=(0<=e?e:Qd+e)*Td,this.c=this.b.Sa(o.position),this.g=0===(o=this.a.zoom)?fm:Object.assign({},fm,{zoom:0>o?am:$l,position:0>o?bm:cm}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function em(e,o){return-180<(e=o-e)&&180>=e?e:180<e?e-360:e+360}t("H.map.provider.PickingMode",lk),t("H.util.animation.ease.LINEAR",Yl),t("H.util.animation.ease.EASE_IN_QUAD",function(e){return e*e}),t("H.util.animation.ease.EASE_OUT_QUAD",Zl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(e){return 1>(e*=2)?Ed(e,5)/2:Ed(e-=2,5)/2+1}),t("H.util.animation.ease.EASE_OUT_CIRC",am);var fm={tilt:Yl,heading:Yl,zoom:Yl,position:Yl};function gm(e,o){if(E(this.x=+e))throw new D(gm,0,e);if(E(this.y=+o))throw new D(gm,1,o)}function hm(e){return Dd(e.a(e))}function im(e){this.Wa=uc((e=e||jf).Cn)?e.Cn:3,this.R=uc(e.An)?e.An:300,this.u=uc(e.oo)?e.oo:3,this.v=uc(e.jo)?e.jo:50,this.c=[],this.clear()}function lm(e,o){e.g^=e.g&o}gm.prototype.add=function(e){return new gm(this.x+e.x,this.y+e.y)},gm.prototype.a=function(e){if(!C(e,gm))throw new D(this.a,0,e);return(e=this.b(e)).x+e.y},gm.prototype.b=function(e){if(!C(e,gm))throw new D(this.b,0,e);return new gm(this.x*e.x,this.y*e.y)},gm.prototype.Ja=function(e){return new gm(this.x*e,this.y*e)},t("H.map.render.InteractionUtils",im),im.prototype.dn=function(){return this.b},im.prototype.isGestureDetected=im.prototype.dn,im.prototype.start=function(e,o){var d=Hl.HEADING,v=Hl.TILT;this.m&&this.clear(),this.g=e,this.j=!!o,this.m=!0,this.b=!(e&(d|v))||e===d||e===v},im.prototype.start=im.prototype.start,im.prototype.store=function(e,o,d,v,w){var j=!1;if(this.m){if(j=(e=new jm(e,o,d,v,w)).c,this.s=this.a,this.a=e,this.f){if(this.i=!0,j){o=this.g;var Z=this.b;if(!Z&&this.i){w=Hl.HEADING;var _e=Hl.TILT;v=Hl.ZOOM;var Ki=o&((d=Hl.COORD)|_e)?this.Jd(!0):km,_u=o&v?this.rf(!0):1,fd=o&w?Bd(this.Og(!0)):0,iy=Bd(Ki.x),oy=Bd(Ki.y);Ki=10<iy||10<oy,iy=10<oy&&oy>3*iy,_u=.8>_u||1.2<_u,fd=7<fd,o&_e&&(fd||_u||Ki&&!iy?lm(this,_e):iy&&(lm(this,~_e>>>0),Z=!0)),!Z&&o&w&&o&(d|v)&&(_u||Ki?(lm(this,w),Z=!0):fd&&(lm(this,_e),Z=!0)),this.b=Z}}}else this.f=e,j||(this.b=!0);this.j&&this.c.push(e)}return j},im.prototype.store=im.prototype.store,im.prototype.clear=function(){this.c.length=0,this.m=this.j=this.i=this.b=!1,this.f=this.s=this.a=void 0},im.prototype.clear=im.prototype.clear,im.prototype.sc=function(e){return 0<(this.g&e)},im.prototype.isModifierEnabled=im.prototype.sc,im.prototype.qa=function(){return this.m},im.prototype.isRunning=im.prototype.qa;var km=pc(new gm(0,0));function jm(e,o,d,v,w){this.a=new G(e,o),d!==B&&(this.b=new G(d,v),this.c=!0),this.timestamp=w!==B?w:Jk()}function nm(e){var o=e.a;return(e=e.b)?new G(o.x-(o.x-e.x)/2,o.y-(o.y-e.y)/2):B}function pm(e,o){var d=e.a;return(e=e.b)&&e.Sa(o)<d.Sa(o)?e:d}function mm(e,o){var d=e.b,v=o.b;return v&&d?(o=nm(o),e=nm(e)):d?e=pm(e,o=o.a):v?o=pm(o,e=e.a):(o=o.a,e=e.a),new gm(o.x-e.x,o.y-e.y)}function om(e){var o=e.b;return o?e.a.Sa(o):0}function qm(){F.call(this),this.reset()}function sm(e){sm.l.constructor.call(this,qm.prototype.A.ng),this.b=e}function tm(e){return x.Object.create(e.f)}function rm(e,o,d,v,w,j){this.a=e,this.b=o,this.c=d,this.f=v,this.g=w,this.i=j}function um(e,o,d,v){um.l.constructor.call(this),this.gc=e,this.ma=v,this.a=e.appendChild(this.createElement(e.ownerDocument)),this.Ue(o,d)}function vm(e,o,d,v,w,j){var Z=w||"2d";vm.l.constructor.apply(this,arguments),this.b=this.a.getContext(Z,j),this.c="2d"===Z,this.g=Z,this.rn=j}function wm(e){this.$a=e}function xm(e){var o="dom";xm.l.constructor.call(this,e),C(this.$a,ym)&&(o="2d"===e.Dd()?"2d":"webgl"),this.a=o}function zm(e,o,d,v,w){if(!Da(e.Yh)||!Da(e.Th))throw new D(zm,0,e);if(this.b=e,!Da(this.j=o))throw new D(zm,1,o);if(E(this.i=+d))throw new D(zm,2,d);if(!Da(this.g=v)&&null!=v)throw new D(zm,3,v);if(!Da(this.c=w)&&null!=w)throw new D(zm,4,w);this.id=(new cf).next(),this.a=!1}function Am(e,o){Am.l.constructor.call(this,e),this.ic=!(!o||!o.ic),this.f={}}im.prototype.kc=function(){var e;if(this.j){var o=this.c,d=o.length,v=0;for(e=new gm(0,0);--d&&v<this.u;)e=e.add(mm(o[d-1],o[d])),v++}else e=this.Jd();return 0!==(d=hm(o=e))?new gm(o.x/d,o.y/d):o},im.prototype.getDirection=im.prototype.kc,im.prototype.rb=function(e){var o,d;if(e=e||Jk(),this.j){var v=this.c,w=this.c.length,j=this.c[w-1];for(d=o=0;--w&&o<this.u;)d+=hm(mm(v[w],v[w-1])),o++;v=d/o}else j=this.a,v=hm(this.Jd());return v>=this.Wa&&e-j.timestamp<=this.v?v>this.R?this.R:v:0},im.prototype.getSpeed=im.prototype.rb,im.prototype.qf=function(){return this.a?nm(this.a):B},im.prototype.getBifocalCenter=im.prototype.qf,im.prototype.Jd=function(e){return(e=e?this.f:this.s)?mm(e,this.a):new gm(0,0)},im.prototype.getMoveVector=im.prototype.Jd,im.prototype.rf=function(e){var o=1;if(this.i){var d=this.a;(e=om(e=e?this.f:this.s))&&(d=om(d))&&(o=d/e)}return o},im.prototype.getBifocalScaling=im.prototype.rf,im.prototype.Og=function(e){if(this.i){var o=e?this.f:this.s,d=this.a,v=d.b,w=0;(e=o.b)&&v&&(o=o.a,w-=Ld(v.y-(d=d.a).y,v.x-d.x)*Td-Ld(e.y-o.y,e.x-o.x)*Td),e=w}else e=0;return e},im.prototype.getBifocalRotation=im.prototype.Og,jm.prototype.c=!1,u(qm,F),qm.prototype.start=function(e,o){this.c&&this.reset(),E(e-o)||(this.a=+e,this.b=+o),this.c=!0},qm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new rm(0,0,0,0,0,0)},qm.prototype.qa=function(){return this.c},qm.prototype.A={ng:"animationupdate"},u(sm,sd),qm.prototype.set=function(e,o,d,v,w,j){var Z=this.f;this.c&&(e=new rm(e/1e3,o/1e3,d/1e3,v/1e3,w/1e3,j/1e3),Z.ea(e)||(this.f=e,this.dispatchEvent(new sm(tm(this)))))},qm.prototype.rb=function(){return tm(this).rb()},qm.prototype.kc=function(){var e=tm(this),o=this.rb()||1;return new rm(e.a/o,e.b/o,e.c/o,e.f,e.g,e.i)},qm.prototype.o=function(){this.reset(),qm.l.o.call(this)},rm.prototype.rb=function(){return Dd(this.a*this.a+this.b*this.b+this.c*this.c)},rm.prototype.kc=function(){var e=this.rb()||1;return new rm(this.a/e,this.b/e,this.c/e,this.f,this.g,this.i)},rm.prototype.ea=function(e){var o=e===this;return!o&&(o=C(e,rm))&&(o=this.a===e.a&&this.b===e.b&&this.c===e.c&&this.f===e.f&&this.g===e.g&&this.i===e.i),o},u(um,nd),um.prototype.L=function(){return this.a},um.prototype.Ue=function(e,o){this.size?(this.size.w=e,this.size.h=o):this.size=new Ui(e,o),this.Pk(this.a,this.a.style,e,o,this.ma)},um.prototype.setSize=um.prototype.Ue,p=um.prototype,p.qb=function(){return this.size},p.Ta=function(){return this.ma},p.Pj=!0,p.jb=function(e){e!==this.Pj&&(this.a.style.display=e?"block":"none",this.Pj=e)},p.th=1,p.ac=function(e){this.th!==e&&(this.Tj(e),this.th=e)},p.Nc=function(){return this.th},p.ae=function(e){this.a.style.zIndex=e},um.prototype.setZIndex=um.prototype.ae,um.prototype.Bj=function(){return+this.a.style.zIndex},um.prototype.Hc=function(){},um.prototype.clear=function(){},um.prototype.o=function(){this.clear(),this.gc.removeChild(this.a),this.Ue(0,0),delete this.a,delete this.gc,um.l.o.call(this)},um.prototype.disposeInternal=um.prototype.o,um.prototype.f=0,um.prototype.Zf=function(){++this.f},um.prototype.release=function(){--this.f||this.C()},u(vm,um),p=vm.prototype,p.createElement=function(e){var o=(e=e.createElement("canvas")).style;return o.position="absolute",o.top=o.left="0",e},p.Pk=function(e,o,d,v,w){e.width=xd(d,1),e.height=xd(v,1),o.width=yd(d/w)+"px",o.height=yd(v/w)+"px"},p.Tj=function(e){this.b.globalAlpha=e},p.Hc=function(e,o,d,v,w){this.c&&this.b.drawImage(e,o,d,v,w)},p.Dd=function(){return this.g},p.clear=function(e){var o,d;this.c&&(e?this.b.clearRect(o=e.left,d=e.top,e.right-o,e.bottom-d):this.a.width=this.size.w)},p.o=function(){var e=this.a;e.width=e.height=0,delete this.b,vm.l.o.call(this)},vm.prototype.disposeInternal=vm.prototype.o,u(wm,nd),wm.prototype.hb=function(){return this.$a},wm.prototype.getLayer=wm.prototype.hb,wm.prototype.Km=function(){return this.kb},wm.prototype.getSurface=wm.prototype.Km,wm.prototype.Vc=function(e){var o=this.kb;e!==o&&(this.kb=e,e.Zf(),o&&o.release())},wm.prototype.setSurface=wm.prototype.Vc,wm.prototype.o=function(){this.kb.release()},wm.prototype.disposeInternal=wm.prototype.o,wm.prototype.Nd=function(){},wm.prototype.render=wm.prototype.T,u(xm,wm),xm.prototype.T=function(e,o,d,v,w,j,Z,_e){Z=this.$a;var Ki=this.kb,_u=!(C(Ki,vm)&&"2d"===Ki.Dd());return v>=Z.min&&v<=Z.max?(_u&&Ki.jb(!0),Z.T(Ki.L(),{boundingBox:e,zoom:v,screenCenter:o,priorityCenter:j,projection:d,cacheOnly:w,size:Ki.qb(),pixelRatio:Ki.Ta(),cameraMatrix:_e})):(_u&&Ki.jb(!1),uk.DONE)},xm.prototype.Nd=function(){return this.a},t("H.util.animation.Animation",zm),zm.prototype.start=function(){var e=this;this.f=Jk(),this.a=!0;var o=this.f;this.b.Yh(function(){if(e.a){var d=Jk(),v=d-e.f,w=v/e.i,j=!1;1<=w&&(w=1,j=!0),e.j(e.c?e.c(w):w,v,d-o,d),o=d,j&&e.stop()}else e.stop()})},zm.prototype.start=zm.prototype.start,zm.prototype.stop=function(e){this.a=!1,this.b.Th(),e||this.g&&this.g(this)},zm.prototype.stop=zm.prototype.stop,zm.prototype.qa=function(){return this.a},zm.prototype.isRunning=zm.prototype.qa,u(Am,wm),Am.prototype.Vc=function(e){Am.l.Vc.call(this,e),this.g=e.gc.ownerDocument},Am.prototype.setSurface=Am.prototype.Vc;var Bm=function(e,o){return C(o=o.ba(),gh)?o.ha:(e[0]=o,e)}.bind(null,[]);function Cm(e,o){var d=e[1].Oc(),v=o[1].Oc();return oh(d,v,!0)||e[5]-o[5]||oh(d,v,!1)}function Dm(e,o){Dm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Am.prototype.T=function(e,o,d,v,w,j,Z){var Ki,_u,fd,iy,_e=this.$a;if(this.m=o=this.f,this.f=d={},v>=_e.min&&v<=_e.max){var oy=this.cj(e,v,w,j),dy=oy.markers;if(e=dy.length){for(v=[],w=this.kb,j=0;j<e;j++){var _y=Bm(_e=dy[j]);for(Ki=_y.length;Ki--;)(_u=Z(_y[Ki]))&&((iy=o[fd=_e.Za()+"_"+Ki])?delete o[fd]:iy={dk:_e},d[fd]=iy,v.push([iy,_e,_e.pb(),w,_u.x,_u.y]))}for(v.sort(Cm),e=v.length,j=0;j<e;j++)this.Ak.apply(this,v[j])}}return!oy||oy.requested&&oy.requested===oy.total||!oy.requested&&dy.length===oy.total?uk.DONE:uk.PENDING},Am.prototype.render=Am.prototype.T,Am.prototype.Ba=function(){},Am.prototype.getObjectsAt=Am.prototype.Ba,u(Dm,Am),t("H.map.render.dom.MarkerRenderer",Dm),Dm.prototype.cj=function(){return this.$a.vc.apply(this.$a,arguments)},Dm.prototype.T=function(e,o,d,v,w,j,Z){this.b(),this.j=0;var fd,_e=Dm.l.T.apply(this,arguments),Ki=this.kb,_u=this.m;for(fd in _u)Em(this,Ki,_u[fd]);return 0===this.a.length&&_e?uk.DONE:uk.PENDING},Dm.prototype.render=Dm.prototype.T,Dm.prototype.Vc=function(e){Dm.l.Vc.call(this,e),this.i=e.Ta()},Dm.prototype.setSurface=Dm.prototype.Vc,Dm.prototype.b=function(){for(var o,d,v,e=this.a.length;e--;)(d=(o=(v=this.a[e]).kg).pb()).Gh(v,d,o);this.a.length=0},Dm.prototype.Ak=function(e,o,d,v,w,j){var Z,_e=v.Ta(),Ki=o.Db();w*=_e,j*=_e,this.ic||(w=yd(w),j=yd(j)),e.detail&&(Ki.Rd(e.an)?Em(this,v,e):Z=e.detail),Z||(e.detail=Z=d.ej(this.g),this.c++,Da(d.Gh)&&this.a.push(Z)),e.an=Ki.a,Z.style.zIndex=this.j++,Z.kg=o,v.Hc(Z,w,j,0,0)};var Fm,Gm="pointer-events",Hm,Im;function Em(e,o,d){o.clear(o=d.detail),delete o.kg,e.c--,(d=(e=d.dk).pb()).b&&d.b(o,d,e)}function ym(e,o){var d=o||{},v=d.contextType;if(d=d.contextAttributes,ym.l.constructor.call(this,o),xc(e,"Function",ym,0,"invalid render callback"),v){if(-1===Jm.indexOf(v))throw new D(ym,1,"invalid context type");this.b=v}d&&(this.c=d),this.f=e}$e&&($e&&Zc!==y&&(Zc=(Im=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Im[2]:y),Hm=Zc,9===Hm?Gm="display":10===Hm&&(Gm="visibility")),Fm=Gm,Dm.prototype.Ba=function(e,o,d){var j,Z,_e,Ki,_u,v=this.i,w=hf;if(this.c){e/=v,o/=v;var fd=(v=this.g).documentElement,iy=this.kb.L(),oy=iy.getBoundingClientRect();for(e+=oy.left,o+=oy.top;(Z=_e=v.elementFromPoint(e,o))&&Z!==iy&&Z!==fd&&_e!==dy;){for(;(Ki=Z.parentNode)&&(!Da(Ki.contains)||!Ki.contains(iy));)Z=Ki;if(Ki===iy&&(Z!==_e||"svg"!==Z.nodeName)&&0>w.indexOf(_u=Z.kg)&&(w===hf&&(w=[]),w.push(_u),d))break;j||(j=[]);var dy=Z.style;j.push({Ri:dy.getPropertyValue(Fm),$m:dy.getPropertyPriority(Fm),style:dy}),dy.setProperty(Fm,"visibility"===Fm?"hidden":"none","important"),dy=_e}if(j)for(o=j.length;o--;)(e=j[o]).style.removeProperty(Fm),Ac(e.Ri)&&e.style.setProperty(Fm,e.Ri,e.$m)}return w},Dm.prototype.getObjectsAt=Dm.prototype.Ba,Dm.prototype.Nd=function(){return"dom"},Dm.prototype.o=function(){this.a.length=0;var d,e=this.kb,o=this.f;for(d in o)Em(this,e,o[d]);this.kb.C(),Dm.l.o.call(this)},Dm.prototype.disposeInternal=Dm.prototype.o,u(ym,oj),t("H.map.layer.CanvasLayer",ym);var Jm=["2d","webgl","webgl2","experimental-webgl"];function Km(e,o){Km.l.constructor.call(this,o),xc(e,"Function",Km,0,"invalid render callback"),this.a=e}function Lm(e,o){if(E(this.b=+e))throw new D(Lm,0,e);this.a=0,o&&this.Mk(o)}function Mm(e,o,d,v){Mm.l.constructor.apply(this,arguments)}function Nm(e,o){this.a=e,this.b=o}function Om(e,o,d){var v=[],w={gc:e.a,width:o.w,height:o.h,ma:e.b};for(e=0;e<d.length;e++){var j=(o=d[e]).Nd(),Z={};Xa(Z,w);var _e=o.kb;switch(j){case"2d":if(C(o.hb(),ym)&&(Z.Dg=o.hb().c),j=fd&&"2d"===fd.Dd()){var Ki=fd.rn;j=!(Ki!==(j=Z.Dg)&&(Ki&&!j?Ki.alpha||Ki.willReadFrequently:j&&!Ki?j.alpha||j.willReadFrequently:!j.alpha!=!j.alpha||!Ki.willReadFrequently!=!j.willReadFrequently))}if(j)var _u=!1;else if(_e&&!_u){var fd=_e;_u=!1}else fd=new vm(Z.gc,Z.width,Z.height,Z.ma,"2d",Z.Dg),_u=!0;break;case"dom":fd=_e||new Mm(Z.gc,Z.width,Z.height,Z.ma),_u=!_e;break;default:fd=_e||new vm(Z.gc,Z.width,Z.height,Z.ma,o.hb().Dd(),Z.Dg),_u=!_e}v[v.length-1]!==fd&&(fd.ae(v.length),v.push(fd)),o.Vc(fd)}return v}function Fl(){Fl.l.constructor.call(this),this.b={},this.a={position:new lg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}ym.prototype.b="2d",ym.prototype.Dd=function(){return this.b},ym.prototype.T=function(e,o){return this.a&&this.a.canvas===e||(this.a=e.getContext(this.b,this.c)),this.f(this.a,o)},ym.prototype.o=function(){ym.l.o.call(this),delete this.a},u(Km,oj),t("H.map.layer.DomLayer",Km),Km.prototype.T=function(e,o){return this.a(e,o)},t("H.util.kinetics.KineticMove",Lm),Lm.prototype.Mk=function(e){return this.a=e,this},Lm.prototype.setInitialSpeed=Lm.prototype.Mk,Lm.prototype.Tl=function(){return Math.abs(this.a/this.b)},Lm.prototype.getDuration=Lm.prototype.Tl,Lm.prototype.xe=function(e){return this.a+this.b*e},Lm.prototype.getCurrentSpeed=Lm.prototype.xe,Lm.prototype.Ql=function(e){return this.a*e+this.b*e*e/2},Lm.prototype.getCurrentPath=Lm.prototype.Ql,u(Mm,um),t("H.map.render.dom.Surface",Mm),p=Mm.prototype,p.Dd=function(){return"dom"},p.createElement=function(e){return(e=e.createElement("DIV")).style.position="absolute",e.style.pointerEvents="none",e},p.Pk=function(e,o,d,v){o.width=d+"px",o.height=v+"px"},p.Tj=function(e){this.a.style.opacity=e},p.Hc=function(e,o,d){var v=this.ma,w=e.style;w[Af("transform")]="matrix(1,0,0,1,"+o/v+","+d/v+")",e.parentNode!==this.a&&(w.position="absolute",this.a.appendChild(e),this.a.style.pointerEvents="auto","auto"===getComputedStyle(e).pointerEvents&&(e.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(e){e?this.a.removeChild(e):this.a.innerHTML=""},u(Fl,F),t("H.map.ViewModel",Fl),Fl.prototype.A={xa:"update",ge:"sync"},Fl.prototype.Nb=function(e,o){if(!e)throw new D(this.Nb,0,e);var d=e[Pm];if(uc(d)&&!mg(d))throw new D(this.Nb,0,Pm);if(uc(d=e[Qm])&&E(+d))throw new D(this.Nb,0,Qm);if(uc(d=e[Rm])&&!C(d,kg))throw new D(this.Nb,0,Rm);return d=Sm(e=x.Object.assign({},e),this.b,this.a),Tm(this,this.b,e),this.dispatchEvent(new Um(this.b,d,o)),this},Fl.prototype.setLookAtData=Fl.prototype.Nb,Fl.prototype.eb=function(){var e={};return e[Pm]=ng(this.a[Pm]),Tm(this,e,this.a,!0),e},Fl.prototype.getLookAtData=Fl.prototype.eb;var Pm="position",Qm="zoom",Rm="bounds",Vm={Fi:Pm,Ii:Qm,zi:"heading",Hi:"tilt",Ai:"incline",xi:Rm},Wm=Object.keys(Vm).map(function(e){return Vm[e]});function Tm(e,o,d,v){e.g={},e.f={},e.c=[];for(var _e,Ki,_u,w=e.j,j=e.i,Z=Wm.length;Z--;)if(_u=d[_e=Wm[Z]],null==(Ki=o[_e])||!v)if(null!=_u){uc(w)&&w.call(e,_e,Ki,_u);var iy,fd=_e;if((iy="position"!==_e)||(iy=!(!(iy=_u)||E(iy.lat)||E(iy.lng))),o[fd]=iy?_u:ng(_u),uc(j)){switch(_e){case"position":Ki=_u&&Ki&&(_u.lat!==Ki.lat||_u.lng!==Ki.lng);break;case"bounds":Ki=_u&&Ki&&!_u.ea(Ki);break;default:Ki=_u!==Ki}Ki&&j.call(e,_e)}}else delete o[_e]}Fl.prototype.j=function(e,o,d){this.g[e]=o,this.f[e]=d},Fl.prototype.i=function(e){this.c.push(Xm[e])};var Xm=Wm.reduce(function(e,o){return e[o]=cj[o.toUpperCase()],e},{});function Sm(e,o,d){var v=0;return["tilt","incline","heading",Qm].forEach(function(w){if(E(e[w])){var j=E(o[w])?d[w]:o[w];e[w]=j}else v|=Xm[w]}),[Pm,Rm].forEach(function(w){e[w]?v|=Xm[w]:e[w]=o[w]||d[w]}),v}function Ym(e,o){return e|o}function Um(e,o,d){Um.l.constructor.call(this,Fl.prototype.A.xa,e,null,o),this.b=this.animate=!!d}function S(e,o,d,v){if(S.l.constructor.call(this,e,o,d,v),this.ya=new Pk(100),this.N=new G(0,0),this.pf=!!v.enableSubpixelRendering,this.Pb=Zm,this.s=new im,this.g=v=new qm,this.Ec=A(this.Ec,this),v.addEventListener(v.A.ng,this.Ec),this.I=e=(v=e.element).ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,v.insertBefore(e,v.firstChild),this.wd=new Nm(this.I,this.ma),this.oa=o.eb().position,!(o=x.H.gl))throw new Yc(S,'"H-webgl" module is missing');for(this.a=new Pl({viewport:this.f,gc:this.I,devicePixelRatio:this.ma,kk:A(this.da,this)}),o.WorkerBroker.addTarget("model",qj),e=0,v=(o=this.c.Ha()).length,this.j={Gc:[],fa:[]},this.Xa=o;e<v;e++){var w=o[e];this.Ge(e,w),Il(this,w,!0)}this.wb(),this.Yc=A(this.Yc,this),this.vh=A(this.vh,this),this.Aa=A(this.Aa,this),d.addEventListener(oj.prototype.A.de,this.Yc),this.X=$m,this.zoom=Jl(this,this.v.ib()),this.wb(),this.ca()}Fl.prototype.Va=function(e){var o={},d={};Tm(this,this.a,e),this.b={},o.lookAt=this.f,d.lookAt=this.g,e=(e=this.c).length?e.reduce(Ym):0,this.dispatchEvent(new bj(this.A.ge,o,d,e))},Fl.prototype.synchronize=Fl.prototype.Va,Fl.prototype.Ve=function(e,o){if(E(e=+e))throw new D(this.Ve,0,Qm);this.Nb({zoom:e},o)},Fl.prototype.ib=function(){return this.a.zoom},Fl.prototype.dc=Oc,Fl.prototype.startControl=Fl.prototype.dc,Fl.prototype.control=Oc,Fl.prototype.control=Fl.prototype.control,Fl.prototype.nb=Oc,Fl.prototype.endControl=Fl.prototype.nb,u(Um,bj),u(S,Dl),t("H.map.render.webgl.RenderEngine",S),S.prototype.eb=function(){var e=this.oa;return Kl(this,{position:{kn:e.kn,on:e.on},zoom:this.zoom,tilt:this.Zk,heading:this.heading})},S.prototype.Yc=function(e){((e=(e=e.target.ia())&&e.fb())&&e.getState())===Uh.INIT?e.load():(Sl(this.a),Ul(this.a,this.c),this.da())},S.prototype.type=Nl.WEBGL;var $m=2;function an(e,o,d){return(o=d-o)<(e=Ed(2,8+e.zoom))/2?o:o-e*d/Bd(d)}function bn(e,o,d){function v(_e){return w[_e]+em(w[_e],o[_e])/2}if(!(d&cj.POSITION||d&cj.BOUNDS))return null;var w=Tl(e.a).getLookAtData();d=w.position;var j=o.position,Z=o.bounds;return Ci(w.bounds,j.lat,j.lng,!1)||Z&&Ci(Z,d.lat,d.lng,!1)?null:((d=cn(e,{tilt:v("tilt"),heading:v("heading"),incline:0,bounds:tg([d,j])})).zoom=Jl(e,d.zoom-.5),delete d.bounds,d)}function dn(e,o,d,v){return e=(e=e.getCapabilities().lookAt[v]).max-e.min,Bd("zoom"===v?d[v]-o[v]:em(o[v],d[v]))/e||0}function en(e,o,d){return Zd(3e3*(e=xd(8*dn(e,o,d,"zoom"),dn(e,o,d,"heading"),dn(e,o,d,"tilt")/2)),300,4e3)}function cn(e,o){return jn(o),Tl(e.a).getBestLookAtData(o)}function jn(e){var o=e.bounds;!o||o instanceof O||(e.bounds=zi(o.F()))}function ln(e,o,d){Tl(e.a).setLookAtData(o),Sl(e.a),kn(e),e.da(),d&&setTimeout(d,0)}function hn(e,o,d,v){var w=Tl(e.a).getLookAtData(),j=new dm(w,o);j.a.tilt+j.a.heading+j.a.zoom+j.c!==0?mn(e,function(Z){for(var _e in j.a)if(0!==j.a[_e]){var Ki=j.g[_e](Z);w[_e]+=j.a[_e]*(Ki-j.f[_e]),j.f[_e]=Ki}return 0!==j.c&&(w.position=j.b.jg(j.i,j.c*j.g.position(Z),!0)),ln(e,w)},d,function(){return ln(e,o,v)}):ln(e,o,v)}function nn(e,o){e.ya.ka(function(d,v){return v.Eb()===o})}function on(e){return!(C(e,Km)||C(e,ym))}function gn(e,o){var d=o.position;return Kl(e,{zoom:Jl(e,o.zoom),position:new lg(d.lat,d.lng),tilt:o.tilt,heading:o.heading,bounds:o.bounds})}function kn(e){var o=Tl(e.a).getLookAtData();e.zoom=o.zoom,e.oa=o.position}function qn(e,o){return new G((e=Tl(e.a).geoToMeters(o)).x/40075016.68557849+.5,1-(e.y/40075016.68557849+.5))}function rn(e,o){return o.sub(qn(e,e.oa)).scale(Ed(2,8+e.zoom))}function sn(e,o,d,v,w,j,Z,_e){var Ki,_u,iy,fd=0,oy=function(){0==--fd&&j(w)};if(_e&&_e.features)for(fd=_u=_e.features.length,iy=0;iy<_u;iy++){var dy=_e.features[iy],_y=dy.id;if(Ki=e.a.a.sources[dy.source_name]){var Ay=Ki.provider,ky=Ay.tj();if(ky===lk.SOURCE){var Xy=dy.source_layer;if("overlays"===Xy)tn(e,o,d,v,w,Ki,dy.properties.overlays_config);else if(Ki=Ki.getMapObjectById(_y))if("markers"!==Xy)w.push(Ki);else if(un(e,o,d,Ki))w.push(Ki);else if(v&&!Z){var zy=!0;Wl(e.a,{x:o,y:d},{radius:3.5,top_most_only:!1},function(h0){sn(e,o,d,v,w,j,!0,h0)})}fd--}else ky===lk.FEATURE?(zy=Ay.getFeatureProxy(dy.properties,Xy=dy.tile.coords,function(h0){if(h0){for(var O0,Gy=h0;Gy&&(O0=Gy.Eb())&&O0!==Ay;)Gy=O0;O0||Gy.ga(Ay),w.push(h0)}oy()}))||((Ki=e.ya.get(_y))||((Ki=new lh(dy)).ga(Ay),e.ya.add(_y,Ki,1)),w.push(Ki),fd--):ky===lk.PROVIDER&&(zy=!0,Ay.Bk(dy,!1).then(function(h0){h0&&(h0 instanceof rh?un(this,o,d,h0):1)&&w.push(h0),oy()},function(){oy()},e))}}ky&&(zy||0!==fd)||j(w)}function tn(e,o,d,v,w,j,Z){var _e;for(e=e.Pa(o,d),o=Z.length;o--&&(!(_e=j.getMapObjectById(Z[o].id))||0<=w.indexOf(_e)||!_e.ba().ad(e)||(w.push(_e),!v)););}function un(e,o,d,v){var Z,w=v.pb(),j=w.c,_e=!j;if(j)if(o+=(w=w.ed()).x,d+=w.y,C(w=v.ba(),Ti))for(Z=(v=w.ha).length;Z--&&!_e;)w=e.Aa(v[Z]),_e=j.Cf(o-w.x,d-w.y,0)!==be.NONE;else w=e.Aa(w),_e=j.Cf(o-w.x,d-w.y,0)!==be.NONE;return _e}function vn(e,o,d,v,w){for(var Z,j=o.length;j--&&!((Z=o[j])&&Z.Ba&&(e=e.concat(Z.Ba(d,v,w)),e.length&&w)););return e}function pn(e){return{w:(e=e.ua[2]).right-e.left,h:e.bottom-e.top}}function wn(e){e.i&&e.i.qa()||(Rl(e.a)||Jk()-e.se<e.Pb)&&!e.ra?e.If||(e.If=Hk(e.vh)):(e.ra&&(e.Yd(),xn(e)),e.X=$m)}function xn(e,o){e.$c||setTimeout(A(e.dispatchEvent,e,{type:e.A.Gi,target:o||e}),1)}function zn(e,o,d){Tl(e.a).applyPxOffset([o,d]),kn(e),e.N.set(0,0),Sl(e.a),e.da()}function An(e,o,d,v){Tl(e.a).setLookAtData({zoom:o},Dc(d)&&Dc(d)?[d,v]:B),kn(e),Sl(e.a),e.da()}function fn(e){yn(e),e.g.qa()&&e.nb(!0),e.s.qa()&&e.ob(!0)}function Bn(e,o){if(o){var d={};d.Ke=o.power,d.pe=o.ease,d.duration=o.duration,e.u=d}}function Dn(e,o){var d=rn(e,qn(e,o.position)),v=d.y;d=d.x;var w=o.zoom,j=rn(e,qn(e,e.oa));o=j.y;var Z=j.x;j=e.zoom;var _e=e.g.rb(),Ki=e.g.a,_u=e.g.b,fd=0;if(d=an(e,Z,d),o=Dd((d-=Z)*d+(v-=o)*v+(j=w-j)*j),0!==_e&&0!==o){var iy=d/o,oy=v/o,dy=j/o,_y=_e*_e/(2*o);mn(e,function(Ay,ky){var Xy;1!==Ay?((Xy=dy*(ky=(Ay=_e*ky-_y*ky*ky/2)-fd))&&(Xy=Jl(e,e.zoom+Xy),An(e,Xy,Ki,_u)),zn(e,yd(iy*ky),yd(oy*ky)),fd=Ay):(An(e,Jl(e,w),Ki,_u),e.da())},2*o/_e)}}function Cn(e,o,d){d=d||0;var v=e.g,w=Tl(e.a),j=w.getLookAtData();o.c&&An(e,Jl(e,j.zoom+o.c*d),v.a,v.b),w.setLookAtData({heading:Ml(e,j.heading+o.g*d),tilt:Ll(e,j.tilt+o.f*d)}),kn(e),zn(e,o.a*d,o.b*d)}function mn(e,o,d,v,w){e.i&&e.i.qa()&&e.i.stop(!0),e.i=new zm(e,o,d,v,w),e.i.start()}function yn(e){e.i&&e.i.qa()&&e.i.stop(!0)}S.prototype.getState=function(){return this.X},S.prototype.getState=S.prototype.getState,S.prototype.$c=!1,S.prototype.yg=function(e){var o=this,d=e.newValue,v=e.modifiers,w=Tl(this.a);fn(this),this.N.set(0,0);var j=gn(this,d);if(Wm.forEach(function(_u){v&e[_u.toUpperCase()]||delete j[_u]}),e.b){w=Tl(this.a).getLookAtData();var Z=cn(this,j);d=bn(this,Z,v);var _e=function(){return o.$c=!1};if(delete Z.bounds,this.$c=!0,d){w=en(this,w,d);var Ki=en(this,d,Z);hn(this,d,w,function(){return hn(o,Z,Ki,_e)})}else d=en(this,w,Z),hn(this,Z,d,_e)}else jn(j),w.setLookAtData(j);kn(this),Sl(this.a),this.da()},S.prototype.ag=function(){},S.prototype.setAnimationDuration=S.prototype.ag,S.prototype.Mg=function(){},S.prototype.getAnimationDuration=S.prototype.Mg,S.prototype.bg=function(){},S.prototype.setAnimationEase=S.prototype.bg,S.prototype.Ng=function(){},S.prototype.getAnimationEase=S.prototype.Ng,S.prototype.Yf=function(){},S.prototype.resetAnimationDefaults=S.prototype.Yf,p=S.prototype,p.ik=function(e){nn(this,e.target.ia()),Sl(this.a),this.da()},p.Ge=function(e,o){S.l.Ge.call(this,e,o),on(o)&&(Sl(this.a),(e=(e=o.ia())&&e.fb())&&e.getState()===Uh.INIT&&e.load())},p.Ih=function(e,o,d){var v;if(this.se=Jk(),nn(this,o.ia()),o.requestDomMarkers||C(o,ym)||C(o,Km)){var w=this.j.fa;for(v=w.length;v--;){var j=w[v];if(j.hb()===o){w.splice(v,1),j.C();break}}}on(o)&&Ul(this.a,this.c),this.Xa=this.c.Ha(),0===e&&(Il(this,o,!1),this.wb()),Om(this.wd,pn(this),this.j.fa.filter(uc)),this.Yd(),d||this.da()},p.Jh=function(){this.wb()},p.wb=function(){S.l.wb.call(this);var e=this.getCapabilities().lookAt.zoom;Tl(this.a).setZoomConstraints(xd(e.min,this.qg),wd(e.max,this.pg))},p.eh=function(e,o){var d;if(o){if(e={ic:this.pf,ab:this.ab},o.T?(C(o,ym)||C(o,Km))&&(d=new xm(o)):o.requestDomMarkers&&(d=new Dm(o,e)),d){this.j.fa.push(d);var v=this.c.Ha();this.j.fa.sort(function(w,j){return v.indexOf(w.$a)-v.indexOf(j.$a)}),Om(this.wd,pn(this),this.j.fa.filter(uc))}on(o)&&Ul(this.a,this.c)}this.Xa=this.c.Ha()},p.Aa=function(e){return Tl(this.a).geoToPixel(e)},S.prototype.geoToScreen=S.prototype.Aa,S.prototype.Pa=function(e,o){return Tl(this.a).xyToGeo(e,o)},S.prototype.screenToGeo=S.prototype.Pa,S.prototype.$f=function(e,o){return e=this.Pa(e,o),(o=this.v.eb()).position=e,o},S.prototype.Ba=function(e,o,d,v){var w=this,j=[];j=vn(j,this.j.fa,e*this.ma,o*this.ma,d),d&&j.length?v(j):this.a.a.initialized?Wl(this.a,{x:e,y:o},{radius:3.5,top_most_only:d},function(Z){sn(w,e,o,d,j,v,!1,Z)}):v(j)},S.prototype.getObjectsAt=S.prototype.Ba,S.prototype.Y=y,S.prototype.ca=function(){var e=this.j.fa.length;El(this,this.ma),this.N.set(0,0);var o=pn(this),d=o.w,v=o.h;for(this.a.a.handleViewportUpdate();e--;){var w=(o=this.j.fa[e].kb).qb();w.w===d&&w.h===v||o.Ue(d,v)}this.Y=new Ui(d,v),Sl(this.a),this.da()},S.prototype.getCapabilities=function(){return Ol},S.prototype.getCapabilities=S.prototype.getCapabilities,p=S.prototype,p.If=0,p.Yd=function(){this.j.Gc.length=0},p.vh=function(){this.If=0,this.B&&this.B.before();var e=Tl(this.a),o=e.getLookAtData(!1),d=e.getLookAtData(!0);e=this.f.center.clone(),d=d.bounds.F();var v=this.zoom,w=this.N,j=this.Xa,Z=j.length;for(this.Pb=Zm;Z--;){var _e=j[Z];C(_e,oj)&&_e.ia()&&_e.ia().Le(d,v)}this.ra=this.a.T(),this.v.Va(o),j=(o=this.j).fa.length;var _u,Ki=!0;for(_u=0;_u<j;_u++){var fd=o.Gc;(Z=o.fa[_u])&&((_e=Z.T(d,e,void 0,v,!1,w,this.Aa,this.a.a.getCameraMatrix()))===uk.ACTIVE&&(this.Pb=1/0),_e!==uk.DONE||fd[_u]||(xn(this,Z.hb()),fd[_u]=!0),fd[_u]||(Ki=!1))}this.ra=Ki&&this.ra,this.Y&&(this.f.Va(this.Y),this.Y=y),this.i&&this.i.qa()&&this.og(),this.B&&this.B.after(),wn(this)},p.o=function(){var e=this.c.Ha()[0],o=this.f;Ik(this.If),yn(this),e&&Il(this,e,!1),this.j.fa.filter(uc).forEach(function(d){d.C()}),o.element&&o.element.removeChild(this.I),delete this.I,this.X=3,this.a.C(),S.l.o.call(this)},p.da=function(){this.se=Jk(),this.X===$m&&(this.ra=!1,this.X=1,wn(this))},p.td=function(e,o,d){An(this,e=Jl(this,Jl(this,e)),o,d)},S.prototype.zoomAt=S.prototype.td,S.prototype.ec=function(e,o){var d=!!(o||e&(Hl.HEADING|Hl.TILT));fn(this),Bn(this,o),this.s.start(e,d),Tl(this.a).setPanning(!0)},S.prototype.startInteraction=S.prototype.ec,S.prototype.Vb=function(e,o,d,v,w){var j=this.s,Z=!1;if(j.qa()){var _e=Tl(this.a),Ki=_e.getLookAtData(),_u=this.f.center;_u=[_u.x,_u.y],o=j.store(e,o,d,v,w),d=j.qf(),e=j.Jd(),w=this.s.rf(),v=this.s.Og(),j.b&&(j.sc(Hl.TILT)&&(_e.setLookAtData({tilt:Ll(this,Ki.tilt+e.y/this.f.height*-180)},_u),Z=!0),o&&1!==w&&j.sc(Hl.ZOOM)&&(Z=j.qf(),An(this,Jl(this,w=Cd(Ed(2,this.zoom)*w)/Md),Z.x,Z.y),Z=!0),j.sc(Hl.COORD)&&0<hm(e)&&(zn(this,-e.x,-e.y),Z=!0),j.sc(Hl.HEADING)&&(o?_e.setLookAtData({heading:Ki.heading+Ml(this,v)},[d.x,d.y]):e.x&&_e.setLookAtData({heading:Ml(this,Ki.heading+e.x/this.f.width*360)},_u),Z=!0),Z&&(Sl(this.a),this.da()))}},S.prototype.interaction=S.prototype.Vb,S.prototype.ob=function(e){var o=this;if(this.s.qa()&&!e){if(this.u){e=this.s.rb();var d=this.s.kc(),v=this.u.duration,w=(this.u.Ke||1)*e,j=new Lm(-w/(0<v?v:1),w);!E(d.x)&&!E(d.y)&&0<w&&o.s.sc(Hl.COORD)&&mn(this,function(Z){w=j.xe(Z*v),E(w)||zn(o,yd(-d.x*w),yd(-d.y*w))},v,void 0,this.u.pe)}delete this.u,this.s.clear()}Tl(this.a).setPanning(!1),this.da()},S.prototype.endInteraction=S.prototype.ob,S.prototype.dc=function(e,o,d){fn(this),this.g.start(o,d),Bn(this,e),Tl(this.a).setPanning(!0)},S.prototype.startControl=S.prototype.dc,S.prototype.control=function(e,o,d,v,w,j){for(var _e,Z=0;Z<arguments.length;Z++)if((_e=+arguments[Z])!=_e)throw new D(this.control,Z,_e);this.g.qa()&&this.g.set(e,o,d,v,w,j)},S.prototype.control=S.prototype.control,S.prototype.nb=function(e,o){var v,d=this;if(this.g.qa()){yn(this);var w=Jk(),j=w-this.Ad;if(1<=j&&Cn(this,tm(this.g),j),!this.u||e||o)"function"==typeof o&&(o(e=(e=Tl(this.a)).getLookAtData()),Dn(this,e));else{o=this.g.rb();var _e=this.g.kc(),Ki=this.u.duration,_u=(this.u.Ke||1)*o,fd=new Lm(-_u/(0<Ki?Ki:1),_u);!E(_e.a)&&!E(_e.b)&&0<_u&&mn(this,function(iy,oy,dy,_y){w&&(dy=_y-w,w=0),_u=fd.xe(iy*Ki)*dy,E(_u)||((v=_e.c*_u)&&An(d,Jl(d,d.zoom+v),d.g.a,d.g.b),zn(d,yd(_e.a*_u),yd(_e.b*_u)))},Ki,void 0,this.u.pe)}this.g.reset(),Tl(this.a).setPanning(!1),this.da()}},S.prototype.endControl=S.prototype.nb,S.prototype.Ec=function(e){var o=this,d=e.b;this.N.set(0,0),d.a||d.b||d.c||d.f||d.g||d.i?(this.Ad=Jk(),mn(this,function(v,w,j,Z){o.Ad=Z,Cn(o,d,j)},Ud),this.da()):yn(this)},S.prototype.Ig=function(){},S.prototype.enter=S.prototype.Ig,S.prototype.Jg=function(e){Gl(this.I,e)},S.prototype.exit=S.prototype.Jg,S.prototype.capture=function(e,o,d,v){var w=this;return Xl(w.a).then(function(j){var Z=w.I.ownerDocument.createElement("canvas"),_e=w.ma,Ki=Z.getContext("2d"),_u=w.a.Ta()/_e,fd=(d-e)*_e;return _e*=v-o,Z.width=fd,Z.height=_e,Ki.drawImage(j,e*_u,o*_u,fd*_u,_e*_u,0,0,fd,_e),Z})},S.prototype.Cl=function(e){return Tl(this.a).geoToMeters(e)},S.prototype.geoToMeters=S.prototype.Cl,S.prototype.Bn=function(e){return Tl(this.a).metersToGeo(e)},S.prototype.metersToGeo=S.prototype.Bn;var Zm=5e3;function T(e,o,d){var v={};if(!(e instanceof HTMLElement))throw new D(T,0);if(T.l.constructor.call(this),this.i=En(d,T),this.c=d=new Fl,this.B=!1,d.addEventListener(d.A.ge,this.N,!1,this),!C(e,Element))throw new D(T,0,e);var w=(d=this.P=e.ownerDocument.createElement("div")).style;if(w.position="relative",w.height=d.style.width="100%",w.overflow="hidden",w.webkitTapHighlightColor="transparent","transparent"!==w.webkitTapHighlightColor&&(w.webkitTapHighlightColor="rgba(0,0,0,0)"),e.appendChild(d),this.b=new vk(this.P,this.i),this.b.addEventListener(this.b.A.ge,this.N,!1,this),(e=this.a=new qj(this.i.layers)).addEventListener(e.A.fe,this.S,!1,this),e.addEventListener(e.A.ce,this.S,!1,this),e.addEventListener(e.A.ee,this.S,!1,this),!this.j&&Fn(this),this.g=null,this.a.add(o,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:hk,this.i),this.v=A(this.v,this),(o=this.i.imprint)!==B&&"object"!=typeof o)throw new D(T,1,"imprint");this.m=null===o?o:new zj(this,o),this.I=(o=this.i.autoColor)===B||!!o,Gn(this),(o=this.i.zoom)&&(v.zoom=o),(o=this.i.bounds)&&(v.bounds=o),(o=this.i.center)&&(v.position=o),this.c.Nb(v)}function En(e,o){if(e){var d=e.pixelRatio;if(d===B)e.pixelRatio=Te();else if(!(0<d))throw new D(o,0,"pixelRatio: "+d)}else(e={}).pixelRatio=Te();return e.renderBaseBackground||(e.renderBaseBackground={lower:3,higher:2}),e}function Gn(e){e.m&&e.I&&e.m.fi({invert:e.g&&e.g.sl})}function Hn(e,o,d){e.dispatchEvent(d?new bj(e.A.Bi,d.newValue,d.oldValue,d.modifiers):e.A.Bi+o)}function In(e){vj.call(this,e)}function Fn(e){e.s=new N({max:24,engineType:e.i.engineType}),e.j=new rl(e.s,e.i),e.a.add(e.j)}u(T,F),t("H.Map",T),T.prototype.draggable=!1,T.prototype.o=function(){this.I=!1,this.m&&this.m.C(),this.f.dispose(),this.c.C(),this.b.C(),this.j.C(),this.s.C(),this.a.C();var e=this.P;e.parentNode.removeChild(e),delete this.P,F.prototype.o.call(this)},T.prototype.L=function(){return this.P},T.prototype.getElement=T.prototype.L,T.prototype.Ta=function(){return this.i.pixelRatio},T.prototype.getPixelRatio=T.prototype.Ta,T.prototype.S=function(e){var o=e.added,d=e.removed;o&&o.ia()&&o.ia().ga(this),d&&d.ia()&&d.ia().ga(null),d===this.j&&(delete this.j,delete this.s),d===this.g&&(this.g=null),0===e.idx&&(this.dispatchEvent(new aj(this.A.bf,this.g=e.type!==this.a.A.ee?o:0<this.a.a.length?this.a.get(0):y,e.type!==this.a.A.ce?d:1<this.a.a.length?this.a.get(1):y)),Gn(this))},T.prototype.N=function(e){e.modifiers&&(this.B||(Hn(this,"start"),this.B=!0),Hn(this,"",e),this.ca&&x.clearTimeout(this.ca),this.ca=x.setTimeout(this.v,333))},T.prototype.v=function(){Hn(this,"end"),this.B=!1},T.prototype.cg=function(e,o){return this.f.getCapabilities().lookAt&&this.c.Nb({position:e},!!o),this},T.prototype.setCenter=T.prototype.cg,T.prototype.Ya=function(){var e=this.c.eb();return e?e.position:y},T.prototype.getCenter=T.prototype.Ya,T.prototype.Ve=function(e,o){return this.c.Ve(e,!!o),this},T.prototype.setZoom=T.prototype.Ve,T.prototype.ib=function(){return this.c.ib()},T.prototype.getZoom=T.prototype.ib,T.prototype.td=function(e,o,d){this.f.zoomAt(e,o,d)},T.prototype.zoomAt=T.prototype.td,T.prototype.Um=function(){return this.b},T.prototype.getViewPort=T.prototype.Um,T.prototype.Tm=function(){return this.c},T.prototype.getViewModel=T.prototype.Tm,T.prototype.km=function(){return this.a},T.prototype.getLayers=T.prototype.km,T.prototype.em=function(){return this.m},T.prototype.getImprint=T.prototype.em,T.prototype.capture=function(e,o,d,v,w,j){function Z(zy,h0){oy?zy.cancel():(Ay.save(),h0.capture(_y,fd,function(Gy){Ay.restore(),zy.done(Gy)},function(Gy){zy.done(null,Gy),_e(null)}))}function _e(zy){oy||(oy=!0,e(zy))}var _y,Ay,Ki=this.f,_u=Ki.getCapabilities(),fd=this.i.pixelRatio,iy=this.b,oy=!1,dy=this;if(!Da(e))throw new D(this.capture,0,e);v=v||0,j=j||iy.height;var ky=xd(0,wd(d=d||0,w=w||iy.width)),Xy=xd(0,wd(v,j));d=wd(iy.width,xd(d,w)),v=wd(iy.height,xd(v,j)),_u.capture?Ki.capture(ky,Xy,d,v).then(function(zy){var h0=dy.m,Gy=o||[];Ay=(_y=zy).getContext("2d"),_y.style.width=_y.width/fd+"px",_y.style.height=_y.height/fd+"px";var O0=new Kk(10,Z);(Gy=Gy.concat(h0).filter(function(N0){return Da(N0&&N0.capture)})).length?(zy=Gy.pop(),Gy.forEach(function(N0){O0.push(N0,jd)}),O0.push(zy,A(_e,dy,_y)),Dk(O0)):_e(_y)},function(){_e(y)}):e(null)},T.prototype.capture=T.prototype.capture,T.prototype.Vl=function(){return this.f},T.prototype.getEngine=T.prototype.Vl,T.prototype.u=function(e,o){if(o=o?En(o,this.u):this.i,Gn(this),e===ik.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,o);if(e===ik.WEBGL)return new S(this.b,this.c,this.a,o);if(e===ik.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,o);throw new D(this.u,0,e)},T.prototype.Ye=function(e,o,d,v,w){if(o=uc(o)?C(o,K,this.Ye,1,o)&&o:this.c.eb().bounds.F(),!C(w=w||this.g,nl))throw new D(this.Ye,4);var j=w.ia(),Z=this.Ta(),_e=w.tileSize;if(2<=Z&&256<_e&&j instanceof Ck&&(_e/=2),Z=this.ib(),_e=Math.log2(_e)-8,!((d=uc(d)?+d:Z)<=(v=uc(v)?+v:Z)))throw new D(this.Ye,B,"!(min <= max)");Z=j.min;var Ki=j.max,_u=this.f.type===ik.WEBGL?zd:yd;if(d=Zd(_u(d)-_e,Z,Ki),v=Zd(_u(v)-_e,Z,Ki),!(j&&C(j,R)&&md()&&j.s()))throw new Yc(this.Ye,"Storing is not supported");return new yk(w,j,o,d,v,e)},T.prototype.storeContent=T.prototype.Ye,u(In,vj),In.prototype.g=function(){xj(this,2)},In.prototype.f=function(){xj(this,4)},T.prototype.rl=function(e){return e=new In(e),ld().clear(A(e.g,e),A(e.f,e)),e},T.prototype.clearContent=T.prototype.rl,T.prototype.ug=function(e,o){var d=this.a,v=d.indexOf(e),w=o!==+o;return o=w?d.a.length-1:o,0>v?d.add(e,o):v-o&&(d.$b(v),d.add(e,w?o-1:o)),this},T.prototype.addLayer=T.prototype.ug,T.prototype.Oe=function(e){var o=this.a.indexOf(e);return e!==this.g&&e!==this.j&&-1!==o&&this.a.$b(o),this},T.prototype.removeLayer=T.prototype.Oe,T.prototype.qd=function(e){return this.g!==e&&(this.a.a.length&&this.a.get(0)!==this.j?this.a.set(0,e):this.a.add(e,0),this.g=e),this},T.prototype.setBaseLayer=T.prototype.qd,T.prototype.Il=function(){return this.g},T.prototype.getBaseLayer=T.prototype.Il,T.prototype.Aa=function(e){if(!mg(e))throw new D(this.Aa,0,e);return(e=this.f.geoToScreen(e))?zf(e):y},T.prototype.geoToScreen=T.prototype.Aa,T.prototype.Pa=function(e,o){var d;if(d=+E(e)||2*+E(o))throw new D(this.Pa,d-1,arguments[d-1]);return(d=this.f.screenToGeo(e,o))?ng(d):y},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.$f=function(e,o){return this.f.screenToLookAtData(e,o)},T.prototype.screenToLookAtData=T.prototype.$f,T.prototype.aa=function(e){if(!C(e,M))throw new D(this.aa,0,e);return!this.j&&Fn(this),this.s.Ub().aa(e),e},T.prototype.addObject=T.prototype.aa,T.prototype.Da=function(e){if(!C(e,M))throw new D(this.Da,0,e);return!this.j&&Fn(this),this.s.Ub().Da(e),e},T.prototype.removeObject=T.prototype.Da,T.prototype.Na=function(e){return!this.j&&Fn(this),this.s.Ub().Na(e)},T.prototype.getObjects=T.prototype.Na,T.prototype.Qb=function(e){var o;zc(e,this.Qb,0,e),!this.j&&Fn(this);var d=e.length;for(o=0;o<d;o++)this.aa(e[o]);return this},T.prototype.addObjects=T.prototype.Qb,T.prototype.nd=function(e){var o;zc(e,this.nd,0,e),!this.j&&Fn(this);var d=e.length;for(o=0;o<d;o++)this.Da(e[o]);return this},T.prototype.removeObjects=T.prototype.nd,T.prototype.Kd=function(e,o,d){var v;if(v=+E(e)||2*+E(o))throw new D(this.Kd,v-1,arguments[v-1]);this.f.getObjectsAt(e,o,!0,function(w){d(w[0])})},T.prototype.getObjectAt=T.prototype.Kd,T.prototype.Ba=function(e,o,d,v){var w;if(w=+E(e)||2*+E(o))throw new D(this.Kd,w-1,arguments[w-1]);this.f.getObjectsAt(e,o,!1,d,!!v)},T.prototype.getObjectsAt=T.prototype.Ba,T.prototype.Vg=function(e,o,d){var v=d||jf;d=v.visiblesOnly;var w=v.zoom;v=v.types;var j=nh.ANY;C(e,O,this.Vg,0,"area"),xc(o,"Function",this.Vg,1,"callback"),this.s.Na(e,!uc(d)||!!d,uc(w)?+w:this.c.ib(),uc(v)?v&j:j,o)},T.prototype.getObjectsWithin=T.prototype.Vg;var ik={P2D:Nl.P2D,WEBGL:Nl.WEBGL,HARP:Nl.HARP};function Jn(e,o){Jn.l.constructor.call(this,e,o)}function sh(e,o,d){var v="anonymous",w=1;this.c=A(this.c,this),M.call(this,d),this.$(e),d&&((e="crossOrigin")in d&&(v=d[e]),(e="opacity")in d&&(w=d[e])),this.Kk(o,v),this.ac(w)}function Kn(e,o){Kn.l.constructor.call(this,e,o)}T.EngineType=ik,T.prototype.A={xo:"mapviewchangestart",Bi:"mapviewchange",Ci:"mapviewchangeend",bf:"baselayerchange"},u(Jn,rh),t("H.map.Marker",Jn),Jn.prototype.type=nh.MARKER,Jn.prototype.ca=1,Jn.prototype.pa=function(e){if(e!==kh.VISUAL||1===this.uk||1===this.icon.getState())var o=Jn.l.pa.call(this,e);return o||!1},Jn.prototype.invalidate=Jn.prototype.pa,p=Jn.prototype,p.uk=0,p.Oj=function(e){return C(e,Uj)},p.ih=!1,p.hk=function(){this.pa(kh.VISUAL)},p.Ac=function(e){var o=this.icon;return this.ih&&(o.removeEventListener("statechange",this.hk,!1,this),delete this.ih),o&&(this.uk=o.getState()),Jn.l.Ac.call(this,e),0===e.getState()&&(this.ih=!0,Ee(e,"statechange",this.hk,!1,this)),this},Jn.prototype.setIcon=Jn.prototype.Ac,Jn.prototype.b=function(e){return new Uj(e.svg,e)},Jn.prototype.V=function(){var e=this.getIcon(),o=e.fo||0,d=Jn.l.forWorkerMessage.call(this),v=d.properties.icon;return v&&0<o&&Xa(v,{stick_color:e.eo,stick_height:o}),d},Jn.prototype.forWorkerMessage=Jn.prototype.V,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.F=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.F,sh.prototype.Zd=function(e){return C(e,K,this.Zd,0,e),this.$(e)},sh.prototype.setBoundingBox=sh.prototype.Zd,sh.prototype.ba=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ba,sh.prototype.$=function(e){var o=this.a,d=!o;return C(e,K,this.$,0,e),(d||!o.ea(e))&&(this.a=e,d||this.pa(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.$,sh.prototype.Jc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Jc,sh.prototype.Kk=function(e,o){var d=this.b;return d&&1!==d.getState()&&d.cancel(),this.b=new Pj(e,this.c,!0,B,o),this},sh.prototype.setBitmap=sh.prototype.Kk,sh.prototype.c=function(e,o){this.b=o,1===e&&this.pa(kh.VISUAL)},sh.prototype.Nc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Nc,sh.prototype.ac=function(e){var o=this.f,d=2>o;if(!(0<=e&&1>=e))throw new D(this.ac,0);return e!==o&&(this.f=e,d&&this.pa(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.ac,sh.prototype.V=function(){var e=sh.l.V.call(this);return e.geometry=zi(this.a).V(),e.properties.overlay=!0,e},sh.prototype.forWorkerMessage=sh.prototype.V,u(Kn,nl),t("H.map.layer.MarkerTileLayer",Kn);var Ln={markers:[],total:0,requested:0};function Mn(e,o,d,v,w){var Z,j=zd(d);for(e.pixelProjection.Ja(j),o=e.Od(e.ue(o),j),d=e.Be(o,o.left>o.right,~~d,v,w),e=d.tiles,d=d.total,v=e.length,w=[],Z=0;Z<v;Z++)for(j=(o=e[Z]).data.length;j--;)w.push(o.data[j]);return{markers:w,total:e.length,requested:d}}function Nn(e,o,d){var v,w=6;if(o){for(v=' expected close to: "'+o;w--;)-1!==(o=e.a.next())&&(v+=String.fromCharCode(o));v+='"'}throw new D(On,0,"- Malformed WKT: "+(v?d+v:"unexpected end of stream"))}function Pn(e,o){var d=e.next();d!==(o=o?")":"(")&&Nn(e,d,'"'+o+'"')}function Qn(e){return","===Rn(e)&&(e.next(),!0)}function Sn(e,o,d,v,w){var j,Z,_e=2+o+d;for(Z=1;Z<=_e;Z++)(d=e.next())?(j=+d)!==j?Nn(e,d,"number"):1===Z?v[w+1]=j:2===Z?v[w]=j:3===Z&&(v[w+2]=j):Nn(e,d);o||(v[w+2]=0)}Kn.prototype.wc=function(e,o,d,v){return this.ja.providesDomMarkers()?Ln:Mn(this,e,o,d,v)},Kn.prototype.requestMarkers=Kn.prototype.wc,Kn.prototype.vc=function(e,o,d,v){return this.ja.providesDomMarkers()?Mn(this,e,o,d,v):Ln},Kn.prototype.requestDomMarkers=Kn.prototype.vc;var Tn=[];function Un(e,o,d,v){return v||Pn(e,0),Sn(e,o,d,Tn,0),v||Pn(e,1),new lg(Tn[0],Tn[1],o?Tn[2]:B)}function Vn(e,o,d){var v=[];Pn(e,0);do{Sn(e,o,d,v,v.length)}while(Qn(e));return Pn(e,1),new L(v)}function Wn(e,o,d){Pn(e,0);var v=Vn(e,o,d);if(Qn(e)){var w=[];do{w.push(Vn(e,o,d))}while(Qn(e))}return Pn(e,1),new O(v,w)}var Xn=[],Yn=[Wn],Zn=[Un],$n={POINT:Zn,LINESTRING:[Vn],POLYGON:Yn,MULTIPOINT:[Un,Ti],MULTILINESTRING:[Vn,ih],MULTIPOLYGON:[Wn,Gi],GEOMETRY:Xn,GEOMETRYCOLLECTION:Xn,CIRCULARSTRING:Xn,COMPOUNDCURVE:Xn,CURVEPOLYGON:Xn,MULTICURVE:Xn,MULTISURFACE:Xn,CURVE:Xn,SURFACE:Xn,POLYHEDRALSURFACE:Xn,TIN:Xn,TRIANGLE:Xn},ao={Z:1,M:2,ZM:3};function On(e){var o,d=(e=new bo(e)).next();if((o=$n[d.toUpperCase()])||Nn(e,d,"type name"),o!==Xn){d=Rn(e);var v=1&(d=ao[d.toUpperCase()]),w=d>>1;if(v|w&&e.next(),"EMPTY"===(d=Rn(e)))if(e.next(),v=o[1])var j=new v([]);else o!==Zn&&(j=new L([]),o===Yn&&(j=new O(j)));else if("("===d){if(j=o[0],o=o[1]){var Z=[];if(Pn(e,0),j===Un){var _e="("!==Rn(e);do{Z.push(j(e,v,w,_e))}while(Qn(e))}else do{Z.push(j(e,v,w))}while(Qn(e));Pn(e,1),v=new o(Z)}else v=j(e,v,w);j=v}else Nn(e,d,'"Z", "M", "ZM", "(" or "EMPTY"');e.next()&&Nn(e,d,"end of stream")}return j||y}function bo(e){this.a=e}function Rn(e){var o=e.b;if(o===B){for(o=e.a;o.Hb()===co;)o.next();if(eo[o.Hb()])o=(o=o.next())===fo?"":String.fromCharCode(o);else{o.be();do{o.next()}while(!eo[o.Hb()]);o=String.fromCharCode.apply(null,o.Bd())}e.b=o}return o}bo.prototype.next=function(){var e=Rn(this);return""!==e&&delete this.b,e};var co=32,fo=-1,go={Bo:co,vo:40,Ao:41,so:44,to:fo},eo=Object.keys(go).reduce(function(e,o){return e[go[o]]=!0,e},nc());function ho(){}function io(e){this.c=String(e),this.f=0,this.a=[],this.b=!1}function jo(e,o){jo.l.constructor.call(this,Hi,o),this.Zd(e)}function ko(){return Hf("H-core","1.35.2","006bf3428",{region:"row"})}t("H.util.ICharStream",ho),ho.prototype.next=function(){},ho.prototype.be=function(){},ho.prototype.Bd=function(){},ho.prototype.Hb=function(){},t("H.util.CharStream",io),io.prototype.next=function(){var e=this.c.charCodeAt(this.f++);return e=isNaN(e)?-1:e,this.b&&this.a.push(e),e},io.prototype.be=function(){this.b=!0,this.a=[]},io.prototype.Bd=function(){var e=this.a.slice();return this.b=!1,this.a=[],e},io.prototype.Hb=function(){var e=this.c.charCodeAt(this.f);return isNaN(e)?-1:e},t("H.util.wkt.toGeometry",function(e){return On(new io(e))}),u(jo,uh),t("H.map.Rect",jo),jo.prototype.Zd=function(e){if(!C(e,K))throw new D(this.Zd,0,e);e.ea(this.oa)||(this.oa=this.B=e,this.a!==y&&jo.l.$.call(this,zi(e)))},jo.prototype.setBoundingBox=jo.prototype.Zd,jo.prototype.F=function(){return this.B},jo.prototype.getBoundingBox=jo.prototype.F,jo.prototype.$=function(){return this},jo.prototype.setGeometry=jo.prototype.$,jo.prototype.ba=function(){return this.a===Hi&&jo.l.$.call(this,zi(this.oa)),this.a},jo.prototype.getGeometry=jo.prototype.ba,t("H.buildInfo",ko);var lo="cn"===ko().region,hk=ik[lo?"HARP":"WEBGL"],mo,no="maps".concat("js-"),oo,po,qo,ro,so;if(oo=x.document.querySelector('script[src*="'+no+'"]'),!oo)for(po=x.document.getElementsByTagName("script"),ro=new RegExp("^.*"+no),so=0,qo=po.length;so<qo;so++)if(ro.test(po[so].src)){oo=po[so];break}function to(){var e=decodeURIComponent(mo);if(e){e="/"===e[e.length-1]?e.substring(0,e.length-1):e;var o=x.document,d="";o?((o=o.createElement("a")).href=e,d=o.href):/[\w]+:\/\//.test(e)&&(d=e),(e=new URL(d)).pathname+="/"===e.pathname[e.pathname.length-1]?"styles":"/styles",e=e.toString()}else e="https://js.api.here.com/v3/3.1.35.2/styles";return e}function uo(e){var o=e.ownerDocument;o=o.documentElement||o.body.parentNode||o.body;try{var d=e.getBoundingClientRect()}catch(v){d={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:d.left+("number"==typeof window.pageXOffset?window.pageXOffset:o.scrollLeft),y:d.top+("number"==typeof window.pageYOffset?window.pageYOffset:o.scrollTop)}}mo=oo?oo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return mo}),t("H.getStylePath",to);var vo=function(){return this}.apply(null);function wo(e,o,d,v,w,j){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(o))throw Error("y needs to be a number");if(isNaN(d))throw Error("pointer must have an id");this.viewportX=e,this.viewportY=o,this.target=null,this.id=d,this.type=v,this.dragTarget=null,this.button=uc(w)?w:-1,this.buttons=uc(j)?j:0,this.a=this.button}function xo(e,o,d){if(isNaN(o))throw Error("x needs to be a number");if(isNaN(d))throw Error("y needs to be a number");e.viewportX=o,e.viewportY=d}function yo(e,o){e.a=o,e.buttons|=zo[+o]||0}function Ao(e,o){e.a=o,e.buttons&=~(zo[+o]||0)}t("H.mapevents.Pointer",wo),wo.prototype.im=function(){return this.a},wo.prototype.getLastChangedButton=wo.prototype.im;var zo=[1,4,2],Bo={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Co(e,o,d,v,w,j,Z){Co.l.constructor.call(this,e),this.pointers=o,this.changedPointers=d,this.targetPointers=v,this.currentPointer=w,this.originalEvent=Z,this.target=j}function Do(e){this.a=e instanceof Array?e.slice(0):[]}function Eo(e,o){return-1!==(o=e.indexOf(o))?e.a[o]:null}function Fo(e,o){for(var d=e.a.length,v=[];d--;)e.a[d].type!==o&&v.push(e.a[d]);e.a=v}function Go(e,o){for(var d=e.a.length;d--;)if(e.a[d].dragTarget===o)return!0;return!1}function Ho(e,o,d){if(d=d||{},!(e instanceof T))throw Error("events: map instance required");if(!(o instanceof Array))throw Error("events: map array required");nd.call(this),this.Fg=d.Fg||300,this.Si=d.Si||50,this.Uk=d.Uk||50,this.Vk=d.Vk||500,this.nh=d.nh||900,this.mh=d.mh||8,this.map=e,this.s=this.map.b,this.f=this.s.element,this.B=o,this.a=new Do,this.b=new Do,this.j={},this.c=null,this.u=!0,this.R={},this.g={},this.m=null,this.ne=A(this.ne,this),this.S={pointerdown:this.vl,pointermove:this.wl,pointerup:this.xl,pointercancel:this.ul},Io(this)}function Io(e,o){var d,v=e.B.length;for(d=0;d<v;d++){var w=e.B[d],j=w.listener;"function"==typeof j&&(o?(w.target||e.f).removeEventListener(w.La,j):(w.target||e.f).addEventListener(w.La,j))}}function Jo(e,o,d){var v;if("function"==typeof e.S[o]){"pointermove"!==o&&(e.u=!0);var w=0;for(v=e.b.length();w<v;w++){var j=e.b.a[w]||null;e.f.contains(d.composedPath()[0])?Ko(e,j,e.Zi.bind(e,d,o,j)):e.Zi(d,o,j,null)}}e.b.clear()}function Ko(e,o,d){if(e.c===o)d(o.target);else{var v=e.s,w=o.viewportX;if(o=o.viewportY,0>w||0>o||w>=v.width||o>=v.height)d(y);else{var j=e.map;j.Kd(w,o,function(Z){d(Z||j)})}}}function Mo(e,o,d){o===e.c&&(No(e,o.dragTarget,"dragend",d,o),e.c=null,Lo(o.id,e.R)),o.dragTarget=null}function Lo(e,o){o[e]&&(o[e].timeout?clearTimeout(o[e].timeout):clearTimeout(o[e]),delete o[e])}function Oo(e,o,d){var v=o.target,w=new G(o.viewportX,o.viewportY),j=o.id;Lo(j,e.g);var Z=setTimeout(function(){v&&v===o.target&&w.Sa({x:o.viewportX,y:o.viewportY})<e.mh&&(No(e,v,"longpress",d,o),delete e.j[o.id])},e.nh);e.g[j]={timeout:Z,Je:w}}function No(e,o,d,v,w){if(o&&"function"==typeof o.dispatchEvent){var Ki,j=Co,Z=e.a.Ha(),_e=e.b.Ha(),_u=(e=e.a).a.length,fd=[];for(Ki=0;Ki<_u;Ki++)e.a[Ki].target===o&&fd.push(e.a[Ki]);j=new j(d,Z,_e,fd,w,o,v),w.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(d)?w.a:Bo.NONE,o.dispatchEvent(j)}return j}function Po(e){this.i=A(this.i,this),Ho.call(this,e,[{La:"touchstart",listener:this.i},{La:"touchmove",listener:this.i},{La:"touchend",listener:this.i},{La:"touchcancel",listener:this.i}]),this.I={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(e=(e=e.m)?e.L():null)?Array.prototype.slice.call(e.querySelectorAll("a"),0):[]}function Qo(e){var o=Ro(this);(window.PointerEvent||window.MSPointerEvent)&&o.push({La:"MSHoldVisual",listener:"prevent"}),Ho.call(this,e,o)}function Ro(e){var d,o=!!window.PointerEvent,w=[];return e.i=A(e.i,e),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(j){d=j.toLowerCase().replace(/ms/g,""),w.push({La:o?d:j,listener:e.i,target:/^pointer(up|move)$/.test(d)?window:null})}),w}wo.Button=Bo,u(Co,sd),t("H.mapevents.Event",Co),p=Do.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(e){for(var o=this.a.length;o--;)if(this.a[o].id===e)return o;return-1},p.remove=function(e){return-1!==(e=this.indexOf(e))?this.a.splice(e,1)[0]:null},p.push=function(e){if(e instanceof wo)return this.a.push(e);throw Error("list needs a pointer")},p.Ha=function(){return this.a},p.clone=function(){return new Do(this.a)},u(Ho,nd),p=Ho.prototype,p.Zi=function(e,o,d,v){Lo(d.id,this.R),this.S[o].call(this,d,v,e)},p.xl=function(e,o,d){var v=e.id;e.target=o,Mo(this,e,d),No(this,o,"pointerup",d,e),"mouse"!==e.type&&No(this,o,"pointerleave",d,e);var j=d.timeStamp,Z=e.target,_e=this.m;(o=this.j[e.id])&&o.target===Z&&o.Je.Sa({x:e.viewportX,y:e.viewportY})<this.Uk&&j-o.si<this.Vk?(No(this,Z,"tap",d,e),_e&&_e.target===Z&&j-_e.si<this.Fg?_e.Je.Sa({x:e.viewportX,y:e.viewportY})<this.Si&&(No(this,Z,"dbltap",d,e),this.m=null):this.m={target:Z,Je:new G(e.viewportX,e.viewportY),si:d.timeStamp}):this.m=null,this.j={},Lo(v,this.g)},p.ne=function(e,o){var d=this;No(this,e.dragTarget,"drag",o,e),Lo(e.id,this.R),this.R[e.id]=setTimeout(function(){d.ne(e,o)},150)},p.wl=function(e,o,d){var v=e.dragTarget,w=e.id,j=e.target;e.target=o,j!==o&&(No(this,j,"pointerleave",d,e),No(this,o,"pointerenter",d,e)),v?this.c?(this.ne(e,d),this.g[w]&&this.g[w].Je.Sa({x:e.viewportX,y:e.viewportY})>this.mh&&Lo(w,this.g)):this.u?this.u=!1:(this.c=e,No(this,v,"dragstart",d,e),this.ne(e,d),delete this.j[w],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==o&&this.c.dragTarget!==this.map)&&No(this,o,"pointermove",d,e)},p.vl=function(e,o,d){var v=!(/^(?:mouse|pen)$/.test(e.type)&&0!==d.button);if(o){e.target=o,this.j[e.id]={Je:new G(e.viewportX,e.viewportY),target:e.target,si:d.timeStamp},"mouse"!==e.type&&No(this,o,"pointerenter",d,e);var w=No(this,o,"pointerdown",d,e);!this.c&&v&&(o.draggable&&!Go(this.a,o)?e.dragTarget=o:!this.map.draggable||w.defaultPrevented||Go(this.a,this.map)||(e.dragTarget=this.map)),Oo(this,e,d)}},p.ul=function(e,o,d){var v=e.id;e.target=null,o?(No(this,o,"pointerleave",d,e),No(this,o,"pointercancel",d,e)):No(this,this.map,"pointercancel",d,e),Mo(this,e,d),this.j={},Lo(v,this.g)},p.o=function(){Io(this,!0),this.a.clear(),this.b.clear();var o,e=this.R;for(o in e)Lo(o,e);for(var d in e=this.g)Lo(d,e);delete this.f,delete this.B,delete this.a,delete this.b,delete this.map,this.m=null,delete this.j,this.c=null,nd.prototype.o.call(this)},u(Po,Ho),Po.prototype.i=function(e){var v,o=e.touches,d=this.a.length();if("touchstart"===e.type&&d>=o.length){for(d=this.a.clone(),v=o.length;v--;)d.remove(o[v].identifier);for(v=d.length();v--;)this.a.remove((d.a[v]||null).id);this.b=d,Jo(this,"pointercancel",e),this.b.clear()}if(this.I[e.type]){o=uo(this.s.element),d=e.type;var j,w=(v=e.changedTouches).length;for(this.b.clear(),j=0;j<w;j++){var Z=v[j],_e=Eo(this.a,Z.identifier),Ki=Z.pageX-o.x,_u=Z.pageY-o.y;if(_e)if("touchmove"===d){Z=Math.abs(_e.viewportX-Ki);var fd=Math.abs(_e.viewportY-_u);(1<Z||1<fd||1===Z&&1===fd)&&(xo(_e,Ki,_u),this.b.push(_e))}else"touchend"===d&&(this.a.remove(_e.id),this.b.push(_e),Ao(_e,Bo.LEFT));else _e=new wo(Ki,_u,Z.identifier,"touch",Bo.LEFT,1),this.a.push(_e),this.b.push(_e)}Jo(this,this.I[e.type],e),-1===this.v.indexOf(e.target)&&e.preventDefault()}},Po.prototype.o=function(){this.v=null,Ho.prototype.o.call(this)},u(Qo,Ho);var So={2:"touch",3:"pen",4:"mouse"};function To(e,o,d,v){To.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=e,this.viewportY=o,this.target=d,this.originalEvent=v}function Uo(e){this.$g=A(this.$g,this),this.bh=A(this.bh,this),this.ah=A(this.ah,this),this.v=!1,this.i=-1,this.I=0,Uo.l.constructor.call(this,e,[{La:"contextmenu",listener:this.$g},{target:e,La:"longpress",listener:this.bh},{target:e,La:"dbltap",listener:this.ah}])}function Vo(e,o,d,v,w){var j=e.map,Z=Date.now()-e.I;w?!e.v&&Z>e.nh&&(e.v=!0,w.dispatchEvent(new To(o,d,w,v)),Ee(j.L(),Wo,e.Yi,!1,e)):j.Kd(o,d,e.sn.bind(e,o,d,v))}Qo.prototype.i=function(e){var o=window.PointerEvent?e.type:e.type.toLowerCase().replace(/ms/g,""),d=uo(this.f),v=Eo(this.a,e.pointerId),w=e.pageX-d.x;d=e.pageY-d.y;var j=So[e.pointerType]||e.pointerType;if($c&&"rtl"===x.getComputedStyle(this.s.element).direction&&(w-=(x.devicePixelRatio-1)*this.s.width),!(v||/^pointer(up|out|cancel)$/.test(o)||"touch"===j&&"pointerdown"!==o)){var Z=e.pointerType;"number"==typeof Z&&(Z=So[Z]),v=new wo((v={x:w,y:d}).x,v.y,e.pointerId,Z,e.button,e.buttons),this.a.push(v)}v&&(/^pointer(up|cancel)$/.test(o)?("touch"===j&&this.a.remove(v.id),Ao(v,e.button)):"pointerdown"===o&&("touch"===e.pointerType&&(Fo(this.a,"mouse"),Fo(this.a,"pen")),yo(v,e.button)),this.b.push(v),"pointermove"!==o?(xo(v,w,d),Jo(this,/^pointer(over|out)$/.test(o)?"pointermove":o,e)):(v.viewportX!==w||v.viewportY!==d)&&(xo(v,w,d),Jo(this,o,e))),this.b.clear()},u(To,sd),t("H.mapevents.ContextMenuEvent",To),u(Uo,Ho),p=Uo.prototype,p.bh=function(e){var o=e.currentPointer;"touch"===o.type&&1===e.pointers.length&&Vo(this,o.viewportX,o.viewportY,e.originalEvent,e.target)},p.ah=function(e){"touch"===e.currentPointer.type&&(this.I=Date.now())},p.$g=function(e){var o=this;-1===this.i?this.i=setTimeout(function(){var d=uo(o.f),v=e.pageX-d.x;d=e.pageY-d.y,o.i=-1,Vo(o,v,d,e)},this.Fg):(clearInterval(this.i),this.i=-1),e.preventDefault()},p.sn=function(e,o,d,v){Vo(this,e,o,d,v=v&&Da(v.dispatchEvent)?v:this.map)},p.Yi=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new sd("contextmenuclose",this.map)))},p.o=function(){var e=this.map.L();clearInterval(this.i),e&&Le(e,Wo,this.Yi,!1,this),Ho.prototype.o.call(this)};var Wo=["mousedown","touchstart","pointerdown","wheel"];function Xo(e,o,d,v,w){Xo.l.constructor.call(this,"wheel"),this.delta=e,this.viewportX=o,this.viewportY=d,this.target=v,this.originalEvent=w}function Yo(e){var o="onwheel"in document;this.ca=o,this.I=(o?"d":"wheelD")+"elta",this.i=A(this.i,this),Yo.l.constructor.call(this,e,[{La:(o?"":"mouse")+"wheel",listener:this.i}]),this.v=this.map.b}function Zo(e){this.i=A(this.i,this),Ho.call(this,e,[{La:"mousedown",listener:this.i},{La:"mousemove",listener:this.i,target:window},{La:"mouseup",listener:this.i,target:window},{La:"mouseover",listener:this.i},{La:"mouseout",listener:this.i},{La:"dragstart",listener:this.v}])}function $o(e){var o=e.b.element.style;if(-1!==ap.indexOf(e))throw Error("InvalidArgument: map is already in use");this.a=e,ap.push(e),o.msTouchAction=o.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Po(this.a),this.b=new Zo(this.a)):this.c=new Qo(this.a),this.g=new Yo(this.a),this.f=new Uo(this.a),this.a.mb(this.C,this),nd.call(this)}u(Xo,sd),t("H.mapevents.WheelEvent",Xo),u(Yo,Ho),Yo.prototype.i=function(e){if(!e.dl){var o=uo(this.f),d=e.pageX-o.x;o=e.pageY-o.y;var j,v=this.I,w=e[v+(v+"Y"in e?"Y":"")];if($c&&"rtl"===x.getComputedStyle(this.v.element).direction&&(d-=(x.devicePixelRatio-1)*this.v.width),w){var Z=Math.abs,_e=Z(w);w=(!(j=e[v+"X"])||3<=_e/Z(j))&&(!(j=e[v+"Z"])||3<=_e/Z(j))?(+(0<w)-+(0>w))*(this.ca?1:-1):0}(d=new Xo(w,d,o,null,e)).delta&&(e.stopImmediatePropagation(),e.preventDefault(),this.map.Kd(d.viewportX,d.viewportY,this.N.bind(this,d)))}},Yo.prototype.N=function(e,o){var v,w,d=e.target=o||this.map;setTimeout(function(){d.dispatchEvent(e),e.c||((w=new x.WheelEvent("wheel",v=e.originalEvent)).dl=!0,v.target.dispatchEvent(w))},0)},u(Zo,Ho),Zo.prototype.i=function(e){var v,o=e.type,d=uo(this.f);d={x:e.pageX-d.x,y:e.pageY-d.y},(v=this.a.a[0]||null)||(v=new wo(d.x,d.y,1,"mouse"),this.a.push(v)),this.b.push(v),xo(v,d.x,d.y),/^mouse(?:move|over|out)$/.test(o)?Jo(this,"pointermove",e):(/^mouse(down|up)$/.test(o)&&(d=e.which-1,"up"===vo.RegExp.$1?Ao(v,d):yo(v,d)),Jo(this,o.replace("mouse","pointer"),e)),this.b.clear()},Zo.prototype.v=function(e){e.preventDefault()},u($o,nd),t("H.mapevents.MapEvents",$o);var ap=[];function bp(e,o){var d;if(o=void 0===o?{}:o,bp.l.constructor.call(this),-1!==cp.indexOf(e))throw new D(bp,0,"events are already used");this.b=d=e.a,this.j=e,cp.push(e),d.draggable=!0,this.i=o.kinetics||{duration:600,ease:Zl},this.m=o.modifierKey||"Alt",this.enable(o.enabled),this.c=d.b,this.f=this.c.element,this.g=0,d.addEventListener("dragstart",this.xh,!1,this),d.addEventListener("drag",this.Xj,!1,this),d.addEventListener("dragend",this.wh,!0,this),d.addEventListener("wheel",this.lk,!1,this),d.addEventListener("dbltap",this.gk,!1,this),d.addEventListener("pointermove",this.Yj,!1,this),De(this.f,"contextmenu",this.Wj,!1,this),e.mb(this.C,this)}Gc(ap),$o.prototype.C=function(){delete this.a,this.c.C(),this.g.C(),this.f.C(),this.b&&this.b.C(),ap.splice(ap.indexOf(this.a),1),nd.prototype.C.call(this)},$o.prototype.dispose=$o.prototype.C,$o.prototype.Hl=function(){return this.a},$o.prototype.getAttachedMap=$o.prototype.Hl,u(bp,nd),t("H.mapevents.Behavior",bp);var cp=[];Gc(cp),bp.prototype.a=0;var dp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};bp.Feature=dp;var ep=dp.PANNING,fp=dp.PINCH_ZOOM,gp=dp.WHEEL_ZOOM,hp=dp.DBL_TAP_ZOOM,ip=dp.FRACTIONAL_ZOOM,jp=dp.TILT,kp=dp.HEADING,lp=ep|fp|gp|hp|ip|jp|kp;function mp(e,o){if(e!==+e||e%1||0>e||2147483647<e)throw new D(o,0,"integer in range [0...0x7FFFFFFF] required")}function np(e,o,d){var j,v="touch"===o.currentPointer.type,w=0;if(j=!v){j=e.m;var Z,_e=o.originalEvent;Z=_e.getModifierState?_e.getModifierState(j):!!_e[j.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],j=Z}return j?w|=jp|kp:(w|=ep,v&&2===(o=o.pointers).length&&(w|=fp|kp,d?55>Bd(o[0].viewportY-o[1].viewportY)&&(w|=jp):e.fh&Hl.TILT&&(w|=jp))),((w&=e.a)&jp?Hl.TILT:0)|(w&kp?Hl.HEADING:0)|(w&fp?Hl.ZOOM:0)|(w&ep?Hl.COORD:0)}function op(e){var o=e.pointers;return e=[(e=o[0]).viewportX,e.viewportY],(o=o[1])&&e.push(o.viewportX,o.viewportY),e}function pp(e,o,d,v,w){var j=+d-+o;if(e=e.b.c,isNaN(+o))throw Error("start zoom needs to be a number");if(isNaN(+d))throw Error("to zoom needs to be a number");0!==j&&(e.startControl(null,v,w),e.control(0,0,6,0,0,0),e.endControl(!0,function(Z){Z.zoom=d}))}function qp(e,o){return Xa.apply(null,arguments),e}function rp(e,o){var d=x.console;d&&d.warn&&(e=wc(e)+" is deprecated and will be removed soon. ",o&&(e+=o),d.warn(e))}bp.DRAGGING=ep,bp.WHEELZOOM=gp,bp.DBLTAPZOOM=hp,bp.FRACTIONALZOOM=ip,bp.prototype.disable=function(e){var o=this.a;e!==B?(mp(e,this.disable),o^=o&e):o=0,this.c.endInteraction(!0),this.a=o,this.b.draggable=0<(o&(ep|jp|kp|fp))},bp.prototype.disable=bp.prototype.disable,bp.prototype.enable=function(e){var o=this.a;e!==B?(mp(e,this.enable),o|=e&lp):o=lp,this.a=o,this.b.draggable=0<(o&(ep|jp|kp|fp))},bp.prototype.enable=bp.prototype.enable,bp.prototype.isEnabled=function(e){return mp(e,this.isEnabled),e===(this.a&e)},bp.prototype.isEnabled=bp.prototype.isEnabled,p=bp.prototype,p.fh=0,p.xh=function(e){var o=np(this,e,!0);if(this.fh=o){var d=this.c;if(e=op(e),d.startInteraction(o,this.i),d.interaction.apply(d,e),this.a&gp&&!(this.a&ip)&&(o=e[0],d=e[1],this.g)){e=this.b.ib();var v=(0>this.g?Ad:zd)(e);e!==v&&(this.g=0,pp(this,e,v,o,d))}}},p.Xj=function(e){var o=np(this,e,!1);if(o!==this.fh)"pointerout"!==e.originalEvent.type&&"pointerover"!==e.originalEvent.type&&(this.wh(e),this.xh(e));else if(o){o=this.c;var d=op(e);o.interaction.apply(o,d),e.originalEvent.preventDefault()}},p.wh=function(e){np(this,e,!1)&&this.c.endInteraction(!this.i)},p.lk=function(e){if(!e.defaultPrevented&&this.a&gp){var o=e.delta,d=this.b.ib(),v=this.b,w=v.f.type;v=this.a&ip?d-o:(0>-o?Ad:zd)(d)-o,(w===ik.P2D||w===ik.WEBGL||w===ik.HARP)&&(pp(this,d,v,e.viewportX,e.viewportY),this.g=o),e.preventDefault()}},p.Yj=function(){},p.gk=function(e){var o=e.currentPointer,d=this.b.ib(),w=this.b.f.type;(w===ik.P2D||w===ik.WEBGL||w===ik.HARP)&&this.a&hp&&(e="mouse"===e.currentPointer.type?0===e.originalEvent.button?-1:1:0<e.pointers.length?1:-1,pp(this,d,e=this.a&ip?d-e:(0>-e?Ad:zd)(d)-e,o.viewportX,o.viewportY))},p.Wj=function(e){return!(this.a&hp&&(e.preventDefault(),1))},p.C=function(){var e=this.b;e&&(e.draggable=!1,e.removeEventListener("dragstart",this.xh,!1,this),e.removeEventListener("drag",this.Xj,!1,this),e.removeEventListener("dragend",this.wh,!0,this),e.removeEventListener("wheel",this.lk,!1,this),e.removeEventListener("dbltap",this.gk,!1,this),e.removeEventListener("pointermove",this.Yj,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Le(this.f,"contextmenu",this.Wj,!1,this),delete this.f),delete this.c,delete this.i,cp.splice(cp.indexOf(this.j),1),delete this.j,nd.prototype.C.call(this)},bp.prototype.dispose=bp.prototype.C,t("H.mapevents.buildInfo",function(){return Hf("H-mapevents","1.35.2","006bf3428",{region:"row"})}),R.prototype.m=ca(3,function(e){var o=this.getCache(),d=this;if(e!==y){C(e,Pk,R.prototype.m,0);var v=e}else v=wl;v!==o&&o.ka(function(w,j,Z){return!!d.Rb(w)&&(v.add(w,j,Z),!0)}),this.S=v}),qi.prototype.b=ca(2,function(e){this.g=e,(e=this.getState())!==Uh.INIT&&e!==Uh.LOADING&&xi(this)});var sp=globalThis;function tp(){}sc("monospace serif"),tp.prototype.pop=function(e){return this[e]||(this[e]=[]),this[e].pop()||document.createElement("canvas")},tp.prototype.push=function(e,o){this[o]||(this[o]=[]),this[o].push(e)};var up=new tp;function U(e,o,d,v,w,j){if(!e||!o)throw new D(U,B,'Parameters "scheme" and "host" must be specified');this.li(e),this.Te(o),this.sd(d),this.hi(w),this.Hk(j),this.eg(v)}function vp(e,o){var v,Ki,_u,d=x.document,w="";if(d){if(w=d.createElement("a"),o){var j=(v=d.getElementsByTagName("base")[0])&&v.href,Z=d.head,_e=v||Z.appendChild(d.createElement("base"));_e.href=o}w.href=e,w=w.href,o&&(v?v.href=j:Z.removeChild(_e))}else/[\w]+:\/\//.test(e)&&(w=e);if(e=(j=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(w))[1],Z=j[4],o=j[5],_e=j[6],d=j[7],v=j[8],!j[2]&&Z&&/@/.test(Z)&&(Z=Z.split("@")[1]),j=U,_e=_e&&0<_e.length?_e.substr(1):"",w={},d)for(Ki=/([?&]?([^=&+]+))(=([^&]+))?/g;_u=Ki.exec(d);)w[decodeURIComponent(_u[2])]=_u[4]?decodeURIComponent(_u[4]):void 0;return new j(e,Z,_e,w,isNaN(+o)?void 0:+o,v&&0<v.length?v.substr(1):"")}function xp(e){function o(Z,_e){return encodeURIComponent(Z)+(void 0===_e?"":"="+encodeURIComponent(_e).replace(/[!'()*]/g,function(Ki){return"%"+Ki.charCodeAt(0).toString(16)}))}var v,d=[],w=e.a;for(v in w)if(w.hasOwnProperty(v)&&"function"!=typeof w[v]){var j=e.a[v];C(j,yp)?j.a.forEach(function(Z){d.push(o(v,Z))}):d.push(o(v,j))}return 0<d.length?"?"+d.join("&"):""}function zp(e){var o=Hf("H-service","1.35.2","006bf3428",{region:"row"});return e.a.xnlp="CL_JSMv3."+o.version,e}function wp(e){var o,d=0;for(o in e.a)if(e.a.hasOwnProperty(o)&&"function"!=typeof e.a[o]&&0<++d)break;return!d}function yp(e){var o;if(!zc(e))throw new D(yp,0,e);for(o=0;o<e.length;o++){var d=e[o];if(!Ac(d)&&!Dc(d))throw new D(yp,0,"The array can only contain strings and numbers")}this.a=e}function V(e){var o=(e=qp({},this.c,e)).apikey||e.apiKey,d=e.baseUrl;if(d=o?d?0:"baseUrl":"apikey")throw new D(V,0,'"'+d+'" must be specified');this.Jk(e.baseUrl),this.b=o,this.a.G({apikey:o}),this.f=e.headers||{},this.g=Va(e.servicesConfig||{})}function Ap(e){if(!e||!Da(e.requestData))throw new D(Ap,0,"options.requestData");Ap.l.constructor.call(this,e),this.I=e.requestData,this.B=!!e.providesDomMarkers}function Bp(){this.a={}}t("H.service.util.eval",function(a){return eval(a)}),t("H.service.Url",U),U.parse=vp,U.prototype.clone=function(){var o,e={};for(o in this.a)e[o]=this.a[o];return new U(this.i,this.g,this.b,e,this.f,this.c)},U.prototype.clone=U.prototype.clone,U.prototype.li=function(e){if(!e||"string"!=typeof e)throw new D(this.li,0,'The "scheme" parameter must be a non-empty string.');return this.i=e,this},U.prototype.setScheme=U.prototype.li,U.prototype.Hm=function(){return this.i},U.prototype.getScheme=U.prototype.Hm,U.prototype.Te=function(e){if(!e||"string"!=typeof e||"-"===e.charAt(0)||"."===e.charAt(0)||"."===e.charAt(e.length-1))throw new D(this.Te,0,'The "host" parameter is not a valid host name.');return this.g=e,this},U.prototype.setHost=U.prototype.Te,U.prototype.cm=function(){return this.g},U.prototype.getHost=U.prototype.cm,U.prototype.sd=function(e){return this.b=e||void 0,this},U.prototype.setPath=U.prototype.sd,U.prototype.vm=function(){return this.b},U.prototype.getPath=U.prototype.vm,U.prototype.eg=function(e){if(e){if("object"!=typeof e)throw new D(this.eg,0,'Parameter "params" must be an object.');this.a=e}else this.a={};return this},U.prototype.setQuery=U.prototype.eg,U.prototype.Fj=function(){return!wp(this)},U.prototype.hasQuery=U.prototype.Fj,U.prototype.getQuery=function(){return this.a},U.prototype.getQuery=U.prototype.getQuery,U.prototype.hi=function(e){if(void 0===e)this.f=e;else{var o=Zd(+e<<0,0,65535);if(o!=e)throw new D(this.hi,0,'Parameter "port" must be an integer in range [0...65535]');this.f=o}return this},U.prototype.setPort=U.prototype.hi,U.prototype.ym=function(){return this.f},U.prototype.getPort=U.prototype.ym,U.prototype.Hk=function(e){return this.c=e||void 0,this},U.prototype.setAnchor=U.prototype.Hk,U.prototype.ed=function(){return this.c},U.prototype.getAnchor=U.prototype.ed,U.prototype.G=function(e){if("object"!=typeof e)throw new D(this.G,0,'Parameter "other" must be an object.');var d,o=this.a;for(d in e)e.hasOwnProperty(d)&&"function"!=typeof e[d]&&(o[d]=e[d]);return this},U.prototype.mergeQuery=U.prototype.G,U.prototype.za=function(e){if(!e||"string"!=typeof e)throw new D(this.za,0,'Parameter "subDomain" must be a non-empty string');return"."===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),this.Te(e+"."+this.g)},U.prototype.addSubDomain=U.prototype.za,U.prototype.K=function(e){if(!e||"string"!=typeof e)throw new D(this.K,0,'Parameter "subPath" must be a non-empty string');return this.sd((this.b?this.b+"/":"")+e)},U.prototype.addSubPath=U.prototype.K,U.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!wp(this)||this.c?"/":"",this.b?encodeURI(this.b):"",xp(this),this.c?"#"+encodeURIComponent(this.c):""].join("")},U.prototype.toString=U.prototype.toString,U.MultiValueQueryParameter=yp,yp.prototype.Sm=function(){return this.a},yp.prototype.getValues=yp.prototype.Sm,t("H.service.Platform",V),V.prototype.c={apikey:null,baseUrl:new U("https","hereapi"+(lo?".cn":".com"))},V.prototype.Jk=function(e){this.a=zp(e.clone()),this.b=e=this.b,this.a.G({apikey:e})},V.prototype.setBaseUrl=V.prototype.Jk,V.prototype.Ab=function(){return this.a},V.prototype.getBaseUrl=V.prototype.Ab,V.prototype.Qa=function(e,o){try{return e.Mj=!0,new e(qp({platformBaseUrl:this.Ab(),headers:this.f},this.g[e.CONFIG_KEY]||{},o||{}))}finally{e.Mj=!1}},V.prototype.createService=V.prototype.Qa,V.prototype.lf=function(e,o,d,v,w,j){function Z(dy,_y,Ay,ky,Xy){return dy.hc(_y,Ay,fd,ky,iy,1,Xy,Ki)}var _e=hk,Ki={crossOrigin:"anonymous"};if(Ea(e)){var _u=e;"crossOrigin"in _u&&(Ki.crossOrigin=_u.crossOrigin),e=_u.tileSize,o=_u.ppi,d=_u.lg,v=_u.lg2,w=_u.style,j=_u.pois,_u.engineType&&(Ki.engineType=_e=_u.engineType)}var fd=e||512,iy={};if(0>[72,250,320,500].indexOf(+o)){if(o!==B)throw new D(this.lf,1,o)}else iy.ppi=+o;if(d&&(iy.lg=d),v&&(iy.lg2=v),w&&(iy.style=w),j&&(iy.pois=!!j),_e===ik.HARP&&!H.map.render.harp)throw new D(this.lf,0,"HARP engine is not supported, module not found");if(e=this.sj(),w=_e===ik.WEBGL?new qi(to()+"/omv/miami/normal.day.yaml"):new H.map.render.harp.Style(to()+"/harp/oslo/normal.day.json"),o={engineType:_e},_u&&_u.politicalView&&(o.politicalView=_u.politicalView),d&&(o.lg=d),v&&(o.lg2=v),j&&(o.pois=j),d=e.bd(w,o),v={},lo)qp(v,{vector:{normal:{map:d}}});else{j=this.Ug(),_u=this.Ug({type:"aerial"}),w=this.yj();var oy=_e===ik.WEBGL?new qi(to()+"/omv/miami/truck.day.yaml"):new H.map.render.harp.Style(to()+"/harp/oslo/normal.day.json");e=e.bd(oy,o),o=w.Qi(iy.lg?{lg:iy.lg,i18n:!0,engineType:_e}:{engineType:_e}),qp(v,{vector:{normal:{map:d,truck:e,traffic:w.Pi(void 0,_e),trafficincidents:o}},raster:{normal:{xbase:Z(j,"xbasetile","normal.day","png8",!1),xbasenight:Z(j,"xbasetile","normal.night","png8",!0),base:Z(j,"basetile","normal.day","png8",!1),basenight:Z(j,"basetile","normal.night","png8",!0),map:Z(j,"maptile","normal.day","png8",!1),mapnight:Z(j,"maptile","normal.night","png8",!0),trafficincidents:o,transit:Z(j,"maptile","normal.day.transit","png8",!1),labels:Z(j,"labeltile","normal.day","png",!1)},satellite:{xbase:Z(_u,"xbasetile","hybrid.day","jpg",!0),base:Z(_u,"basetile","hybrid.day","jpg",!0),map:Z(_u,"maptile","hybrid.day","jpg",!0),labels:Z(_u,"labeltile","hybrid.day","png",!0)},terrain:{xbase:Z(_u,"xbasetile","terrain.day","jpg",!1),base:Z(_u,"basetile","terrain.day","jpg",!1),map:Z(_u,"maptile","terrain.day","jpg",!1),labels:Z(_u,"labeltile","terrain.day","png",!1)}}})}return v},V.prototype.createDefaultLayers=V.prototype.lf,u(Ap,R),t("H.map.provider.MarkerTileProvider",Ap),Ap.prototype.Ed=function(e){return e?e.length+1:1},Ap.prototype.getEntryWeight=Ap.prototype.Ed,Ap.prototype.J=function(e,o,d,v,w){var j=this;return this.I(e,o,d,function(Z){for(var Ki,_u,_e=[],fd=Z.length;fd--;)(_u=Z[fd]).io=j.getTileKey(e,o,d),_u.ga(j),Ki=_u.pb(),(C(_u,$i)||1===Ki.getState())&&_e.push(Z[fd]);v(_e)},w)},Ap.prototype.requestInternal=Ap.prototype.J,Ap.prototype.Pd=function(e,o){o===kh.VISUAL&&(e=this.Cb().get(e.io))&&(e.valid=!1,this.Ra(e))},Ap.prototype.invalidateObject=Ap.prototype.Pd,Ap.prototype.Ib=function(){return this.B},Ap.prototype.providesDomMarkers=Ap.prototype.Ib,Ap.prototype.Jb=ff,Ap.prototype.providesMarkers=Ap.prototype.Jb,Bp.prototype.pb=function(e,o){var v,d=e+o;return(v=this.a[d])?v:(e=(e=Cp.MARKER.replace("{{icon}}",Dp[e]||Dp.OTHER)).replace("{{color}}",Ep[o]||Ep.BLOCKING),o={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Fp.MARKER)},this.a[d]=v=new Uj(e,o))};var Cp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Dp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Ep={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Fp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Gp(e,o,d){(d=d||{}).criticality||(d.criticality="major,critical"),C(e,Hp,Gp,0),Ap.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:d.engineType}),this.b=new Bp,this.v=e,this.i=d,this.reload=A(this.reload,this),this.u=setInterval(this.reload,o||18e4)}u(Gp,Ap),t("H.service.traffic.incidents.Provider",Gp);var Ip={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Gp.prototype.N=function(e,o,d,v,w){var j=this,Z=this.b;return this.v.requestIncidentsByTile(e,o,d,function(_e){var _u,Ki=[];if(_e=_e.TRAFFIC_ITEMS)for(_u=(_e=_e.TRAFFIC_ITEM).length;_u--;){var fd=_e[_u],iy=fd.TRAFFIC_ITEM_TYPE_DESC;switch(iy){case"ACCIDENT":case"CONGESTION":var oy=iy;break;case"CONSTRUCTION":oy="ROADWORKS";break;default:oy="OTHER"}oy=Z.pb(oy,Ip[fd.CRITICALITY.DESCRIPTION]),(iy=new Jn({lat:(iy=fd.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:iy.LONGITUDE},{provider:j,icon:oy})).setData(fd),Ki.push(iy)}v(Ki)},w,this.i)},Gp.prototype.C=function(){Ap.prototype.C.call(this),clearInterval(this.u)},Gp.prototype.dispose=Gp.prototype.C;var Jp="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Kp(e,o,d,v){Kp.l.constructor.call(this,{min:10,max:21,engineType:v}),C(e,Hp,Kp,0),this.u=e,this.b=d||Lp,this.b.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),o||18e4),this.c===ik.WEBGL?this.Ob(new qi(to()+"/traffic/flow.yaml"),!0):this.Ob(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Kp,R),t("H.service.traffic.flow.Provider",Kp),Kp.prototype.Qh=ff,Kp.prototype.providesGeoJSON=Kp.prototype.Qh,Kp.prototype.na=function(){return this.fb()},Kp.prototype.getStyle=Kp.prototype.na,Kp.prototype.bc=function(e){e.b&&e.b("GeoJSONTileSource"),this.Ob(e)},Kp.prototype.setStyle=Kp.prototype.bc;var Lp={locationreferences:"tmc,shp"};Kp.prototype.o=function(){Kp.l.o.call(this),clearInterval(this.i)},Kp.prototype.J=function(e,o,d,v,w){return this.u.requestFlowByTile(e,o,d,function(j){j.type&&-1!==j.type.indexOf("Error")?w(j.Details):v(j)},w,this.b)},Kp.prototype.requestInternal=Kp.prototype.J,Kp.prototype.Sb=function(e,o,d,v,w){var j,Z,_e,Ki,fd,_u={type:"FeatureCollection",features:[]},iy=v.RWS.length;for(j=0;j<iy;j++){var oy=v.RWS[j],dy=oy.RW,_y=dy.length,Ay=-1!==Jp.indexOf(oy.EXTENDED_COUNTRY_CODE+oy.EBU_COUNTRY_CODE);for(oy=0;oy<_y;oy++){var ky=dy[oy].FIS,Xy=ky.length;for(ky=0;ky<Xy;ky++){var zy=dy[oy].FIS[ky].FI,h0=zy.length;for(Z=0;Z<h0;Z++){var Gy=zy[Z],O0=[],N0=Gy.CF[0],s1=!!N0.SSS,S0={type:"Feature",properties:N0,geometry:{type:"MultiLineString",coordinates:O0}};for(S0.properties.LHT=Ay,Gy.SHP.length&&(S0.properties.FC=Gy.SHP[0].FC),s1&&(fd=[]),N0=0;N0<Gy.SHP.length;N0++){var D1=Gy.SHP[N0].value,cx=D1.length;for(_e=0;_e<cx;_e++){var N_=s1?fd:void 0,I_=new io(D1[_e].trim()),iE=[],W_={};for(I_.be();-1!==(Ki=I_.Hb());)Ki===Mp?(W_.lat=+String.fromCharCode.apply(Kp,I_.Bd()),I_.next(),I_.be()):Ki===Np?(W_.lng=+String.fromCharCode.apply(Kp,I_.Bd()),iE.push([W_.lng,W_.lat]),N_&&N_.push(ng(W_)),W_=[],I_.next(),I_.be()):I_.next();W_.lng=+String.fromCharCode.apply(Kp,I_.Bd()),iE.push([W_.lng,W_.lat]),N_&&N_.push(ng(W_)),O0.push(Ki=iE)}}_u.features.push(S0)}}}}return Kp.l.Sb.call(this,e,o,d,_u,w)},Kp.prototype.createTileInternal=Kp.prototype.Sb;var Np=32,Mp=44;function Op(e,o){if(o=void 0===o?{}:o,!e.Mj)throw new Yc(e);Op.l.constructor.call(this);var d=Pp(this,o);if(!d.baseUrl&&!d.platformBaseUrl)throw new D(e,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.j=(d.baseUrl?d.baseUrl:d.platformBaseUrl).clone(),(e=d.baseUrl?o:d).host&&this.j.Te(e.host),e.subDomain&&this.j.za(e.subDomain),e.path&&this.j.sd(e.path),zp(this.j),this.i=d.headers||{}}function Pp(e,o){return e=e.a(),o?qp({},e,o):e}function Qp(e,o,d){return function(v){return"function"!=typeof v.json?Promise.reject(d(Rp(o,v))):v.json().then(function(w){return d(e.b(w))},function(){return d(Rp(o,v))})}}function Rp(e,o){return Error((o.statusText?"["+o.statusText+"] ":"")+e+" request failed")}function Sp(e){function o(fd){v.contains(w)&&v.removeChild(w),_u&&clearTimeout(_u),delete Sp.a[j],fd&&e.aj&&e.aj.call(Ki,fd)}if(!e.url||!e.Ag)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!=typeof e.Ag)throw Error("Parameters options.callback must be a function");var d=e.Eo||document,v=d.getElementsByTagName("head")[0],w=d.createElement("script");d=e.url instanceof U?e.url:vp(e.url,e.Do);var j=Sp.b++,Z=e.pl||"callback",_e=e.Ag,Ki={},_u=null;return Ki.id=j,Ki.cancel=function(){o("cancelled")},0!==e.timeout&&(_u=x.setTimeout(function(){o("timeout")},e.timeout||3e4)),Sp.a[j]=function(fd){o(),_e.call(Ki,fd)},w.type="text/javascript",w.src=d.toString()+(d.Fj()?"&":"?")+Z+"="+(e.Fo?"H.service.jsonp.handleResponse("+j+")":encodeURI("H.service.jsonp.handleResponse("+j+")")),v.appendChild(w),Ki}function Hp(e){Hp.l.constructor.call(this,Hp,e),this.c=Pp(this,e).callbackKey}function Tp(e,o,d,v){return Sp({url:o,Ag:d,aj:function(w){v(Error("["+w+"] "+o+" request failed"))},pl:e.c})}function Up(e){Up.l.constructor.call(this,Up,e),this.c=Pp(this,e).reverseSubDomain}function Vp(e){Vp.l.constructor.call(this,Vp,e)}function Wp(e,o,d,v,w){return o=e.D().clone().K(o).G(d||{}),e.J(o,v,w)}function Xp(){this.a={}}function Yp(e,o){for(var d in o)if(o.hasOwnProperty(d)){var v,w=o[d],j=e.a[d]||(e.a[d]=[]),Z=w.length;for(v=0;v<Z;v++)j.push(new Zp(w[v]))}}function $p(e,o,d,v){var w=(e=e.a[o])?e.length:0,j=[];for(o=0;o<w;o++)e[o].hd(d,v)&&j.push(e[o]);return j}function Zp(e){var o,d=e.boxes;if(this.label=e.label,this.min=e.minLevel,this.max=e.maxLevel,this.b=[],d&&(o=d.length)){var v=d[0],w=new K(v[0],v[1],v[2],v[3]);for(this.b.push(w),this.a=new K(v[0],v[1],v[2],v[3]),e=1;e<o;e++)w=new K((v=d[e])[0],v[1],v[2],v[3]),this.b.push(w),this.a.Xb(w,!1,this.a)}}function aq(e,o,d){var _e,v=this,w=d||{},j=+w.min,Z=+w.max;w.tileSize=w.tileSize||512,w.min=j?Zd(j,1,17):1,w.min+=Nk(w.tileSize,1),w.max=Z?Zd(Z,1,17):17,aq.l.constructor.call(this,w),C(e,bq,aq,0),C(o,Th,aq,1),this.j=e,o.b&&o.b("OMV"),this.Ob(o,!0),this.b=!1,d&&(d.politicalView&&(this.i=d.politicalView),cq(this,d.lg,d.lg2),this.b=!!d.pois),this.N=function(){dq(v),v.reload(!1)},e.addEventListener("versionupdate",this.N),dq(this),aq.prototype.Y=(_e=/^v2\/vectortiles\/(.+)\/mc$/.exec(e.D().b))?_e[1]:B+""}function dq(e){var o=e.gd("_#-;,:","_#-;,:","_#-;,:");e.X=new RegExp("^"+o.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function cq(e,o,d){var v=Ac(o),w=Ac(d);v&&(e.I=o),w&&(e.B=d),(v||w)&&(e.v=[],(o=(v=/^([a-zA-Z]{2})(-|$)/).exec(o))&&e.v.push(o[1]),(o=v.exec(d))&&e.v.push(o[1]),e.u=!0)}u(Op,F),t("H.service.Service",Op),Op.prototype.a=function(){return{}},Op.prototype.D=function(){return this.j},Op.prototype.getUrl=Op.prototype.D,Op.prototype.J=function(e,o,d,v){return(v=new tf(void 0===v?"application/json":v,e.toString(),he,{headers:this.i})).then(o,Qp(this,e,d)),v},Op.prototype.b=function(e){return Error(e.message)},t("H.service.jsonp",Sp),Sp.Xm=function(e){return(e=Sp.a[e])?e:function(){}},Sp.handleResponse=Sp.Xm,Sp.b=0,Sp.a={},u(Hp,Op),t("H.service.traffic.Service",Hp),Hp.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Hp.CONFIG_KEY="traffic",Hp.prototype.Pi=function(e,o){return new ql(new Kp(this,void 0,e,o),{max:22})},Hp.prototype.createFlowLayer=Hp.prototype.Pi,Hp.prototype.Qi=function(e){return new Kn(new Gp(this,void 0,e))},Hp.prototype.createIncidentsLayer=Hp.prototype.Qi,Hp.prototype.Un=function(e,o,d){return Tp(this,e=this.D().clone().K("incidents.json").G(e),o,d)},Hp.prototype.requestIncidents=Hp.prototype.Un,Hp.prototype.Tn=function(e,o,d,v,w,j){return Tp(this,e=this.D().clone().K(["flow/json",d,e,o].join("/")).G(j||{}),v,w)},Hp.prototype.requestFlowByTile=Hp.prototype.Tn,Hp.prototype.Vn=function(e,o,d,v,w,j){return Tp(this,e=this.D().clone().K(["incidents/json",d,e,o].join("/")).G(j||{}),v,w)},Hp.prototype.requestIncidentsByTile=Hp.prototype.Vn,V.prototype.yj=function(e){return this.Qa(Hp,e)},V.prototype.getTrafficService=V.prototype.yj,u(Up,Op),t("H.service.GeocodingService",Up),Up.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},Up.CONFIG_KEY="geocoding",Up.prototype.b=function(e){return Error(e.Details||e.message||e.error)},Up.prototype.Lg=function(e,o,d){return e=this.D().clone().K("geocode.json").G(e),this.J(e,o,d)},Up.prototype.geocode=Up.prototype.Lg,Up.prototype.Uh=function(e,o,d){return e=this.D().clone().K("reversegeocode.json").G(e),this.c&&e.za(this.c),this.J(e,o,d)},Up.prototype.reverseGeocode=Up.prototype.Uh,Up.prototype.search=function(e,o,d){return e=this.D().clone().K("search.json").G(e),this.J(e,o,d)},Up.prototype.search=Up.prototype.search,V.prototype.lj=function(e){return rp(V.prototype.lj,"Use H.service.Platform#getSearchService instead"),this.Qa(Up,e)},V.prototype.getGeocodingService=V.prototype.lj,u(Vp,Op),t("H.service.PlacesService",Vp),Vp.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}},Vp.CONFIG_KEY="places",Vp.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},Vp.prototype.request=function(e,o,d,v){return Wp(this,e,o,d,v)},Vp.prototype.request=Vp.prototype.request,Vp.prototype.search=function(e,o,d){return Wp(this,"discover/search",e,o,d)},Vp.prototype.search=Vp.prototype.search,Vp.prototype.ho=function(e,o,d){return Wp(this,"suggest",e,o,d)},Vp.prototype.suggest=Vp.prototype.ho,Vp.prototype.zl=function(e,o,d){return Wp(this,"discover/explore",e,o,d)},Vp.prototype.explore=Vp.prototype.zl,Vp.prototype.ll=function(e,o,d){return Wp(this,"discover/around",e,o,d)},Vp.prototype.around=Vp.prototype.ll,Vp.prototype.Zm=function(e,o,d){return Wp(this,"discover/here",e,o,d)},Vp.prototype.here=Vp.prototype.Zm,Vp.prototype.ql=function(e,o,d){return Wp(this,"categories/places",e,o,d)},Vp.prototype.categories=Vp.prototype.ql,Vp.prototype.Al=function(e,o,d,v){return e=vp(e).G(this.D().getQuery()).G(v||{}),this.J(e,o,d)},Vp.prototype.follow=Vp.prototype.Al,V.prototype.uj=function(e){return rp(V.prototype.uj,"Use H.service.Platform#getSearchService instead"),this.Qa(Vp,e)},V.prototype.getPlacesService=V.prototype.uj,Zp.prototype.hd=function(e,o){if(e>=this.min&&e<=this.max){if(!(e=this.b.length)||!this.a)return!0;if(this.a.hd(o))for(;e--;)if(this.b[e].hd(o))return!0}return!1},u(aq,R),t("H.service.omv.Provider",aq),aq.prototype.ld=ff,aq.prototype.providesOMV=aq.prototype.ld,aq.prototype.Rb=function(e){return this.X.test(e)},aq.prototype.cacheFilter=aq.prototype.Rb,aq.prototype.gd=function(e,o,d){return eq(this.j,e,o,d).toString()},aq.prototype.getTileKey=aq.prototype.gd,aq.prototype.Cb=function(){return this.ua},aq.prototype.getCache=aq.prototype.Cb,aq.prototype.xm=function(){return this.i},aq.prototype.getPoliticalView=aq.prototype.xm,aq.prototype.Zn=function(e){var o=this.i;this.i=e,this.dispatchEvent(new aj("politicalviewchange",this.i,o))},aq.prototype.setPoliticalView=aq.prototype.Zn,aq.prototype.MAX_STORE_TIME=2592e6,aq.prototype.s=function(){return md()},aq.prototype.g=function(){return md()?ld():aq.l.g.call(this)},aq.prototype.J=function(e,o,d,v,w){return this.j.Oa(e,o,d,v,w)},aq.prototype.requestInternal=aq.prototype.J,aq.prototype.bc=function(e){e.b&&e.b("OMV"),this.Ob(e)},aq.prototype.setStyle=aq.prototype.bc,aq.prototype.na=function(){return aq.l.fb.apply(this)},aq.prototype.getStyle=aq.prototype.na,aq.prototype.fb=function(){var e=aq.l.fb.apply(this),o=e.getState()===Uh.READY,d=e.Kc();return o?d&&d.global&&(this.u&&(this.I&&(d.global.ux_language=this.I),this.B&&(d.global.ux_language_fallback=this.B)),this.b&&d.global.poi&&d.global.poi.default&&(d.global.poi.default.visible=this.b),this.u||this.b)&&(e=new qi(d,e.Ab())):e.load(),e},aq.prototype.getStyleInternal=aq.prototype.fb,aq.prototype.u=!1;var fq=["en"];function bq(e){bq.l.constructor.call(this,bq,e),e=Pp(this,e).mapVersion,this.c=uc(e)?e:gq[this.D().toString()],uc(this.c)||hq(this)}aq.prototype.hm=function(){return this.v||fq},aq.prototype.getLanguages=aq.prototype.hm,aq.prototype.o=function(){aq.l.o.call(this),this.j.removeEventListener("versionupdate",this.N)},aq.prototype.ua=new Pk(256),aq.prototype.la=function(e,o){return $p(this.j.la(),this.Y,o,e)},aq.prototype.getCopyrights=aq.prototype.la,u(bq,Op),t("H.service.omv.Service",bq),bq.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},bq.CONFIG_KEY="omv";var gq={};function hq(e){e.J(e.D().clone().K("../../info"),function(o){o=o.mapVersion;var d=e.D().toString();e.c=o,o!==gq[d]&&(gq[d]=o,e.dispatchEvent("versionupdate"))},function(){})}function eq(e,o,d,v){return o=e.D().clone().K(v+"/"+o+"/"+d+"/omv"),uc(e.c)&&o.G({mv:e.c}),o}function iq(e){iq.l.constructor.call(this,iq,e),this.c=e.getToken}function sq(e,o,d,v){return e.D().clone().K(o+"/layers/"+d+"/features").G(v||{})}function qq(e,o,d,v,w){return sq(e,d,v,o=Object.assign({},w,{id:new yp(o)}))}function oq(e,o,d,v,w){return e.D().clone().K(d+"/layers/"+v+"/features/"+o).G(w||{})}function lq(e,o,d,v,w,j,Z){return Z=void 0===Z?"application/json":Z,d={method:d,headers:Object.assign({},j?{"Content-Type":"application/geo+json"}:void 0,"function"==typeof e.c?{Authorization:"Bearer "+e.c()}:void 0,e.i)},j&&(d.data=JSON.stringify(j)),(j=new tf(Z,o.toString(),he,d)).then(v,Qp(e,o,w)),j}function jq(e,o,d,v){xc(d,"String",e,o,"must be a string"),xc(v,"String",e,o+1,"must be a string")}function mq(e,o){xc(o,"String",e,0,"must be a string")}function pq(e,o){if(!Array.isArray(o)||0===o.length||o.some(function(d){return"string"!=typeof d}))throw new D(e,0,"must be a non-empty array of strings")}function rq(e,o,d){if(!Ea(d))throw new D(e,o,"must be a GeoJSON object")}function kq(e,o,d,v){if(!Da(d))throw new D(e,o,"must be a function");if(!Da(v))throw new D(e,o+1,"must be a function")}function tq(e,o,d,v){if(tq.l.constructor.call(this,v?{min:v.min,max:v.max,engineType:v.engineType}:void 0),C(e,iq,tq,0),!Ac(o))throw new D(tq,1,'"catalogHrn" must be a string');if(!Ac(d))throw new D(tq,2,'"layerId" must be a string');this.v=e,this.b=o,this.i=d,this.u=Ea(v)&&Ea(v.parameters)?v.parameters:{},this.Ob(this.c===ik.WEBGL?new qi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.b+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function uq(e,o,d,v,w,j,Z){var _e=this;Z=Z||{},j=j||{};var Ki=e.D().clone().K(o+"/"+e.nc()+"/"+d).G(j),_u=e.f;this.B=e,this.N=Ki,Ck.call(this,{tileSize:v,max:512===v?19:20,min:512===v?2:0,getURL:function(fd,iy,oy){var dy=_e.N.clone();return _u&&dy.za(_u[(oy+iy+fd)%_u.length]),dy.K(oy+"/"+fd+"/"+iy+"/"+v+"/"+w),dy.toString()},crossOrigin:Z.crossOrigin,headers:Z.headers,uri:Ki.toString().replace(/_/g,"")+v,engineType:Z.engineType}),this.Xa=o,this.ya=d,this.ua=j,this.Y=d.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.la,e.addEventListener("versionupdate",this.i)}function vq(e){vq.l.constructor.call(this,vq,e),e=Pp(this,e),this.f=e.shards,(this.g=e.ignoreTypes?null:e.type)&&this.D().za(this.g),this.c=e.version,this.s=new Xp,this.u={},this.m=0,"newest"===this.c&&wq(this)}function xq(e,o){for(var d={},v=e[o+"s"][o],w=v.length;w--;)d[v[w].id]=v[w];e[o+"s"]=d}function wq(e){var o=e.D().clone().K("info").G({output:"json"});e.f&&o.za(e.f[0]),e.J(o,function(d){var v;if(xq(d=d.response,"map"),xq(d,"scheme"),xq(d,"tiletype"),xq(d,"format"),xq(d,"resolution"),xq(d,"language"),"newest"===e.c&&"traffic"!==e.g)for(v in d.maps)d.maps[v].hash&&d.maps[v].newest&&(e.c=d.maps[v].hash,e.dispatchEvent("versionupdate"));e.v=d,e.dispatchEvent("infoupdate")},function(d){throw d})}function yq(e){var o=e.D().clone().K("copyright").K(e.nc()).G({output:"json"});e.f&&o.za(e.f[0]),e.m=1,e.J(o,function(d){e.m=2,Yp(e.s,d),e.dispatchEvent("copyrightupdate")},function(d){throw e.m=-1,d})}function zq(e){zq.l.constructor.call(this,zq,e)}function Aq(e){Aq.l.constructor.call(this,Aq,e),rp(Aq,"Use HERE Routing API v8 instead.")}function Bq(e){Bq.l.constructor.call(this,Bq,e)}function Cq(){}function Dq(){}function Eq(e,o){this.a=e,this.b=o}function Fq(){}function Gq(e,o){this.b=e,this.a=o}function Hq(e,o,d){var v;if(o=o||(e&&e.length?Object.keys(e[0]):B),this.ub=e,o)for(this.yd=o,this.Bg=e=nc(),v=o.length;v--;)e[o[v]]=!0;d!==B&&(this.Dh=d)}function Iq(e,o){return e.ub?e.ub.push(o):e.ub=[o],e.ub.length-1}function Jq(e){var o=Kq;if(!e||!Ac(af(e.layerId,e.layer))||!Dc(e.level)||uc(e.rowFilter)&&!Da(e.rowFilter)||uc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(o,1,uc("invalid layer config")?"invalid layer config":e)}function Lq(e,o,d,v){v=v||Mq,this.a={},v.provider=e,this.invalidate=gf,Lq.l.constructor.call(this,o,v),delete this.invalidate,d&&(this.b=d),this.pa(kh.ADD)}Gc(gq),bq.prototype.om=function(){return this.c},bq.prototype.getMapVersion=bq.prototype.om,bq.prototype.bd=function(e,o){o=o||{};var d={min:0,max:22};return lo&&(o.min=d.min=4),new ql(new aq(this,e,o),d)},bq.prototype.createLayer=bq.prototype.bd,bq.prototype.Oa=function(e,o,d,v,w){return this.J(eq(this,e,o,d),function(j){return j.arrayBuffer().then(v,w)},w,"arraybuffer")},bq.prototype.Wg=function(e,o){if(!Da(e))throw new D(this.Wg,0,'"onResult" must be a function');if(!Da(o))throw new D(this.Wg,1,'"onError" must be a function');return this.J(this.D().clone().sd("v2/vectortiles/pviews"),e,o)},bq.prototype.getPoliticalViews=bq.prototype.Wg,V.prototype.sj=function(e){return this.Qa(bq,e)},V.prototype.getOMVService=V.prototype.sj,bq.prototype.g=function(e){Yp(this.f,e),this.dispatchEvent("copyrightupdate")},bq.prototype.la=function(){return this.f||(this.f=new Xp,this.J(this.D().clone().K("../../copyrights"),A(this.g,this),jd)),this.f},bq.prototype.getCopyrights=bq.prototype.la,u(iq,Op),t("H.service.iml.Service",iq),iq.prototype.a=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},iq.prototype.b=function(e){var d=[{keys:["code","title","cause","action"],format:function(){return e.code+": "+e.title+"; cause: "+e.cause+"; action: "+e.action}},{keys:["error","error_description"],format:function(){return e.error+": "+e.error_description}},{keys:["error","errorMessage"],format:function(){return e.error+": "+e.errorMessage}}];return Error(Ea(e)?function(){for(var v=ea(d),w=v.next();!w.done;w=v.next()){var j=(w=w.value).format;if(w.keys.every(function(Z){return e[Z]}))return j()}return JSON.stringify(e)}():e)},iq.prototype.Md=function(e,o,d,v,w){var j=this.Md;return jq(j,0,e,o),kq(j,2,d,v),lq(this,e=this.D().clone().K(e+"/layers/"+o+"/statistics").G(w||{}),"GET",d,v)},iq.prototype.getStatistics=iq.prototype.Md,iq.prototype.uf=function(e,o,d,v,w,j,Z,_e,Ki){var _u=Ki?"":".mvtf";return lq(this,e=this.D().clone().K(v+"/layers/"+w+"/tile/web/"+d+"_"+e+"_"+o+_u).G(Object.assign({clip:!0},_e)),"GET",Ki?j:function(fd){return fd.arrayBuffer().then(j)},Z,void 0,Ki?"application/json":"arraybuffer")},iq.prototype.getFeaturesByTile=iq.prototype.uf,iq.prototype.ij=function(e,o,d,v,w,j){var Z=this.ij;return mq(Z,e),jq(Z,1,o,d),kq(Z,3,v,w),lq(this,e=oq(this,e,o,d,j),"GET",v,w)},iq.prototype.getFeatureById=iq.prototype.ij,iq.prototype.Mc=function(e,o,d,v,w,j){var Z=this.Mc;return pq(Z,e),jq(Z,1,o,d),kq(Z,3,v,w),lq(this,e=qq(this,e,o,d,j),"GET",v,w)},iq.prototype.getFeaturesById=iq.prototype.Mc,iq.prototype.Fd=function(e,o,d,v,w){var j=this.Fd;if(!Ea(e)||!(e.bbox||e.north&&e.east&&e.south&&e.west))throw new D(j,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return jq(j,1,o,d),kq(j,3,v,w),lq(this,e=this.D().clone().K(o+"/layers/"+d+"/bbox").G(e),"GET",v,w)},iq.prototype.getFeaturesByBoundingBox=iq.prototype.Fd,iq.prototype.kj=function(e,o,d,v,w){var j=this.kj;if(!(Ea(e)&&e.radius&&(e.lat&&(e.lng||e.lon)||e.refCatalogHrn&&e.refLayerId&&e.refFeatureId)))throw new D(j,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return jq(j,1,o,d),kq(j,3,v,w),lq(this,e=this.D().clone().K(o+"/layers/"+d+"/spatial").G(e),"GET",v,w)},iq.prototype.getFeaturesByPointAndRadius=iq.prototype.kj,iq.prototype.jj=function(e,o,d,v,w,j){var Z=this.jj;if(!Ea(e)||!e.radius)throw new D(Z,0,'must be an object with "radius"');return rq(Z,1,o),jq(Z,2,d,v),kq(Z,4,w,j),lq(this,e=this.D().clone().K(d+"/layers/"+v+"/spatial").G(e),"POST",w,j,o)},iq.prototype.getFeaturesByGeometryAndRadius=iq.prototype.jj,iq.prototype.Fk=function(e,o,d,v,w){var j=this.Fk;return jq(j,0,e,o),kq(j,2,d,v),lq(this,e=this.D().clone().K(e+"/layers/"+o+"/search").G(w||{}),"GET",d,v)},iq.prototype.searchFeatures=iq.prototype.Fk,iq.prototype.Qj=function(e,o,d,v,w){var j=this.Qj;return jq(j,0,e,o),kq(j,2,d,v),lq(this,e=this.D().clone().K(e+"/layers/"+o+"/iterate").G(w||{}),"GET",d,v)},iq.prototype.iterateFeatures=iq.prototype.Qj,iq.prototype.Uc=function(e,o,d,v,w,j){var Z=this.Uc;return rq(Z,0,e),jq(Z,1,o,d),kq(Z,3,v,w),lq(this,o=sq(this,o,d,j),"PUT",v,w,e)},iq.prototype.putFeatures=iq.prototype.Uc,iq.prototype.Sc=function(e,o,d,v,w,j){var Z=this.Sc;return rq(Z,0,e),jq(Z,1,o,d),kq(Z,3,v,w),lq(this,o=sq(this,o,d,j),"POST",v,w,e)},iq.prototype.postFeatures=iq.prototype.Sc,iq.prototype.cd=function(e,o,d,v,w){var j=this.cd;return pq(j,e),jq(j,1,o,d),kq(j,3,v,w),lq(this,e=qq(this,e,o,d),"DELETE",v,w)},iq.prototype.deleteFeatures=iq.prototype.cd,iq.prototype.yk=function(e,o,d,v,w,j,Z){var _e=this.yk;return mq(_e,e),rq(_e,1,o),jq(_e,2,d,v),kq(_e,4,w,j),lq(this,e=oq(this,e,d,v,Z),"PUT",w,j,o)},iq.prototype.putFeature=iq.prototype.yk,iq.prototype.rk=function(e,o,d,v,w,j,Z){var _e=this.rk;return mq(_e,e),rq(_e,1,o),jq(_e,2,d,v),kq(_e,4,w,j),lq(this,e=oq(this,e,d,v,Z),"PATCH",w,j,o)},iq.prototype.patchFeature=iq.prototype.rk,iq.prototype.Ui=function(e,o,d,v,w){var j=this.Ui;return mq(j,e),jq(j,1,o,d),kq(j,3,v,w),lq(this,e=oq(this,e,o,d),"DELETE",v,w,void 0,"text/plain")},iq.prototype.deleteFeature=iq.prototype.Ui,iq.CONFIG_KEY="iml",V.prototype.dm=function(e){return this.Qa(iq,e)},V.prototype.getIMLService=V.prototype.dm,u(tq,R),t("H.service.iml.Provider",tq),tq.prototype.J=function(e,o,d,v,w){return this.v.uf(e,o,d,this.b,this.i,v,w,this.u)},tq.prototype.requestInternal=tq.prototype.J,tq.prototype.ld=ff,tq.prototype.providesOMV=tq.prototype.ld,tq.prototype.na=function(){return this.fb()},tq.prototype.getStyle=tq.prototype.na,tq.prototype.bc=function(e){C(e,qi)&&e.b("MVT"),this.Ob(e)},tq.prototype.setStyle=tq.prototype.bc,u(uq,Ck),uq.prototype.MAX_STORE_TIME=2592e6,uq.prototype.o=function(){Ck.prototype.o.call(this),this.B.removeEventListener("versionupdate",this.i)},uq.prototype.la=function(e,o){return $p(this.B.la(),this.Y,o,e)},uq.prototype.getCopyrights=uq.prototype.la,uq.prototype.i=function(){var e=this.B;this.N=e.D().clone().K(this.Xa+"/"+e.nc()+"/"+this.ya).G(this.ua),this.reload(!1)},uq.prototype.s=function(){return md()},uq.prototype.g=function(){return md()?ld():uq.l.g.call(this)},u(vq,Op),t("H.service.MapTileService",vq),vq.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},vq.CONFIG_KEY="maptile",vq.prototype.zj=function(){return this.g},vq.prototype.getType=vq.prototype.zj,vq.prototype.nc=function(){return this.c},vq.prototype.getVersion=vq.prototype.nc,vq.prototype.la=function(){return this.m||(this.c&&"newest"!==this.c||"traffic"===this.g)&&yq(this),this.s},vq.prototype.getCopyrights=vq.prototype.la,vq.prototype.Rg=function(){return this.v},vq.prototype.getInfo=vq.prototype.Rg,vq.prototype.oe=function(e,o,d,v,w,j){var Ki,Z=this.D().clone().K(e+"/"+this.nc()+"/"+o+"/"+d+"/"+v).G(w||{}).toString(),_e=0,_u=Z.length;if(0!==_u)for(Ki=0;Ki<_u;Ki++)_e=(_e<<5)-_e+Z.charCodeAt(Ki),_e|=0;return(_e=this.u[Z=_e])||(_e=new uq(this,e,o,d,v,w,qp({headers:this.i},j||{})),this.u[Z]=_e),_e},vq.prototype.createTileProvider=vq.prototype.oe,vq.prototype.hc=function(e,o,d,v,w,j,Z,_e){return new ql(e=this.oe(e,o,d,v,w,_e),{opacity:j,dark:!!Z})},vq.prototype.createTileLayer=vq.prototype.hc,V.prototype.Ug=function(e){return this.Qa(vq,e)},V.prototype.getMapTileService=V.prototype.Ug,u(zq,Op),t("H.service.publicTransit.Service",zq),zq.prototype.a=function(){return{subDomain:"transit.router",path:"v8"}},zq.CONFIG_KEY="publicTransit",zq.prototype.Fm=function(e,o,d){return e=this.D().clone().K("routes").G(e),this.J(e,o,d)},zq.prototype.getRoutes=zq.prototype.Fm,zq.prototype.Sl=function(e,o,d){return e=this.D().clone().K("departures").G(e),this.J(e,o,d)},zq.prototype.getDepartures=zq.prototype.Sl,zq.prototype.Jm=function(e,o,d){return e=this.D().clone().K("stations").G(e),this.J(e,o,d)},zq.prototype.getStations=zq.prototype.Jm,zq.prototype.b=function(e){return Error(JSON.stringify(e))},V.prototype.Bm=function(e){return this.Qa(zq,e)},V.prototype.getPublicTransitService=V.prototype.Bm,u(Aq,Op),t("H.service.RoutingService",Aq),Aq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Aq.prototype.b=function(e){return Error(e.details)},Aq.CONFIG_KEY="routing",Aq.prototype.xd=function(e,o,d){return e=this.D().clone().K("calculateroute.json").G(e),this.J(e,o,d)},Aq.prototype.calculateRoute=Aq.prototype.xd,Aq.prototype.zg=function(e,o,d){return e=this.D().clone().za("isoline").K("calculateisoline.json").G(e),this.J(e,o,d)},Aq.prototype.calculateIsoline=Aq.prototype.zg,u(Bq,Op),t("H.service.RoutingService8",Bq),Bq.CONFIG_KEY="routing_v8",Bq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}},Bq.prototype.b=function(e){return Error(e.error)},Bq.prototype.xd=function(e,o,d){return e=this.D().clone().G(e),this.J(e,o,d)},Bq.prototype.calculateRoute=Bq.prototype.xd,Bq.prototype.zg=function(e,o,d){return e=this.D().clone().za("isoline").sd("v8/isolines").G(e),this.J(e,o,d)},Bq.prototype.calculateIsoline=Bq.prototype.zg,V.prototype.wj=function(e,o){if(7===(o=lo?8:+o||7))o=Aq;else{if(8!==o)throw new D(this.wj,1,"allowed values are 7 and 8");o=Bq}return this.Qa(o,e)},V.prototype.getRoutingService=V.prototype.wj,t("H.service.extension.dataView.ITable",Cq),Cq.prototype.Id=function(){},Cq.prototype.getMeta=Cq.prototype.Id,Cq.prototype.Ld=function(){},Cq.prototype.getRowCount=Cq.prototype.Ld,Cq.prototype.mc=function(){},Cq.prototype.getRow=Cq.prototype.mc,Cq.prototype.Ma=function(){},Cq.prototype.getColumnNames=Cq.prototype.Ma,Cq.prototype.ve=function(){},Cq.prototype.getColumn=Cq.prototype.ve,Cq.prototype.sa=function(){},Cq.prototype.getCell=Cq.prototype.sa,Cq.prototype.concat=function(){},Cq.prototype.concat=Cq.prototype.concat,t("H.service.extension.dataView.IRow",Dq),Dq.prototype.Ma=function(){},Dq.prototype.getColumnNames=Dq.prototype.Ma,Dq.prototype.sa=function(){},Dq.prototype.getCell=Dq.prototype.sa,Dq.prototype.fd=function(){},Dq.prototype.getTable=Dq.prototype.fd,t("H.service.extension.dataView.ObjRow",Eq),Eq.prototype.Ma=function(){return this.a.Ma()},Eq.prototype.getColumnNames=Eq.prototype.Ma,Eq.prototype.sa=function(e){return this.a.sa(this.b,e)},Eq.prototype.getCell=Eq.prototype.sa,Eq.prototype.fd=function(){return this.a},Eq.prototype.getTable=Eq.prototype.fd,t("H.service.extension.dataView.IColumn",Fq),Fq.prototype.sa=function(){},Fq.prototype.getCell=Fq.prototype.sa,t("H.service.extension.dataView.ObjColumn",Gq),Gq.prototype.sa=function(e){return this.b.sa(e,this.a)},Gq.prototype.getCell=Gq.prototype.sa,t("H.service.extension.dataView.ObjTable",Hq),p=Hq.prototype,p.Dh=B,p.ub=B,p.yd=B,p.Bg=B,p.Id=function(){return this.Dh},Hq.prototype.getMeta=Hq.prototype.Id,Hq.prototype.Ld=function(){return this.ub?this.ub.length:0},Hq.prototype.getRowCount=Hq.prototype.Ld,Hq.prototype.mc=function(e){var o=this.ub;return o&&o[e]?new Eq(this,e):B},Hq.prototype.getRow=Hq.prototype.mc,Hq.prototype.Ma=function(){return this.yd||hf},Hq.prototype.getColumnNames=Hq.prototype.Ma,Hq.prototype.ve=function(e){return this.Bg[e]?new Gq(this,e):B},Hq.prototype.getColumn=Hq.prototype.ve,Hq.prototype.sa=function(e,o){var d=this.ub;return(e=d&&this.Bg[o]&&d[e])&&e[o]},Hq.prototype.getCell=Hq.prototype.sa,Hq.prototype.concat=function(){var o,e=arguments.length,d=this.yd,v=""+this.yd,w=(this.ub||[]).slice();for(o=0;o<e;o++){var j=arguments[o];if(!(j instanceof Hq))throw new D(this.concat,o);if(j.ub){if(d&&""+j.yd!==v)throw new D(this.concat,o,"Incompatible columns!");w=w.concat(j.ub)}}return new Hq(w,this.yd,this.Dh)},Hq.prototype.concat=Hq.prototype.concat,u(Lq,Eh),t("H.service.remote.Spatial",Lq);var Mq={};function Nq(e,o){this.a=e,o&&(this.b=o)}Lq.prototype.Za=function(){return this.b||Eh.prototype.Za.call(this)},Lq.prototype.getId=Lq.prototype.Za,Lq.prototype.Zf=jd,Lq.prototype.retain=Lq.prototype.Zf,Lq.prototype.release=ff,Lq.prototype.release=Lq.prototype.release;var Oq=new Nq(hf);function Pq(e,o,d){e.a[o.key]=new Nq(d,void 0)}function Qq(e,o,d,v){if(!Da(d))throw new D(e,o,"has invalid type");if(!Da(v))throw new D(e,o+1,"has invalid type")}function Rq(e,o,d){var v=8===e;this.b=o,this.c=d||jd,(this.a=4===e||v)?this.j=v:this.g=1===e,this.f=this.a?"$HProjGeometry":"geometry"}function Sq(e,o,d,v,w){var j=[],Z=w.paths,_e=Z.length,Ki=0,_u=e.b&&e.b(v);for(e=new Lq(o,e.j,B,{style:_u||e.i,data:v});Ki!==_e;)j.push(Uq(Z[Ki++]));return Pq(e,d,[new Mh(j,w.interiorsIndex,w.outlinesIndex)]),e}function Tq(e,o,d,v){v=new lg(v[0],v[1]);var w=e.b&&e.b(d);return e=e.g?new Jn(v,e={icon:w,data:d,provider:o}):new $i(v,e={icon:w,data:d,provider:o})}function Uq(e){for(var o=0,d=e.length,v=[];o<d;)v.push(new G(e[o++],e[o++]));return v}function Vq(e,o){var d={};this.b=e,Xa(d,o||d),mk.call(this,d),this.Uf={},(e=this.Db(nh.SPATIAL)).update(e.a+1,kh.ADD)}function Wq(e){return e.oc(!0)}function Xq(e,o,d){var w,v=o.j&&o.j[d];return!v&&(w=o.m)&&(delete o.m,(o.j=e=e.b.parse(e,o,w))&&(v=e[d])),v||hf}Lq.prototype.Gd=function(e){return(this.a[e.key]||Oq).a},Lq.prototype.getGeometriesForTile=Lq.prototype.Gd,Lq.prototype.Tg=function(e){return(this.a[e.key]||Oq).b},Lq.prototype.getLabels=Lq.prototype.Tg,Rq.prototype.parse=function(e,o,d){var v,w,_e,Ki,j={},Z=[],_u=0;for(_e=d.length;_u<_e;_u++){var fd=d[_u],iy=fd.Rows;if(fd=iy.length){var oy=Object.keys(iy[0]).filter(function(_y){return"geometry"!==_y&&"$HProjGeometry"!==_y});for(oy=new Hq(iy,oy),Ki=0;Ki<fd;Ki++){var dy=iy[Ki];if(w=dy[this.f]){if(delete dy[this.f],dy=oy.mc(Ki))try{(v=this.a?Sq(this,e,o,dy,w):Tq(this,e,dy,w.path)).ga(e),Z.push(v)}catch(_y){this.c(_y.message)}}else this.c("Layer must contain geometries")}}}return j[this.a?"spatials":this.g?"markers":"domMarkers"]=Z,j},u(Vq,mk),t("H.service.remote.ObjectProvider",Vq),Vq.prototype.C=function(){mk.prototype.C.call(this)},Vq.prototype.dispose=Vq.prototype.C,Vq.prototype.wc=function(){return hf},Vq.prototype.requestMarkers=Vq.prototype.wc,Vq.prototype.vc=function(){return hf},Vq.prototype.requestDomMarkers=Vq.prototype.vc,Vq.prototype.od=function(){return hf},Vq.prototype.requestOverlays=Vq.prototype.od,Vq.prototype.Jb=ff,Vq.prototype.providesMarkers=Vq.prototype.Jb,Vq.prototype.Ib=ff,Vq.prototype.providesDomMarkers=Vq.prototype.Ib,Vq.prototype.uc=ff,Vq.prototype.providesSpatials=Vq.prototype.uc,Vq.prototype.Wf=function(){return hf},Vq.prototype.requestSpatials=Vq.prototype.Wf,Vq.prototype.Xf=function(e,o){return e=Xq(this,e,Yq),o&&(e=e.filter(Wq)),e},Vq.prototype.requestSpatialsByTile=Vq.prototype.Xf,Vq.prototype.aa=function(e){var o=e.Za();if(this.Uf[o])throw new Yc(this.aa,"Remote object "+o+" already added");return this.Uf[o]=e},Vq.prototype.Da=function(e){delete this.Uf[e.Za()]};var Yq="spatials";function Zq(e){var o=(e=e||{}).tileCacheSize||1024,d=e.resultType,v=e.styleCallback;if(uc(e.min)||(e.min=12),Zq.l.constructor.call(this,e),-1===$q.indexOf(d))throw new D(Zq,2,"invalid resultType");if(this.b=d,v&&!Da(v))throw new D(Zq,2,"invalid style callback");this.Y=v,this.X=e.pixelRatio||Te(),this.yb=A(this.yb,this),this.m(new Pk(o,A(this.Xa,this))),this.createTileInternal=A(4===d||8===d?this.N:this.I,this)}function ar(e){var o=e.ua;return o||(e.v||(e.v=e.u(e.b,e.Y,e.yb)),(o=e.ua=new Vq(e.v)).ga(e),o.addEventListener(e.A.xa,A(e.ya,e)),o.ua=!0),o}u(Zq,R),t("H.service.extension.TileProvider",Zq),Zq.prototype.i=!1,Zq.prototype.getCapabilities=function(){return Zq.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE},Zq.prototype.Oa=function(e,o,d,v){return this.i?Zq.l.Oa.call(this,e,o,d,v):B},Zq.prototype.requestTile=Zq.prototype.Oa,Zq.prototype.yb=function(e){this.dispatchEvent(new ud("error",Ac(e)?e:e+"",this))},Zq.prototype.Jb=function(){return 1===this.b},Zq.prototype.providesMarkers=Zq.prototype.Jb,Zq.prototype.Ib=function(){return 2===this.b},Zq.prototype.providesDomMarkers=Zq.prototype.Ib,Zq.prototype.uc=function(){return 4===this.b||8===this.b},Zq.prototype.providesSpatials=Zq.prototype.uc,Zq.prototype.I=function(e,o,d,v){var w=this.getTileKey(e,o,d);w=this.Cb().get(w);var j=2==this.b,Z=[],_e=ar(this);for(w?w.valid=!0:(delete(e=w=new Vk(e,o,d,y)).j,e.m=v),o=(v=Xq(_e,w,j?"domMarkers":"markers")).length;o--;)(e=v[o]).ti=w,(j||1===e.pb().getState())&&Z.push(e);return w.data=Z,w},Zq.prototype.ya=function(e){(e=e.target.ti)&&(e.valid=!1)},Zq.prototype.ao=function(e){this.B=!!e},Zq.prototype.setTileCanvasRendering=Zq.prototype.ao,Zq.prototype.B=!0,Zq.prototype.N=function(e,o,d,v){var w=ar(this),j=this.getTileKey(e,o,d),Z=this.tileSize,_e=this.Cb().get(j);return _e||(delete(e=_e=new Zk(j,e,o,d,Z,this.X,d,w)).j,e.m=v),this.B?(v=up.pop(Z),_e.T(v)||up.push(v,Z)):el(_e),_e},Zq.prototype.Xa=function(e,o){var d;if(4===this.b||8===this.b){for(d=(e=o.Na()).length;d--;)delete e[d].a[o.key];(e=o.Sf())&&(up.push(e,this.tileSize),o.Tf())}else for(d=(e=o.data).length;d--;)delete e[d].ti},Zq.prototype.o=function(){Zq.l.o.call(this),ar(this).C()};var br={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Zq.ResultType=br;var $q=[1,2,4,8];function Kq(e,o,d){var v=this,w=o&&o.rowFilter,j=d.resultType;Kq.l.constructor.call(this,d),C(e,cr,Kq,0),Jq(o),w?(d=Va(o)).rowFilter=w.toString():d=Va(o),delete d.layer,d.layerId=af(o.layerId,o.layer),(new Pf).a("pde","H.service.extension.worker.processor"),e=e.D().clone().K(dr+"."+er).G({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===j,serverUrl:e.toString(),layerConfigs:[d],horizontalMargin:1}]}).then(function(){v.i=!0,v.Ra()},this.yb)}u(Kq,Zq),t("H.service.extension.platformData.TileProvider",Kq),Kq.prototype.u=function(e,o,d){return(e=new Rq(e,o,d)).i=fr,e};var fr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function gr(e,o,d,v,w,j){Qq(gr,1,o,d),Qq(gr,2,v,w),(this.f=e.length)?(this.R=e,this.s=o,this.i=d,this.b=0,this.c=A(this.c,this),this.m=v,this.j=w,this.a=nc(),Xa(this.a,hr,j||{}),this.g={},x.setTimeout(this.c,0)):o(hf,!0)}Kq.prototype.J=function(e,o,d,v,w){var _e,j=this,Z=this.getTileKey(e,o,d);Z=this.Cb().get(Z);var Ki={cancel:jd},_u=!0,fd=this.b;if(Z&&(4===fd||8===fd?Z.Qd()||(v(up.pop(this.tileSize),null),_u=!1):(v(y),_u=!1)),_u){var iy=sp.setTimeout(function(){(_e=new Sf("pde",{message:[j.uid,1,[e,o,d]]})).then(v,w)},500);Ki.cancel=function(){_e?_e.cancel():sp.clearTimeout(iy)}}return Ki},Kq.prototype.requestInternal=Kq.prototype.J,Kq.prototype.o=function(){Kq.l.o.call(this),new Sf("pde",{message:[this.uid,3]})},Kq.ResultType=br;var hr={duration:100,El:"geometry",Dl:"WKT",Wn:"searchAttributes",Ti:B};function ir(e){this.a=e}function cr(e){cr.l.constructor.call(this,cr,e)}gr.prototype.c=function(){for(var v,e=[],o=!1,d=Jk();this.b<this.f;){var w=this.R[this.b];if(o=w.attributes,v=w.layerId||this.a.Ti,w.distance&&(o[this.a.Wn]={nearest:new lg(w.nearestLat,w.nearestLon),distance:w.distance}),w=w[this.a.El]){try{var j=On(new io(w))}catch(Z){this.i(new x.Error(Z.message)),o=!0;break}o[this.a.Dl]=j}if((w=this.g[v])||(w=this.g[v]=this.m({layerId:v,columnNames:Object.keys(o)})),o=this.j(w,o),e.push(o),this.b++,(o=this.b===this.f)||Jk()-d>=this.a.duration){this.s(e,o);break}}o?this.g={}:this.u=x.setTimeout(this.c,0)},gr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},gr.prototype.cancel=gr.prototype.cancel,ir.prototype.cancel=function(){for(var e=this.a,o=e.length;o--;)e[o].cancel();e.length=0},ir.prototype.cancel=ir.prototype.cancel,u(cr,Op),t("H.service.extension.platformData.Service",cr),cr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}},cr.CONFIG_KEY="platformData",cr.prototype.request=function(e,o,d,v,w){var j="text/plain";if(!e)throw new D(this.request,0,e);if(!o)throw new D(this.request,1,o);if(!v)throw new D(this.request,3,v);if(!w)throw new D(this.request,4,w);return e=this.D().clone().K(e+"."+o).G(d),o===jr.JSON&&(j="application/json"),this.J(e,v,w,j)},cr.prototype.request=cr.prototype.request;var dr="tiles";cr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:dr,FILE:"file",INDEX:"index"};var er="json",jr={TXT:"txt",JSON:er,HTML:"html",BIN:"bin"};function kr(e,o,d,v,w){var Z,j=[],_e=d.layer_id||d.layer_ids;return e=e.request(o,er,d,function(Ki){Z=new gr(Ki.geometries,v,w,function(_u){return new Hq([],_u.columnNames,_u)},function(_u,fd){return _u.mc(Iq(_u,fd))},{Ti:_e}),j.push(Z)},function(Ki){w(new x.Error(Ki))}),j.push(e),new ir(j)}function lr(e,o,d){if(!zc(e))throw new D(d,0,"has invalid type");if(!zc(o))throw new D(d,1,"has invalid type");if(e.length!==o.length||!e.length)throw new D(d,1,"specify one key attribute for each given layer id in the same order")}function mr(e){mr.l.constructor.call(this,mr,e)}function nr(e){var o=or;if(!e||!Ac(e.layerId)||uc(e.rowFilter)&&!Da(e.rowFilter)||uc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(o,1,uc("invalid layer config")?"invalid layer config":e)}function pr(e){return Ac(e)&&/^[A-Z][A-Z0-9_]*$/.test(e)}function qr(e){for(var o=e&&e.length,d=2<=o&&"WKT"===e[--o]&&"GEOMETRY_ID"===e[--o];d&&o--;)d=pr(e[o]);return d}function rr(e,o){var d="",v=[];if(o){var w=e.geometries;if(w&&w.length){var j=Object.keys(w[0].attributes);for(d=d+"Meta:\t"+o+"\n"+j.join("\t"),d+="\tWKT\n",e=0;e<w.length;e++){var Z=w[e].attributes,_e=w[e].geometry;for(o=0;o<j.length;o++)v.push(Z[j[o]]);d+=v.join("\t"),d+="\t"+_e+"\n",v=[]}}}else{if(_e={},v=[],e.geometries)for(w=0;w<e.geometries.length;w++)_e[(o=e.geometries[w]).layerId]||(_e[o.layerId]=[]),_e[o.layerId].push(o);for(j in _e)v.push({layerId:j,geometries:_e[j]});for(e=0;e<v.length;e++)d+=rr(v[e],v[e].layerId)}return d}function or(e,o,d){var j,v=this,w=o&&o.rowFilter;or.l.constructor.call(this,d),C(e,sr,or,0);var Z=d.resultType;if(nr(o),w){var _e=Va(o);_e.rowFilter=w.toString()}else _e=o;(new Pf).a("cle","H.service.extension.worker.processor");var Ki=o.layerId;e.request(tr,ur,{detail_level:"all",layer_id:Ki},function(_u){var fd;for(_u=_u.layers,fd=0;fd<_u.length;fd++)if(_u[fd].layerId===Ki){_e.level=_u[fd].level;break}j=e.D().clone().K(vr+"."+ur).G({meta:1}),new Sf("cle",{message:[v.uid,0,{tileSize:v.tileSize,projected:!0,onlyOutline:4===Z,serverUrl:j.toString(),layerConfigs:[_e],batchTiles:!1,horizontalMargin:1}]}).then(function(){v.i=!0,v.Ra()},v.yb)},function(_u){v.yb(_u.message)})}function wr(){if(xr)throw new Yc(wr)}cr.EntryPointType=jr,cr.prototype.hc=function(e,o){var d=o&&o.resultType;return e=new Kq(this,e,o),1==d||2===d?new Kn(e):new ql(e)},cr.prototype.createTileLayer=cr.prototype.hc,cr.prototype.xc=function(e,o,d,v,w,j){function Z(_u,fd){fd&&_e--,v(_u,!_e)}var _e,Ki=[];for(lr(e,o,this.xc),Qq(this.xc,3,v,w),C(d,K,this.xc,2),d={bbox:d.c+","+d.a+";"+d.f+","+d.b},j&&Xa(d,j),j=0,_e=(e=d.layer_id?[d.layer_id]:e).length;j<_e;j++)d.layer_id=e[j],d.key_attribute=o[j],Ki.push(kr(this,"search/bbox",d,Z,w));return new ir(Ki)},cr.prototype.searchByBoundingBox=cr.prototype.xc,cr.prototype.Lb=function(e,o,d,v,w,j,Z){if(lr(e,o,this.Lb),C(d,lg,this.Lb,2,"has invalid type"),!Dc(v))throw new D(this.Lb,3,"has invalid type");return Qq(this.Lb,4,w,j),e={layer_ids:e.join(","),key_attributes:o.join(","),proximity:d.lat+","+d.lng+","+v},Z&&Xa(e,Z),kr(this,"search/proximity",e,w,j)},cr.prototype.searchByProximity=cr.prototype.Lb,cr.prototype.Kb=function(e,o,d,v,w,j,Z){var _e="";if(lr(e,o,this.Kb),!Ac(d)&&!C(d,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(v))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,4,w,j),e={layer_ids:e.join(","),key_attributes:o.join(","),radius:v},Ac(d))e.route_id=d;else{for(v=d.W,d=0,o=v.length;d<o;d+=3)_e+=v[d]+","+v[d+1],d<o-3&&(_e+=";");e.corridor=_e}return Z&&Xa(e,Z),kr(this,"search/corridor",e,w,j)},cr.prototype.searchByCorridor=cr.prototype.Kb,V.prototype.vj=function(e){return rp(V.prototype.vj),this.Qa(cr,e)},V.prototype.getPlatformDataService=V.prototype.vj,u(mr,Op),t("H.service.extension.geofencing.Service",mr),mr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},mr.CONFIG_KEY="geofencing",mr.prototype.request=function(e,o,d,v){if(!e)throw new D(this.request,0,e);if(!Da(d))throw new TypeError("onResult must be a function");if(!Da(v))throw new TypeError("onError must be a function");return e=this.D().clone().K(e+".json").G(o),this.J(e,d,v)},mr.prototype.request=mr.prototype.request,mr.prototype.b=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(o){return o.message}).join(". "):e.message||e.response_code)},mr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},V.prototype.mj=function(e){return rp(V.prototype.mj),this.Qa(mr,e)},V.prototype.getGeofencingService=V.prototype.mj,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(or,Zq),t("H.service.extension.customLocation.TileProvider",or),or.prototype.u=function(e,o,d){return new Rq(e,o,d)},or.prototype.J=function(e,o,d,v,w){var _e,j=this,Z=this.getTileKey(e,o,d);Z=this.Cb().get(Z);var Ki={cancel:jd},_u=!0,fd=this.b;if(Z&&(4===fd||8===fd?Z.Qd()||(v(up.pop(this.tileSize),null),_u=!1):(v(y),_u=!1)),_u){var iy=sp.setTimeout(function(){(_e=new Sf("cle",{message:[j.uid,1,[e,o,d]]})).then(v,w)},500);Ki.cancel=function(){_e?_e.cancel():sp.clearTimeout(iy)}}return Ki},or.prototype.requestInternal=or.prototype.J,or.prototype.o=function(){or.l.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",wr);var xr=!0;function yr(e,o){var d;xr=!1;var v=new wr;xr=!0,v.c=qc(x.JSON.parse(x.JSON.stringify(e))),e=e.columnNames;var w=nc();for(d=e.length;d--;)w[e[d]]=d;if(v.f=w,v.b=e.length,o){if(o.length%e.length)throw new D(yr,1,"Invalid number of cells")}else o=[];return v.a=o,v}wr.prototype.Id=function(){return this.c},wr.prototype.getMeta=wr.prototype.Id,wr.prototype.Ld=function(){return this.a.length/this.b},wr.prototype.getRowCount=wr.prototype.Ld,wr.prototype.mc=function(e){return e<this.a.length/this.b?new zr(this,e):B},wr.prototype.getRow=wr.prototype.mc,wr.prototype.Gm=function(){var o,e=this.a.length/this.b,d=new x.Array(e);for(o=0;o<e;o++)d[o]=new zr(this,o);return d},wr.prototype.getRows=wr.prototype.Gm,wr.prototype.tg=function(e){var d=this.a,v=d.length/this.b;if(!e||e.length%this.b)throw new D(this.tg,0,"Invalid number of cells");return this.a=d.concat(e),v},wr.prototype.addCells=wr.prototype.tg,wr.prototype.il=function(){for(var e=this.b,o=this.a,d=this.a.length/this.b;e--;)o.push(y);return this.mc(d)},wr.prototype.addRow=wr.prototype.il,wr.prototype.Ma=function(){return this.c.columnNames},wr.prototype.getColumnNames=wr.prototype.Ma,wr.prototype.ve=function(e){return this.f[e]===B?B:new Ar(this,e)},wr.prototype.getColumn=wr.prototype.ve,wr.prototype.sa=function(e,o){return this.a[e*this.b+this.f[o]]},wr.prototype.getCell=wr.prototype.sa,wr.prototype.yc=function(e,o,d){if(o=this.f[o],e>=this.a.length/this.b)throw new D(this.yc,0,"Row index out of bounds");if(o===B)throw new D(this.yc,0,"Column unknown");this.a[e*this.b+o]=d},wr.prototype.setCell=wr.prototype.yc,wr.prototype.concat=function(e){var d,o=arguments.length,v=""+this.Ma(),w=this.a?this.a.slice():[];for(d=0;d<o;d++){var j=arguments[d];if(!(j instanceof wr))throw new D(this.concat,d);if(""+j.Ma()!==v)throw new D(this.concat,d,"Incompatible columns!");j.a&&(w=w.concat(j.a))}return yr(this.c,w)},wr.prototype.concat=wr.prototype.concat;var Br=/(\n|\t|\r|")/;function Cr(e,o,d,v,w,j,Z,_e){var Ki;for(Ki=0;Ki<Z;Ki++){Ki&&o.push("\t");var _u=d[v*w+j[Ki]];if(Ki!==_e){if(_u!==y){if(_u=String(_u),Br.test(_u))throw new D(e.ri,0,'Invalid character (\\n, \\r, \\t, or ") in row '+v+" column "+e.c.columnNames[j[Ki]]);o.push(_u)}}else o.push(_u)}}function Ar(e,o){this.b=e,this.a=o}function zr(e,o){this.a=e,this.yh=o}function Dr(e){if(e===B)e="\t";else if(!/^[^"\r\n]$/.test(e))throw new D(Dr,0);this.c=String(e).charCodeAt(0),this.zh=A(this.zh,this),this.a=Er}wr.prototype.ri=function(e,o){var d,v=this.b,w=this.Ma(),j=[],Z=[],_e=this.a,Ki=-1;for(d=0;d<v;d++)(!e||e.test(w[d]))&&("WKT"===w[d]&&(Ki=j.length),j.push(d));if(!(e=j.length))throw new D(this.ri,1,"No columns filtered");if(Cr(this,Z,w,0,v,j,e,Ki),o){var _u=o.length;for(d=0;d<_u;d++)Z.push("\n"),Cr(this,Z,_e,w=o[d],v,j,e,Ki)}else for(_u=this.Ld(),w=0;w<_u;w++)Z.push("\n"),Cr(this,Z,_e,w,v,j,e,Ki);return Z.join("")},wr.Column=Ar,Ar.prototype.sa=function(e){return this.b.sa(e,this.a)},Ar.prototype.getCell=Ar.prototype.sa,Ar.prototype.yc=function(e,o){this.b.yc(e,this.a,o)},Ar.prototype.setCell=Ar.prototype.yc,wr.Row=zr,zr.prototype.Ma=function(){return this.a.Ma()},zr.prototype.getColumnNames=zr.prototype.Ma,zr.prototype.sa=function(e){return this.a.sa(this.yh,e)},zr.prototype.getCell=zr.prototype.sa,zr.prototype.yc=function(e,o){this.a.yc(this.yh,e,o)},zr.prototype.setCell=zr.prototype.yc,zr.prototype.fd=function(){return this.a},zr.prototype.getTable=zr.prototype.fd;var Er=0;function Fr(e,o,d){var v=e.a;if(v!==o)throw 1===v&&(e.a=Er),new Yc(d,"Requires state: "+["READY","PARSE","PAUSE"][o]+" but found "+["READY","PARSE","PAUSE"][v])}function Gr(e,o){var d=[];return e.parse(o,function(v,w,j){return 1>v&&(d[w]=j),0<v}),e.a=Er,d}function Hr(e,o,d){this.c=new io(e),this.m=o,this.g=!0,this.hf=this.j=this.b=0,Ir(this),this.a=d,this.f=[],this.i=!1}function Ir(e){var o=e.c.Hb();e.s=!1,(e.R=34===o)&&e.c.next()}function Jr(e,o){var d=e.c;switch(e.s=!0,o){case e.m:e.b++;break;case 13:d.next(),10!==d.Hb()&&e.a("CR without LF");case 10:e.b=0,e.j++;break;case-1:e.g=!1;break;default:e.a("End of field expected")}return d.next(),-1}function Kr(e,o,d,v){if(v=v||{},!o)throw new D(Kr,1,"has to be a function");if(!d)throw new D(Kr,2,"has to be a function");for(this.m=o,this.u=d,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.j={},this.s={},this.R=v.duration||100,this.c=A(this.c,this),e=e.split("Meta:\t").slice(1),o=0;o<e.length;o++){d=(v=e[o].split("\n"))[0].split("\t")[0],v=v.slice(1).join("\n"),this.b[d]=new Dr,this.g[d]=Gr(this.b[d],v);var w={layerId:d,columnNames:this.g[d]};this.f.push(d),this.s[d]=yr(w),this.i[d]=Jk(),Lr(this,v,d),this.c(d)}}function Lr(e,o,d){var v=[],w=e.g[d].length-1,j=e.s[d];try{e.b[d].parse(o,function(Z,_e,Ki){var _u=!1;return 0<Z&&(v[_e]=Ki,_e===w&&(e.a.push(j.mc(j.tg(v))),Jk()-e.i[d]>e.R&&(_u=!0))),_u},function(Z,_e,Ki){if(0<Z&&_e===w)return On(Ki)})}catch(Z){e.u(Z)}}function sr(e){sr.l.constructor.call(this,sr,e)}function Mr(e,o,d,v){var w,j=o[e=e===Nr?"changes":"file"],Z=Ac(j),_e=!Z&&C(j,Blob);if(!Z&&!_e)throw new D(v,0,"Invalid "+e+" parameter");if(Or)w=_e?j:pf(j,"text/plain"),(v=new x.FormData).append(e,w,w.name||e+".wkt"),d.method="POST",d.data=v,delete o[e];else if(_e)throw new D(v,0,"Sending Blob data is not supported by the browser")}p=Dr.prototype,p.getState=function(){return this.a},p.abort=function(){Fr(this,2,Dr.prototype.abort),this.a=Er},p.zh=function(e){throw this.a=Er,new D(Dr.prototype.parse,0,"Malformed DSV at row "+this.b.j+" column "+this.b.b+": "+e)},p.parse=function(e,o,d){Fr(this,Er,Dr.prototype.parse),e=e.trim(),this.b=new Hr(e,this.c,this.zh),this.f=o,this.fk=d||gf,this.a=2,this.Ah()},p.fk=gf,p.Ah=function(){var e=this.b,o=[];Fr(this,2,Dr.prototype.Ah),this.a=1;do{if(!e.g){this.a=Er;break}if(w>e.b){if(void 0!==d&&d!==w)return void this.b.a("The number of columns must be the same for all rows");var d=w}var v=e.j,w=e.b,j=e.hf,Z=this.fk(v,w,e);if(e.hf>j)for(;-1!==e.next(););else{for(;-1!==(j=e.next());)o.push(j);Z=String.fromCharCode.apply(y,o),o.length=0}Ir(e),this.f(v,w,Z)&&(this.a=e.g?2:Er)}while(1===this.a);2!=this.a&&void 0!==d&&0<w&&d!==w&&this.b.a("The number of columns must be the same for all rows")},p=Hr.prototype,p.hf=0,p.Hb=function(){if(this.s)var e=-1;else{var o=this.c;if(e=o.Hb(),this.R)switch(e){case 34:o.next(),34!==(e=o.Hb())&&(e=Jr(this,e));break;case-1:this.a("Closing quotation mark expected")}else switch(e){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:e=Jr(this,e)}}return e},p.be=function(){this.i=!0,this.f=[]},p.Bd=function(){var e=this.f.slice();return this.i=!1,this.f=[],e},p.next=function(){var e=this.Hb();return-1!==e&&this.c.next(),this.i&&this.f.push(e),this.hf++,e},Kr.prototype.cancel=function(){for(var e in this.j)x.clearTimeout(this.j[e])},Kr.prototype.cancel=Kr.prototype.cancel,Kr.prototype.c=function(e){var d,v,o=this;this.j[e]=x.setTimeout(function(){if(2===o.b[e].getState())o.i[e]=Jk(),o.m(o.a,!1),o.a=[],o.b[e].Ah(),o.c(e);else{for(d=!0,v=0;v<o.f.length;v++)if(o.b[o.f[v]].getState()!==Er){d=!1;break}d&&(0<o.a.length&&o.m(o.a,!0),o.a=[])}},0)},u(sr,Op),t("H.service.extension.customLocation.Service",sr),sr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},sr.CONFIG_KEY="customLocation",sr.prototype.hc=function(e,o){var d=o&&o.resultType;return e=new or(this,e,o),1===d||2===d?new Kn(e):new ql(e)},sr.prototype.createTileLayer=sr.prototype.hc;var Or=x.FormData&&!!x.FormData.prototype.append;function Pr(e,o,d,v,w,j){var Z="text/plain",_e=o===Qr.LAYERS_UPLOAD||o===Qr.LAYERS_MODIFY||o===Qr.LAYERS_IMPORT,Ki=v,_u={data:B,method:"GET",headers:e.i};if(!o)throw new D(e.request,0,o);if(!d)throw new D(e.request,1,d);Qq(e.request,3,w,j),_e&&(C(v,Object,e.request,2,"Invalid request parameters"),Mr(o,Ki=Va(v),_u,e.request));var fd=e.D().clone().K(o+"."+d).G(Ki);return d===Rr.JSON&&(Z="application/json"),(e=new tf(Z,fd.toString(),he,_u)).then(function(iy){var oy=iy.issues;oy&&iy.error_id&&iy.response_code?j(Error(oy[0].message)):w(iy)},function(iy){"error"===iy.type||404===iy.status?j(Error(iy.statusText||"Unable to load data")):iy.json().then(function(oy){j(Error("["+oy.issues[0].message+"] "+fd+" request failed"))},function(){j(Error("["+iy.statusText+"] "+fd+" request failed"))})}),e}sr.prototype.request=function(e,o,d,v,w){return Pr(this,e,o,d,v,w)},sr.prototype.request=sr.prototype.request;var tr="layers/list",Nr="layers/modify",vr="tiled/tile",Qr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:tr,LAYERS_MODIFY:Nr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:vr};sr.EntryPoint=Qr;var ur="json",Rr={TXT:"txt",JSON:ur};function Sr(e,o,d,v,w){var Z,j=[];return e=e.request(o,ur,d,function(_e){_e.geometries.length?(_e=rr(_e,d.layer_id),Z=new Kr(_e,v,w),j.push(Z)):v(hf,!0)},w),j.push(e),new ir(j)}sr.EntryPointType=Rr,sr.prototype.hb=function(e,o,d){var v=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:e},function(w){var j=String(w).replace(/[\r\n]+$/g,"").split("\t");v.request(tr,ur,{layer_id:e,detail_level:"all"},function(Z){(Z=Z.layers[0]).columnNames=j,o(yr(Z))},d)},d)},sr.prototype.getLayer=sr.prototype.hb,sr.prototype.Dj=function(e,o,d,v){var j=o&&o.length,Z=-1,_e=this;return function w(){return++Z<j?_e.request("layers/access/grant",ur,{layer_id:e,granted_app_id:o[Z].grantedAppId,permissions:o[Z].permissions.join(",")},w,v):_e.hb(e,d,v)}()},sr.prototype.grantAccess=sr.prototype.Dj,sr.prototype.Vi=function(e,o,d){return this.request("layers/delete",ur,{layer_ids:e},o,d)},sr.prototype.deleteLayer=sr.prototype.Vi,sr.prototype.bd=function(e,o,d){function v(){setTimeout(function(){Ki.hb(Z,function(oy){setTimeout(w.bind(null,oy),fd)},function(){64e3>_u?(_u+=fd,v()):d(x.Error("Timeout"))})},fd),fd*=2}function w(oy){var dy=JSON.stringify(oy.Ma()),_y=e.grants;if(dy!==JSON.stringify(_e)){var Ay="Results into different column names on the backend: "+dy;setTimeout(function(){Ki.Vi(Z,function(){d(x.Error(Ay))},function(ky){d(x.Error(Ay+". "+ky.message))})},fd)}else _y&&_y.length?Ki.Dj(Z,_y,o,d):o(oy)}var j,Z,_e,Ki=this,_u=0,fd=1e3,iy=!e||!pr(Z=e.layerId)&&(j="layerId")||!qr(_e=e.columnNames)&&(j="columnNames")?0:Da(o)?Da(d)?-1:2:1;if(0<=iy)throw new D(Ki.bd,iy,j||arguments[iy]);return Ki.hb(Z,function(){d(x.Error("Layer exists already"))},function(){var oy={layer_id:Z,file:_e.join("\t")},dy=e.level,_y=e.storage;dy!==B&&(oy.level=dy),_y!==B&&(oy.storage=_y),Ki.request("layers/upload",ur,oy,v,d)})},sr.prototype.createLayer=sr.prototype.bd,sr.prototype.Lb=function(e,o,d,v,w,j){if(!zc(e))throw new D(this.Lb,0,"has invalid type");if(C(o,lg,this.Lb,1,"has invalid type"),!Dc(d))throw new D(this.Lb,2,"has invalid type");return Qq(this.Lb,3,v,w),e={layer_ids:e.join(","),proximity:o.lat+","+o.lng+","+d},j&&Xa(e,j),Sr(this,"search/proximity",e,v,w)},sr.prototype.searchByProximity=sr.prototype.Lb,sr.prototype.Kb=function(e,o,d,v,w,j){var Z="";if(!zc(e))throw new D(this.Kb,0,"has invalid type");if(!Ac(o)&&!C(o,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(d))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,3,v,w),e={layer_ids:e.join(","),radius:d},Ac(o))e.route_id=o;else{var _e=o.W;for(o=0,d=_e.length;o<d;o+=3)Z+=_e[o]+","+_e[o+1],o<d-3&&(Z+=",");e.corridor=Z}return j&&Xa(e,j),Sr(this,"search/corridor",e,v,w)},sr.prototype.searchByCorridor=sr.prototype.Kb,sr.prototype.xc=function(e,o,d,v,w){function j(Ki,_u){_u&&_e--,d(Ki,!_e)}var _e,Z=[];if(!zc(e))throw new D(this.xc,0,"has invalid type");for(C(o,K,this.xc,1,"has invalid type"),Qq(this.xc,2,d,v),o={bbox:o.c+","+o.a+";"+o.f+","+o.b},w&&Xa(o,w),w=0,_e=(e=o.layer_id?[o.layer_id]:e).length;w<_e;w++)o.layer_id=e[w],Z.push(Sr(this,"search/bbox",o,j,v));return new ir(Z)},sr.prototype.searchByBoundingBox=sr.prototype.xc,sr.prototype.Xh=function(e,o,d,v){var w,j=[];if(!Ac(e))throw new D(this.Xh,0,"has invalid type");Qq(this.Xh,1,o,d);var Z={layer_id:e};return v&&Xa(Z,v),v=this.request("search/all",ur,Z,function(_e){_e.geometries.length?(_e=rr(_e,e),w=new Kr(_e,o,d),j.push(w)):o(hf,!0)},d),j.push(v),new ir(j)},sr.prototype.searchAll=sr.prototype.Xh;var Tr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function Ur(e,o,d,v,w,j){function Z(){_y++,v(this,_y===oy)}function _e(h0){_y++,w(h0,this,_y===oy)}var _u,Ki="append"!==o,fd={},iy=nc(),oy=0,dy=[],_y=0;if(!zc(d))throw new D(j,0,d);for(Qq(j,1,v,w),_u=d.length;_u--;){var Ay=d[_u];if(C(Ay,zr)){var ky=Ay.fd().Id().layerId,Xy=Ay.sa("GEOMETRY_ID");if(Ki){if(Xy===y||""===String(Xy))var zy='GEOMETRY_ID must not be null or ""';fd[Xy=ky+"_"+Xy]&&(zy="same GEOMETRY_ID for multiple rows"),fd[Xy]=Ay}else Xy!==y&&""!==String(Xy)&&(zy='GEOMETRY_ID must be null or ""')}else zy="Invalid type";if(zy)throw new D(j,0,"- Invalid row at index "+_u+", "+zy);(Xy=iy[ky])||(Xy=iy[ky]=[],oy++),Xy.push(Ay)}for(ky in iy){for(d=[],_u=(Xy=iy[ky]).length;_u--;)d.push(Xy[_u].yh);dy.push(e.request(Nr,ur,{layer_id:ky,action:o,changes:Xy[0].fd().ri(Tr[o]||null,d)},A(Z,Xy),A(_e,Xy)))}return new ir(dy)}function Vr(e){Vp.l.constructor.call(this,Vr,e)}function Wr(e){Wr.l.constructor.call(this,Wr,e)}function Xr(e){if(this.f=!!e.toBypassToken,!this.f&&!e.token)throw new D(Xr,0,'"token" must be specified');Xr.l.constructor.call(this,Xr,e),this.m=e.token,this.g={},this.c={}}function bs(e,o,d,v,w,j,Z){return w={method:w,headers:Object.assign(e.f?{}:{authorization:"Bearer "+e.m},{"Content-Type":"application/geo+json"},e.i)},j&&(w.data=JSON.stringify(j)),(j=new tf("application/json",(o=Zr(e.D().clone().K(o+"/features").G(Z||{}))).toString(),he,w)).then(d,Qp(e,o,v)),j}function as(e,o){e.c[o]=cs,e.zf(o,function(d){e.c[o]=ds,e.g[o]=d.copyright,e.dispatchEvent("copyrightupdate")},function(d){throw e.c[o]=es,d})}function $r(e,o){return e.f?o:Zr(o).G({access_token:e.m})}function Zr(e){var o=Object.assign({},e.getQuery());return delete o.apikey,e.eg(o)}sr.prototype.Li=function(e,o,d){return Ur(this,"append",e,o,d,this.Li)},sr.prototype.appendRows=sr.prototype.Li,sr.prototype.bl=function(e,o,d){return Ur(this,"update",e,o,d,this.bl)},sr.prototype.updateRows=sr.prototype.bl,sr.prototype.Wi=function(e,o,d){return Ur(this,"delete",e,o,d,this.Wi)},sr.prototype.deleteRows=sr.prototype.Wi,V.prototype.gj=function(e){return rp(V.prototype.gj),this.Qa(sr,e)},V.prototype.getCustomLocationService=V.prototype.gj,u(Vr,Op),t("H.service.extension.customRoute.Service",Vr),Vr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}},Vr.CONFIG_KEY="customRoute",Vr.prototype.b=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(o){return o.message}).join(". "):e)},Vr.prototype.xd=function(e,o,d){return Qq(this.xd,1,o,d),e=this.D().clone().K("calculateroute.json").G(e),this.J(e,o,d)},Vr.prototype.calculateRoute=Vr.prototype.xd,V.prototype.hj=function(e){return rp(V.prototype.hj),this.Qa(Vr,e)},V.prototype.getCustomRoutingService=V.prototype.hj,u(Wr,Op),t("H.service.SearchService",Wr),Wr.CONFIG_KEY="search",Wr.prototype.a=function(){return{subDomain:"search",path:"v1"}},Wr.prototype.b=function(e){return e=[e.title,e.action,e.cause].filter(function(o){return o}),Error(e.join(". "))},Wr.prototype.Lg=function(e,o,d){return e=this.D().clone().za("geocode").K("geocode").G(e),this.J(e,o,d)},Wr.prototype.geocode=Wr.prototype.Lg,Wr.prototype.Uh=function(e,o,d){return e=this.D().clone().za("revgeocode").K("revgeocode").G(e),this.J(e,o,d)},Wr.prototype.reverseGeocode=Wr.prototype.Uh,Wr.prototype.ml=function(e,o,d){return e=this.D().clone().za("autosuggest").K("autosuggest").G(e),this.J(e,o,d)},Wr.prototype.autosuggest=Wr.prototype.ml,Wr.prototype.tl=function(e,o,d){return e=this.D().clone().za("discover").K("discover").G(e),this.J(e,o,d)},Wr.prototype.discover=Wr.prototype.tl,Wr.prototype.pn=function(e,o,d){return e=this.D().clone().za("lookup").K("lookup").G(e),this.J(e,o,d)},Wr.prototype.lookup=Wr.prototype.pn,Wr.prototype.ol=function(e,o,d){return e=this.D().clone().za("browse").K("browse").G(e),this.J(e,o,d)},Wr.prototype.browse=Wr.prototype.ol,V.prototype.Im=function(e){return this.Qa(Wr,e)},V.prototype.getSearchService=V.prototype.Im,u(Xr,Op),t("H.service.xyz.Service",Xr),Xr.prototype.a=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},Xr.prototype.b=function(e){return Error(e.errorMessage||e.message)},Xr.prototype.Xg=function(e,o,d){return xc(e,"String",this.Xg,0,'"projectId" must be a string'),Yr(this.Xg,1,o,d),e=Zr(this.D().clone().sd("project-api/projects/"+e)),this.J(e,o,d)},Xr.prototype.getProject=Xr.prototype.Xg,Xr.prototype.xj=function(e,o,d){return Yr(this.xj,0,e,o),d=$r(this,this.D().clone().G(d||{})),this.J(d,e,o)},Xr.prototype.getSpaces=Xr.prototype.xj,Xr.prototype.zf=function(e,o,d){return xc(e,"String",this.zf,0,'"spaceId" must be a string'),Yr(this.zf,1,o,d),e=$r(this,this.D().clone().K(e)),this.J(e,o,d)},Xr.prototype.getSpace=Xr.prototype.zf,Xr.prototype.Md=function(e,o,d){return xc(e,"String",this.Md,0,'"spaceId" must be a string'),Yr(this.Md,1,o,d),e=$r(this,this.D().clone().K(e+"/statistics")),this.J(e,o,d)},Xr.prototype.getStatistics=Xr.prototype.Md,Xr.prototype.uf=function(e,o,d,v,w,j,Z){return e=$r(this,this.D().clone().K(v+"/tile/web/"+d+"_"+e+"_"+o+".mvtf").G(Object.assign({clip:!0},Z))),this.J(e,function(_e){return _e.arrayBuffer().then(w)},j,"arraybuffer")},Xr.prototype.search=function(e,o,d,v){return xc(e,"String",this.search,0,'"spaceId" must be a string'),Yr(this.search,1,o,d),e=$r(this,this.D().clone().K(e+"/search").G(v||{})),this.J(e,o,d)},Xr.prototype.search=Xr.prototype.search,Xr.prototype.Mc=function(e,o,d,v){if(xc(e,"String",this.Mc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Mc,2,d,v),e=$r(this,this.D().clone().K(e+"/features").G(o)),this.J(e,d,v)},Xr.prototype.getFeaturesById=Xr.prototype.Mc,Xr.prototype.Fd=function(e,o,d,v){if(xc(e,"String",this.Fd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Fd,2,d,v),e=$r(this,this.D().clone().K(e+"/bbox").G(o)),this.J(e,d,v)},Xr.prototype.getFeaturesByBoundingBox=Xr.prototype.Fd,Xr.prototype.la=function(e){return this.g[e]||(this.c[e]||as(this,e),null)},Xr.prototype.Uc=function(e,o,d,v,w){if(xc(e,"String",this.Uc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Uc,1,'"geojsonObject" must be an object');if(Yr(this.Uc,2,d,v),w&&!Ea(w))throw new D(this.Uc,4,'"opt_params" must be an object');return bs(this,e,d,v,"PUT",o,w)},Xr.prototype.putFeatures=Xr.prototype.Uc,Xr.prototype.Sc=function(e,o,d,v,w){if(xc(e,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Sc,1,'"featureCollection" must be an object');if(Yr(this.Sc,2,d,v),w&&!Ea(w))throw new D(this.Sc,4,'"opt_params" must be an object');return bs(this,e,d,v,"POST",o,w)},Xr.prototype.postFeatures=Xr.prototype.Sc,Xr.prototype.cd=function(e,o,d,v){if(xc(e,"String",this.cd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.cd,1,'"params" must be an object');return Yr(this.cd,2,d,v),bs(this,e,d,v,"DELETE",B,o)},Xr.prototype.deleteFeatures=Xr.prototype.cd,Xr.CONFIG_KEY="xyz";var cs=1,ds=2,es=-1;function Yr(e,o,d,v){if(!Da(d))throw new D(e,o,'"onResult" must be a function');if(!Da(v))throw new D(e,o+1,'"onError" must be a function')}function fs(e,o,d){var v;if(fs.l.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0),C(e,Xr,fs,0),!Ac(o))throw new D(fs,1,'"spaceId" must be a string');if(this.u=e,this.b=o,this.i={},d&&(["limit","simplificationLevel","tags"].forEach(function(w){w in d&&(this.i[w]=d[w])},this),e=d.parameters))for(v in e)this.i[v]=e[v];this.Ob(this.c===ik.WEBGL?new qi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.b},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function gs(e,o,d,v,w){1&w&&hs(e,e,o,d,v,0),2&w&&hs(e,e,o,d,v,1),4&w&&hs(e,e,o,d,v,2),8&w&&hs(e,e,o,d,v,3)}function hs(e,o,d,v,w,j){for(var _e,fd,Ay,ky,Z=(d+1)*(d+1),Ki=4*v,_u=d+1,iy=[{r:0,Bl:0,nl:0,rg:0,next:null}],oy=1,dy=["r","g","b","a"][j],_y=2*d+1;oy<_y;oy++)iy[oy]={r:0,Bl:0,nl:0,rg:0,next:null},iy[oy-1].next=iy[oy];iy[2*d].next=iy[0];var Xy=4*(v-1);for(_e=0;_e<w;_e++){var zy=_e*Ki,h0=e[zy+j],Gy=h0*_u*(d+2)/2;for(_y=h0*_u,oy=0;oy<=d;oy++)iy[oy][dy]=h0;var O0=0;for(oy=1;oy<=d;oy++){var N0=oy<v?zy+4*oy:zy+Xy;Gy+=(N0=e[N0+j])*(_u-oy),O0+=N0,iy[d+oy][dy]=N0}N0=iy[0],Ay=iy[_u],oy=zy,ky=4*_u;var s1=zy+Xy;for(h0=0;h0<v;h0++){o[oy+j]=Gy/Z,Gy-=_y;var S0=h0+_u<v?oy+ky:s1;if(Gy+=O0+=S0=e[S0+j],_y-=N0[dy],_y+=Ay[dy],O0-=Ay[dy],N0[dy]=S0,N0=N0.next,Ay=Ay.next,oy+=4,!Gy)for(;(fd=4*(h0+_u))<Ki&&0===e[zy+j+fd];)h0++,oy+=4}}for(zy=(w-1)*Ki,h0=0;h0<v;h0++){for(Gy=(_e=o[(e=4*h0)+j])*_u*(d+2)/2,_y=_e*_u,oy=0;oy<=d;oy++)iy[oy][dy]=_e;for(O0=0,oy=1;oy<=d;oy++)Gy+=(N0=o[(N0=oy<w?e+oy*Ki:e+zy)+j])*(d-oy+1),O0+=N0,iy[d+oy][dy]=N0;for(N0=iy[0],Ay=iy[_u],oy=e,s1=_u*Ki,Xy=e+zy,_e=0;_e<w;_e++)if(o[oy+j]=Gy/Z,Gy-=_y,Gy+=O0+=S0=o[(S0=_e+_u<w?oy+s1:Xy)+j],_y-=N0[dy],_y+=Ay[dy],O0-=Ay[dy],N0[dy]=S0,N0=N0.next,Ay=Ay.next,oy+=Ki,!Gy)for(;(fd=_e+_u)<w&&0===o[fd*Ki+j+e];)_e++,oy+=Ki}}function is(e,o,d){this.f=o=e>>o,this.j=Math.log(o)*Math.LOG2E,this.i=e=document.createElement("CANVAS"),this.a=e.getContext("2d"),this.b=e.width=e.height=3*o;var v=document.createElement("canvas");e=d.a;var j,w=d.b;for(Z in o=[],v.width=256,v.height=1,v=v.getContext("2d"),w)w.hasOwnProperty(Z)&&o.push({stop:parseFloat(Z),value:w[Z]});w=o.length,o.sort(this.m),0<o[0].stop&&o.unshift({stop:0,value:o[0].value}),1>o[w-1].stop&&o.push({stop:1,value:o[w-1].value}),w=o.length;var Z=v.createLinearGradient(0,0,256,0);for(j=0;j<w;j++){if(!e&&Ki){var _e=Ki.stop+(o[j].stop-Ki.stop)/2;Z.addColorStop(_e,Ki.value),Z.addColorStop(_e,o[j].value)}Z.addColorStop(o[j].stop,o[j].value);var Ki=o[j]}v.fillStyle=Z,v.fillRect(0,0,256,1),this.c=v.getImageData(0,0,256,1).data,this.g=d.a}function js(e,o){this.a=e,this.size=o}function ks(e,o){var d,v=0;if(!Ea(e)||Ua(e))throw new D(ks,0,e);for(d in e){var w=+d;if(v++,!(Dc(w)&&0<=w&&1>=w&&Ac(e[d])))throw new D(ks,0,e)}if(2>v)throw new D(ks,0,"Specify at least 2 stops");this.b=e,this.a=!!o}V.prototype.Aj=function(e){return rp(V.prototype.Aj,"Use HERE IML service instead."),this.Qa(Xr,e)},V.prototype.getXYZService=V.prototype.Aj,u(fs,R),t("H.service.xyz.Provider",fs),fs.prototype.J=function(e,o,d,v,w){return this.u.uf(e,o,d,this.b,v,w,this.i)},fs.prototype.requestInternal=fs.prototype.J,fs.prototype.la=function(){return this.u.la(this.b)},fs.prototype.getCopyrights=fs.prototype.la,fs.prototype.ld=ff,fs.prototype.providesOMV=fs.prototype.ld,fs.prototype.na=function(){return this.fb()},fs.prototype.getStyle=fs.prototype.na,fs.prototype.bc=function(e){C(e,qi)&&e.b("MVT"),this.Ob(e)},fs.prototype.setStyle=fs.prototype.bc,t("H.service.buildInfo",function(){return Hf("H-service","1.35.2","006bf3428",{region:"row"})}),is.prototype.m=function(e,o){return e.stop-o.stop},t("H.data.heatmap.Colors",ks);var ls=new ks({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function ms(e,o,d){this.a=e=Zd(e,0,30),this.u=o,this.i=d,this.m=[],this.b=[];do{this.b[e]=[],this.m[e]=new ns}while(e--);o===os?(this.s=ps,this.j=qs):(this.s=rs,this.j=ss),this.c=1/0,this.f=-1/0}ks.DEFAULT=ls;var ts=Math.log(.5);function qs(e){return this.g?Math.round((e-this.c)/this.g*255):127}function ss(e){return void 0===this.R?127:Math.round(255*Math.pow(e,this.R))}function us(e,o,d,v,w){var Z,_e,j=1<<o;return v=Yd(v,j),!(j=0<=d&&d<j&&(Z=e.b[o])&&(_e=Z[d])&&(j=_e[v])||null)&&w&&0<=o&&(j=us(e,o-1,d>>1,v>>1,w)),j}function vs(e,o,d,v,w,j){for(var Z,_e=[];d<=v;d++)for(Z=w;Z<=j;Z++)_e.push(us(e,o,d,Z,!1));return _e}function ws(e,o){var j,d=0,v=0,w=us(e,0,0,0,!1);return o.f||(o.z===e.a?o.c=o.a:(xs(e,o,function(Z){var _e=ys(e,Z),Ki=4-_e.length;if(Z.z!==e.a){for(j=0;j<_e.length;j++)d+=_e[j].a,v++;d+=Ki*w.a,v+=Ki}}),o.c=d/v),o.f=!0),o.c}function xs(e,o,d){o=[o];for(var v,w;0<o.length;)v=ys(e,w=o.shift()),d(w),o.push.apply(o,v)}function ys(e,o){var v,w,j,d=[];for(w=0;1>=w;w++)for(j=0;1>=j;j++)(v=us(e,o.z+1,2*o.x+w,2*o.y+j,!1))&&d.push(v);return d}function rs(e,o,d){this.x=e,this.y=o,this.z=d,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ps(e,o,d){this.x=e,this.y=o,this.z=d,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ns(){this.f=this.c=1/0,this.a=this.b=-1/0}function zs(e){var o=e||{},d=+o.sampleDepth;e=+o.coarseness;var v=o.colors,w={min:o.min,max:o.max,engineType:o.engineType},Z=+o.dataMax;if(o.tileSize&&(w.tileSize=o.tileSize),R.call(this,w),jk(this,o.opacity),this.B="value"===o.type?os:As,this.sampleDepth_=Dc(d)?Zd(Math.round(d),1,8):4,this.v=!!o.assumeValues,o=this.max,this.I=Dc(Z)?Zd(Math.round(Z),this.min,o+this.sampleDepth_):o,e=Dc(e)?Zd(Math.round(e),0,3):1,v&&!C(v,ks))throw new D(zs,0,"colors");this.b=new ms(o+this.sampleDepth_,this.B,this.I),this.X=new is(this.tileSize,e,v||ls),this.u=A(this.u,this),this.i=A(this.i,this),this.N=new Kk(20,this.u)}function Bs(e,o,d,v){var w=document.createElement("canvas"),j=e.tileSize,Z=w.getContext("2d");w.width=w.height=j;var dy,_y,_e=e.X,Ki=e.b,_u=e.v,fd=e.B,iy=_e.f,oy=_e.a,Ay=fd===As?2:1,ky=Ay;e=Math.min(e.sampleDepth_+Ay,_e.j),Ay=_e.b;var Xy=Ki.a;if(_u&&fd===os){for(_y=-1;1>=_y;_y++)for(_u=-1;1>=_u;_u++){var zy=(zy=us(Ki,v,d+_y,o+_u,!0))?Ki.j(ws(Ki,zy)):128;oy.fillStyle="rgba("+zy+",128,0,1)",oy.fillRect((_u+1)*iy,(_y+1)*iy,iy,iy)}_u=iy-Math.floor(iy/10),_y=3,gs((zy=oy.getImageData(0,0,Ay,Ay)).data,_u,Ay,Ay,_y),oy.putImageData(zy,0,0)}else oy.fillStyle=_u?"#080":"#000",oy.fillRect(0,0,Ay,Ay);for(;ky<=e&&v+ky<=Xy;ky++){_y=iy-(_u=iy>>ky);var h0=fd===As?127+Math.floor(128/(1<<e-ky)):255;zy=2+(1<<ky);var Gy=1<<ky,O0=o<<ky,N0=d<<ky;for(O0=(Gy=vs(Ki,v+ky,N0-1,N0+Gy,O0-1,O0+Gy)).length;O0--;){N0=O0%zy;var s1=O0/zy<<0;(dy=Gy[O0])&&(dy=Ki.j(dy.a),oy.fillStyle="rgba("+dy+","+h0+",0,1)",oy.fillRect(N0*_u+_y,s1*_u+_y,_u,_u))}zy=oy,h0=_u,N0=N0=3,gs((s1=oy.getImageData(Gy=_y,_y,O0=iy+2*_u,_u=iy+2*_u)).data,h0,O0,_u,N0),zy.putImageData(s1,Gy,_y)}for(o=oy.getImageData(0,0,Ay,Ay),d=_e.c,v=_e.g,e=0,Ay=(Ki=o.data).length;e<Ay;e+=4)fd=Ki[e],ky=Ki[e+1],4===d.length&&(fd=0),Ki[e]=d[4*fd],Ki[e+1]=d[4*fd+1],Ki[e+2]=d[4*fd+2],Ki[e+3]=d[4*fd+3]*(v?ky/255:10>ky?0:1);return oy.putImageData(o,0,0),_e=new js(_e.i,iy),Z.drawImage(_e.a,iy=_e.size,iy,iy,iy,0,0,j,j),w}ms.prototype.vb=function(e){var o,d,v=e.value;void 0===v&&(v=1),v>this.f&&(this.f=v,this.g=this.f-this.c),v<this.c&&(this.c=v,this.g=this.f-this.c);var w=kj.Ic(e).scale(1073741823).floor(),j=w.x>>30-(v=this.a);for(w=w.y>>30-v,d=this.s;-1<v;){this.b[v][w]||(this.b[v][w]=[]),(o=this.b[v][w][j])||(o=this.b[v][w][j]=new d(j,w,v)),o.vb(e,v);var Z=this.m[v];Z.f>o.b&&(Z.f=o.b),Z.a<o.b&&(Z.a=o.b),Z.c>o.a&&(Z.c=o.a),Z.b<o.a&&(Z.b=o.a),v--,j>>=1,w>>=1}},ms.prototype.clear=function(){ms.call(this,this.a,this.u,this.i)},rs.prototype.vb=function(e,o){this.g++,this.b+=e.value||1,this.a=this.b/Math.pow(2,2*(30-o))},ps.prototype.vb=function(e){this.b+=void 0!==(e=e.value)?e:1,this.a=this.b/++this.g,this.f=!1},u(zs,R),t("H.data.heatmap.Provider",zs),zs.prototype.ac=function(e){jk(this,e)},zs.prototype.setOpacity=zs.prototype.ac,zs.prototype.Nc=function(){return this.f},zs.prototype.getOpacity=zs.prototype.Nc,zs.prototype.Me=ff,zs.prototype.providesRasters=zs.prototype.Me,zs.prototype.J=function(e,o,d,v,w){var Z,_e,j=this.v;if(us(this.b,0,0,0,!1)){if(!j){var Ki=vs(this.b,d,o-1,o+1,e-1,e+1);for(Z=Ki.length;Z--&&!j;)if(null!==Ki[Z]){j=!0;break}}j&&(_e=this.N.push([e,o,d,v,w],this.i))}return j||v(null),_e||Bl},zs.prototype.requestInternal=zs.prototype.J,zs.prototype.u=function(e,o){e.done(Bs(this,o[0],o[1],o[2]))},zs.prototype.i=function(e,o,d){var v=e.data;e=v[3],v=v[4],d?v():e(o)},zs.prototype.Ki=function(e,o){var d;if(!zc(e))throw new D(this.Ki,0,e);if(d=e.length){for(;d--;)this.b.vb(e[d]);var v;d=(e=this.b).m;var w=e.a,j=0;if(e.u===As){var Z=d[e.a].a;for(v=e.a;0<=v&&d[v].a===Z;v--)j=v;for(Z=d[0].a,v=0;v<=j&&Z===d[v].a;v++)w=v;j>e.i&&(j=e.i),Z=Math.round(w+(j-w)/2),e.R=ts/Math.log(d[Z].b)}this.reload(!!o)}},zs.prototype.addData=zs.prototype.Ki,zs.prototype.clear=function(){this.b.clear(),this.reload(!0)},zs.prototype.clear=zs.prototype.clear;var As=0,os=1;function Cs(){}function Ds(e){for(var o,d=(e=e.attributes).length;d--;)switch(o=e[d],o.name){case"x":this.x=parseFloat(o.value);break;case"y":this.y=parseFloat(o.value);break;case"xunits":this.Pc="fraction"===Cs.prototype.Ia(o);break;case"yunits":this.rc="fraction"===Cs.prototype.Ia(o)}}function Es(e){var o=e.childNodes,d=new Cs;for(e=o.length;e--;){var v=o[e];"href"===v.nodeName&&(this.href=d.Ia(v))}}function Fs(e){var o;if(e){var d=(e=e.childNodes).length;for(o=new Cs;d--;){var v=e[d];switch(v.nodeName){case"scale":this.scale=o.vf(v);break;case"Icon":this.icon=v=new Es(v);break;case"hotSpot":this.a=v=new Ds(v)}}}}function Gs(){this.a={4:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),"ff"].join("")},5:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),e.charAt(4),e.charAt(4)].join("")},7:function(e){return e+"ff"},9:function(e){return e}},this.b={4:function(e){return[Hs(e.charAt(1)),Hs(e.charAt(2)),Hs(e.charAt(3)),255]},5:function(e){return[Hs(e.charAt(1)),Hs(e.charAt(2)),Hs(e.charAt(3)),Hs(e.charAt(4))]},7:function(e){return[(e=parseInt(e.substring(1),16))>>16&255,e>>8&255,255&e,255]},9:function(e){return[(e=parseInt(e.substring(1),16))>>24&255,e>>16&255,e>>8&255,255&e]}}}function Hs(e){return((e=parseInt(e,16))<<4)+e}function Is(e){return 16>e?"0"+Math.round(e).toString(16):Math.round(e).toString(16)}function Js(e,o,d){return/^(#|rgb).*/.test(o)?(d||(d="","#"===o.charAt(0)?d=e.a[o.length]?o:"":"rgb"===o.substr(0,3)&&(d=2<(d=(o=o.match(/\d+(\.\d+)?/g)).length)&&5>d?["#",Is(+o[0]),Is(+o[1]),Is(+o[2]),3<d?Is(255*+o[3]):"ff"].join(""):""),o=d),(e=e.b[o.length](o))[3]=Math.round(e[3]/255*100)/100,e):[0,0,0,255]}function Ks(e){for(var o,d=(e=e.childNodes).length,v=new Cs,w=new Gs;d--;)switch(o=e[d],o.nodeName){case"color":this.a=v.tf(o);break;case"colorMode":this.b=v.Ia(o)}"random"===this.b&&(this.a="#"+w.$k(this.a,!1))}function Ls(e){var o=e.childNodes,d=o.length,v=new Cs;for(this.a=this.fill=!0,this.b=new Ks(e);d--;)switch(e=o[d],e.nodeName){case"fill":this.fill=v.Cd(e);break;case"outline":this.a=v.Cd(e)}}function Ms(e){var o=e.childNodes,d=o.length,v=new Cs;for(this.a=new Ks(e);d--;)"width"===(e=o[d]).nodeName&&(this.width=v.vf(e))}function Ns(e){for(var o,d=(e=e.childNodes).length,v=new Cs;d--;)switch(o=e[d],o.nodeName){case"bgColor":this.bgColor=v.tf(o);break;case"textColor":this.textColor=v.tf(o);break;case"text":this.text=v.Ia(o);break;case"displayMode":this.displayMode=v.Ia(o)}}function Os(e){var o=e.childNodes,d=o.length;for(this.id=e.getAttribute("id");d--;)switch(e=o[d],e.nodeName){case"IconStyle":this.Hj=e=new Fs(e);break;case"LineStyle":this.Sd=e=new Ms(e);break;case"PolyStyle":this.tk=e=new Ls(e);break;case"BalloonStyle":this.df=e=new Ns(e)}}function Ps(e,o){var d=(e=e.childNodes).length,v=new Cs;for(this.b=o;d--;)switch(o=e[d],o.nodeName){case"key":this.key=v.Ia(o);break;case"styleUrl":this.a=v.Ia(o)}}function Qs(e,o){var d=e.childNodes,v=d.length;for(this.b=o,this.id=e.getAttribute("id"),this.a=[];v--;)"Pair"===(e=d[v]).nodeName&&(e=new Ps(e,this.b),this.a.push(e))}function Rs(){this.a={}}function Ss(e){for(var o,d=(e=e.childNodes).length,v=null,w=new Cs;d--;)"coordinates"===(o=e[d]).nodeName&&(v=w.Ia(o));this.a=null,v&&(this.a=w.Lh(v)||null)}function Ts(e,o){var d=e&&e.childNodes||[],v=new Cs;if(!e||!o)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.g=e,e=d.length;e--;){var w=d[e];switch(w.nodeName){case"name":this.name=v.Ia(w);break;case"description":this.b=v.Ia(w);break;case"visibility":this.visibility=v.Cd(w);break;case"open":this.open=v.Cd(w);break;case"styleUrl":(this.c=v.Ia(w))&&(w=this.c.substr(1),this.f=o.Zg(w,!1));break;case"Style":this.a=w=new Os(w)}}}function Us(e){for(var o,d=(e=e.childNodes).length,v=new Cs;d--;)if("coordinates"===(o=e[d]).nodeName){var w=[],j=new Cs;try{w=j.qk(v.Ia(o))}catch(Z){w=[]}this.a=2>w.length?[]:w}}function Vs(e){for(var o=new L,d=e.a?e.a.length:0;d--;)o.md(e.a[d]);return o}function Ws(){}function Xs(e){var o=e.childNodes,d=o.length;for(this.a=new L,this.c=[];d--;){var v=o[d],w=v.nodeName;if("outerBoundaryIs"===w||"innerBoundaryIs"===w){var j=v.childNodes;for(v=j.length;v--;){var Z=j[v];if("LinearRing"===Z.nodeName){var _e=new Us(Z);if("outerBoundaryIs"===w){this.a=Vs(_e);var Ki=void 0,_u=e,fd=_e.a;_e=new Cs;var iy=_u.querySelector("altitudeMode");if(iy&&iy.parentNode===_u&&!/^\s*clampTo/.test(_e.Ia(iy))&&fd){iy=fd.length;for(var oy=0;oy<iy&&0!==Ki;oy++){var dy=fd[oy].alt;dy?Ki?dy!==Ki&&(Ki=0):Ki=dy:Ki=0}(fd=_u.querySelector("*|altitudeOffset"))&&fd.parentNode===Z&&"http://www.google.com/kml/ext/2.2"===fd.namespaceURI&&(Z=_e.vf(fd))&&(Ki+=Z),Ki&&(Ki=wd(2047,Ki),(Z=_u.querySelector("extrude"))&&Z.parentNode===_u&&_e.Cd(Z)?this.b=Ki:this.f=Ki)}}else this.c.push(Vs(_e))}}}}}function Ys(e,o){var d=document.createElement("CANVAS");d.width=1,d.height=1,this.i=e,this.b={},this.c={},this.f=new Uj(d),this.g=o||""}function Zs(e,o,d){for(var w,Z,v=(o=o.childNodes).length,j={};v--;){var _e=o[v];switch(_e.nodeName){case"Point":_e=new Ss(_e),Z=$s(e,"Marker"),(_e=_e.a)&&(w=new Jn(_e,Z),Z.Mh&&Ee(Z.Mh,"statechange",A(e.j,e,Z.Mh,w,Z),!1));break;case"LineString":case"LinearRing":_e=new Us(_e),Z=$s(e,"Polyline"),w=new th(Vs(_e),Z);break;case"Polygon":_e=new Xs(_e),(Z=$s(e,"Polygon")).elevation=_e.f,Z.extrusion=_e.b,w=new uh(new O(_e.a,_e.c),Z);break;case"MultiGeometry":w=Zs(e,_e,new Q)}w&&(e.a.name&&(j.name=e.a.name),e.a.b&&(j.description=e.a.b),Z&&Z.df&&(j.balloonStyle=Z.df),j.kmlNode=e.a.g,w.setData(j),d&&d.aa(w))}return d||w}function $s(e,o){var d=e.a,v={visibility:d.visibility},w=new Gs,j=1,Z={x:0,y:0,Pc:!1,rc:!1},_e=at(e,d.f);switch(d.a&&(_e=at(e,d.a,_e)),o){case"Marker":if(_e&&_e.Hj){if((w=_e.Hj).scale&&(j=w.scale),w.a){var Ki=w.a;Z={x:Ki.x,y:Ki.y,Pc:Ki.Pc,rc:Ki.rc}}w.icon&&w.icon.href?(bt.test(o=w.icon.href)||(o=e.g+o),(Ki=e.b[w=j+"_"+Z.x+Z.y+Z.Pc+Z.rc+"_"+o]||e.c[w])||(Ki=new Uj(o),e.c[w]=Ki),0===Ki.getState()?(v.icon=e.f,v.Mh=Ki,v.href=o,v.anchor=Z,v.scale=j):1===Ki.getState()&&(v.icon=Ki)):1!==j&&(Ki||(Z={x:14,y:4,Pc:!1,rc:!1}),j={size:new Ui((e={w:28*j,h:36*j}).w,e.h),anchor:new G(Z.Pc?e.w*Z.x:Z.x*j,Z.rc?e.h*(1-Z.y):e.h-Z.y*j),hitArea:new Vi(Wi.POLYGON,[0*j,16*j,0*j,7*j,8*j,0*j,18*j,0*j,26*j,7*j,26*j,16*j,18*j,34*j,8*j,34*j])},v.icon=new Uj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',j))}break;case"Polyline":v.style={},_e&&_e.Sd&&(v.style.strokeColor="rgba("+Js(w,(j=_e.Sd).a.a,!0)+")",0<=j.width&&(v.style.lineWidth=j.width));break;case"Polygon":v.style={},_e&&(_e.Sd&&(v.style.strokeColor="rgba("+Js(w,(j=_e.Sd).a.a,!0)+")",0<=j.width&&(v.style.lineWidth=j.width)),_e.tk&&(v.style.fillColor=(j=_e.tk).fill?"rgba("+Js(w,j.b.a,!0)+")":"rgba(0,0,0,0)",j.a||(v.style.lineWidth=0)))}return v.df=_e.df,v}function at(e,o,d){for(var v in d=d||{},o)o.hasOwnProperty(v)&&(d[v]="object"==typeof o[v]?at(e,o[v],d[v]):o[v]);return d}t("H.data.utils.Dom",Cs),Cs.prototype.Cd=function(e){return!!e&&/^\s*(1|true)\s*$/i.test(this.Ia(e))},Cs.prototype.getBoolean=Cs.prototype.Cd,Cs.prototype.Ia=function(e){var o;try{if(e.nodeType===Node.ATTRIBUTE_NODE)return e.value;var d="",v=0,w=e.childNodes;for(o=w.length;v<o;v++)w[v].nodeType!==Node.COMMENT_NODE&&(d+=w[v].nodeValue.replace(/^\s+|\s+$/g,""))}catch(j){}return d||""},Cs.prototype.getString=Cs.prototype.Ia,Cs.prototype.vf=function(e){return parseFloat(this.Ia(e))||0},Cs.prototype.getFloat=Cs.prototype.vf,Cs.prototype.qk=function(e){var Z,o=e.split(/\s+/),d=o.length,v=!(o&&1==d),w=v?1:3,j=[];for(v||(d=(o=e.split(",")).length),Z=0;Z<d;Z+=w){if(!(e=this.Lh(v?o[Z]:Z+3>o.length?null:o.slice(Z,Z+3))))return[];j.push(e)}return j},Cs.prototype.parseCoords=Cs.prototype.qk,Cs.prototype.Lh=function(e){if(!e)return null;var o=e instanceof Array&&0<e.length&&4>e.length?e:e.split(",");e=parseFloat(o[0]);var d=parseFloat(o[1]);return o=parseFloat(o[2]),isNaN(d)||isNaN(e)?null:new lg(d,e,isNaN(o)?void 0:o)},Cs.prototype.parseCoord=Cs.prototype.Lh,Cs.prototype.tf=function(e){return e=this.Ia(e),/^[0-9a-fA-F]{8}$/.test(e)?"#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2):"#000000ff"},Cs.prototype.getColor=Cs.prototype.tf,t("H.data.kml.HotSpot",Ds),t("H.data.kml.Icon",Es),t("H.data.kml.IconStyle",Fs),t("H.data.utils.ColorHelper",Gs),Gs.prototype.$k=function(e,o){var d="";if(!/^(#|rgb).*/.test(e)){var v;for(d="",v=0;6>v;v++)d+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return d+"ff"}for(e=Js(this,e,o),o=0;4>o;o++)d+=Is(v=3>o?Math.floor(Math.random()*(e[o]+1)):255*e[o]);return d},Gs.prototype.toRandomRGBA=Gs.prototype.$k,t("H.data.kml.ColorStyle",Ks),t("H.data.kml.PolyStyle",Ls),t("H.data.kml.LineStyle",Ms),t("H.data.kml.BalloonStyle",Ns),t("H.data.kml.Style",Os),t("H.data.kml.Pair",Ps),Ps.prototype.na=function(){if(this.a){var e="highlight"===this.key;e=this.b.Zg(this.a.substr(1),e)}return e},Ps.prototype.getStyle=Ps.prototype.na,t("H.data.kml.StyleMap",Qs),Qs.prototype.na=function(e){var o=null;e=e?"highlight":"normal";for(var d=this.a.length;d--;)this.a[d].key===e&&(o=this.a[d].na());return o},Qs.prototype.getStyle=Qs.prototype.na,t("H.data.kml.StyleContainer",Rs),Rs.prototype.vg=function(e){e&&e.id&&(this.a["style_"+e.id]=e)},Rs.prototype.addStyle=Rs.prototype.vg,Rs.prototype.Zg=function(e,o){return(e=this.a["style_"+e])instanceof Qs&&(e=e.na(o)),e},Rs.prototype.getStyleById=Rs.prototype.Zg,t("H.data.kml.Point",Ss),t("H.data.kml.Feature",Ts),t("H.data.kml.Line",Us),Ws.prototype.f=0,Ws.prototype.b=0,u(Xs,Ws),t("H.data.kml.Polygon",Xs),Ys.prototype.create=function(e){return this.a=new Ts(e,this.i),Zs(this,e)},Ys.prototype.j=function(e,o,d){var v=d.anchor,w=d.scale;d=w+"_"+v.x+v.y+v.Pc+v.rc+"_"+d.href;var j={};if(1===e.getState()){var Z=this.b[d];if(!Z){var _e=v.x,Ki=v.y;(Z=e.qb())&&(j.size=Z={w:Z.w*w,h:Z.h*w}),j.anchor={x:_e=v.Pc&&Z?Z.w*_e:_e*w,y:Ki=v.rc&&Z?Z.h*(1-Ki):!v.rc&&Z?Z.h-Ki*w:Ki*w},Z=new Uj(e.Jc(),j),this.b[d]=Z}o.Ac(Z)}delete this.c[d]};var bt=/^[^:\/]+:/;function ct(e){vc(this,ct),this.url=e,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(ct,F),t("H.data.AbstractReader",ct);var dt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function et(e,o,d,v){et.l.constructor.call(this,o,e),this.state=d,this.message=v}function ft(e){var o=e?e.lastIndexOf("/"):-1;this.g=[],ct.call(this,e),0<=o&&(this.i=e.substr(0,o)+"/")}function ht(e,o,d){d?d.aa(o):(e.a&&e.a.Ub().aa(o),e.b.push(o),e.O(dt.VISIT,o))}function gt(e,o){for(var v,d=e.length,w=[];d--;)(v=e[d]).nodeName===o&&w.push(v);return w}function it(e,o){this.b=e,this.a=o}function jt(e){return new lg(e[1],e[0])}function lt(e){for(var v,o=kt(e[0]),d=[],w=1,j=e.length;w<j;w++)v=kt(e[w]),d.push(v);return new O(o,d)}function kt(e){for(var o=0,d=e.length,v=new L;o<d;o++)v.md(jt(e[o]));return v}function mt(e,o){this.i=(o=o||{}).style||this.zd,(this.g=!!o.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),ct.call(this,e)}function ot(e){var o={};if(e.geometry){var d=e.geometry;o.type=d.type,o.properties=e.properties,d.coordinates&&(o.coordinates=d.coordinates),d.geometries&&(o.geometries=d.geometries),e.id&&(o.id=e.id)}return o}function nt(e,o){e.a&&e.a.Ub().aa(o),e.b.push(o),e.O(dt.VISIT,o)}function pt(e,o){this.a=e,this.b=o}function qt(e,o,d){this.g=this.b=d,this.Nh=[],this.a=0,this.f=sg(e,o,!0)}function rt(e){var o;nd.call(this),this.a=[],e?Xa(o={},st,e):o=st,this.g=o,nd.call(this)}ct.State=dt,ct.prototype.f=dt.READY,ct.prototype.A={fl:"statechange"},ct.prototype.hb=function(){return this.a||(this.a=new N,this.a.Ub().Qb(this.b)),new rl(this.a)},ct.prototype.getLayer=ct.prototype.hb,ct.prototype.um=function(){return this.b.concat([])},ct.prototype.getParsedObjects=ct.prototype.um,ct.prototype.D=function(){return this.url},ct.prototype.getUrl=ct.prototype.D,ct.prototype.bo=function(e){if(this.f===dt.LOADING||this.f===dt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=e,this},ct.prototype.setUrl=ct.prototype.bo,ct.prototype.getState=function(){return this.f},ct.prototype.getState=ct.prototype.getState,ct.prototype.O=function(e,o,d){this.f=e,this.dispatchEvent(new et(o||this,this.A.fl,e,d||""))},ct.prototype.parse=function(){var e=this;uc(this.url)?(this.O(dt.LOADING),new tf("text/plain",this.url).then(function(o){try{e.c(o)}catch(d){e.O(dt.ERROR,y,d.message)}},function(){e.O(dt.ERROR,y,"Error loading file")})):e.O(dt.ERROR,y,"File url was not set")},ct.prototype.parse=ct.prototype.parse,u(et,sd),ct.Event=et,u(ft,ct),t("H.data.kml.Reader",ft),ft.prototype.c=function(e){var o,d=null;if(Ac(e)&&""!=e.trim()){try{var v=(new DOMParser).parseFromString(e,"text/xml")}catch(_e){return void this.O(dt.ERROR,y,"Error parsing KML document")}if(v.getElementsByTagName("parsererror").length)this.O(dt.ERROR,y,"Error parsing KML document");else if((e=v.childNodes&&"kml"===v.childNodes[0].nodeName?v.childNodes[0]:void 0)&&(o=gt(e.childNodes,"Document")[0]),o=o||e){v=new Rs;for(var w=gt(o.childNodes,"Style"),j=gt(o.childNodes,"StyleMap"),Z=w.length;Z--;)e=new Os(w[Z]),v.vg(e);for(Z=j.length;Z--;)e=new Qs(j[Z],v),v.vg(e);for(this.j=new Ys(v,this.i),o=(e=o.childNodes).length;o--;)v=d,"Placemark"===(w=e[o]).nodeName?(w=this.j.create(w))&&ht(this,w,v):"Folder"===w.nodeName&&(ht(this,(w={group:new Q,node:w}).group,v),this.g.push(w)),!o&&(v=this.g.shift())&&(d=v.group,o=(e=v.node.childNodes).length);this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid KML document")}else this.O(dt.ERROR,y,"Unable to create objects from the empty data")},it.prototype.create=function(e,o){var d=e.coordinates;switch(e.type){case"Point":var v=new Jn(jt(d));break;case"LineString":v=new th(kt(d));break;case"Polygon":v=new uh(lt(d));break;case"MultiPoint":var w=0,j=d.length;if(v=[],this.a){for(;w<j;w++)v.push(jt(d[w]));d=new Jn(new Ti(v))}else{for(;w<j;w++)v.push(new Jn(jt(d[w])));(d=new Q).Qb(v)}v=d,j="multiPoint";break;case"MultiLineString":if(w=0,j=d.length,v=[],this.a){for(;w<j;w++)v.push(kt(d[w]));d=new th(new ih(v))}else{for(;w<j;w++)v.push(new th(kt(d[w])));(d=new Q).Qb(v)}v=d,j="multiLineString";break;case"MultiPolygon":if(v=[],w=0,j=d.length,this.a){for(;w<j;w++)v.push(lt(d[w]));d=new uh(new Gi(v))}else{for(;w<j;w++)v.push(new uh(lt(d[w])));(d=new Q).Qb(v)}v=d,j="multiPolygon";break;case"GeometryCollection":d=v=new Q,j=0;for(var Z=(w=e.geometries).length;j<Z;j++)this.create(w[j],d);j="geometryCollection"}return v&&(d=v,w=e.properties,e=e.id,Z={},w&&(this.a?Z=w:Z.properties=w),j&&!this.a&&(Z[j]=!0),e&&d.ki(e),d.setData(Z),this.b(v)),o&&v&&o.aa(v),v},it.prototype.create=it.prototype.create,u(mt,ct),t("H.data.geojson.Reader",mt),mt.prototype.c=function(e){var o,d;try{var v="string"==typeof e?JSON.parse(e):e;if("object"==typeof v){var w=new it(this.i,this.g);switch(v.type){case"FeatureCollection":if(o=v.features){var j=new Q;for(nt(this,j),d=0;d<o.length;d++){var Z=ot(o[d]);(Z=w.create(Z))&&j.aa(Z)}}break;case"Feature":Z=ot(v),(Z=w.create(Z))&&nt(this,Z);break;default:(Z=w.create(v))&&nt(this,Z)}this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid syntax")}catch(_e){this.O(dt.ERROR,y,"Parse error. "+_e.message)}},mt.prototype.Nn=function(e){this.O(dt.LOADING),this.c(e)},mt.prototype.parseData=mt.prototype.Nn,mt.prototype.zd=function(){},t("H.data.buildInfo",function(){return Hf("H-data","1.35.2","006bf3428",{region:"row"})}),wg.prototype.Dc=ca(1,function(e,o){this.a.Dc(e,Dc(o)?o:this.c)}),Ag.prototype.Dc=ca(0,function(e,o){var v,d=0;if(!e(this)&&o--)for(;3>=d;d++)(v=this[d])&&v.Dc(e,o)}),t("H.clustering.grid.NoisePoint",pt),pt.prototype.wa=function(){return ng(this.a)},pt.prototype.getPosition=pt.prototype.wa,pt.prototype.pc=function(){return this.a.wt},pt.prototype.getWeight=pt.prototype.pc,pt.prototype.jd=gf,pt.prototype.isCluster=pt.prototype.jd,pt.prototype.lc=function(){return this.b},pt.prototype.getMinZoom=pt.prototype.lc,pt.prototype.getData=function(){return this.a.data},pt.prototype.getData=pt.prototype.getData,t("H.clustering.grid.Cluster",qt),qt.prototype.he=function(e){this.c||(this.c=ng(e)),this.a+=e.wt||1,this.Nh.push(e)},qt.prototype.wa=function(){return this.c},qt.prototype.getPosition=qt.prototype.wa,qt.prototype.pc=function(){return this.a},qt.prototype.getWeight=qt.prototype.pc,qt.prototype.jd=ff,qt.prototype.isCluster=qt.prototype.jd,qt.prototype.lc=function(){return this.b},qt.prototype.getMinZoom=qt.prototype.lc,qt.prototype.xf=function(){return this.g},qt.prototype.getMaxZoom=qt.prototype.xf,qt.prototype.F=function(){return this.f},qt.prototype.getBoundingBox=qt.prototype.F,qt.prototype.Kg=function(e){this.te(e)},qt.prototype.forEachEntry=qt.prototype.Kg,qt.prototype.te=function(e){var o=this;if(!Da(e))throw new D(this.te,0,e);this.Nh.forEach(function(d){e(new pt(d,o.b+1))})},qt.prototype.forEachDataPoint=qt.prototype.te,u(rt,nd);var tt={clusters:[],noisePoints:[]},st={projection:kj,min:0,max:22,eps:32,minWeight:2};function ut(e){rt.call(this,e)}function vt(e){this.a=e;var o=(e=document.createElement("canvas")).getContext("2d"),d=this.a,v=14*d;e.width=v,e.height=v,o.scale(d,d),o.beginPath(),o.strokeStyle="#FFFFFF",o.fillStyle="#1080DD",o.arc(7,7,6,0,2*Math.PI,!1),o.fill(),o.lineWidth=1,o.stroke(),this.f=new Uj(e,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function wt(e,o,d){var v,w=document.createElement("canvas"),j=w.getContext("2d"),Z=e.a,_e=o*Z;return w.width=_e,w.height=_e,j.scale(Z,Z),(v=e.b[Z=o+":"+d])?j.putImageData(v,0,0):(o/=2,j.beginPath(),j.strokeStyle="rgba("+d+",0.2)",j.fillStyle="rgba("+d+",1)",j.arc(o,o,o/5*3,0,2*Math.PI,!1),j.fill(),j.lineWidth=o/5*4,j.stroke(),e.b[Z]=j.getImageData(0,0,_e,_e)),w}function xt(e){if(rt.call(this,e),(e=this.g).projection!==kj)throw new D(xt,0,"Other projection than mercator not supported yet");this.m=e.projection,this.f=e.eps,this.B=e.minWeight,this.s=new lj(this.m),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}p=rt.prototype,p.zc=function(e){this.a=e,this.b=!0},p.vb=function(e){this.a.push(e),this.b=!0},p.cf=function(e){this.a=this.a.concat(e),this.b=!0},p.Ne=function(e){this.a=this.a.filter(function(o){return o!==e}),this.b=!0},p.o=function(){rt.l.o.call(this),delete this.a},rt.prototype.disposeInternal=rt.prototype.o,rt.prototype.R=jd,u(ut,rt),ut.prototype.oi=function(e){var Z,o=this.g,d=o.min,v=o.max,w=[],j=[];if(this.b){for(Z=this.a;d<=v;d++){for(var _e,_u,fd,iy,oy,dy,_y,Ay,Ki=void 0,ky=d,Xy=Z,zy=w,h0=j,Gy=o.eps,O0=o.projection,N0=o.minWeight,s1=Xy.length,S0=Math.pow(2,ky+8),D1=[];Ay=Xy[--s1];)if(!Ay.vi){for(_y=S0,dy=(fd=O0.Ic(Ay).scale(S0).floor()).x,oy=fd.y,_u=D1.length;_u--;)iy=(_e=D1[_u]).wa(),_e.ui||(_e.ui=O0.Ic(iy).scale(S0).floor()),(iy=(iy=_e.ui).Sa(fd))<_y&&(_y=iy,Ki=_e);Ki&&Ki.F().ad(Ay)||(Ki=new qt(O0.Qf({x:(dy-Gy)/S0,y:(oy-Gy)/S0}),O0.Qf({x:(dy+Gy)/S0,y:(oy+Gy)/S0}),ky),D1.push(Ki)),Ki.he(Ay),Ki=null}for(s1=D1.length;s1--;)if((_u=(_e=D1[s1]).pc())<N0)for(_u=(_e=_e.Nh).length;Ay=_e[--_u];)h0.push(new pt(Ay,ky)),Ay.vi=!0;else zy.push(_e)}for(d=0,v=Z.length;d<v;d++)delete Z[d].vi;this.b=!1,e({clusters:w,noisePoints:j})}},t("H.clustering.theme.Circular",vt),vt.prototype.Ml=function(e){var o=e.pc(),d=this.c[o];if(!d){if(10>o){d=wt(this,28,"118,209,0");var v={x:11,y:18}}else 25>o?(d=wt(this,38,"255,105,0"),v={x:13,y:23}):50>o?(d=wt(this,38,"240,60,0"),v={x:13,y:23}):100>o?(d=wt(this,38,"181,0,21"),v={x:13,y:23}):1e3>o?(d=wt(this,48,"181,0,21"),v={x:15,y:28}):(d=wt(this,66,"181,0,21"),v={x:20,y:38});var w=d.getContext("2d");w.fillStyle="#FFFFFF",w.font="bold 11px Arial",w.fillText(String(o),v.x,v.y),d=new Uj(d,{size:{w:v=d.width/this.a,h:v},anchor:{x:v/2,y:v/2}}),this.c[o]=d}return(o=new Jn(e.wa(),{icon:d,min:e.lc(),max:e.xf()})).setData(e),o},vt.prototype.getClusterPresentation=vt.prototype.Ml,vt.prototype.rm=function(e){var o=new Jn(e.wa(),{icon:this.f,min:e.lc()});return o.setData(e),o},vt.prototype.getNoisePresentation=vt.prototype.rm,u(xt,rt),xt.prototype.R=function(e,o){this.u=e,this.v=zd(o)},xt.prototype.oi=function(e,o){var d=this.c,v=this.u,w=this.v||0,j=!d||!(d.zoom===w&&d.b.ea(v));if(v&&(this.b||j)){if(d&&3>d.Ud&&d.cancel(),this.b=!1,(d=this.f)>=128*Ed(2,w))var Z=yt;else{(j=this.s).Ja(w);var _e=j.cb(v.Fb());Z=j.cb(v.Bb()),_e.y-=d,Z.y+=d,_e=j.Ie(_e);var Ki=j.Ie(Z);Z=new K(_e.lat,_e.lng,Ki.lat,Ki.lng),d=j.Ka(d,0).lng+180,Z=Z.tc(_e.lat,_e.lng-d,Ki.lat,_e.lng).tc(_e.lat,Ki.lng,Ki.lat,Ki.lng+d)}for(d=Z,Z=[],j=(_e=this.a).length;j--;)d.ad(_e[j])&&Z.push(_e[j]);0<Z.length?(this.c=new zt(v,w,Z,this.f,this.B,this.m!==kj,e,o),this.c.then(this.i,this.j)):e(tt)}},xt.prototype.i=function(e){Ca(e)||(e=new x.Uint32Array(e)),this.c.g(At(this,e))},xt.prototype.j=function(e){Ac(e)&&this.c.f(e)};var yt=new K(90,-180,-90,180);function At(e,o){for(var d=0,v=o[d++],w=Array(v),j=0,Z=[],_e=o.length,Ki=e.c.a,_u=e.c.zoom;v--;)w[j++]=new pt(Ki[o[d++]],_u);for(;d<_e;){v=o[d++],j=Ki[o[d]];var fd=e.s,iy=e.f;fd.Ja(e.c.zoom);var oy=fd.cb(j);for(j=fd.Ka(oy.x-iy,oy.y-iy),fd=fd.Ka(oy.x+iy,oy.y+iy),j=new qt((j=new K(j.lat,j.lng,fd.lat,fd.lng)).Fb(),j.Bb(),_u);v--;)j.he(Ki[o[d++]]);Z.push(j)}return{clusters:Z,noisePoints:w}}function zt(e,o,d,v,w,j,Z,_e){this.b=e,this.zoom=o,this.a=d,this.g=Z,this.f=_e,Z=3*(e=d.length),_e=new(x.Float64Array||Array)(Z);for(var Ki;e--;)_e[--Z]=(Ki=d[e]).lat,_e[--Z]=Ki.lng,_e[--Z]=Ki.wt;ge.call(this,"cluster",{message:[_e,v,w,o,j]},void 0)}function Bt(e,o,d){this.b=e,this.a=o,this.f=d}function Ct(e,o,d,v){this.b=e,this.a=o,this.j=d,this.R=v,this.f=Ja(this.f,this),this.c=Ja(this.c,this)}function Dt(e,o,d,v,w,j){this.g=o,e&&(this.parent=e,1&o?(d=e[8],w=e[5]):(d=e[7],w=e[8]),2&o?(v=e[9],j=e[6]):(v=e[4],j=e[9])),this[7]=d,this[5]=w,this[8]=(d+w)/2,this[4]=v,this[6]=j,this[9]=(v+j)/2}function Et(e,o){return e[o]||(++e.Td,e[o]=new Dt(e,o))}function Ft(e,o,d,v){var w,j;if(!o(e,v)&&d--)for(++v,w=0;4>w;w++)(j=e[w])&&Ft(j,o,d,v)}function Gt(e){this.b=e||10,Ht(this)}function Ht(e){e.head=e.a=new Dt(null,NaN,0,0,4294967296,4294967296)}function It(e,o){var d,v;for(d=0;4>d;d++)(v=o[d])&&(It(e,v),delete o[d]);delete o.parent,delete o.entries}function Jt(e,o){var v,d=e.head;if(o){var w=o;if(w!==d)for(d=w;w=w.parent;)(w.entries||1<w.Td)&&(d=w)}else for(;!d.entries&&2>(v=d.Td)&&v;)d=w;e.head=d}function Kt(e,o,d,v,w,j,Z){var _e=o.entries;return j?o.Td?_e=Kt(e,Et(o,+(d>=o[8])|+(v>=o[9])<<1),d,v,w,j-1,Z):_e?((_e=Et(o,+((_e=_e[0])[1]>=o[8])|+(_e[0]>=o[9])<<1)).entries=o.entries,_e.ke=o.ke,_e.le=o.le,_e.xb=o.xb,_e.a=o.a,_e.f=o.f,_e.b=o.b,_e.c=o.c,delete o.entries,Jt(e,_e),_e=Kt(e,Et(o,+(d>=o[8])|+(v>=o[9])<<1),d,v,w,j-1,Z)):(j=_e=new Lt(d,v,w,Z),(o.entries||(o.entries=[])).push(j),Jt(e,o)):(_e||Jt(e,o),e=_e=new Lt(d,v,w,Z),(o.entries||(o.entries=[])).push(e)),o.ke+=d*w,o.le+=v*w,o.xb+=w,o.a===B?(o.a=o.b=d,o.f=o.c=v):(d<o.a?o.a=d:d>o.b&&(o.b=d),v<o.f?o.f=v:v>o.c&&(o.c=v)),_e}function Lt(e,o,d,v){this[0]=o,this[1]=e,this.a=d,this.data=v}function Mt(e){rt.call(this,e),this.j=(e=this.g).projection,this.s=e.min,this.f=e.max,this.m=e.minWeight,this.c=7-yd(Cd(xd(1,e.eps))/Md),this.i=new Gt(xd(this.s,this.f+this.c))}function Nt(e,o,d,v,w,j,Z){var Ki,_e=o.xb;if(Z&&(Z.node.xb!==_e?(j.clusters.push(new Ct(e,Z.node,Z.depth,d-1)),Z=null):w++),Z||(_e>=e.m?(Z={node:o,depth:d},w=d):Ot(e,o,w+1,j)),o.Td&&v--)for(d++,_e=0;4>_e;_e++)(Ki=o[_e])&&(Nt(e,Ki,d,v,w,j,Z),Z=null);Z&&j.clusters.push(new Ct(e,Z.node,Z.depth,e.f+e.c))}function Ot(e,o,d,v){var w;if(o=o.entries){var j=o.length;for(v=v.noisePoints,w=0;w<j;w++)v.push(new Bt(e,o[w],d))}else for(w=0;4>w;w++)(j=e[w])&&Ot(e,j,d,v)}function Pt(e,o){var d={},v=(o=o||{}).min||0,w=xd(v,o.max||22);switch(Pt.l.constructor.call(this,v={min:v,max:w}),this.ya=o.pixelRatio||Te(),Xa(d,st,v,o.clusteringOptions||{}),d.minWeight=xd(st.minWeight,d.minWeight),d.strategy){case Qt.DYNAMICGRID:if(d.projection!==kj)throw new D(Pt,1,"Unsupported projection");this.b=new xt(d);break;case Qt.GRID:this.b=new ut(d);break;default:this.b=new Mt(d)}this.b.zc(e),this.v=o.theme||new vt(this.ya),this.N=A(this.N,this),this.oa=A(this.oa,this),Rt(this)}xt.prototype.o=function(){xt.l.o.call(this)},xt.prototype.disposeInternal=xt.prototype.o,u(zt,Sf),t("H.clustering.fastgrid.NoisePoint",Bt),Bt.prototype.wa=function(){return this.c||(this.c=this.b.Ka(this.a[1],this.a[0],1)),this.c},Bt.prototype.getPosition=Bt.prototype.wa,Bt.prototype.pc=function(){return this.a.a},Bt.prototype.getWeight=Bt.prototype.pc,Bt.prototype.jd=gf,Bt.prototype.isCluster=Bt.prototype.jd,Bt.prototype.lc=function(){return this.f-this.b.c},Bt.prototype.getMinZoom=Bt.prototype.lc,Bt.prototype.getData=function(){return this.a.data},Bt.prototype.getData=Bt.prototype.getData,t("H.clustering.fastgrid.Cluster",Ct),Ct.prototype.wa=function(){return this.m||(this.m=this.b.Ka(this.a.ke,this.a.le,this.a.xb)),this.m},Ct.prototype.getPosition=Ct.prototype.wa,Ct.prototype.pc=function(){return this.a.xb},Ct.prototype.getWeight=Ct.prototype.pc,Ct.prototype.jd=ff,Ct.prototype.isCluster=Ct.prototype.jd,Ct.prototype.lc=function(){return this.j?this.j-this.b.c:-1/0},Ct.prototype.getMinZoom=Ct.prototype.lc,Ct.prototype.xf=function(){return this.R-this.b.c},Ct.prototype.getMaxZoom=Ct.prototype.xf,Ct.prototype.F=function(){return this.i||(this.i=sg(this.b.Ka(this.a.a,this.a.f,1),this.b.Ka(this.a.b,this.a.c,1),!0)),this.i},Ct.prototype.getBoundingBox=Ct.prototype.F,Ct.prototype.Kg=function(e){this.g=e,this.a.Dc(this.f,Ud)},Ct.prototype.forEachEntry=Ct.prototype.Kg,Ct.prototype.f=function(e,o){var v,w,d=!1;if(e.xb>=this.b.m&&e!==this.a&&e.xb!==this.a.xb&&(this.g(new Ct(this.b,e,0,o)),d=!0),!d&&(v=e.entries))for(e=v.length,w=0;w<e;w++)this.g(new Bt(this.b,v[w],o));return d},Ct.prototype.te=function(e){this.s=e,this.a.Dc(this.c,Ud)},Ct.prototype.forEachDataPoint=Ct.prototype.te,Ct.prototype.c=function(e,o){var d;if(e=e.entries){var v=e.length;for(d=0;d<v;d++)this.s(new Bt(this.b,e[d],o))}return!1},p=Dt.prototype,p.Td=0,p.removeChild=function(e){var o=e.g;this[o]===e&&(delete this[o],delete e.parent,--this.Td)},p.Dc=function(e,o){for(var d=0,v=this;v=v.parent;)++d;Ft(this,e,o,d)},p.ke=0,p.le=0,p.xb=0,Gt.prototype.qc=function(e,o,d,v){var w=this.a;if(!(e>=w[7]&&o>=w[4]&&e<=w[5]&&o<=w[6]))throw Error("Coordinates out of bounds");return Kt(this,this.a,e,o,d,this.b,v)},Gt.prototype.Dc=function(e,o){Ft(this.a,e,o===+o?o:this.b,0)},u(Mt,rt),p=Mt.prototype,p.zc=function(e){var v,o=0,d=e.length,w=new G(0,0),j=this.j,Z=this.i;for(Mt.l.zc.call(this,e),It(Z,Z.a),Ht(Z);o<d;o++)j.Ic(v=e[o],w).scale(4294967296).floor(),Z.qc(w.x,w.y,v.wt,v.data);this.b=!0},p.vb=function(e){Mt.l.vb.call(this,e),this.zc(this.a)},p.cf=function(e){for(var o=e.length,d=Mt.l.vb;o--;)d.call(this,e[o]);this.zc(this.a)},p.Ne=function(e){Mt.l.Ne.call(this,e),this.zc(this.a)},p.Ka=function(e,o,d,v){return this.j.Ka(e/d/4294967296,o/d/4294967296,v)},p.oi=function(e){if(this.b){var o={clusters:[],noisePoints:[]};Nt(this,this.i.a,0,this.f+this.c,-1/0,o,null),this.b=!1,e(o)}},p.o=function(){Mt.l.o.call(this),this.i=null},Mt.prototype.disposeInternal=Mt.prototype.o,t("H.clustering.DataPoint",function(e,o,d,v){this.lat=e,this.lng=o,this.wt=d===+d?d:1,this.data=v}),u(Pt,N),t("H.clustering.Provider",Pt),Pt.prototype.o=function(){Pt.l.o.call(this),this.g.ka(),this.b.C(),delete this.b,delete this.I,delete this.v,x.clearTimeout(this.X)};var Qt={FASTGRID:0,GRID:1,DYNAMICGRID:2};function Rt(e,o,d){e.X&&x.clearTimeout(e.X),o&&e.b.R(o,d),e.X=x.setTimeout(e.N,150)}function St(e){var o=e.I.clusters,d=e.I.noisePoints,v=o.length,w=d.length,j=0<v+w;for(e.g.ka();w--;)e.g.aa(e.v.getNoisePresentation(d[w]));for(;v--;)e.g.aa(e.v.getClusterPresentation(d=o[v]));j&&e.Ra()}function Tt(e,o){t:{for(var d=e.length,v="string"==typeof e?e.split(""):e,w=0;w<d;w++)if(w in v&&o.call(void 0,v[w],w,e)){o=w;break t}o=-1}return 0>o?null:"string"==typeof e?e.charAt(o):e[o]}Pt.Strategy=Qt,Pt.prototype.N=function(){this.dispatchEvent("start"),this.b.oi(this.oa,jd)},Pt.prototype.oa=function(e){this.dispatchEvent("end"),this.I=e,St(this)},Pt.prototype.zc=function(e){this.b.zc(e),Rt(this)},Pt.prototype.setDataPoints=Pt.prototype.zc,Pt.prototype.vb=function(e){this.b.vb(e),Rt(this)},Pt.prototype.addDataPoint=Pt.prototype.vb,Pt.prototype.cf=function(e){this.b.cf(e),Rt(this)},Pt.prototype.addDataPoints=Pt.prototype.cf,Pt.prototype.Ne=function(e){this.b.Ne(e),Rt(this)},Pt.prototype.removeDataPoint=Pt.prototype.Ne,Pt.prototype.Lm=function(){return this.v},Pt.prototype.getTheme=Pt.prototype.Lm,Pt.prototype.$n=function(e){this.v=e,this.I&&(this.g.ka(),St(this))},Pt.prototype.setTheme=Pt.prototype.$n,Pt.prototype.Ib=function(){return!0},Pt.prototype.providesDomMarkers=Pt.prototype.Ib,Pt.prototype.Jb=function(){return!0},Pt.prototype.providesMarkers=Pt.prototype.Jb,Pt.prototype.uc=function(){return!0},Pt.prototype.providesSpatials=Pt.prototype.uc,Pt.prototype.Le=function(e,o){Rt(this,e,o)},Pt.prototype.preprocessData=Pt.prototype.Le,t("H.clustering.buildInfo",function(){return Hf("H-clustering","1.35.2","006bf3428",{region:"row"})});var Ut={};function Vt(e){var o=e.ownerDocument,d=o.documentElement;o=o.defaultView;var v=e.getBoundingClientRect();return e=v.left,v=v.top,isNaN(o.pageXOffset)?(e+=d.scrollLeft,v+=d.scrollTop):(e+=o.pageXOffset,v+=o.pageYOffset),new G(e,v)}function Wt(e,o,d){o=Dc(o)?o+"px":o,d=Dc(d)?d+"px":d,e.style[Af("transform")]="translate("+o+","+d+")"}var Xt,Yt=navigator.userAgent,Zt=-1<Yt.indexOf("Android")&&-1<Yt.indexOf("Mozilla/5.0")&&-1<Yt.indexOf("AppleWebKit"),$t=/AppleWebKit\/([\d.]+)/,au=null===$t.exec(Yt)?null:parseFloat($t.exec(Yt)[1]);Xt=Zt&&null!==au&&537>au;var bu=globalThis,cu=document.createElement("T");function du(){this.a=this.Xi()}du.prototype.Xi=function(){var e=navigator,o=[];return e&&(e.msPointerEnabled?o.push(eu):e.pointerEnabled&&o.push(fu)),1>o.length&&("TouchEvent"in bu&&o.push(gu),o.push(hu)),o},du.prototype.detectEventSets=du.prototype.Xi,du.prototype.addEventListener=function(e,o,d,v){for(var j,w=this.a,Z=w.length,_e=!1;Z--;)(j=w[Z][o])&&(_e=!0,e.addEventListener(j,d,v||!1));_e||e.addEventListener(o,d,v||!1)},du.prototype.removeEventListener=function(e,o,d,v){for(var j,w=this.a,Z=w.length,_e=!1;Z--;)(j=w[Z][o])&&(_e=!0,e.removeEventListener(j,d,v||!1));_e||e.removeEventListener(o,d,v||!1)};var fu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},eu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},gu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},hu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function iu(e,o,d,v){return e=e.createElement(o),d&&(e.className=d),v&&(e.innerHTML=v),e}function ju(e,o){for(var d=1,v=arguments.length;d<v;d++)e.appendChild(arguments[d])}var ku=new du;function lu(e,o,d){ku.addEventListener(e,o,d,void 0)}function mu(e,o,d){ku.removeEventListener(e,o,d,void 0)}function W(e,o){F.call(this),this.ya=e||"div",this.c=o?o.split(" "):[],this.S=!1,this.c.push("H_el")}function nu(e){(e=e.L())&&e.parentNode&&e.parentNode.removeChild(e)}function ou(e){e=e||{},W.call(this,"div","H_btn"),this.Bc(e.label||" "),this.cc(e.tooltip||""),this.setData(e.data),this.ta(!!e.disabled),this.O(pu.UP,!0),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(W,F),t("H.ui.base.Element",W),W.prototype.T=function(e){if(!e)throw Error("Wrong document object");return this.P=iu(e,this.ya,this.c.join(" ")),this.renderInternal(this.P,e),this.ta(this.Wb(),!0),this.cc(this.ra),this.jb(this.ca),this.P},W.prototype.X=function(){},W.prototype.I=function(){},W.prototype.U=function(){},W.prototype.renderInternal=W.prototype.U,W.prototype.Wb=function(){return this.S},W.prototype.isDisabled=W.prototype.Wb,W.prototype.ta=function(e,o){return((e=!!e)!==this.S||o)&&((this.S=e)?this.Ga("H_disabled"):this.gb("H_disabled")),this},W.prototype.setDisabled=W.prototype.ta,W.prototype.v=null,W.prototype.getData=function(){return this.v},W.prototype.getData=W.prototype.getData,W.prototype.setData=function(e){this.v=e},W.prototype.setData=W.prototype.setData,W.prototype.cc=function(e){var o=this.L();this.ra=e,o&&(e?o.setAttribute("title",e):o.removeAttribute("title"))},W.prototype.setTooltip=W.prototype.cc,W.prototype.P=null,W.prototype.L=function(){return this.P},W.prototype.getElement=W.prototype.L,W.prototype.ca=!0,W.prototype.jb=function(e){var o=this.L();this.ca=e,o&&(o.style.display=e?"":"none")},W.prototype.setVisibility=W.prototype.jb,W.prototype.oc=function(){return this.ca},W.prototype.getVisibility=W.prototype.oc,W.prototype.Ga=function(e){var o=this.L();return 0>this.c.indexOf(e)&&this.c.push(e),o&&(o.className=this.c.join(" ")),this},W.prototype.addClass=W.prototype.Ga,W.prototype.gb=function(e){e=this.c.indexOf(e);var o=this.L();return-1<e&&this.c.splice(e,1),o&&(o.className=this.c.join(" ")),this},W.prototype.removeClass=W.prototype.gb,W.prototype.o=function(){W.l.o.call(this),nu(this),this.v=this.P=null,delete this.ra},u(ou,W),t("H.ui.base.Button",ou),ou.prototype.ta=function(e,o){return e&&this.gb("H_active"),ou.l.ta.call(this,e,o)},ou.prototype.setDisabled=ou.prototype.ta,ou.prototype.U=function(e){lu(e,"start",this.b),lu(e,"end",this.a),lu(e,"out",this.a),this.Bc(this.ze(),!0)},ou.prototype.renderInternal=ou.prototype.U,ou.prototype.getState=function(){return this.g},ou.prototype.getState=ou.prototype.getState,ou.prototype.O=function(e,o){return e!==this.g&&(this.g=e,e===pu.DOWN?this.Ga("H_active"):this.gb("H_active"),o||this.dispatchEvent("statechange")),this},ou.prototype.setState=ou.prototype.O,ou.prototype.ze=function(){return this.f},ou.prototype.getLabel=ou.prototype.ze,ou.prototype.Bc=function(e,o){return(o||e!==this.f)&&(this.f=e,(o=this.L())&&(o.innerHTML=e)),this},ou.prototype.setLabel=ou.prototype.Bc,ou.prototype.b=function(e){this.Wb()||this.O(pu.DOWN),e.preventDefault()},ou.prototype.a=function(e){this.Wb()||this.O(pu.UP),e.preventDefault()},ou.prototype.o=function(){var e=this.L();e&&(mu(e,"start",this.b),mu(e,"end",this.a),mu(e,"out",this.a)),W.prototype.o.call(this)};var pu={UP:"up",DOWN:"down"};ou.State=pu;var qu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function ru(e){var o;this.b=!!(e=e||{}).vertical,this.oa=e.length||"16em",this.a=Dc(o=e.min)?o:0,this.i=xd(this.a,Dc(o=e.max)?o:100),this.Y=E(o=e.step)?1:o,this.j=su(this,Dc(o=e.value)?o:(this.a+this.i)/2),this.Nf=A(this.Nf,this),this.Jf=A(this.Jf,this),this.Pf=A(this.Pf,this),this.Of=A(this.Of,this),this.m=e.pointerArea,W.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function tu(e){if(!e.s){lu(e.L(),"start",e.Nf);var o=e.m;lu(o,"move",e.Jf),lu(o,"end",e.Pf),lu(o,"out",e.Of),e.s=!0}}function uu(e){if(e.s){mu(e.L(),"start",e.Nf);var o=e.m;mu(o,"move",e.Jf),mu(o,"end",e.Pf),mu(o,"out",e.Of),e.s=!1}}function su(e,o){var d=e.Y;return o=Zd(o,e.a,e.i),d?e.a+yd((o-e.a)/d)*d:o}function vu(e,o){var d=e.B,v=e.b;e.u||(e.u=d["offset"+(v?"Height":"Width")]),0>(o-=Vt(d)[v?"y":"x"])&&(o=0),o=(e.i-e.a)*o/e.u,o=su(e,v?e.i-o:e.a+o),e.j!==o&&(e.gg(o,!0),e.dispatchEvent(new aj(e.A.Zc,o,e.j)))}function wu(e,o){return(o.touches?o.targetTouches[0]:o)["page"+(e.b?"Y":"X")]}function xu(e){var o=!1,d=e.type;return-1!==d.indexOf("pointer")||-1!==d.indexOf("touch")?o=!0:C(e,MouseEvent)&&(o=1===e.which||1===e.buttons),o}function yu(e){var o=e.touches;return o&&1===o.length||C(e,MouseEvent)}u(ru,W),t("H.ui.base.Slider",ru),ru.prototype.gg=function(e,o){var d=this.b,v=d?"top":"left";return(!this.f||o)&&(e=Zd(e,this.a,this.i),this.g&&(this.g.style[v]=(d=(d?-1:1)*(o=100*(e-this.a)/(this.i-this.a)))+"%",this.ua.style[v]=100+d+"%"),this.j=su(this,e)),this.j},ru.prototype.setValue=ru.prototype.gg,ru.prototype.Rm=function(){return this.j},ru.prototype.getValue=ru.prototype.Rm,p=ru.prototype,p.Nf=function(e){var o=this.b;if(xu(e)&&yu(e)){var d=wu(this,e),v=e.target;v===this.g||v.parentElement===this.g?(this.N=d-Vt(this.g)[o?"y":"x"]-this.g.offsetWidth/2,this.L().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.f=!0):vu(this,d),e.preventDefault()}},p.Pf=function(){this.f&&(this.L().className="H_slider "+(this.b?"":" H_l_horizontal"),this.f=!1)},p.Of=function(e){this.f&&e.target===this.m&&(this.f=!1)},p.Jf=function(e){this.f&&yu(e)&&(xu(e)?(vu(this,wu(this,e)-this.N),e.preventDefault()):this.f=!1)},p.A={Zc:"change"},p.U=function(e,o){var d=iu(o,"div","H_slider_cont"),v=iu(o,"div","H_slider_knob_cont"),w=iu(o,"div","H_slider_knob"),j=iu(o,"div","H_slider_knob_halo"),Z=iu(o,"div","H_slider_track");o=iu(o,"div","H_slider_track H_slider_track_active"),e.appendChild(d),d.appendChild(Z),Z.appendChild(o),d.appendChild(v),v.appendChild(w),v.appendChild(j),this.B=Z,this.ua=o,this.g=v,this.m||(this.m=e.ownerDocument.body),d.style[this.b?"height":"width"]=this.oa,this.gg(this.j),tu(this)},ru.prototype.renderInternal=ru.prototype.U,ru.prototype.o=function(){uu(this)},ru.prototype.ta=function(e,o){return e?uu(this):this.B&&tu(this),W.prototype.ta.call(this,e,o)},ru.prototype.setDisabled=ru.prototype.ta;var zu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Au(e,o,d){W.call(this,e,o),this.a=d?d.concat():[]}function Bu(){Au.call(this,"div","H_ctl"),this.map=null,this.Fc="top-left"}function Cu(e){var o=(e=e||{}).slider;Bu.call(this),this.m=A(this.m,this),this.g=A(this.g,this),this.b=A(this.b,this),o&&(this.u=A(this.u,this),this.B=o,this.Xa=e.sliderSnaps,this.Ga("H_zoom_slider")),this.i=new ou({label:qu.in,onStateChange:this.m}),this.s=new ou({label:qu.out,onStateChange:this.m}),this.Ga("H_zoom"),this.Ga("H_grp"),this.Y=!1!==e.fractionalZoom,this.setZoomSpeed(e.zoomSpeed||4),this.Mb(e.alignment||"right-middle")}function Du(e){e.removeChild(e.f),e.f=null,e.j&&(e.j.removeEventListener("minchange",e.b),e.j.removeEventListener("maxchange",e.b),e.j=null)}function Eu(e,o){var d={},v={};d["top-left"]=iu(o,"div",[Fu,Gu].join(" ")),d["top-center"]=iu(o,"div",[Fu,Hu,Iu,Gu].join(" ")),d["top-right"]=iu(o,"div",[Fu,Gu].join(" ")),d["left-top"]=iu(o,"div",[Fu,Ju].join(" ")),d["left-middle"]=iu(o,"div",[Fu,Ku,Lu,Ju].join(" ")),d["left-bottom"]=iu(o,"div",[Fu,Ju].join(" ")),d["right-top"]=iu(o,"div",[Fu,Ju].join(" ")),d["right-middle"]=iu(o,"div",[Fu,Mu,Lu,Ju].join(" ")),d["right-bottom"]=iu(o,"div",[Fu,Ju].join(" ")),d["bottom-left"]=iu(o,"div",[Fu,Gu].join(" ")),d["bottom-center"]=iu(o,"div",[Fu,Nu,Iu,Gu].join(" ")),d["bottom-right"]=iu(o,"div",[Fu,Gu].join(" ")),v["top-left"]=iu(o,"div",[Hu,Ku].join(" ")),v["top-right"]=iu(o,"div",[Hu,Mu].join(" ")),v["bottom-left"]=iu(o,"div",[Nu,Ku].join(" ")),v["bottom-right"]=iu(o,"div",[Nu,Mu].join(" ")),ju(v["top-left"],d["top-left"],d["left-top"]),ju(v["top-right"],d["top-right"],d["right-top"]),ju(v["bottom-left"],d["left-bottom"],d["bottom-left"]),ju(v["bottom-right"],d["right-bottom"],d["bottom-right"]),ju(e,v["top-left"],v["top-right"],v["bottom-left"],v["bottom-right"],d["top-center"],d["left-middle"],d["right-middle"],d["bottom-center"]),this.a=d}t("H.ui.LayoutAlignment",zu),u(Au,W),t("H.ui.base.Container",Au),Au.prototype.ta=function(e,o){var d=this.a?this.a.length:0;for(W.prototype.ta.call(this,e,o);d--;)this.a[d].ta(e,o);return this},Au.prototype.setDisabled=Au.prototype.ta,Au.prototype.Fa=function(e){var o=this.L();return this.a.push(e),o&&(e.T(o.ownerDocument),o.appendChild(e.L())),this},Au.prototype.addChild=Au.prototype.Fa,Au.prototype.Pg=function(){return this.a.concat()},Au.prototype.getChildren=Au.prototype.Pg,Au.prototype.removeChild=function(e){var o=this.a.indexOf(e),d=this.L();0<=o&&(this.a.splice(o,1),d&&d.removeChild(e.L()))},Au.prototype.removeChild=Au.prototype.removeChild,Au.prototype.ka=function(){var e=this.L();e&&this.a.forEach(function(o){e.removeChild(o.L())}),this.a=[]},Au.prototype.U=function(e,o){for(var d=0,v=this.a.length;d<v;d++)e.appendChild(this.a[d].T(o))},Au.prototype.renderInternal=Au.prototype.U,Au.prototype.o=function(){this.ka(),this.a.forEach(this.oa,this),W.prototype.o.call(this)},Au.prototype.oa=function(e){e.C()},u(Bu,Au),t("H.ui.Control",Bu),Bu.prototype.Ea=function(e){this.map=e},Bu.prototype.T=function(e){return Au.prototype.T.call(this,e)},Bu.prototype.U=function(e,o){Au.prototype.renderInternal.call(this,e,o),this.Mb(this.Fc)},Bu.prototype.renderInternal=Bu.prototype.U,Bu.prototype.He=function(){},Bu.prototype.onUnitSystemChange=Bu.prototype.He,Bu.prototype.Tb=function(){return this.map},Bu.prototype.getMap=Bu.prototype.Tb,Bu.prototype.va=function(){return this.ua},Bu.prototype.getLocalization=Bu.prototype.va,Bu.prototype.Fl=function(){return this.Fc},Bu.prototype.getAlignment=Bu.prototype.Fl,Bu.prototype.Mb=function(e){return"string"==typeof e&&zu[e.replace("-","_").toUpperCase()]===e&&(this.Fc=e,this.dispatchEvent("alignmentchange")),this},Bu.prototype.setAlignment=Bu.prototype.Mb,u(Cu,Bu),t("H.ui.ZoomControl",Cu),Cu.prototype.Vm=function(){return this.N},Cu.prototype.getZoomSpeed=Cu.prototype.Vm,Cu.prototype.co=function(e){this.N=e},Cu.prototype.setZoomSpeed=Cu.prototype.co,Cu.prototype.Ea=function(e){this.map!==e&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Du(this)),Bu.prototype.Ea.apply(this,arguments),this.map&&(this.b(),e.addEventListener("mapviewchange",this.g),e.addEventListener("baselayerchange",this.b))},Cu.prototype.setMap=Cu.prototype.Ea,Cu.prototype.o=function(){Bu.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Du(this)},Cu.prototype.U=function(e,o){Bu.prototype.renderInternal.call(this,e,o),this.i.cc(this.va().translate("zoom.in")),this.s.cc(this.va().translate("zoom.out"))},Cu.prototype.renderInternal=Cu.prototype.U,Cu.prototype.Mb=function(e){var o=this.Fc;return Bu.prototype.Mb.call(this,e),o!==e&&this.b(),this},Cu.prototype.setAlignment=Cu.prototype.Mb,Cu.prototype.g=function(){var e=this.map,o=e.ib(),d=e.Ta()-1;e=e.g||e.f.getCapabilities().lookAt.zoom,this.B&&this.f.gg(o),this.Wb()||(this.i.ta(o+d>=e.max),this.s.ta(o<=e.min))},Cu.prototype.ta=function(e,o){return Cu.l.ta.call(this,e,o),this.g(),this},Cu.prototype.setDisabled=Cu.prototype.ta,Cu.prototype.m=function(e){var w,o=(e=e.target)===this.i?1:-1,d=0<o?Math.ceil:Math.floor,v=this.map,j=this;v&&("down"===e.getState()?(v.c.startControl(),v.c.control(0,0,o*this.N,0,0,0)):v.c.endControl(!0,function(Z){w=j.Y?Z.zoom:d(Z.zoom),Z.zoom=w}))},Cu.prototype.u=function(e){this.map&&this.map.Ve(e.newValue)},Cu.prototype.b=function(){var e=this.Fc,o=this.Tb();if(/^top/g.test(e)||/^bottom/g.test(e)){var d=this.s;e=this.i;var v=!1}else d=this.i,e=this.s,v=!0;if(this.removeChild(d),this.removeChild(e),this.Fa(d),this.B&&o){Du(this),o=v;var w=(v=(d=this.map)&&d.g)||d.f.getCapabilities().lookAt.zoom;(this.j=v)&&(v.addEventListener("minchange",this.b),v.addEventListener("maxchange",this.b)),this.f=new ru({step:this.Xa?1:0,vertical:o,min:w.min,max:w.max,value:d.ib(),pointerArea:d.L()}),this.f.addEventListener(this.f.A.Zc,this.u),this.Fa(this.f)}this.Fa(e)};var Hu="H_l_top",Nu="H_l_bottom",Ku="H_l_left",Mu="H_l_right",Iu="H_l_center",Lu="H_l_middle",Gu="H_l_horizontal",Ju="H_l_vertical",Fu="H_l_anchor";function Ou(e,o){o?(o=e.offsetWidth,e.style.marginLeft=-Math.round(.5*o)+"px"):(o=e.offsetHeight,e.style.marginTop=-Math.round(.5*o)+"px")}Eu.prototype.update=function(){var e=this.a;Ou(e["top-center"],!0),Ou(e["bottom-center"],!0),Ou(e["left-middle"],!1),Ou(e["right-middle"],!1)},Eu.prototype.put=function(e,o){e=e?e.L():null;var d=o?this.a[o]:null;e&&d&&(e.parentElement&&e.parentElement.removeChild(e),d.insertBefore(e,/(bottom|right)$/.test(o)||/(center|middle)/.test(o)&&d.childNodes.length%2?d.firstChild:null)),this.update()};var Pu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Pu);var Qu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function Ru(e){ou.call(this,e),this.j=function(o){o.preventDefault()},this.i=A(function(o){this.Wb()||this.toggleState(),o.preventDefault()},this)}function Su(e,o,d){$i.call(this,e,{icon:Tu,visibility:d}),Uu(this,o)}function Uu(e,o){e.jn=o,e.P&&(e.P.textContent=o)}u(Ru,ou),t("H.ui.base.PushButton",Ru),Ru.prototype.U=function(e){lu(e,"start",this.i),lu(e,"end",this.j),this.Bc(this.ze(),!0)},Ru.prototype.renderInternal=Ru.prototype.U,Ru.prototype.mo=function(){var e=pu.DOWN;return this.O(this.getState()===e?pu.UP:e),this},Ru.prototype.toggleState=Ru.prototype.mo,Ru.prototype.o=function(){var e=this.L();e&&mu(e,"start",this.i),ou.prototype.o.call(this)},u(Su,$i);var Tu=new Ri(iu(bu.document,"span","H_dm_label"),{onAttach:function(e,o,d){d.P=e,Uu(d,d.jn)},onDetach:function(e,o,d){delete d.P}});function Vu(e,o){F.call(this),this.b=e,this.f=new Su(this.ko,""),o.push(this.f),this.a=new Q({objects:o,data:this}),this.dg=this.dg.bind(this)}function Wu(e,o){o&&(e.nextSibling=o,o.previousSibling=e)}function Xu(e,o,d,v){var w=new L,j=[];Wu(e,this),Wu(this,o),w.md(e.wa()),w.md(o.wa()),this.c=new th(w,{style:d.Sd}),this.i=new th(w,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.na().lineWidth+2*(v||5))}}),d.c&&(this.g=new th(w,{style:d.c}),j.push(this.g)),j.push(this.c,this.i),Vu.call(this,d,j),this.m=this.j=-1,(e=this.a).addEventListener("pointermove",this.v,!0,this),e.addEventListener("pointerleave",this.u,!0,this)}function Yu(e,o,d){var v=e.c.ba();v.Xe(3*+d,3,[o.lat,o.lng,0]),e.g&&e.g.$(v),e.i.$(v),e.c.$(v)}function Zu(e,o,d){d=o.b(d||0),this.c=new Jn(e,{icon:d,zIndex:0}),this.c.draggable=!0,Vu.call(this,o,[this.c]),(e=this.a).addEventListener("dragstart",this.yn,!0,this),e.addEventListener("drag",this.zn,!0,this),e.addEventListener("dragend",this.xn,!0,this)}function $u(e){var o=0;e.nextSibling&&e.previousSibling&&(e.nextSibling.Qc||e.previousSibling.Qc?e.nextSibling.Qc&&!e.previousSibling.Qc&&(o=2):o=1),o=e.b.b(o),e.c.Ac(o)}function av(e,o){this.c=o,this.b=e,this.a={Qc:!0},bv(this,this.a),this.Mf=A(this.Mf,this)}function cv(e,o){for(var d=(e=e.a).nextSibling;d!==e;){var v=d;(v.s=d.previousSibling!==e&&o)?v.dg():(v.Ch&&x.clearTimeout(v.Ch),v.Ch=x.setTimeout(v.dg,100)),d=d.nextSibling}}function dv(e,o){var d=o||e.a.nextSibling,v=0,w=0;if(o&&!ev(e,o))throw new D(e.Pe,0,o);for(d instanceof Zu?v=d.ye():d instanceof Xu&&(v=d.previousSibling.ye()),o=d;o&&o!==e.a;o=o.nextSibling,w++)o.Zh(v),w%2==1&&(v+=o.ye())}function ev(e,o){for(var d=e.a.nextSibling,v=!1;d!==e.a;){if(d===o){v=!0;break}d=d.nextSibling}return v}function fv(e,o,d){o=new Xu(o,d,e.c),e.b.aa(o.a)}function bv(e,o){e.a.nextSibling=o,o.previousSibling=e.a}function gv(e){var o,d=(e=e||{}).lineStyle;Bu.call(this),this.m=new Ru({label:Qu.btn,onStateChange:A(this.vn,this)}),this.Fa(this.m),(o=e.distanceFormatter)&&(this.$i=o),d&&(this.Sj=d,this.mk=B),this.Mb(e.alignment||"right-bottom"),this.g={},this.g[0]=e.startIcon,this.g[2]=e.endIcon,this.g[1]=e.stopoverIcon,this.g[3]=e.splitIcon}function hv(e){var d,o=e.map,v={};e.f||(e.j=new N,e.s=new rl(e.j,{pixelRatio:e.map.Ta()}),e.u=d=e.j.Ub(),e.u.Qk(!0),d.addEventListener("dragstart",e.tn,!0,e),d.addEventListener("dragend",e.We,!0,e),d.addEventListener("pointerenter",e.We,!0,e),d.addEventListener("pointerleave",e.un,!0,e),d.addEventListener("tap",e.In,!0,e),e.i=iv(e),v.a=A(e.$i,e),v.b=A(e.Zj,e),v.g=A(e.rj,e),v.map=e.map,v.f=e.i,v.Sd=e.Sj,v.c=e.mk,e.b=new av(e.u,v),e.f=!0),e.i&&e.u.aa(e.i),o.addEventListener("tap",e.jk,!0,e),o.a.add(e.s)}function jv(e){var o=e.map;e.f&&(o.removeEventListener("tap",e.jk,!0,e),o.Oe(e.s),e.b.ka())}function iv(e){function o(){var _e=d.qb();return _e={anchor:d.ed().clone().scale(j).floor(),size:new Ui(zd(_e.w*j),zd(_e.h*j)),hitArea:v},new Uj(d.Jc(),_e)}var w,d=e.Zj(3),v=new Vi(Wi.NONE,[]),j=d===e.B?.5:1;if(1===d.getState())var Z=o();else Z=new Uj("<svg/>",{hitArea:v}),d.addEventListener("statechange",function(){1===d.getState()&&w.Ac(o())});return w=new Jn(e.map.Ya(),{visibility:!1,icon:Z})}function kv(){this.b=lv.CLOSED,Au.call(this,"div","H_overlay")}u(Vu,F),p=Vu.prototype,p.Qc=!1,p.ko={lat:0,lng:0},p.Bc=function(e,o){Uu(this.f,e),this.f.$(o)},p.Ch=0,p.dg=function(){this.f.jb(this.s)},u(Xu,Vu),Xu.prototype.ye=function(){var e=this.c.ba();return e.re(0).Sa(e.re(1))},Xu.prototype.v=function(e){var o=e.currentPointer;e=this.previousSibling.wa();var d=this.nextSibling.wa(),v=this.b.f,w=o.viewportX;o=o.viewportY,(this.j!==w||this.m!==o)&&(this.j=w,this.m=o,v.$(this.b.g(e,d,{x:w,y:o})),v.jb(!0))},Xu.prototype.u=function(){this.b.f.jb()},Xu.prototype.Zh=function(){this.Bc(this.b.a(this.ye()),this.c.F().Ya())},u(Zu,Vu),p=Zu.prototype,p.ck=0,p.A={Zc:"change"},p.ye=function(){return this.ck},p.wa=function(){return this.c.ba()},p.zn=function(e){var o=e.currentPointer;e=o.viewportX,o=o.viewportY,(this.i!==e||this.j!==o)&&(this.i=e,this.j=o,this.c.$(this.b.map.Pa(e-this.g.x,o-this.g.y)),this.dispatchEvent(new sd(this.A.Zc,this)))},p.yn=function(e){var o=e.currentPointer,d=o.viewportX;o=o.viewportY;var v=this.b.map.Aa(this.wa());this.c.ae(1),this.g={x:d-v.x,y:o-v.y},e.stopPropagation()},p.xn=function(){this.c.ae(0)},p.Zh=function(e){this.ck=e,this.Bc(this.b.a(e),this.wa())},t("H.ui.distanceMeasurement.Model",av),p=av.prototype,p.Ef=function(){return this.a.nextSibling===this.a},p.he=function(e){var o=this.a.previousSibling,d=this.Ef();return e=new Zu(e,this.c,d?0:2),this.b.aa(e.a),Wu(e,this.a),e.addEventListener(e.A.Zc,this.Mf),d?bv(this,e):(fv(this,o,e),$u(o),dv(this,o)),e},p.insertBefore=function(e,o){var d,v=1;if(o){if(!ev(this,o))throw new D(this.insertBefore,1,o);(d=o.previousSibling.Qc)&&(v=0),(e=new Zu(e,this.c,v)).addEventListener(e.A.Zc,this.Mf),this.b.aa(e.a),d?(fv(this,e,d=this.a.nextSibling),bv(this,e),o=e,$u(d)):(o=(d=o.previousSibling).previousSibling,v=d.nextSibling,this.b.Da(d.a),fv(this,o,e),fv(this,e,v)),dv(this,o)}else e=this.he(e);return e},p.ka=function(){bv(this,this.a),this.b.ka()},p.Pe=function(e){var o=this.a,d=e.previousSibling,v=e.nextSibling;if(!ev(this,e))throw new D(this.Pe,0,e);if(this.b.Da(e.a),d===o){var w=v;w!==o?(bv(this,e=w.nextSibling),e.Zh(0),$u(e),dv(this,e)):bv(this,this.a)}else v===o?(Wu(e=(w=d).previousSibling,o),$u(e)):d&&v&&(fv(this,d.previousSibling,v.nextSibling),this.b.nd([v.a,d.a]),dv(this,d.previousSibling));w&&w!==o&&this.b.Da(w.a)},p.Mf=function(e){var o=(e=e.target).previousSibling,d=e.nextSibling,v=e.wa();if(!d.Qc){Yu(d,v,!1);var w=e}o.Qc||(Yu(o,v,!0),w=o.previousSibling),dv(this,w)},u(gv,Bu),t("H.ui.DistanceMeasurement",gv),p=gv.prototype,p.Bh=Pu.METRIC,p.Sj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.mk={strokeColor:"white",lineWidth:7},p.$i=function(e){var o="m",d=0;return"metric"===this.Bh?1e3<=e&&(e/=1e3,o="km",d=1):(o="ft",5280<=(e/=.3048)&&(e/=5280,o="mi",d=1)),e.toFixed(d)+" "+this.va().translate("scale."+o)},p.rj=function(e,o,d){var v=this.map.Aa(e);return o=this.map.Aa(o),d=new G(d.x,d.y).qj(v,o),this.map.Pa(d.x,d.y)||ng(e)},p.U=function(e,o){var d=22*(this.map.f.type===ik.P2D?this.map.Ta():1),v=d/2;Bu.prototype.renderInternal.call(this,e,o),this.Bh=Pu.METRIC,this.B=new Uj(Qu.point,{anchor:{x:v,y:v},size:{w:d,h:d},hitArea:new Vi(Wi.CIRCLE,[v,v,v])}),this.m.cc(this.va().translate("distance.measurement"))},gv.prototype.renderInternal=gv.prototype.U,p=gv.prototype,p.Zj=function(e){return this.g[e]||this.B},p.We=function(){cv(this.b,!0)},p.tn=function(){cv(this.b)},p.un=function(e){"touch"!==e.currentPointer.type&&cv(this.b)},p.In=function(e){var v,o=e.currentPointer,d=e.target.Ca;d&&(d=d.getData())instanceof Vu&&(v=d),e=(e=e.originalEvent).metaKey||e.altKey,(d=v)&&(e&&d instanceof Zu?this.b.Pe(d):d instanceof Xu&&(e=d.previousSibling.wa(),v=d.nextSibling.wa(),this.b.insertBefore(this.rj(e,v,o={x:o.viewportX,y:o.viewportY}),d.nextSibling),this.i.jb()),this.We())},p.jk=function(e){var o=e.currentPointer;(e=e.target)!==this.map&&e.getProvider&&e.getProvider()===this.j||(this.b.he(this.map.Pa(o.viewportX,o.viewportY)),this.i.jb(),this.We())},p.vn=function(e){"down"===e.target.getState()?hv(this):jv(this)},p.He=function(e){this.Bh=e,this.f&&(dv(this.b),this.We())},gv.prototype.onUnitSystemChange=gv.prototype.He,gv.prototype.o=function(){jv(this),this.f&&(this.j.C(),this.s.C()),gv.l.o.call(this)},gv.prototype.Ea=function(e){e?this.m.getState()===pu.DOWN&&(this.map=e,hv(this)):(jv(this),this.f=!1),Bu.prototype.Ea.apply(this,arguments)},gv.prototype.setMap=gv.prototype.Ea,u(kv,Au),t("H.ui.base.OverlayPanel",kv),kv.prototype.O=function(e,o){return(e!==this.b||o)&&(this.b=e,e===lv.OPEN?this.Ga("H_open"):this.gb("H_open")),this},kv.prototype.setState=kv.prototype.O,kv.prototype.getState=function(){return this.b},kv.prototype.getState=kv.prototype.getState,kv.prototype.sk=function(e){var o=e.Fc;e=e.L();var d=this.L(),v=d.style;if(this.gb("H_top"),this.gb("H_middle"),this.gb("H_bottom"),this.gb("H_left"),this.gb("H_center"),this.gb("H_right"),v.bottom=v.top=v.left=v.right=v.margin="",/top/g.test(o)){this.Ga("H_top"),v.top="0",v.margin="0 12px";var w=-1}else/bottom/g.test(o)?(this.Ga("H_bottom"),v.bottom="0",v.margin="0 12px",w=1):(this.Ga("H_middle"),v.top="50%",v.margin="0 12px",v.marginTop=-Math.round(.5*d.offsetHeight)+"px",w=0);/left/g.test(o)?(this.Ga("H_left"),v.left=e.offsetWidth+"px",v.marginLeft="12px"):/right/g.test(o)?(this.Ga("H_right"),v.right=e.offsetWidth+"px",v.marginRight="12px"):(this.Ga("H_center"),v.left="50%",0>w?(v.top=e.offsetHeight+"px",v.marginTop="12px"):0<w&&(v.bottom=e.offsetHeight+"px",v.marginBottom="12px"),v.marginLeft=-Math.round(.5*d.offsetWidth)+"px",e.appendChild(d))},kv.prototype.pointToControl=kv.prototype.sk;var lv={OPEN:"open",CLOSED:"closed"};function mv(e){e=e||{},Au.call(this,"div","H_rdo"),this.g=new W("div","H_rdo_title"),this.b=new Au("div","H_rdo_buttons"),this.Fa(this.g),this.Fa(this.b),this.i=A(function(o){o.target.getState()===pu.DOWN?(this.Gk(o.target,!0),this.dispatchEvent(nv)):o.target.O(pu.DOWN,!0)},this),this.addEventListener("statechange",this.i),this.mi(e.title||""),e.onActiveButtonChange&&this.addEventListener(nv,e.onActiveButtonChange),e.buttonsOptions&&e.buttonsOptions.forEach(function(o){this.sg(new Ru(o))},this)}kv.State=lv,u(mv,Au),t("H.ui.base.RadioGroup",mv);var nv="activebuttonchange";function ov(e){e=e||{},Bu.call(this),this.g=new kv,this.b=this.b.bind(this),this.m=this.m.bind(this),this.s=this.s.bind(this),this.Mb(e.alignment||"bottom-right"),pv(this,e.baseLayers,e.layers)}function pv(e,o,d){var v=e.Tb();e.f&&e.f.forEach(function(w){var j=w.layer;w=j&&Tt(d,function(Z){return Z.layer===j}),j&&!w&&v.Oe(j)}),e.j=zc(o)?o:[],e.f=zc(d)?d:[],e.i&&(e.i.ka(),e.u.ka(),qv(e))}function qv(e){var o=e.va();e.j.forEach(function(d,v){this.i.sg(new Ru({label:rv(o,d.label),data:v,disabled:!d.layer}))},e),e.f.forEach(function(d,v){this.u.Fa(new Ru({label:rv(o,d.label),onStateChange:this.Y.bind(this,d.layer),data:v,disabled:!d.layer}))},e),e.N.jb(!(!e.f.length||!e.j.length)),x.setTimeout(function(){this.map&&(this.b(),this.B.ta(!(this.j&&this.j.length||this.f&&this.f.length)))}.bind(e))}function uv(e,o){var d,v,w={},j=o.ia(),Z=window.H.service&&window.H.service.omv.Provider;if(Z&&o.ia()instanceof Z&&j.na().qe){var _e=j.na(),Ki=function(){var _u=vv.ground.filter(function(iy){return!!_e.Yg("layers."+iy)}),fd=vv.water.filter(function(iy){return!!_e.Yg("layers."+iy)});_u.concat(fd).length&&(Xh(w,_e.qe(_u)),Xh(w,_e.qe(fd,!1,!0)),delete w.global,d=new qi(w,_e.Ab()),(v=j.j.bd(d)).mg=o,this.map.ug(v)),_e.removeEventListener(Wh.CHANGE,Ki)}.bind(e);_e.getState()!==Uh.READY?_e.addEventListener(Wh.CHANGE,Ki):Ki()}}function sv(e){return Tt(e.map.a.Ha(),function(o){return!!o.mg})}function tv(e){e=e.map.a.Ha();var o=window.H.service&&window.H.service.traffic.flow.Provider;return!!o&&e.some(function(d){return d.ia()instanceof o})}mv.prototype.U=function(e,o){Au.prototype.renderInternal.call(this,e,o),this.mi(this.f,!0)},mv.prototype.renderInternal=mv.prototype.U,mv.prototype.ka=function(){this.b.ka()},mv.prototype.mi=function(e,o){return(e!==this.f||o)&&(this.f=e,this.g.L()&&(this.g.L().innerHTML=this.f)),this},mv.prototype.setTitle=mv.prototype.mi,mv.prototype.Nm=function(){return this.f},mv.prototype.getTitle=mv.prototype.Nm,mv.prototype.sg=function(e){if(!(e instanceof Ru))throw Error("PushButton expected");return e.ga(this),this.b.Fa(e),this},mv.prototype.addButton=mv.prototype.sg,mv.prototype.Pn=function(e){return this.b.removeChild(e),e.ga(null),this},mv.prototype.removeButton=mv.prototype.Pn,mv.prototype.sf=function(){return this.b.Pg()},mv.prototype.getButtons=mv.prototype.sf,mv.prototype.Gk=function(e,o){for(var d=this.sf(),v=d.length;v--;)d[v].O(d[v]===e?pu.DOWN:pu.UP,o)},mv.prototype.setActiveButton=mv.prototype.Gk,mv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.ka(),Au.prototype.o.call(this)},u(ov,Bu),t("H.ui.MapSettingsControl",ov),ov.prototype.X=function(){var e=this.Tb();e&&(e.addEventListener("tap",this.m),(e=e.a).addEventListener("add",this.b),e.addEventListener("remove",this.b),e.addEventListener("set",this.b))},ov.prototype.I=function(){var e=this.Tb();e&&(e.removeEventListener("tap",this.m),(e=e.a).removeEventListener("add",this.b),e.removeEventListener("remove",this.b),e.removeEventListener("set",this.b))},ov.prototype.U=function(e,o){var d=this.va().translate("layers.choose");Bu.prototype.renderInternal.call(this,e,o),this.X(),this.B=new Ru({tooltip:d,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(v){v.target.getState()===pu.DOWN?(this.g.O(lv.OPEN),this.g.sk(this)):this.g.O(lv.CLOSED)},this)}),this.i=new mv({title:d,onActiveButtonChange:function(){t:{for(var v=this.i.sf(),w=v.length;w--;)if(v[w].getState()===pu.DOWN){v=v[w];break t}v=null}v=v.getData(),this.map.qd(this.j[v].layer),this.s()}.bind(this)}),this.u=new Au("div","H_grp"),this.N=new W("div","H_separator"),this.Fa(this.B),this.Fa(this.g),this.g.Fa(this.i),this.g.Fa(this.N),this.g.Fa(this.u),qv(this)},ov.prototype.renderInternal=ov.prototype.U,ov.prototype.b=function(){var e=this.map.g,o=this.map.a;this.j.forEach(function(d,v){this.i.sf()[v].O(pu[d.layer===e?"DOWN":"UP"],!0)},this),this.f.forEach(function(d,v){v=this.u.Pg()[v],d.layer?v.O(pu[-1!==o.indexOf(d.layer)?"DOWN":"UP"],!0):v.ta(!0)},this)},ov.prototype.Y=function(e,o){o.target.getState()===pu.DOWN?this.map.ug(e):this.map.Oe(e),this.s()},ov.prototype.s=function(){var e;(e=sv(this))&&(e.mg.ia().na().Fe(e.ia().na().Kc()),this.map.Oe(e),e.C(),delete e.mg),tv(this)&&uv(this,this.map.g)};var vv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function rv(e,o){return/^layers?/.test(o)&&e.dh(o)?e.translate(o):o}ov.prototype.m=function(){this.B.O(pu.UP)},ov.prototype.o=function(){ov.l.o.call(this),this.I()};var wv=[];t("H.ui.i18n.defaultLocales",wv);var xv={},yv=[];function zv(e,o){xv[e]=o,-1===wv.indexOf(e)&&wv.push(e),yv.length?Av(e,o):yv=Object.keys(o)}function Av(e,o){for(var w,d=yv,v=d.length;v--;)if(!o[w=d[v]])throw Error("'"+w+"' key missing in translation map for "+e)}function Bv(e){e=e||{},Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.wn,this)}),this.Fa(this.f),this.Mb(e.alignment||"right-bottom")}function Cv(e,o){if(!Ac(e))throw new TypeError("string locale code required");if(Ea(o))Av(e,o);else{if(-1===wv.indexOf(e))throw Error("Default locale '"+e+"' does nto exist.");o=xv[e]}this.a=o||{},this.b=e}function Dv(e){e=e||{},Bu.call(this),this.Ga("H_scalebar"),this.Mb(e.alignment||"right-bottom"),this.s=150,this.update=A(this.update,this),this.i=this.g=this.b=this.f=null}function Ev(e){C(e,Qe,Ev,1),W.call(this,"div","H_context_menu_item"),this.b=e,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Fv(e){C(e,Array,Fv,1),Au.call(this,"div","H_context_menu"),this.f=e,this.b=null}function Gv(e,o){o=o||{};var d=this;W.call(this,"div","H_ib H_ib_top"),this.B=A(function(v){d.Wb()||(d.close(),v.preventDefault())},this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(e),this.Se(o.content),o.onStateChange&&this.addEventListener("statechange",o.onStateChange),this.O(Hv.OPEN)}u(Bv,Bu),t("H.ui.ZoomRectangle",Bv),p=Bv.prototype,p.wn=function(e){var o=this.map,d=o.b.element;e.target.getState()===pu.DOWN?(o.addEventListener("dragstart",this.ak,!0,this),o.addEventListener("drag",this.bk,!0,this),o.addEventListener("dragend",this.$j,!0,this),(e=d.ownerDocument.createElement("div")).className="H_zoom_lasso",d.appendChild(e),this.b=e):(o.removeEventListener("dragstart",this.ak,!0,this),o.removeEventListener("drag",this.bk,!0,this),o.removeEventListener("dragend",this.$j,!0,this),d.removeChild(this.b))},p.ak=function(e){var o=this.b.style,d=e.currentPointer,v=d.viewportX;d=d.viewportY,e.target===this.map&&(e.stopPropagation(),o.width="0px",o.height="0px",o.top=d+"px",o.left=v+"px",o.display="block",this.i=d,this.g=v)},p.bk=function(e){var o=e.currentPointer,d=o.viewportX,v=o.viewportY;o=this.g;var w=this.i,j=this.b.style;e.target===this.map&&(e.stopPropagation(),e=d-o,d=v-w,j.left=o+(0>e?e:0)+"px",j.top=w+(0>d?d:0)+"px",j.width=Math.abs(e)+"px",j.height=Math.abs(d)+"px")},p.$j=function(e){var o=this.map,d=e.currentPointer;e.target===this.map&&(e.stopPropagation(),this.b.style.display="none",o.c.Nb({bounds:tg([o.Pa(this.g,this.i),o.Pa(d.viewportX,d.viewportY)])},!0))},p.U=function(e,o){Bu.prototype.renderInternal.call(this,e,o),this.f.cc(this.va().translate("zoom.rectangle"))},Bv.prototype.renderInternal=Bv.prototype.U,zv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),zv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),zv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),zv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),zv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),zv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),zv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),zv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),zv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),zv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),zv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),zv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),zv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Cv),Cv.prototype.nm=function(){return this.b},Cv.prototype.getLocale=Cv.prototype.nm,Cv.prototype.gm=function(){return Object.keys(this.a)},Cv.prototype.getKeys=Cv.prototype.gm,Cv.prototype.dh=function(e){return!(!this.a||!this.a[e])},Cv.prototype.hasKey=Cv.prototype.dh,Cv.prototype.translate=function(e){var o=this.a[e];if(!Ac(o))throw Error("Translation missing for key '"+e+"'.");return o},Cv.prototype.translate=Cv.prototype.translate,u(Dv,Bu),t("H.ui.ScaleBar",Dv),Dv.prototype.U=function(e,o){Bu.prototype.renderInternal.call(this,e,o),e.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',e.style.direction="ltr",this.f=e.firstChild,this.b=(o=this.f.childNodes)[0],this.g=o[1],this.i=e.lastChild,this.j=Pu.METRIC,this.m=A(function(d){this.Wb()||(this.dispatchEvent("toggleunitsystem"),d.preventDefault())},this),this.u=A(function(d){d.preventDefault()},this),lu(e,"start",this.u),lu(e,"end",this.m),this.cc(this.va().translate("scale.switchToImperial")),this.update()},Dv.prototype.renderInternal=Dv.prototype.U,Dv.prototype.Ea=function(e){this.map&&this.map.removeEventListener("mapviewchange",this.update),e&&e.addEventListener("mapviewchange",this.update),Bu.prototype.Ea.apply(this,arguments)},Dv.prototype.setMap=Dv.prototype.Ea,Dv.prototype.capture=function(e,o,d){var v=this.L(),w=v.ownerDocument,j=w.createElement("canvas"),Z=j.getContext("2d"),_e=w.createElementNS("http://www.w3.org/2000/svg","svg"),Ki=w.createElementNS("http://www.w3.org/2000/svg","foreignObject"),_u=lf(v,w,!1);w=parseFloat(v.offsetWidth)+1;var fd=parseFloat(v.offsetHeight),iy=w*e;e*=fd,j.width=iy,j.height=e,_e.setAttribute("xmlns","http://www.w3.org/2000/svg"),_e.setAttribute("width",iy),_e.setAttribute("height",e),_e.setAttribute("viewBox","0 0 "+w+" "+fd),Ki.setAttribute("width","100%"),Ki.setAttribute("height","100%"),_e.appendChild(Ki),_u.setAttribute("width","100%"),_u.setAttribute("height","100%"),_u.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var oy=window.getComputedStyle(v);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(dy){_u.style.setProperty(dy,oy.getPropertyValue(dy))}),Ki.appendChild(_u),new tf("image",v=bf(_e.outerHTML)).then(function(dy){Z.drawImage(dy,0,0),o(j)},d)},Dv.prototype.capture=Dv.prototype.capture,Dv.prototype.He=function(e){this.j=e,this.cc("imperial"===e?this.va().translate("scale.switchToMetric"):this.va().translate("scale.switchToImperial")),this.update()},Dv.prototype.onUnitSystemChange=Dv.prototype.He,Dv.prototype.update=function(){var e;if(this.L()){this.f=this.f,this.b=this.b;var o=this.s,d=0,v=this.map;if(v){var w=Math.round(.5*v.b.width),j=Math.round(.5*v.b.height);(e=v.Pa(w,j))&&(v=v.Pa(w+1,j))&&(d=100*e.Sa(v))}d&&(this.j===Pu.IMPERIAL?1609.344>d?(v=d/.3048006,e=this.va().translate("scale.ft")):(v=d/1609.344,e=this.va().translate("scale.mi")):1e3>d?(v=d,e=this.va().translate("scale.m")):(v=d/1e3,e=this.va().translate("scale.km")),(v=(d=Math.pow(10,Math.floor(Math.log(v)/Math.LN10)))/v*100)<o/5?(d*=5,v*=5):v<o/2?(d*=2,v*=2):v>o&&(d/=2,v/=2),v=Math.round(v),this.f.setAttribute("width",v),this.i.textContent=d+" "+e,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=v-2)}},u(Ev,W),t("H.ui.context.Item",Ev),Ev.prototype.f=function(e){var o=this.b,d=o.callback;d&&!o.isDisabled()&&(this.dispatchEvent("click"),d(e))},Ev.prototype.U=function(){var e=this,o=this.L();De(o,"click",this.f),o.addEventListener("keyup",function(d){13==d.keyCode&&e.f(d)}),this.a()},Ev.prototype.renderInternal=Ev.prototype.U,Ev.prototype.a=function(){var e=this.L(),o=this.b;o.callback?(this.Ga("clickable"),e.setAttribute("tabindex","0")):(this.gb("clickable"),e.removeAttribute("tabindex")),o.isDisabled()?this.Ga("disabled"):this.gb("disabled"),o=o.getLabel(),cu.textContent=o,e.innerHTML=cu.innerHTML.split("\n").join("<br/>")},Ev.prototype.o=function(){W.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Fv,Au),t("H.ui.context.Menu",Fv),Fv.prototype.U=function(){Au.prototype.U.apply(this,arguments),this.f.forEach(function(e){e===Re?e=new W("div","H_context_menu_item_separator"):(e=new Ev(e)).addEventListener("click",this.g.bind(this)),this.Fa(e)},this),De(this.L(),["mousedown","touchstart","pointerdown","wheel"],function(e){e.stopPropagation()})},Fv.prototype.renderInternal=Fv.prototype.U,Fv.prototype.setPosition=function(e,o){if(this.b){var d=this.L(),v=d.offsetWidth,w=d.offsetHeight,j=this.b,Z=j.b.width;e+v>Z&&e>Z/2&&(e-=v),o+w>(j=j.b.height)&&o>j/2&&(o-=w),Wt(d,e,o)}},Fv.prototype.setPosition=Fv.prototype.setPosition,Fv.prototype.g=function(){this.b&&this.b.dispatchEvent(new sd("contextmenuclose",this.b))},Fv.prototype.Ea=function(e){this.b=e},Fv.prototype.setMap=Fv.prototype.Ea,u(Gv,W),t("H.ui.InfoBubble",Gv),Gv.prototype.a=null,Gv.prototype.wa=function(){return this.u},Gv.prototype.setPosition=function(e){this.u=ng(e),this.update()},Gv.prototype.setPosition=Gv.prototype.setPosition,Gv.prototype.Ea=function(e){this.a=e},Gv.prototype.U=function(e,o){this.m=iu(o,"div","H_ib_body"),this.tailEl_=iu(o,"div","H_ib_tail"),this.f=iu(o,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=iu(o,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.f),this.m.appendChild(this.b),lu(this.f,"start",this.B),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),e.appendChild(this.m),e.appendChild(this.tailEl_),this.Se(this.g)},Gv.prototype.renderInternal=Gv.prototype.U,Gv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Gv.prototype.update=function(){var d,e=this.L(),o=this.a,v="none";if(this.s=0,o&&e&&this.getState()===Hv.OPEN){if(d=o.Aa(this.u)){var w=d.x;d=d.y,(w>=-(o=o.b.width)||w<=2*o||d>=-o||d<=2*o)&&(v="",Xt?(e.style.left=w-o+"px",e.style.top=d+"px"):Wt(e,w,d))}e.style.display=v,""===v&&(e.style.visibility="visible")}};var Hv={OPEN:"open",CLOSED:"closed"};function Iv(e){this.c=e,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(e=this.c.Tb()).addEventListener("mapviewchange",this.s,!1,this),(e=e.a).addEventListener("add",this.j,!1,this),e.addEventListener("remove",this.m,!1,this)}function Jv(e,o){e.b&&o&&e.b===o.ia()||(e.b&&e.b.removeEventListener("tap",e.f),o?(e.b=o.ia(),e.b.addEventListener("tap",e.f),e.i=e.b.min,e.g=e.b.max):(e.b=null,e.i=0,e.g=22))}function Kv(e){return window.H.service&&e.ia()instanceof window.H.service.traffic.incidents.Provider}function Lv(e,o){var d=e.L(),v=this;F.call(this),this.c=e,this.i=d.ownerDocument,this.f={},this.b=[],new Iv(this),this.P=iu(this.i,"div","H_ui"),this.setDirection(),this.S=A(function(w){this.s.put(w.target,w.target.Fc)},this),this.addEventListener("alignmentchange",this.S),this.I=A(function(){this.al()},this),this.addEventListener("toggleunitsystem",this.I),this.P.addEventListener("contextmenu",this.v,!1),this.P.addEventListener("MSHoldVisual",this.v,!1),this.c.addEventListener("contextmenu",this.B,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.mb(this.C.bind(this)),this.a=null,this.m=-1,this.s=new Eu(this.P,this.i),this.g=Pu.METRIC,Mv(this,"en-US"),o&&Nv(this,o),d.appendChild(this.P),x.setTimeout(function(){v.s.update()},1)}function Mv(e,o){if(Ac(o))var d=o;else{if(!(o instanceof Cv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");d=o.b;var v=o}if(!d)throw Error("No locale was defined.");if(v)e.j=v;else{if(!(0<=wv.indexOf(d)))throw Error("Locale ["+d+"] is not supported.");e.j=new Cv(d)}}function Nv(e,o){var d,v;o.unitSystem&&e.fg(o.unitSystem),(v=o.locale)&&Mv(e,v),(d=o.zoom)&&e.vd("zoom",new Cu(Ea(d)?d:null)),(d=o.zoomrectangle)&&e.vd("zoomrectangle",new Bv(Ea(d)?d:null)),(d=o.mapsettings)&&e.vd("mapsettings",new ov(Ea(d)?d:null)),(d=o.scalebar)&&e.vd("scalebar",new Dv(Ea(d)?d:null)),(d=o.distancemeasurement)&&e.vd("distancemeasurement",new gv(Ea(d)?d:null))}function Pv(e,o,d,v){for(var w=e,j=0;w&&j<o.length;j++)w=w[o[j]];w&&w!==e&&v.push({label:d,layer:w})}function Ov(e,o,d){var v=[],w=[],j=o.raster;if(e===ik.P2D&&j){if(Pv(o,["raster","normal","map"],"layers.normal",v),Pv(o,["raster","satellite","map"],"layers.satellite",v),Pv(o,["raster","terrain","map"],"layers.terrain",v),d)for(var Z in j)if(j[Z]&&j[Z].map===d){var _e=Z;break}Pv(o,["raster","normal","trafficincidents"],"layer.incidents",w),Pv(o,["raster",_e,"transit"],"layer.transit",w)}else Pv(o,["vector","normal","map"],"layers.normal",v),Pv(o,["raster","satellite","map"],"layers.satellite",v),Pv(o,["vector","normal","traffic"],"layer.traffic",w),Pv(o,["vector","normal","trafficincidents"],"layer.incidents",w);return{alignment:"bottom-right",baseLayers:v,layers:w}}function Qv(e,o){if(o=o||{},!(e&&e instanceof ql))throw Error("Base layer is mandatory for overview UI element");Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Fa(this.f),this.b=new Rv(e,o.zoomDelta,o.scaleX,o.scaleY),this.Mb(o.alignment||"right-bottom"),this.Fa(this.b)}function Rv(e,o,d,v){this.j=e,"number"==typeof o&&(this.cl=o),"number"==typeof d&&(this.nk=d),"number"==typeof v&&(this.pk=v),Au.call(this,"div","H_overview")}function Tv(e){!e.ud&&Sv(e),e.gb("H_overview_active"),e.b.removeEventListener("mapviewchange",e.pi,!1,e)}function Sv(e,o){var d=e.b.b.element,v=e.L().style,w=d.offsetWidth/e.nk/10;d=d.offsetHeight/e.pk/10;var j=e.g.style;o?(v.width=w+"em",v.height=d+"em",j.width=w+"em",j.height=d+"em"):v.width=v.height="0em",e.f.b.resize()}function Uv(e,o){if(!e)throw new D(Uv,0,e);Uv.l.constructor.call(this,e),this.b={},this.c=!(!o||!o.ic),this.f=Vv++}Gv.State=Hv,Gv.prototype.j=Hv.OPEN,Gv.prototype.getState=function(){return this.j},Gv.prototype.getState=Gv.prototype.getState,Gv.prototype.O=function(e){e!==this.j&&(this.j=e,this.dispatchEvent("statechange")),(e=this.L())&&(this.j===Hv.OPEN?(e.style.display="block",e.style.visibility="hidden",this.i()):e.style.display="none")},Gv.prototype.setState=Gv.prototype.O,Gv.prototype.close=function(){this.O(Hv.CLOSED)},Gv.prototype.close=Gv.prototype.close,Gv.prototype.open=function(){this.O(Hv.OPEN)},Gv.prototype.open=Gv.prototype.open,Gv.prototype.Ol=function(){return this.b||null},Gv.prototype.getContentElement=Gv.prototype.Ol,Gv.prototype.Se=function(e){if(e){if("string"!=typeof e&&("number"!=typeof e.nodeType||"string"!=typeof e.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=e}else this.g="";this.L()&&(this.g?(this.b.innerHTML="","string"==typeof this.g?this.b.innerHTML=e:"number"==typeof e.nodeType&&"string"==typeof e.nodeName&&this.b.appendChild(e)):this.b.innerHTML="&nbsp;",this.i())},Gv.prototype.setContent=Gv.prototype.Se,Gv.prototype.o=function(){this.close(),this.Se(""),this.f&&mu(this.f,"end",this.B),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),W.prototype.o.call(this)},Iv.prototype.s=function(e){var o=e.newValue.zoom;this.a&&e.modifiers&e.ZOOM&&(o<this.i||o>this.g)&&this.a.close()},Iv.prototype.j=function(e){Kv(e=e.added)&&Jv(this,e)},Iv.prototype.m=function(e){Kv(e.removed)&&(this.a&&this.a.close(),Jv(this,null))},Iv.prototype.f=function(e){var o;if(e.target&&(o=e.target.getData())&&0===e.currentPointer.button){var d=e.target.ba();this.a||(this.a=new Gv(d),this.a.Ga("H_tib"),this.c.Ji(this.a)),this.a.setPosition(d),d=o.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),d=this.c.va().dh("traffic."+d)?this.c.va().translate("traffic."+d):o.TRAFFIC_ITEM_DESCRIPTION[o.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.Se('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",d).replace("{{desc}}",o.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.va().translate("traffic.from")).replace("{{traffic.until}}",this.c.va().translate("traffic.until")).replace("{{from}}",o.START_TIME).replace("{{until}}",o.END_TIME)),this.a.open()}e.stopPropagation()},u(Lv,F),t("H.ui.UI",Lv),Lv.prototype.v=function(e){for(var o=e.target;o&&!/\bH_ib_content\b/.test(o.className);)o=o.parentNode;o||e.preventDefault()},Lv.prototype.L=function(){return this.P},Lv.prototype.getElement=Lv.prototype.L,Lv.prototype.Tb=function(){return this.c},Lv.prototype.getMap=Lv.prototype.Tb,Lv.prototype.Qm=function(){return this.g},Lv.prototype.getUnitSystem=Lv.prototype.Qm,Lv.prototype.fg=function(e){var d,o=this.f;if(e!==this.g)for(d in this.g=e,o)o[d]instanceof Bu&&o[d].onUnitSystemChange(this.g)},Lv.prototype.setUnitSystem=Lv.prototype.fg,Lv.prototype.setDirection=function(e){this.P.setAttribute("dir",e||getComputedStyle(this.Tb().L()).direction)},Lv.prototype.setDirection=Lv.prototype.setDirection,Lv.prototype.va=function(){return this.j},Lv.prototype.al=function(){this.fg(this.g===Pu.METRIC?Pu.IMPERIAL:Pu.METRIC)},Lv.prototype.toggleUnitSystem=Lv.prototype.al,Lv.prototype.Ji=function(e){var o=this.b.length,d=this.P;if(0>this.b.indexOf(e)){e.ga(this),e.Ea(this.c);var v=e.T(this.i);o=0<o?this.b[o-1].L().nextSibling:this.P.firstChild,d.insertBefore(v,o),this.b.push(e)}},Lv.prototype.addBubble=Lv.prototype.Ji,Lv.prototype.B=function(e){var o=e.items;this.a&&this.u(),clearTimeout(this.m),this.m=x.setTimeout(function(){o.length&&(this.a=new Fv(o),this.P.insertBefore(this.a.T(this.i),this.P.firstChild),this.a.ga(this),this.a.Ea(this.c),this.a.setPosition(e.viewportX,e.viewportY))}.bind(this),0)},Lv.prototype.u=function(){this.a&&(this.a.C(),this.a=null)},Lv.prototype.On=function(e){var o=this.b.indexOf(e);-1<o&&(e.ga(null),e.Ea(null),this.b.splice(o,1),this.P.removeChild(e.L()))},Lv.prototype.removeBubble=Lv.prototype.On,Lv.prototype.Kl=function(){return this.b},Lv.prototype.getBubbles=Lv.prototype.Kl,Lv.prototype.vd=function(e,o){if(this.we(e))throw Error("A control with name ["+e+"] is already registered.");o.ga(this),o.Ea(this.c),o.ua=this.j,o.T(this.i),o.onUnitSystemChange(this.g),this.f[e]=o},Lv.prototype.addControl=Lv.prototype.vd,Lv.prototype.Qn=function(e){var o=this.we(e);if(!o)throw Error("Control ["+e+"] not found in this UI's controls.");return o.I(),o.ga(null),o.Ea(null),nu(o),delete this.f[e],o},Lv.prototype.removeControl=Lv.prototype.Qn,Lv.prototype.we=function(e){return this.f[e]},Lv.prototype.getControl=Lv.prototype.we,Lv.prototype.o=function(){for(var e in this.f)Ut.hasOwnProperty.call(this.f,e)&&this.f[e].C();this.b.forEach(function(o){o.C()}),(e=this.P.parentNode)&&e.removeChild(this.P),F.prototype.o.call(this),delete this.P},Lv.prototype.capture=function(e,o,d,v){var w=this.we("scalebar"),j=e.getContext("2d"),Z=e.width,_e=e.height,Ki=this.c.m,_u=5+(Ki?Ki.L().childNodes[1].offsetHeight:0);w&&w.oc()?w.capture(o,function(fd){j.drawImage(fd,Z-fd.width-5*o,_e-fd.height-_u*o),d(e)},v):d(e)},Lv.prototype.capture=Lv.prototype.capture,Lv.createDefault=function(e,o,d){var v=e.f.type;if(d=new Lv(e,{unitSystem:Pu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Ov(v,o,e.g),scalebar:{alignment:"bottom-right"},locale:d||"en-US"}),v===ik.P2D){var w=d.we("mapsettings"),j=function(){if(w.Tb()){var Z=Ov(v,o,e.g);pv(w,Z.baseLayers,Z.layers)}};e.addEventListener(e.A.bf,j),d.mb(function(){e.removeEventListener(e.A.bf,j)}),w.mb(function(){e.removeEventListener(e.A.bf,j)})}return d},u(Qv,Bu),t("H.ui.Overview",Qv),Qv.prototype.qd=function(e){return this.b.qd(e),this},Qv.prototype.setBaseLayer=Qv.prototype.qd,Qv.prototype.g=function(e){e.target.getState()===pu.DOWN?(Sv(e=this.b,!0),e.pi(),e.Ga("H_overview_active"),e.b.addEventListener("mapviewchange",e.pi,!1,e)):Tv(this.b)},Qv.prototype.U=function(e,o){Bu.prototype.renderInternal.call(this,e,o),this.f.L().style.float=this.Fc.match("right")?"right":"left",this.b.Ea(this.map),this.f.cc(this.va().translate("minimap"))},Qv.prototype.renderInternal=Qv.prototype.U,Qv.prototype.o=function(){this.b.C(),W.prototype.o.call(this)},u(Rv,Bu),Rv.prototype.qd=function(e){this.f.qd(e)},Rv.prototype.U=function(e,o){ju(e,o=iu(o,"div","H_overview_map")),this.g=o},Rv.prototype.renderInternal=Rv.prototype.U,Rv.prototype.renderInternal=Rv.prototype.U,p=Rv.prototype,p.cl=3,p.nk=5,p.pk=5,p.Ea=function(e){this.b=e,this.f=new T(this.g,this.j,{pixelRatio:this.b.Ta(),engineType:this.b.f.type}),this.f.m.L().style.display="none",this.m=this.f.c,this.i=this.b.c},p.pi=function(e){e&&e.modifiers&e.SIZE&&Sv(this,!0),(e=this.i.eb()).zoom-=this.cl,this.m.Nb(e)},p.o=function(){Rv.l.o.call(this),Tv(this),this.f.C(),this.f=this.m=this.i=this.b=this.j=this.g=null},t("H.ui.buildInfo",function(){return Hf("H-ui","1.35.2","006bf3428",{region:"row"})}),u(Uv,wm);var Vv=0;function Wv(e,o){o=o||{},C(e,rl,Wv,0),Wv.l.constructor.call(this,e),this.ic=!!o.ic,this.c=o.ab||0,this.a=[],this.b={}}Uv.prototype.T=function(e,o,d,v,w,j){var Z=yd(v),_e=this.$a,Ki=Z+(d.exp-_e.pixelProjection.exp),_u=_e.min,fd=_e.max;v=_e.tileSize;var iy=_e.ia().f,oy=this.kb,dy=oy.Nc(),_y=oy.qb().w,Ay=d.w,ky=d.x,Xy=d.y,zy={};if(Z<_u||Z>fd)return uk.DONE;for(e=(w=_e.requestTiles(e,Ki,w,j,this.f)).total,j=(w=w.tiles).length,this.g=d,this.j=o,this.a=Ki,dy!==iy&&oy.ac(iy),d=v=v*Ay/(Ed(2,Ki)*v),this.c||(v%1&&(ky/=Ay=d/(v=zd(v)),Xy/=Ay,Ay=Ed(2,Ki)*v),ky=zd(ky),Xy=zd(Xy)),this.i=d,Ki=-v,Z=_y+v,_e=0;_e<j;_e++){if((_u=(_y=w[_e]).data)&&_u.tagName){for(oy.Hc(_u,d=o.x-(ky-_y.x*v),iy=o.y-(Xy-_y.y*v),v,v),dy=d;(dy-=Ay)>Ki;)oy.Hc(_u,dy,iy,v,v);for(dy=d;(dy+=Ay)<Z;)oy.Hc(_u,dy,iy,v,v)}zy[this.a+"_"+_y.x+"_"+_y.y]=_y}return this.b=zy,j===e?uk.DONE:uk.PENDING},Uv.prototype.Ba=function(e,o,d){var _e,v=this.i,w=v/this.$a.tileSize,j=this.g,Z=this.j;if(uc(this.a)&&j){e=j.x+(e-Z.x),o=j.y+(o-Z.y);var Ki=zd(j.w/v),_u=j=zd(e/v);Z=zd(o/v),Bd(_u)>=Ki&&(_u%=Ki),0>_u&&(_u=Ki+_u),(Ki=this.b[this.a+"_"+_u+"_"+Z])&&Ki.Ba&&(_e=Ki.Ba((e-v*j)/w,(o-v*Z)/w,d))}return _e||hf},Uv.prototype.Nd=function(){return"2d"},u(Wv,wm),Wv.prototype.T=function(e,o,d,v,w,j){var Z,Ki,_e=this.$a;v-=this.c,this.a.length=0;var _u=this.b;if(this.b=Z={},v>=_e.min&&v<=_e.max){var fd=_e.od(e,v,w,j),iy=fd.overlays;if(e=iy.length)for(iy.sort(ph),v=this.kb,w=this.ic,j=0;j<e;j++){var oy=(_e=iy[j]).F(),dy=d.cb(oy.Fb()),_y=d.cb(oy.Bb());oy=d.w,dy.x>=_y.x&&(dy.x-=oy),dy.x+=oy*=-((dy.x+_y.x)/oy>>1),dy.add(o),_y.x+=oy,_y.add(o),w||(dy.round(),_y.round()),(oy=_u[Ki=_e.Za()])?delete _u[Ki]:oy={Ln:_e},Z[Ki]=oy;var Ay=dy.x,ky=_y.x,Xy=ky-Ay,zy=(_y=_y.y)-(dy=dy.y);v.ac(_e.Nc()),v.Hc(_e.Jc(),Ay,dy,Xy,zy),oy.Hg?oy.Hg.set(Ay,dy,ky,_y):oy.Hg=new wk(Ay,dy,ky,_y),this.a.push(oy)}}return!fd||fd.requested&&fd.requested===fd.total||!fd.requested&&iy.length===fd.total?uk.DONE:uk.PENDING},Wv.prototype.Ba=function(e,o,d){for(var j,_e,v=this.a,w=v.length;w--;)if((j=v[w]).Hg.kf(e,o))if(j=j.Ln,_e)_e.push(j);else if(_e=[j],d)break;return _e||hf},Wv.prototype.Nd=function(){return"2d"},Wv.prototype.o=function(){delete this.a,Wv.l.o.call(this)},Wv.prototype.disposeInternal=Wv.prototype.o;var Xv={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Yv(e,o){this.a=[],Yv.l.constructor.apply(this,arguments)}function Y(e,o,d,v){Y.l.constructor.call(this,e,o,d,v),this.I=new G(0,0),(d=v.renderBaseBackground)&&(this.En=d.lower,this.Dn=d.higher),this.qn=!!v.enableSubpixelRendering,this.Yc=Zv,this.pf=0,this.Ad=this.se=!1,this.g=new im,this.a=v=new qm,this.$c=A(this.$c,this),v.addEventListener(v.A.ng,this.$c),this.Aa=A(this.Aa,this),this.oa=e=(v=e.element).ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,v.insertBefore(e,v.firstChild),this.Ej=new Nm(this.oa,this.ma),this.s=[],$v(this),this.uh=A(Y.prototype.uh,this),this.Y=aw,this.Yf(),this.zoom=bw(this,this.v.ib()+this.ab),this.wb(),cw(this,o.eb().position,this.zoom),this.Va(),this.ca()}t("H.map.render.p2d.capabilities",Xv),u(Yv,Am),p=Yv.prototype,p.cj=function(){return this.$a.wc.apply(this.$a,arguments)},p.T=function(e,o,d,v,w,j,Z){return this.a=[],Yv.l.T.apply(this,arguments)},p.Vj=1,p.Ak=function(e,o,d,v,w,j){var Z=this.Vj=v.Ta();w*=Z,j*=Z;var _e=d.qb();o=_e.w*Z,_e=_e.h*Z;var Ki=d.ed();this.ic?(w-=Ki.x*Z,j-=Ki.y*Z):(w=yd(w-Ki.x*Z),j=yd(j-Ki.y*Z)),v.Hc(d.Jc(),w,j,o,_e),e.detail?e.detail.set(w,j,w+o,j+_e):e.detail=new wk(w,j,w+o,j+_e),this.a.push(e)},p.Ba=function(e,o,d){for(var j,Z,_e,v=this.a,w=v.length,Ki=hf,_u=this.Vj;w--&&!((Z=(j=v[w]).detail).kf(e,o)&&(j=j.dk,(!(_e=j.pb().c)||_e.Cf((e-Z.left)/_u,(o-Z.top)/_u,0))&&0>Ki.indexOf(j)&&(Ki===hf&&(Ki=[]),Ki.push(j),d))););return Ki},p.Nd=function(){return"2d"},p.o=function(){this.a=[],Yv.l.o.call(this)},Yv.prototype.disposeInternal=Yv.prototype.o,u(Y,Dl),t("H.map.render.p2d.RenderEngine",Y),Y.prototype.type=Nl.P2D;var aw=2;function dw(e,o,d){return Bd(o=d-o)<e.b.w/2?o:o-e.b.w*d/Bd(d)}function $v(e){var o=e.c.Ha(),d=0,v=o.length;for([e.N={},e.u={},e.ra={},e.X={}].forEach(function(w){w.Gc=[],w.fa=[]}),e.Pb=e.c.Ha();d<v;d++)e.Ge(d,o[d]);e.wb()}function mw(e){var o=[];return(o=(o=(o=(o=o.concat(e.u.fa)).concat(e.N.fa)).concat(e.ra.fa)).concat(e.X.fa)).filter(uc)}function gw(e,o){var d=Jl(e,Jl(e,o.zoom)+e.ab);return(e=Kl(e,o)).zoom=d,e}function cw(e,o,d){var v=e.b;v.Ja(d),e.m=v.projection.Ic(o),v.x=v.w*e.m.x,v.y=v.h*e.m.y}function lw(e){return{w:(e=e.ua[2]).right-e.left,h:e.bottom-e.top}}function nw(e){e.i&&e.i.qa()||Jk()-e.Rj<e.Yc&&!e.wd?e.Mn=Hk(e.uh):(e.wd&&(e.Yd(),ow(e)),e.Y=aw)}function ow(e,o){e.dispatchEvent({type:e.A.Gi,target:o||e})}function sw(e,o,d){iw(e,o*e.ma,d*e.ma),e.I.set(0,0),e.Va(),e.da()}function iw(e,o,d){var v=e.b;e=e.m,v.x=Xd(v.x+o,v.w),v.y=xd(0,wd(v.w,v.y+d)),e.x=v.x/v.w,e.y=v.y/v.h}function jw(e,o,d,v){var w=e.ma,j=e.f.center;d===+d&&v===+v?(e.I.set(d=(d-j.x)*w,v=(v-j.y)*w),iw(e,d,v),e.b.Ja(o),iw(e,-d,-v)):(e.I.set(0,0),e.b.Ja(o)),e.zoom=o,e.Va(),e.da()}function ew(e,o,d,v){var w=e.getCapabilities().lookAt.zoom.max,j=o.Ya(),Z=v||j;if(o.Ef()||d&&v)d=d===B?w:d;else{var _e=new lj(e.b.projection);_e.Ja(w);var Ki=_e.cb(o.Fb()).round(),_u=_e.cb(o.Bb()).round();w=_e.w,o.tb()&&(Ki.x-=w),v?(j=_e.cb(Z),o=2*xd(j.x-Ki.x,_u.x-j.x),Ki=2*xd(j.y-Ki.y,_u.y-j.y)):(o=_u.x-Ki.x,Ki=_u.y-Ki.y,Z=j),d===B&&(d=(j=e.ua[4]).right-j.left,j=j.bottom-j.top,d=Jl(e,d=-8+wd(Cd(d/o*w)/Md,Cd(j/Ki*w)/Md)-e.ab))}return{zoom:zd(d),position:Z}}function fw(e){kw(e,!0),e.a.qa()&&e.nb(!0),e.g.qa()&&e.ob(!0),kw(e,!0)}function tw(e,o){if(o){var d={};d.Ke=o.power,d.pe=o.ease,d.duration=o.duration,e.j=d}}function bw(e,o){return Jl(e,Jl(e,o-e.ab)+e.ab)}function vw(e,o){var d=e.m,v=e.b.projection.Ic(o.position),w=e.b.Vd(v),j=w.y;w=w.x;var Z=o.zoom;o=(d=e.b.Vd(d)).y;var _e=d.x;d=e.zoom;var Ki=e.a.rb(),_u=e.a.a,fd=e.a.b,iy=0;if(w=dw(e,_e,w),o=Dd((w-=_e)*w+(j-=o)*j+(d=Z-d)*d),0!==Ki&&0!==o){var oy=w/o,dy=j/o,_y=d/o,Ay=Ki*Ki/(2*o);hw(e,function(ky,Xy){var zy;1!==ky?((zy=_y*(Xy=(ky=Ki*Xy-Ay*Xy*Xy/2)-iy))&&(zy=bw(e,e.zoom+zy),jw(e,bw(e,zy),_u,fd)),sw(e,yd(oy*Xy),yd(dy*Xy)),iy=ky):(e.m=v,jw(e,bw(e,Z),_u,fd),e.Va(),e.da())},2*o/Ki)}}function uw(e,o,d){d=d||0,o.c&&jw(e,bw(e,e.zoom+o.c*d),e.a.atX,e.a.atY),sw(e,o.a*d,o.b*d)}function hw(e,o,d,v,w){e.i&&e.i.qa()&&e.i.stop(!0),e.i=new zm(e,o,d,v,w),e.i.start()}function kw(e,o){e.i&&e.i.qa()&&e.i.stop(o)}Y.prototype.getState=function(){return this.Y},Y.prototype.getState=Y.prototype.getState,Y.prototype.yg=function(e){var o=this,d=e.b,v=e.newValue,w=e.modifiers;e=v.position;var Z,j=v.bounds,_e=this.zoom,Ki=this.m,_u=0;if(w&cj.POSITION&&(Z=o.b.cb(e)),w&cj.BOUNDS)v=ew(this,j.F(),w&cj.ZOOM?v.zoom:B,w&cj.POSITION?e:B),this.v.Nb(v,d);else{w&cj.POSITION||(Z=o.b.cb(v.position));var fd=Z.x,iy=Z.y;fw(this),this.I.set(0,0);var oy=(v=gw(this,v)).zoom,dy=v.position;if(d){var _y=oy-_e,Ay={x:Ki.x,y:Ki.y};d=this.b.Vd(Ay).x;var ky=this.b.projection.Ic(e);(ky.x!==this.m.x||ky.y!==this.m.y||oy!==this.zoom)&&(fd=dw(this,d,fd),hw(this,function(Xy){var zy=Xy-_u;if(oy!==_e){Z=o.b.Vd(ky);var h0=o.b.Vd(Ay);fd=dw(o,h0.x,Z.x),iy=Z.y-h0.y}_u=Xy,iw(o,fd*zy,iy*zy),jw(o,_e+=_y*zy),o.Va(),o.da()},this.ya,function(){cw(o,dy,oy),jw(o,oy),o.Va(dy),o.da()},this.Xa))}else kw(this),cw(this,dy,oy),jw(this,oy),this.Va(dy);this.da()}},Y.prototype.ya=300,Y.prototype.ag=function(e){var o=Dc(e);if(!o||o&&0>e)throw new D(this.ag,1,"positive number required");this.ya=e},Y.prototype.setAnimationDuration=Y.prototype.ag,Y.prototype.Mg=function(){return this.ya},Y.prototype.getAnimationDuration=Y.prototype.Mg,Y.prototype.Xa=Zl,Y.prototype.bg=function(e){if(!Da(e))throw new D(this.bg,1,"function required");this.Xa=e},Y.prototype.setAnimationEase=Y.prototype.bg,Y.prototype.Ng=function(){return this.Xa},Y.prototype.getAnimationEase=Y.prototype.Ng,Y.prototype.Yf=function(){this.Xa=Zl,this.ya=300},Y.prototype.resetAnimationDefaults=Y.prototype.Yf,Y.prototype.Ih=function(e,o,d){var v;this.Rj=Jk(),(v=this.N.fa.splice(e,1)[0])&&v.C&&v.C(),(v=this.u.fa.splice(e,1)[0])&&v.C&&v.C(),(v=this.ra.fa.splice(e,1)[0])&&v.C&&v.C(),(v=this.X.fa.splice(e,1)[0])&&v.C&&v.C(),this.Pb=this.c.Ha(),0===e&&(Il(this,o,!1),this.wb()),this.s=Om(this.Ej,lw(this),mw(this)),this.Yd(),d||this.da()},Y.prototype.Jh=function(){this.wb(),this.da()},Y.prototype.eh=function(e,o,d){var v,w,j,Z;if(o){var _e={ic:this.qn,ab:this.ab};o.T?C(o,ym)?w=new xm(o):C(o,Km)&&(Z=new xm(o)):(o.requestOverlays&&(v=new Wv(o,_e)),o.requestTiles&&(w=new Uv(o,_e)),o.requestMarkers&&(j=new Yv(o,_e)),o.requestDomMarkers&&(Z=new Dm(o,_e)))}this.N.fa.splice(e,d=d||0,v),this.u.fa.splice(e,d,w),this.ra.fa.splice(e,d,j),this.X.fa.splice(e,d,Z),this.Pb=this.c.Ha(),this.s=Om(this.Ej,lw(this),mw(this))},Y.prototype.Pa=function(e,o){var d=this.f.center,v=this.ma;return this.b.Ka((e-d.x)*v,(o-d.y)*v)},Y.prototype.screenToGeo=Y.prototype.Pa,Y.prototype.$f=function(e,o){return e=this.Pa(e,o),(o=this.v.eb()).position=e,o},Y.prototype.Aa=function(e){var o=this.ma,d=this.f.center,v=d.x*o;d=d.y*o,e=this.b.cb(e);var w=this.b.w;return new G(yd((e.x-yd(e.x/w)*w+v)/o),yd((e.y+d)/o))},Y.prototype.geoToScreen=Y.prototype.Aa,Y.prototype.F=function(e,o){var d=this.ua[e||4],v=d.left-o,w=(e=this.b).Ka(v,d.top-o),j=d.right+o;return o=e.Ka(j,d.bottom+o),j-v>=e.w&&(w.lng=-(o.lng=180)),sg(w,o)},Y.prototype.Ba=function(e,o,d,v){var Z,w=[],j=this.ma;for(e*=j,o*=j,Z=(j=[this.N,this.u,this.ra,this.X]).length;Z--&&(!d||!w.length);){for(var _e=w,Ki=j[Z].fa,_u=e,fd=o,iy=d,oy=Ki.length;oy--&&!((w=Ki[oy])&&w.Ba&&(_e=_e.concat(w.Ba(_u,fd,iy)),_e.length&&iy)););w=_e}v(w)},Y.prototype.getObjectsAt=Y.prototype.Ba,Y.prototype.Ec=y,Y.prototype.ca=function(){var o,e=this.s.length;Y.l.ca.call(this);var d=lw(this);this.I.set(0,0);var v=d.w;for(o=d.h;e--;){var w=(d=this.s[e]).qb();w.w===v&&w.h===o||d.Ue(v,o)}this.Ec=new Ui(v,o),this.da()},Y.prototype.getCapabilities=function(){return Xv},Y.prototype.getCapabilities=Y.prototype.getCapabilities,p=Y.prototype,p.Yd=function(){this.N.Gc.length=0,this.u.Gc.length=0,this.ra.Gc.length=0,this.X.Gc.length=0},p.uh=function(){var e;this.B&&this.B.before();var o=this.u.fa,d=this.f.center.clone().scale(this.ma).round(),v=this.F(1,0),w=this.F(1,pw),j=this.zoom,Z=j-this.ab,_e=this.b,Ki=this.En,_u=this.Dn,fd=o[0];o=this.I;var iy=this.s.length,oy=this.Pb;for(e=oy.length;iy--;){var dy=this.s[iy];C(dy,vm)&&dy.clear()}if(fd){if(Ki)for(;Ki;)fd.T(v,d,_e,iy=j-Ki,!0,o),--Ki;if(_u&&this.Ad)for(dy=1;dy<=_u&&(_e.Ja(iy=j+dy),Ki=this.F(2,0),_e.Ja(j),!fd.T(Ki,d,_e,iy,!0,o));dy++);}for(this.Yc=Zv;e--;)C(_e=oy[e],oj)&&_e.ia()&&_e.ia().Le(w,Z);v=this.Uj(v,d,j,!1,o,qw,this.u,this.N),d=this.Uj(w,d,Z,!1,o,rw,this.ra,this.X),this.wd=v&&d,this.i&&this.i.qa()&&this.og(),this.S||(this.S=this.v.eb()),this.S.bounds=this.F(4,0),this.v.Va(this.S),this.S=null,this.Ec&&(this.f.Va(this.Ec),this.Ec=y),j<this.pf?this.Ad=!0:this.se&&(this.Ad=!1),this.pf=j,this.se=v,this.B&&this.B.after(),nw(this)},p.Uj=function(e,o,d,v,w,j,Z){var oy,_e=Array.prototype.slice.call(arguments,6),Ki=_e.length,_u=_e[0].fa.length,fd=Ki*_u,iy=!!fd;for(oy=0;oy<fd;oy++){if(j===qw)var dy=oy%Ki,_y=Math.floor(oy/Ki);else dy=Math.floor(oy/_u),_y=oy%_u;var Ay=_e[dy].fa[_y];dy=_e[dy].Gc,Ay&&((Ay=Ay.T(e,o,this.b,d,v,w,this.Aa))===uk.ACTIVE&&(this.Yc=1/0),Ay!==uk.DONE||dy[_y]||(ow(this,this.Pb[_y]),dy[_y]=!0),dy[_y]||(iy=!1))}return iy},p.o=function(){var e=this.c.Ha()[0],o=this.f;Ik(this.Mn),kw(this,!0),e&&Il(this,e,!1),mw(this).forEach(function(d){d.C()}),o.element&&o.element.removeChild(this.oa),this.oa=null,this.Y=3,Y.l.o.call(this)},p.da=function(){this.Rj=Jk(),this.Y===aw&&(this.wd=!1,this.Y=1,nw(this))},p.td=function(e,o,d){jw(this,e=Jl(this,Jl(this,e)+this.ab),o,d)},Y.prototype.zoomAt=Y.prototype.td,Y.prototype.ec=function(e,o){fw(this),tw(this,o),this.g.start(e,!!o)},Y.prototype.startInteraction=Y.prototype.ec,Y.prototype.Vb=function(e,o,d,v,w){var j=!1;this.g.qa()&&(o=this.g.store(e,o,d,v,w),this.g.sc(Hl.COORD)&&0<hm(e=this.g.Jd())&&(sw(this,-e.x,-e.y),j=!0),o&&this.g.sc(Hl.ZOOM)&&(e=this.g.qf(),o=this.g.rf(),(o=Cd(Ed(2,this.zoom)*o)/Md)!==this.zoom&&(jw(this,o=bw(this,o),e.x,e.y),j=!0)),j&&this.da())},Y.prototype.interaction=Y.prototype.Vb,Y.prototype.ob=function(e){var o=this;if(this.g.qa()&&!e){if(this.j){e=this.g.rb();var d=this.g.kc(),v=this.j.duration,w=(this.j.Ke||1)*e,j=new Lm(-w/(0<v?v:1),w);!E(d.x)&&!E(d.y)&&0<w&&o.g.sc(Hl.COORD)&&hw(this,function(Z){w=j.xe(Z*v),E(w)||sw(o,yd(-d.x*w),yd(-d.y*w))},v,void 0,this.j.pe)}this.j=null,this.g.clear()}},Y.prototype.endInteraction=Y.prototype.ob,Y.prototype.dc=function(e,o,d){fw(this),this.a.start(o,d),tw(this,e)},Y.prototype.startControl=Y.prototype.dc,Y.prototype.control=function(e,o,d){if(E(+d))throw new D(this.control,2,d);if(E(e))throw new D(this.control,0,e);if(E(o))throw new D(this.control,1,o);this.a.qa()&&this.a.set(e,o,d,0,0,0)},Y.prototype.control=Y.prototype.control,Y.prototype.nb=function(e,o){var v,d=this;if(this.a.qa()){kw(this,!0);var w=Jk(),j=w-this.Gj;if(1<=j&&uw(this,tm(this.a),j),!this.j||e||o)"function"==typeof o&&((e=this.eb()).zoom=this.zoom-this.ab,o(e),e.zoom+=this.ab,vw(this,e));else{o=this.a.rb();var _e=this.a.kc(),Ki=this.j.duration,_u=(this.j.Ke||1)*o,fd=new Lm(-_u/(0<Ki?Ki:1),_u);!E(_e.a)&&!E(_e.b)&&0<_u&&hw(this,function(iy,oy,dy,_y){w&&(dy=_y-w,w=0),_u=fd.xe(iy*Ki)*dy,E(_u)||((v=_e.c*_u)&&jw(d,bw(d,d.zoom+v),d.a.a,d.a.b),sw(d,yd(_e.a*_u),yd(_e.b*_u)))},Ki,void 0,this.j.pe)}this.a.reset()}},Y.prototype.endControl=Y.prototype.nb,Y.prototype.$c=function(e){var o=this,d=e.b;this.I.set(0,0),d.a||d.b||d.c?(this.Gj=Jk(),hw(this,function(v,w,j,Z){o.Gj=Z,uw(o,d,j)},Number.POSITIVE_INFINITY),this.da()):kw(this,!0)},Y.prototype.Ig=function(){},Y.prototype.enter=Y.prototype.Ig,Y.prototype.Jg=function(e){Gl(this.oa,e)},Y.prototype.exit=Y.prototype.Jg,Y.prototype.capture=function(e,o,d,v){var w=this.oa.ownerDocument.createElement("canvas"),j=w.getContext("2d"),Z=this.ma;for(w.width=(d-e)*Z,w.height=(v-o)*Z,d=0;d<this.s.length;d++)C(v=this.s[d],vm)&&j.drawImage(v.L(),-e*Z,-o*Z);return Yb(w)};var rw=0,qw=1,Zv=1e3,pw=256;function ww(e){var o;if(e)for(xw={},o=e.length;o--;)xw[e[o]]=!0;this.Tk={}}var yw,xw={};ww.prototype.parse=function(e,o,d){var v,w,j,Z,_e;yw=!1;try{d=JSON.parse(d)}catch(fd){yw=!0}if(d&&(v=d.metadata)){var Ki={spatials:[]};for(w in v)if((d=!xw[w]&&(j=zw[w]))&&((Z=v[w])||(yw=!0,Z=void 0),d=Z),d)for(d=Z.length;d--;){var _u;(_u=Z[d])||(yw=!0,_u=void 0),(_e=_u)&&j(o,e,this,w,_e,Ki)}}else yw=!0;return yw?void 0:Ki},ww.prototype.parse=ww.prototype.parse;var zw={"street labels":function(e,o,d,v,w,j){var Z;if((Z=w.vertices)||(yw=!0,Z=void 0),Z){var _e,_u,Ki=Z.length;if((_u=0<Ki)||(yw=!0,_u=void 0),_u)for(_e=Array(Ki/2);Ki;){var fd=Z[--Ki];_u=Z[--Ki],_e[Ki/2]=new G(_u,fd)}_e=_e?{a:[_e]}:B,Ki=+w["font size"]/e.Ta(),(Z=d.Tk[Ki])||(Aw.lineWidth=Ki,Z=d.Tk[Ki]=d.zd.fj(Aw)),Bw(e,o,_e,!1,Z,w,v,j)}delete w.vertices},"city center labels":function(e,o,d,v,w,j){Bw(e,o,Cw(w,new Mh([])),!0,d.zd,w,v,j)},labels:function(e,o,d,v,w,j){var Z;if((Z=w["bounding boxes"])||(yw=!0,Z=void 0),Z){for(var _u,_e=Z.length,Ki=new Mh([]);_e--;){var fd;(fd=Z[_e])||(yw=!0,fd=void 0),(_u=fd)&&Cw(_u,Ki)}Bw(e,o,Ki,!0,d.zd,w,v,j)}delete w["bounding boxes"]},buildings:function(e,o,d,v,w,j){var Ki,_u,fd,dy,Z=w.id,_e=o.Uf[Z],iy=[],oy=[];(Ki=w)||(yw=!0,Ki=void 0),Ki&&((_u=Ki.vertices)||(yw=!0,_u=void 0),_u)&&((dy=Ki.polygons)||(yw=!0,dy=void 0),(fd=dy)&&iy.push.apply(iy,Dw(_u,fd)),(Ki=Ki.outlines)||(yw=!0,Ki=void 0),(fd=Ki)&&oy.push.apply(oy,Dw(_u,fd))),fd=iy.length,iy.push.apply(iy,oy),oy=new Mh(iy,Ud,fd),(iy=iy.length)||(yw=!0,iy=void 0),iy&&(_e?(Pq(_e,e,[oy]),j.spatials.push(_e)):(_e=Bw(e,o,oy,!0,d.zd,w,v,j,Z),o.aa(_e)))}};zw["transit stops"]=zw.POIs=zw.labels;var Ew=["box 2","box 1","annotation box","icon box"];function Cw(e,o){for(var v,w,d=Ew.length;d--;)if(w=e[v=Ew[d]]){var j=w[0],Z=w[1],_e=w[2];w=w[3],o.a.push([new G(j,Z),new G(j+_e,Z),new G(j+_e,Z+w),new G(j,Z+w)]),delete e[v]}return o}function Dw(e,o){var v,w,j,d=o.length;if(0<d)for(w=Array(d);d--;)if((v=o[d])||(yw=!0,v=void 0),v){var Z=v.length;if(0<Z)for(w[d]=j=Array(Z);Z--;){var _e=2*v[Z];j[Z]=new G(e[_e],e[_e+1])}}return w||[]}var Fw={};function Bw(e,o,d,v,w,j,Z,_e,Ki){return Fw.style=w,v=new Lq(o,v,Ki,Fw),d&&Pq(v,e,[d]),Gw(j),j.category=Z,v.setData(j),_e.spatials.push(v),v.ga(o),v}ww.prototype.zd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Aw={};function Gw(e){var o,d=!1;switch(typeof e){case"object":if(e instanceof Array)for(o=e.length;o--;)Gw(e[o])?d=!0:delete e[o];else if(e)for(o in e)Gw(e[o])?d=!0:delete e[o];break;case"number":d=!0;break;default:d=!!e}return d}function Hw(e,o,d){o=o||{};var v=(d=d||{}).tileType||"maptile",w=d.scheme||"normal.day";if(R.call(this,{min:0,max:20}),!0===o.pois&&(o.pois="!F"),this.I=o,!(e&&e instanceof Iw))throw Error("InvalidArgument: service required");this.u=e,this.i=A(this.i,this),this.u.addEventListener("versionupdate",this.i),this.B=e.D().clone().K(v+"/"+e.nc()+"/"+w).G(Jw).G(o),this.X=e.g||null,this.N=d.pixelRatio||d.pixelratio||Te(),this.tileSize=d.tileSize||256,this.tileType=v,this.scheme=w,this.b=new Vq(new ww(d.categoryFilter)),this.b.ga(this),this.v=A(this.v,this),this.b.addEventListener("update",this.v),R.call(this,{min:0,max:20}),this.m(new Pk(d.tileCacheSize||256,A(this.Y,this)))}u(Hw,R),t("H.service.metaInfo.TileProvider",Hw),Hw.prototype.Y=function(e,o){for(var v,d=(e=o.Na()).length;d--;)delete(v=e[d]).a[o.key],v.release();o.data&&(up.push(o.Sf(),this.tileSize),o.Tf())},Hw.prototype.v=function(){this.dispatchEvent("update")},Hw.prototype.J=function(e,o,d,v,w){var _u,j=this.B.clone(),Z=this.X,_e=this.tileSize,Ki=this.getTileKey(e,o,d);if((Ki=this.Cb().get(Ki))&&!Ki.Qd()){v(up.pop(this.tileSize),null);var fd={cancel:function(){}}}else{Z&&j.za(Z[(d+o+e)%Z.length]),j.K(d+"/"+e+"/"+o+"/"+_e+"/png8");var iy=sp.setTimeout(function(){(_u=new tf("text/plain",j.toString())).then(function(oy){v(null,oy)},w)},500)}return fd||{cancel:function(){_u?_u.cancel():sp.clearTimeout(iy)}}},Hw.prototype.requestInternal=Hw.prototype.J,Hw.prototype.Sb=function(e,o,d,v,w){var j=this.b,Z=v||up.pop(this.tileSize);if(v)(e=this.Cb().get(this.getTileKey(e,o,d))).T(v);else if(delete(v=e=new Zk(this.gd(e,o,d),e,o,d,this.tileSize,this.N,d,j)).j,v.m=w,e.T(Z))for(Z=(w=e.Na()).length;Z--;)w[Z].Zf();else up.push(Z,this.tileSize);return e},Hw.prototype.createTileInternal=Hw.prototype.Sb,Hw.prototype.C=function(){this.b.C(),this.u.removeEventListener("versionupdate",this.i),R.prototype.C.call(this)},Hw.prototype.dispose=Hw.prototype.C,Hw.prototype.i=function(){var e=this.u;this.B=e.D().clone().K(this.tileType+"/"+e.nc()+"/"+this.scheme).G(Jw).G(this.I),this.reload(!1)};var Jw={metadata:"metaonly",mgen:"2"};function Iw(e){Iw.l.constructor.call(this,Iw,e),e=Pp(this,e),this.g=e.shards,(this.c=e.ignoreTypes?null:e.type)&&this.D().za(this.c),this.f=e.version,this.m=new Xp,"newest"===this.f&&Kw(this)}function Lw(e,o){for(var d={},v=e[o+"s"][o],w=v.length;w--;)d[v[w].id]=v[w];e[o+"s"]=d}function Kw(e){var o=e.D().clone().K("info").G({output:"json"});e.g&&o.za(e.g[0]),e.J(o,function(d){var v;if(Lw(d=d.response,"map"),Lw(d,"scheme"),Lw(d,"tiletype"),Lw(d,"format"),Lw(d,"resolution"),Lw(d,"language"),"newest"===e.f&&"traffic"!==e.c)for(v in d.maps)d.maps[v].hash&&d.maps[v].newest&&(e.f=d.maps[v].hash,e.dispatchEvent("versionupdate"));e.s=d,e.dispatchEvent("infoupdate")},function(d){throw d})}u(Iw,Op),t("H.service.metaInfo.Service",Iw),Iw.prototype.a=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},Iw.CONFIG_KEY="metaInfo",Iw.prototype.zj=function(){return this.c},Iw.prototype.nc=function(){return this.f},Iw.prototype.getVersion=Iw.prototype.nc,Iw.prototype.la=function(){return this.m},Iw.prototype.getCopyrights=Iw.prototype.la,Iw.prototype.Rg=function(){return this.s},Iw.prototype.getInfo=Iw.prototype.Rg,Iw.prototype.oe=function(e,o,d,v,w,j){return new Hw(this,v,{tileSize:e,pixelRatio:o,categoryFilter:d,tileType:w,scheme:j})},Iw.prototype.createTileProvider=Iw.prototype.oe,Iw.prototype.hc=function(e,o,d,v,w,j){return new ql(this.oe(e,o,d,v,w,j))},Iw.prototype.createTileLayer=Iw.prototype.hc,V.prototype.oj=function(e){return this.Qa(Iw,e)},V.prototype.getMetaInfoService=V.prototype.oj,function(){var e=V.prototype.createDefaultLayers;V.prototype.createDefaultLayers=function(o,d,v,w,j,Z){var _e=e.call(this,o,d,v,w,j,Z),Ki={},_u=this.oj();"object"==typeof o&&(o=(Z=o).tileSize,d=Z.ppi,v=Z.lg,w=Z.lg2,j=Z.style,Z=Z.pois),o=o||256;var fd=320===d?2:1;if(0>[72,250,320,500].indexOf(+d)){if(d!==B)throw new D(this.lf,1,d)}else Ki.ppi=+d;return v&&(Ki.lg=v),w&&(Ki.lg2=w),j&&(Ki.style=j),Z&&(Ki.pois=Z),_e.raster.normal.metaInfo=_u.hc(o,fd,["buildings"],Ki),_e}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={kb:!0},ja={};try{ja.__proto__=ha;fa=ja.kb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.T=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.qa=function(){};v.prototype.drop=v.prototype.qa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.R=function(){};v.prototype.removeAll=v.prototype.R;v.prototype.$=function(){};v.prototype.registerOnDrop=v.prototype.$;v.prototype.oa=function(){};v.prototype.deRegisterOnDrop=v.prototype.oa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new z(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new z(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.$(b);if(c&&!r(c))throw new z(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Fa(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new z(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,B:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.$=function(a){if(!r(a))throw new z(this.$,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.$;A.prototype.oa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.oa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.qa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.qa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.R=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.R;A.prototype.Fa=function(a){if(!(0<+a))throw new z(A.prototype.Fa,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Fa;A.prototype.Ab=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Ab;A.prototype.wb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.wb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.B)&&hb(a,b,!1);if(b.m=c)b.B=c.B,c.B=b;b.B||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.B,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.B=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.B=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.va=function(){};B.prototype.getMeta=B.prototype.va;B.prototype.wa=function(){};B.prototype.getRowCount=B.prototype.wa;B.prototype.fa=function(){};B.prototype.getRow=B.prototype.fa;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.ua=function(){};B.prototype.getColumn=B.prototype.ua;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.xa=function(){};ib.prototype.getTable=ib.prototype.xa;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.xa=function(){return this.a};jb.prototype.getTable=jb.prototype.xa;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function z(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,z.prototype);return d}wa(z,Error);t("H.lang.InvalidArgumentError",z);z.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.C=a;if(b)for(this.L=b,this.na=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Aa=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Aa=x;l.C=x;l.L=x;l.na=x;l.va=function(){return this.Aa};C.prototype.getMeta=C.prototype.va;C.prototype.wa=function(){return this.C?this.C.length:0};C.prototype.getRowCount=C.prototype.wa;C.prototype.fa=function(a){var b=this.C;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.fa;C.prototype.A=function(){return this.L||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.ua=function(a){return this.na[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.ua;C.prototype.l=function(a,b){var c=this.C;return(a=c&&this.na[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.L,d=""+this.L,e=(this.C||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new z(this.concat,b);if(f.C){if(c&&""+f.L!==d)throw new z(this.concat,b,"Incompatible columns!");e=e.concat(f.C)}}return new C(e,this.L,this.Aa)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Ib=3*E,Jb=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.D=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.D;\nF.prototype.Bb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Bb;F.prototype.pa=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.pa;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.D(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.V=new Yb(b.x,b.y,null,Zb(b));a.V=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.lb;var n=f.mb;var q=f.cc;var u=f.dc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Ba=k;k.Ba=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.ya=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.ya=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.la;a=a.Ba){for(f=a.ya;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Va;a.la=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.la=1;break}}if(!a)break}c.Ya=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Ya=e||null;this.Ba=f||null;this.u=!!g;this.ya=!!h;this.la=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Va=!1;this.V=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.la))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.V&&(f.V.x=f.x,f.V.y=f.y),ac(a,b,c,d,e);e.cc=a.x+k*g;e.dc=a.y+k*h;e.lb=k;e.mb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Va=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new z(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new z(this.get,0);if(!r(b))throw new z(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.K=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.$a=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.$a=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.T.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.T.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Fc=p.navigator;if(Fc){var Gc=Fc.userAgent;if(Gc){Cc=Gc;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Oa;c.Oa=null;e()}};return function(e){d.next={Oa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ca=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ea=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ca,a.Ea,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.O,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.O=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Wa=Fa(this.Wa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={fc:0,gc:Od,ec:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Wa=function(a){this.Y=3;this.a.b(a)};l.reject=function(a){this.Y=5;this.a.reject(a)};l.Y=0;\nl.cancel=function(){if(3>this.Y){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.La&&a.ba.pb(this.La);this.Y=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ba=a;this.ba.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ba.hc(b))!==Ia){var d=Fa(this.ba.pb,this.ba,c,b);b.La=c;b.then(d,d);b.Y=b.ic(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ga=e;this.key=++Ud;this.S=this.ca=!1}function Wd(a){a.S=!0;a.listener=null;a.proxy=null;a.src=null;a.ga=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.ca=!1)):(b=new Vd(b,this.src,f,!!d,e),b.ca=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.R=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.S&&f.listener==b&&f.capture==!!c&&f.ga==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.T.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.T.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.S){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.S&&(f=Fe(f,d),e=e&&!1!==f)}return e}function Fe(a,b){var c=a.listener,d=a.ga||a.src;a.ca&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.S)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Fe(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Ge="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Ge]||(a[Ge]=function(b){return a.handleEvent(b)});return a[Ge]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.G=function(){return this.i};l.Ga=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.G();if(c)for(b=[];c;c=c.G())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.M(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.M(d,!0,a)&&e,a.a||(e=g.M(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.M(d,!1,a)&&e;return e};\nl.v=function(){N.T.v.call(this);this.b&&this.b.R(void 0);this.i=null};l.M=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.S&&f.capture==b){var g=f.listener,h=f.ga||f.src;f.ca&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.$a};t("H.util.EventTarget",N);N.prototype.Ga=N.prototype.Ga;N.prototype.setParentEventTarget=N.prototype.Ga;N.prototype.G=N.prototype.G;N.prototype.getParentEventTarget=N.prototype.G;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.K=N.prototype.K;N.prototype.addOnDisposeCallback=N.prototype.K;N.prototype.O=N.prototype.M;\nN.prototype.M=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.O.apply(this,arguments),d&&this.G&&null===this.G()&&delete c.eventPhase;return f};function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.T.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.yb=function(){return this.g};Q.prototype.getLabel=Q.prototype.yb;Q.prototype.Wb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Wb;Q.prototype.Nb=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Nb;\nQ.prototype.Vb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Vb;var He=new Q;Q.SEPARATOR=He;function Ie(){if(Ca.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.vb?0:b.vb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie();Ie();function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new z(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new z(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new z(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.W;R.prototype.equals=R.prototype.D;R.prototype.ma="";R.prototype.ta="";R.prototype.toString=function(){return this.cb([this.ma.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.Yb=function(){return{type:this.ta,coordinates:this.bb()}};R.prototype.toGeoJSON=R.prototype.Yb;\nR.prototype.ra=function(){return{type:this.ma,coordinates:this.sa(),boundingBox:this.W().ra()}};R.prototype.forWorkerMessage=R.prototype.ra;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.D=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.D;S.prototype.pa=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Jb;var c=a.lat*Jb;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Jb-a.lng*Jb)/2),2))))}return a};\nS.prototype.distance=S.prototype.pa;\nS.prototype.bc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Jb;a=Jb*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Jb*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Jb))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Jb,e=this.lat*Jb,c=this.lng*Jb,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Ib+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.bc;S.prototype.W=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.W;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new z(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new z(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.ma="Point";l.cb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.ta="Point";l.bb=function(){return[this.lng,this.lat,this.alt||0]};l.sa=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ha=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ha;Qe.prototype.sb=function(a,b){return this.ha(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.sb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.U=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.U;Qe.prototype.Sb=function(a,b){return this.U(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Sb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Ub=Te;W.prototype.projection=W.prototype.Ub;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.ac=vb(2,Ve);W.prototype.w=W.prototype.ac;W.prototype.Ib=vb(2,Ve);W.prototype.h=W.prototype.Ib;\nW.prototype.aa=function(a){if(Ra(a))throw new z(this.aa,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.aa;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Sa=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Sa;W.prototype.rb=function(a,b){a=this.projection.ha(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.rb;\nW.prototype.Da=function(a,b){return this.projection.U((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Da;W.prototype.U=function(a,b,c){return this.projection.U((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.U;W.prototype.za=function(a,b,c){a=this.projection.ha(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.za;W.prototype.Tb=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Tb;t("H.util.Disposable",J);J.prototype.K=J.prototype.K;J.prototype.addOnDisposeCallback=J.prototype.K;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new z(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new z(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ja(a),this.ja(b),this.Ha(c),this.Ia(e),this.ab(f),this.ka(d);else throw new z(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ja=function(a){if(!a||"string"!==typeof a)throw new z(this.Ja,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ja;Y.prototype.Fb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Fb;Y.prototype.ja=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new z(this.ja,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ja;Y.prototype.xb=function(){return this.g};Y.prototype.getHost=Y.prototype.xb;Y.prototype.Ha=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ha;Y.prototype.Cb=function(){return this.b};Y.prototype.getPath=Y.prototype.Cb;Y.prototype.ka=function(a){if(a)if("object"==typeof a)this.a=a;else throw new z(this.ka,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ka;Y.prototype.Jb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Jb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ia=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new z(this.Ia,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ia;Y.prototype.Db=function(){return this.f};Y.prototype.getPort=Y.prototype.Db;Y.prototype.ab=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.ab;Y.prototype.tb=function(){return this.c};Y.prototype.getAnchor=Y.prototype.tb;Y.prototype.P=function(a){if("object"!==typeof a)throw new z(this.P,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.P;\nY.prototype.Ma=function(a){if(!a||"string"!==typeof a)throw new z(this.Ma,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ja(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Ma;Y.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new z(this.Na,0,\'Parameter "subPath" must be a non-empty string\');return this.Ha((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Na;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;\nfunction af(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?"":"="+encodeURIComponent(h).replace(/[!\'()*]/g,function(k){return"%"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&"function"!==typeof e[d]){var f=a.a[d];Na(f,bf)?f.a.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?"?"+c.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction bf(a){var b;if(!Oa(a,void 0,void 0,void 0))throw new z(bf,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Qa(c)&&!Sa(c))throw new z(bf,0,"The array can only contain strings and numbers");}this.a=a}Y.MultiValueQueryParameter=bf;bf.prototype.Hb=function(){return this.a};bf.prototype.getValues=bf.prototype.Hb;var cf={};function df(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function ef(a){delete cf[a];this.postMessage(a)}function ff(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(cf[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function gf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}gf.prototype.postError=function(a){this.postMessage(a,x,0)};\ngf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function hf(a,b,c){if(!Qa(a))throw new z(hf,0,"InvalidArgument");if(!r(b))throw new z(hf,1,"InvalidArgument");var d=jf++;kf[d]={mimeType:c||lf,nb:b};(new gf(["3",d,[]])).postMessage(a,[],2)}var kf={},jf=0;\nfunction mf(a,b){var c=a;if(kf[this.a]){var d=kf[this.a];var e=d.nb;delete kf[this.a];if(b)e(null,b);else{if(d.mimeType===nf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var lf=0,nf=1;function V(a,b,c,d){of(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.ma="Polygon";V.prototype.cb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.D=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.D;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function of(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Ra=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Ra;V.prototype.Qa=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Qa;V.prototype.Gb=function(){return this.f};V.prototype.getTop=V.prototype.Gb;\nV.prototype.ub=function(){return this.c};V.prototype.getBottom=V.prototype.ub;V.prototype.zb=function(){return this.a};V.prototype.getLeft=V.prototype.zb;V.prototype.Eb=function(){return this.b};V.prototype.getRight=V.prototype.Eb;V.prototype.F=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,pf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.F;V.prototype.I=function(){return qf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.N=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.N;V.prototype.Mb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Mb;V.prototype.Ob=function(){return!this.I()&&!this.N()};V.prototype.isEmpty=V.prototype.Ob;V.prototype.W=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.W;\nV.prototype.da=function(a,b,c){var d=this.F();c||(a=Le(a,this.da,0),b=Me(b,this.da,1));b=this.J(a,b,c);a=b.F();return a.lat===d.lat&&a.lng===d.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.da;V.prototype.ea=function(a,b){b||Oe(a,this.ea,0);return this.da(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.ea;\nV.prototype.Pa=function(a,b){var c=this.F();if(!b&&!Na(a,V))throw new z(this.Pa,0,a);b=this.ia(a,b);a=b.F();return a.lat===c.lat&&a.lng===c.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Pa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new z(this.J,0,a);if(Ra(b=Me(b)))throw new z(this.J,1,b);}return rf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Xa=function(a,b,c){b||Oe(a,this.Xa,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Xa;V.prototype.ia=function(a,b,c){if(!b&&!Na(a,V))throw new z(this.ia,0,a);return rf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ia;V.prototype.Z=function(a,b,c,d,e,f){e||(a=Le(a,this.Z,0),b=Me(b,this.Z,1),c=Le(c,this.Z,2),d=Me(d,this.Z,3));return rf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.Z;\nV.prototype.Ua=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new z(this.Ua,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Ua;function qf(a,b){a=b-a;return a+(0>a?360:0)}function pf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction rf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=qf(b,d);var m=pf(b,e);g=qf(f,h);var n=pf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?of(k,a,m,c,q):new V(a,m,c,q)}V.merge=rf;function sf(a,b,c){c||(Oe(a,sf,0),Oe(b,sf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=sf;\nfunction tf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new z(tf,0,a);if(0<d)for(f=a[0],e=sf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=tf;function uf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new z(uf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=uf;\nfunction vf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new z(vf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ia(a[c],b,e);return e}V.coverRects=vf;\nV.prototype.Za=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.F().lng;Oe(a,this.Za,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?of(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.Za;V.prototype.ta="Polygon";\nV.prototype.bb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ra=function(){return this.sa()};V.prototype.sa=function(){return[this.f,this.a,this.c,this.b]};function wf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.X=d;this.a=Ad()}wf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};wf.prototype.reject=function(a){this.a.reject(a)};wf.prototype.cancel=function(){this.a.a.cancel()};wf.prototype.cancel=wf.prototype.cancel;function xf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);yf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var yf=/^-?0\\d/;\nfunction zf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.za(a[f],a[++f]),f+=2;return e};function Af(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Bf=1/Math.pow(10,10);function Cf(a,b){var c=[],d=a.Ra();a=a.Qa();var e;180==a.lng&&(a.lng-=Bf);d=Af(d,b);a=Af(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Df(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.eb=a.layerConfigs||[];this.i=a.projected;this.O=c;this.Ca=!1!==a.batchTiles;this.$b=a.horizontalMargin||0;this.fb=a.onlyOutline;this.hb=new W(x,c);this.f=new W(x,c);this.f.aa(22-Math.log(c)/Math.LN2+8)}wa(Df,J);\nDf.prototype.jb=function(a,b,c){var d=this.O,e=this.$b,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.hb;e.aa(c);f=e.Da(f);d=e.Da(d);return Ef(this,new V(f.lat,f.lng,d.lat,d.lng),this.eb,{x:a,y:b,z:c})};Df.prototype.ib=function(a,b,c,d,e){return Ef(this,new V(a,b,c,d),e)};\nfunction Ef(a,b,c,d){var e=Ff(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Cf(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new wf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ca?Gf(a,n):Hf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ea,this,X.X,If(e))).then(Fa(this.gb,this,X,d||Jf)).then(Fa(this.Zb,this,g[X.X]))},a))}var Jf={x:0,y:0,z:0};\nDf.prototype.Ea=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.fa(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Hf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Kf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().P({tilex:g.x}).P({tiley:g.y}).P({level:g.b}).P({layer:g.X});new hf(h.toString(),Fa(c,null,g),nf)}}\nfunction Gf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Lf(a,e)}}function Lf(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.X)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ka(g),new hf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Kf(a,b,h)},nf))}\nfunction Kf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Mf(a,b[e],h)}}else Mf(a,b,c)}function Mf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction If(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Nf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nDf.prototype.gb=function(a,b,c){var d=this.f.Sa()-b.z,e=this.O<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.X),X=this.f,qa=this.fb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var y=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(y[T]){var P=xf(y[T],y[U],y[da],O);y.geometry=P;delete y[T];delete y[U];delete y[da];if(y.INNER_LAT)for(T=y.INNER_LAT.split(";"),P=y.INNER_LON.split(";"),delete y.INNER_LAT,\ndelete y.INNER_LON,y.interiors=da=[],U=T.length,y=0;y<U;y++)da.push(xf(T[y],P[y],"",O))}if(this.i){U=w;y=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=zf(Z.path,y);w=[O];U.$$projected$$=P={Rb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Of(w,O,Z.outlineIndices);if(U)for(P.Kb=1,q=0;q<U;q++)Z=da[q],O=zf(Z.path,y),w[1+q]=O,T|=+Of(w,O,Z.outlineIndices);T&&(P.Pb=1+U)}y=P;O=y.Rb;w=y.Kb;var Dc=y.Pb;P=[];T=U=Lb;var db=da=x;y=O[0];if(1===y.length){var Ec=Ec||(Ec=Nf(g,b,h,e,!1));w=y[0];Rb(w.x,w.y,\nEc)&&P.push(Pf(y,g,b,d))}else{var Ee=O.length;for(Z=qa?Dc:0;Z<Ee&&(qa||!Z||P.length);Z++)if(y=O[Z],Z>=Dc){Z===Dc&&(T=P.length);var ia=Ub([y],k,m,n,f,!1);Qf(ia,g,b,d,P)}else{var Hb=Hb||(Hb=Nf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Rf(db[q],y),u=ia.length){for(da=da||[];u--;)da.push(q);Qf(ia,g,b,d,P)}}else ia=Rf(Hb,y),Qf(ia,g,b,d,P);else if(ia=Rf(Hb,y),Qf(ia,g,b,d,P),1<ia.length&&w<Ee)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Xb:c,ob:bb,Lb:Ka,qb:La,Qb:cb}};function Of(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Rf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Ya)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Qf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Pf(a[f],b,c,d))}\nfunction Pf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nDf.prototype.Zb=function(a,b){var c=b.Xb,d=b.ob,e=b.Lb,f=b.Qb;b=b.qb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var y={};for(m in X)y[m]=X[m]}else y=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);y.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(y)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Df.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Df.prototype.disposeInternal=Df.prototype.v;\nfunction Ff(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Df(c,Sf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.ib.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Sf.R();break;default:e.postError("Unsupported command")}});\nvar Sf=new A(26214400),ya=Object.create(Ia,void 0);function Tf(a,b,c){var d=a[b];a=a[b+1];this.Ta=[];this.Ka=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Tf.prototype.ea=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Tf.prototype.F=function(){return this.b};var Uf=new F(0,0);function Vf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Wf=new W;function Xf(a,b,c,d,e){Wf.za(a,b,Uf);d[e]=Uf.x;d[e+1]=Uf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Vf:Xf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Wf.aa(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.ea(q,u)){var G=L;break}G||(G=new Tf(q,u,b),a.push(G));w=u/2;G.Ka+=I||1;G.Ta.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.Ka>=c,f=L.Ta,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new gf(a.data);var b=cf[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new gf;var b=function(c,d){ff.apply(a,[c,d,!0])};b("0",df);b("1",ff);b("2",ef);b("3",mf)})();\n',function(){var e=function(){var o,d,v;"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!(module.exports||"undefined"!=typeof window)||(o=e.toString(),d="",v="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function w(s){return j.call(s).slice(8,-1)}var j={}.toString,Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _e(s,l){return s(l={exports:{}},l.exports),l.exports}function Ki(s){return s&&s.Math==Math&&s}function _u(s){try{return!!s()}catch(l){return!0}}function fd(s){return"object"==typeof s?null!==s:"function"==typeof s}function iy(s){return s1?N0.createElement(s):{}}function oy(s){if(!fd(s))throw TypeError(String(s)+" is not an object");return s}function dy(s,l){if(!fd(s))return s;var f,g;if(l&&"function"==typeof(f=s.toString)&&!fd(g=f.call(s))||"function"==typeof(f=s.valueOf)&&!fd(g=f.call(s))||!l&&"function"==typeof(f=s.toString)&&!fd(g=f.call(s)))return g;throw TypeError("Can't convert object to primitive value")}function _y(s,l){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:l}}function Ay(s,l){try{N_(Gy,s,l)}catch(f){Gy[s]=l}return l}function ky(s){return"Symbol(".concat(void 0===s?"":s,")_",(++iE+W_).toString(36))}function Xy(s){return Y2[s]||(Y2[s]=LE&&k_[s]||(LE?k_:ky)("Symbol."+s))}function zy(s){var l,f,g;return void 0===s?"Undefined":null===s?"Null":"string"==typeof(f=function(_,k){try{return _[k]}catch(q){}}(l=Object(s),dE))?f:cS?w(l):"Object"==(g=w(l))&&"function"==typeof l.callee?"Arguments":g}var h0="object",Gy=Ki(typeof globalThis==h0&&globalThis)||Ki(typeof window==h0&&window)||Ki(typeof self==h0&&self)||Ki(typeof Z==h0&&Z)||Function("return this")(),O0=!_u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),N0=Gy.document,s1=fd(N0)&&fd(N0.createElement),S0=!O0&&!_u(function(){return 7!=Object.defineProperty(iy("div"),"a",{get:function(){return 7}}).a}),D1=Object.defineProperty,cx={f:O0?D1:function(s,l,f){if(oy(s),l=dy(l,!0),oy(f),S0)try{return D1(s,l,f)}catch(g){}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(s[l]=f.value),s}},N_=O0?function(s,l,f){return cx.f(s,l,_y(1,f))}:function(s,l,f){return s[l]=f,s},I_=_e(function(s){var l="__core-js_shared__",f=Gy[l]||Ay(l,{});(s.exports=function(g,_){return f[g]||(f[g]=void 0!==_?_:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),iE=0,W_=Math.random(),LE=!_u(function(){return!String(Symbol())}),Y2=I_("wks"),k_=Gy.Symbol,dE=Xy("toStringTag"),cS="Arguments"==w(function(){return arguments}()),SA={};function hx(s,l){return OA.call(s,l)}function MA(s){return hS[s]||(hS[s]=ky(s))}SA[Xy("toStringTag")]="z";var oE,lI,ST,EC,$2,l2,IA,FE,kA="[object z]"!==String(SA)?function(){return"[object "+zy(this)+"]"}:SA.toString,OA={}.hasOwnProperty,AC=I_("native-function-to-string",Function.toString),MT=Gy.WeakMap,jx="function"==typeof MT&&/native code/.test(AC.call(MT)),hS=I_("keys"),f1={};IA=jx?(oE=new(0,Gy.WeakMap),lI=oE.get,ST=oE.has,EC=oE.set,$2=function(s,l){return EC.call(oE,s,l),l},l2=function(s){return lI.call(oE,s)||{}},function(s){return ST.call(oE,s)}):(FE=MA("state"),f1[FE]=!0,$2=function(s,l){return N_(s,FE,l),l},l2=function(s){return hx(s,FE)?s[FE]:{}},function(s){return hx(s,FE)});var gE={set:$2,get:l2,has:IA,enforce:function(s){return IA(s)?l2(s):$2(s,{})},getterFor:function(s){return function(l){var f;if(!fd(l)||(f=l2(l)).type!==s)throw TypeError("Incompatible receiver, "+s+" required");return f}}},K2=_e(function(s){var l=gE.get,f=gE.enforce,g=String(AC).split("toString");I_("inspectSource",function(_){return AC.call(_)}),(s.exports=function(_,k,q,$){var _t=!!$&&!!$.unsafe,_n=!!$&&!!$.enumerable,_i=!!$&&!!$.noTargetGet;"function"==typeof q&&("string"!=typeof k||hx(q,"name")||N_(q,"name",k),f(q).source=g.join("string"==typeof k?k:"")),_!==Gy?(_t?!_i&&_[k]&&(_n=!0):delete _[k],_n?_[k]=q:N_(_,k,q)):_n?_[k]=q:Ay(k,q)})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||AC.call(this)})}),cI=Object.prototype;function V_(s){return isNaN(s=+s)?0:(0<s?c2:pS)(s)}function m1(s){if(null==s)throw TypeError("Can't call method on "+s);return s}function CC(s){return pI(m1(s))}function kT(s){return 0<s?E_(V_(s),9007199254740991):0}function hI(s,l){var f,g=CC(s),_=0,k=[];for(f in g)!hx(f1,f)&&hx(g,f)&&k.push(f);for(;l.length>_;)hx(g,f=l[_++])&&(~PT(k,f)||k.push(f));return k}function yE(s,l){var f=G0[RA(s)];return f==NA||f!=P1&&("function"==typeof l?_u(l):!!l)}function mE(s,l){var f,g,_,k,q=s.target,$=s.global,_t=s.stat,_n=$?Gy:_t?Gy[q]||Ay(q,{}):(Gy[q]||{}).prototype;if(_n)for(f in l){if(_=l[f],g=s.noTargetGet?(k=dN(_n,f))&&k.value:_n[f],!mS($?f:q+(_t?".":"#")+f,s.forced)&&void 0!==g){if(typeof _==typeof g)continue;!function(_i,_o){for(var xa=vE(_o),ka=cx.f,_l=DC.f,_f=0;_f<xa.length;_f++){var _a=xa[_f];hx(_i,_a)||ka(_i,_a,_l(_o,_a))}}(_,g)}(s.sham||g&&g.sham)&&N_(_,"sham",!0),K2(_n,f,_,s)}}kA!==cI.toString&&K2(cI,"toString",kA,{unsafe:!0});var jE,OT,fS,pS=Math.ceil,c2=Math.floor,TC={}.propertyIsEnumerable,fI=Object.getOwnPropertyDescriptor,dS={f:fI&&!TC.call({1:2},1)?function(s){var l=fI(this,s);return!!l&&l.enumerable}:TC},gS="".split,pI=_u(function(){return!Object("z").propertyIsEnumerable(0)})?function(s){return"String"==w(s)?gS.call(s,""):Object(s)}:Object,RT=Object.getOwnPropertyDescriptor,DC={f:O0?RT:function(s,l){if(s=CC(s),l=dy(l,!0),S0)try{return RT(s,l)}catch(f){}if(hx(s,l))return _y(!dS.f.call(s,l),s[l])}},E_=Math.min,NT=Math.max,e_=Math.min,PT=(!1,function(s,l,f){for(var g,_,q=CC(s),$=kT(q.length),_t=(g=$,(_=V_(f))<0?NT(_+g,0):e_(_,g));_t<$;_t++)if(_t in q&&q[_t]===l)return _t||0;return-1}),SC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],H_=SC.concat("length","prototype"),v0={f:Object.getOwnPropertyNames||function(s){return hI(s,H_)}},LT={f:Object.getOwnPropertySymbols},FT=Gy.Reflect,vE=FT&&FT.ownKeys||function(s){var l=v0.f(oy(s)),f=LT.f;return f?l.concat(f(s)):l},yS=/#|\.prototype\./,RA=yE.normalize=function(s){return String(s).replace(yS,".").toLowerCase()},G0=yE.data={},P1=yE.NATIVE="N",NA=yE.POLYFILL="P",mS=yE,dN=DC.f,MC=!_u(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype}),Z1=MA("IE_PROTO"),Y0=Object.prototype,Vx=MC?Object.getPrototypeOf:function(s){return hx(s=Object(m1(s)),Z1)?s[Z1]:"function"==typeof s.constructor&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?Y0:null},Y_=Xy("iterator"),Bx=!1;function jT(){}[].keys&&("next"in(fS=[].keys())?(OT=Vx(Vx(fS)))!==Object.prototype&&(jE=OT):Bx=!0),null==jE&&(jE={}),hx(jE,Y_)||N_(jE,Y_,function(){return this});var VT={IteratorPrototype:jE,BUGGY_SAFARI_ITERATORS:Bx},dI=Object.keys||function(s){return hI(s,SC)},IC=O0?Object.defineProperties:function(s,l){oy(s);for(var f,g=dI(l),_=g.length,k=0;k<_;)cx.f(s,f=g[k++],l[f]);return s},vS=Gy.document,PA=vS&&vS.documentElement,Z2=MA("IE_PROTO"),BT="prototype",L1=function(){var s,l=iy("iframe"),f=SC.length;for(l.style.display="none",PA.appendChild(l),l.src=String("javascript:"),(s=l.contentWindow.document).open(),s.write("<script>document.F=Object<\/script>"),s.close(),L1=s.F;f--;)delete L1[BT][SC[f]];return L1()},U_=Object.create||function(s,l){var f;return null!==s?(jT[BT]=oy(s),f=new jT,jT[BT]=null,f[Z2]=s):f=L1(),void 0===l?f:IC(f,l)};function zT(s,l,f){s&&!hx(s=f?s:s.prototype,U1)&&gN(s,U1,{configurable:!0,value:l})}function VE(){return this}function gI(){return this}function K0(s,l,f,g,_,k,q){var $,_n;function _i(uy){if(uy===_&&ty)return ty;if(!v1&&uy in _a)return _a[uy];switch(uy){case"keys":case f2:case p2:return function(){return new f(this,uy)}}return function(){return new f(this)}}_n=l+" Iterator",($=f).prototype=U_(h2,{next:_y(1,g)}),zT($,_n,!1),X1[_n]=VE;var _o,xa,ka,_l=l+" Iterator",_f=!1,_a=s.prototype,_g=_a[Q1]||_a["@@iterator"]||_&&_a[_],ty=!v1&&_g||_i(_),ny="Array"==l&&_a.entries||_g;if(ny&&(_o=Vx(ny.call(new s)),LA!==Object.prototype&&_o.next&&(Vx(_o)!==LA&&(_S?_S(_o,LA):"function"!=typeof _o[Q1]&&N_(_o,Q1,gI)),zT(_o,_l,!0))),_==f2&&_g&&_g.name!==f2&&(_f=!0,ty=function(){return _g.call(this)}),_a[Q1]!==ty&&N_(_a,Q1,ty),X1[l]=ty,_)if(xa={values:_i(f2),keys:k?ty:_i("keys"),entries:_i(p2)},q)for(ka in xa)!v1&&!_f&&ka in _a||K2(_a,ka,xa[ka]);else mE({target:l,proto:!0,forced:v1||_f},xa);return xa}f1[Z2]=!0;var gN=cx.f,U1=Xy("toStringTag"),X1={},h2=VT.IteratorPrototype,_S=Object.setPrototypeOf||("__proto__"in{}?function(){var s,l=!1,f={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),l=f instanceof Array}catch(g){}return function(g,_){return function(k,q){if(oy(k),!fd(q)&&null!==q)throw TypeError("Can't set "+String(q)+" as a prototype")}(g,_),l?s.call(g,_):g.__proto__=_,g}}():void 0),Q1=Xy("iterator"),LA=VT.IteratorPrototype,v1=VT.BUGGY_SAFARI_ITERATORS,f2="values",p2="entries",bS="String Iterator",M0=gE.set,HT=gE.getterFor(bS);K0(String,"String",function(s){M0(this,{type:bS,string:String(s),index:0})},function(){var s,l,g,_,k,q,$,_t=HT(this),_n=_t.string,_i=_t.index;return _i>=_n.length?{value:void 0,done:!0}:(l=_i,k=String(m1(_n)),q=V_(l),$=k.length,s=q<0||$<=q?"":(g=k.charCodeAt(q))<55296||56319<g||q+1===$||(_=k.charCodeAt(q+1))<56320||57343<_?k.charAt(q):k.slice(q,q+2),_t.index+=s.length,{value:s,done:!1})});var wS={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},zx=Xy("unscopables"),kC=Array.prototype;function xS(s){kC[zx][s]=!0}null==kC[zx]&&N_(kC,zx,U_(null));var sE="Array Iterator",Ax=gE.set,yN=gE.getterFor(sE),$w=K0(Array,"Array",function(s,l){Ax(this,{type:sE,target:CC(s),index:0,kind:l})},function(){var s=yN(this),l=s.target,f=s.kind,g=s.index++;return!l||g>=l.length?{value:s.target=void 0,done:!0}:"keys"==f?{value:g,done:!1}:"values"==f?{value:l[g],done:!1}:{value:[g,l[g]],done:!1}},"values");X1.Arguments=X1.Array,xS("keys"),xS("values"),xS("entries");var j0=Xy("iterator"),FA=Xy("toStringTag"),UT=$w.values;for(var GT in wS){var yI=Gy[GT],n_=yI&&yI.prototype;if(n_){if(n_[j0]!==UT)try{N_(n_,j0,UT)}catch(s){n_[j0]=UT}if(n_[FA]||N_(n_,FA,GT),wS[GT])for(var jA in $w)if(n_[jA]!==$w[jA])try{N_(n_,jA,$w[jA])}catch(s){n_[jA]=$w[jA]}}}function X2(s){if("function"!=typeof s)throw TypeError(String(s)+" is not a function");return s}function d2(s,l,f){if(X2(s),void 0===l)return s;switch(f){case 0:return function(){return s.call(l)};case 1:return function(g){return s.call(l,g)};case 2:return function(g,_){return s.call(l,g,_)};case 3:return function(g,_,k){return s.call(l,g,_,k)}}return function(){return s.apply(l,arguments)}}var P_=Xy("iterator"),g2=Array.prototype,VA=Xy("iterator"),y2=_e(function(s){var l={};(s.exports=function(f,g,_,k,q){var $,_t,_n,_i,_o,xa,ka=d2(g,_,k?2:1);if(q)$=f;else{if("function"!=typeof(_t=function(_l){if(null!=_l)return _l[VA]||_l["@@iterator"]||X1[zy(_l)]}(f)))throw TypeError("Target is not iterable");if(void 0!==(xa=_t)&&(X1.Array===xa||g2[P_]===xa)){for(_n=0,_i=kT(f.length);_n<_i;_n++)if((k?ka(oy(_o=f[_n])[0],_o[1]):ka(f[_n]))===l)return l;return}$=_t.call(f)}for(;!(_o=$.next()).done;)if(function(_l,_f,_a,_g){try{return _g?_f(oy(_a)[0],_a[1]):_f(_a)}catch(ny){var ty=_l.return;throw void 0!==ty&&oy(ty.call(_l)),ny}}($,ka,_o.value,k)===l)return l}).BREAK=l}),BA=Xy("iterator"),_p=!1;try{var J=0;({next:function(){return{done:!!J++}},return:function(){_p=!0}})[BA]=function(){return this}}catch(s){}function Ve(s,l){var f,g=oy(s).constructor;return void 0===g||null==(f=oy(g)[Ty])?l:X2(f)}function _s(s){var l;Hy.hasOwnProperty(s)&&(l=Hy[s],delete Hy[s],l())}function _c(s){return function(){_s(s)}}function _d(s){_s(s.data)}function sy(s){Gy.postMessage(s+"",By.protocol+"//"+By.host)}var hy,my,py,Ty=Xy("species"),By=Gy.location,Ey=Gy.setImmediate,Qy=Gy.clearImmediate,t0=Gy.process,Jy=Gy.MessageChannel,Fy=Gy.Dispatch,Uy=0,Hy={},$y="onreadystatechange";Ey&&Qy||(Ey=function(s){for(var l=[],f=1;f<arguments.length;)l.push(arguments[f++]);return Hy[++Uy]=function(){("function"==typeof s?s:Function(s)).apply(void 0,l)},hy(Uy),Uy},Qy=function(s){delete Hy[s]},"process"==w(t0)?hy=function(s){t0.nextTick(_c(s))}:Fy&&Fy.now?hy=function(s){Fy.now(_c(s))}:Jy?(py=(my=new Jy).port2,my.port1.onmessage=_d,hy=d2(py.postMessage,py,1)):!Gy.addEventListener||"function"!=typeof postMessage||Gy.importScripts||_u(sy)?hy=$y in iy("script")?function(s){PA.appendChild(iy("script"))[$y]=function(){PA.removeChild(this),_s(s)}}:function(s){setTimeout(_c(s),0)}:(hy=sy,Gy.addEventListener("message",_d,!1)));var Cy,Ny,n0,y0,Z0,b0,i_,w0={set:Ey,clear:Qy},X_=Gy.navigator,O_=X_&&X_.userAgent||"",p0=DC.f,B_=w0.set,T_=Gy.MutationObserver||Gy.WebKitMutationObserver,F1=Gy.process,L_=Gy.Promise,__="process"==w(F1),S1=p0(Gy,"queueMicrotask"),Zw=S1&&S1.value;function Xw(s){var l,f;this.promise=new s(function(g,_){if(void 0!==l||void 0!==f)throw TypeError("Bad Promise constructor");l=g,f=_}),this.resolve=X2(l),this.reject=X2(f)}function u_(s,l){if(oy(s),fd(l)&&l.constructor===s)return l;var f=Ux.f(s);return(0,f.resolve)(l),f.promise}function m2(s){try{return{error:!1,value:s()}}catch(l){return{error:!0,value:l}}}function Q2(s){return"function"==typeof s?s:void 0}function J2(s,l){return arguments.length<2?Q2(qT[s])||Q2(Gy[s]):qT[s]&&qT[s][l]||Gy[s]&&Gy[s][l]}function zA(s){var l;return!(!fd(s)||"function"!=typeof(l=s.then))&&l}function _E(s,l,f){var g;l.notified||(l.notified=!0,g=l.reactions,HA(function(){for(var _=l.value,k=1==l.state,q=0;g.length>q;)!function($){var _t,_n,_i,_o=k?$.ok:$.fail,xa=$.resolve,ka=$.reject,_l=$.domain;try{_o?(k||(2===l.rejection&&bN(s,l),l.rejection=1),!0===_o?_t=_:(_l&&_l.enter(),_t=_o(_),_l&&(_l.exit(),_i=!0)),_t===$.promise?ka(VL("Promise-chain cycle")):(_n=zA(_t))?_n.call(_t,xa,ka):xa(_t)):ka(_)}catch(_f){_l&&!_i&&_l.exit(),ka(_f)}}(g[q++]);l.reactions=[],l.notified=!1,f&&!l.rejection&&e8(s,l)}))}function bE(s,l,f){var g,_;_N?((g=vN.createEvent("Event")).promise=l,g.reason=f,g.initEvent(s,!1,!0),Gy.dispatchEvent(g)):g={promise:l,reason:f},(_=Gy["on"+s])?_(g):s===AS&&function(k,q){var $=Gy.console;$&&$.error&&(1===arguments.length?$.error(k):$.error(k,q))}("Unhandled promise rejection",f)}function Qw(s,l,f,g){return function(_){s(l,f,_,g)}}function e1(s,l,f,g){l.done||(l.done=!0,g&&(l=g),l.value=f,l.state=2,_E(s,l,!0))}Zw||(Cy=function(){var s,l;for(__&&(s=F1.domain)&&s.exit();Ny;){l=Ny.fn,Ny=Ny.next;try{l()}catch(f){throw Ny?y0():n0=void 0,f}}n0=void 0,s&&s.enter()},y0=__?function(){F1.nextTick(Cy)}:T_&&!/(iphone|ipod|ipad).*applewebkit/i.test(O_)?(Z0=!0,b0=document.createTextNode(""),new T_(Cy).observe(b0,{characterData:!0}),function(){b0.data=Z0=!Z0}):L_&&L_.resolve?(i_=L_.resolve(void 0),function(){i_.then(Cy)}):function(){B_.call(Gy,Cy)});var OC,fx,J1,Hx,RC,wN,HA=Zw||function(s){var l={fn:s,next:void 0};n0&&(n0.next=l),Ny||(Ny=l,y0()),n0=l},Ux={f:function(s){return new Xw(s)}},qT=Gy,FL=Xy("species"),wE="Promise",mN=w0.set,K6=Xy("species"),jL=gE.get,Z6=gE.set,X6=gE.getterFor(wE),v2=Gy[wE],VL=Gy.TypeError,vN=Gy.document,WT=Gy.process,BL=Gy.fetch,zL=WT&&WT.versions,Q6=zL&&zL.v8||"",YT=Ux.f,J6=YT,ES="process"==w(WT),_N=!!(vN&&vN.createEvent&&Gy.dispatchEvent),AS="unhandledrejection",CS=mS(wE,function(){function s(){}var l=v2.resolve(1),f=(l.constructor={})[K6]=function(g){g(s,s)};return!((ES||"function"==typeof PromiseRejectionEvent)&&l.then(s)instanceof f&&0!==Q6.indexOf("6.6")&&-1===O_.indexOf("Chrome/66"))}),t8=CS||!function(s,l){if(!_p)return!1;var f=!1;try{var g={};g[BA]=function(){return{next:function(){return{done:f=!0}}}},function(s){v2.all(s).catch(function(){})}(g)}catch(_){}return f}(),e8=function(s,l){mN.call(Gy,function(){var f,g=l.value;if(tA(l)&&(f=m2(function(){ES?WT.emit("unhandledRejection",g,s):bE(AS,s,g)}),l.rejection=ES||tA(l)?2:1,f.error))throw f.value})},tA=function(s){return 1!==s.rejection&&!s.parent},bN=function(s,l){mN.call(Gy,function(){ES?WT.emit("rejectionHandled",s):bE("rejectionhandled",s,l.value)})},G1=function(s,l,f,g){if(!l.done){l.done=!0,g&&(l=g);try{if(s===f)throw VL("Promise can't be resolved itself");var _=zA(f);_?HA(function(){var k={done:!1};try{_.call(f,Qw(G1,s,k,l),Qw(e1,s,k,l))}catch(q){e1(s,k,q,l)}}):(l.value=f,l.state=1,_E(s,l,!1))}catch(k){e1(s,{done:!1},k,l)}}};function D_(s){return(D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function A0(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function mI(s,l){for(var f=0;f<l.length;f++){var g=l[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(s,g.key,g)}}function L0(s,l,f){return l&&mI(s.prototype,l),f&&mI(s,f),s}function _2(s,l,f){return l in s?Object.defineProperty(s,l,{value:f,enumerable:!0,configurable:!0,writable:!0}):s[l]=f,s}function M1(s,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&$T(s,l)}function Q_(s){return(Q_=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(s)}function $T(s,l){return($T=Object.setPrototypeOf||function(f,g){return f.__proto__=g,f})(s,l)}function vI(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(s){return!1}}function NC(s,l,f){return(NC=vI()?Reflect.construct:function(g,_,k){var q=[null];q.push.apply(q,_);var $=new(Function.bind.apply(g,q));return k&&$T($,k.prototype),$}).apply(null,arguments)}function xN(s){var l="function"==typeof Map?new Map:void 0;return(xN=function(f){if(null===f||-1===Function.toString.call(f).indexOf("[native code]"))return f;if("function"!=typeof f)throw new TypeError("Super expression must either be null or a function");if(void 0!==l){if(l.has(f))return l.get(f);l.set(f,_)}function _(){return NC(f,arguments,Q_(this).constructor)}return _.prototype=Object.create(f.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),$T(_,f)})(s)}function KT(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function j1(s){var l=vI();return function(){var f,_,k,q=Q_(s);return _=this,!(k=l?(f=Q_(this).constructor,Reflect.construct(q,arguments,f)):q.apply(this,arguments))||"object"!=typeof k&&"function"!=typeof k?KT(_):k}}function S_(s,l,f){return(S_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(g,_,k){var q=function(_t,_n){for(;!Object.prototype.hasOwnProperty.call(_t,_n)&&null!==(_t=Q_(_t)););return _t}(g,_);if(q){var $=Object.getOwnPropertyDescriptor(q,_);return $.get?$.get.call(k):$.value}})(s,l,f||s)}function g0(s,l){return function(f){if(Array.isArray(f))return f}(s)||function(f,g){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(f)){var _=[],k=!0,q=!1,$=void 0;try{for(var _t,_n=f[Symbol.iterator]();!(k=(_t=_n.next()).done)&&(_.push(_t.value),!g||_.length!==g);k=!0);}catch(_i){q=!0,$=_i}finally{try{k||null==_n.return||_n.return()}finally{if(q)throw $}}return _}}(s,l)||_I(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l_(s){return function(l){if(Array.isArray(l))return p1(l)}(s)||function(l){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(l))return Array.from(l)}(s)||_I(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _I(s,l){if(s){if("string"==typeof s)return p1(s,l);var f=Object.prototype.toString.call(s).slice(8,-1);return"Object"===f&&s.constructor&&(f=s.constructor.name),"Map"===f||"Set"===f?Array.from(s):"Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?p1(s,l):void 0}}function p1(s,l){(null==l||l>s.length)&&(l=s.length);for(var f=0,g=new Array(l);f<l;f++)g[f]=s[f];return g}function ZT(s,l){var f;if("undefined"==typeof Symbol||null==s[Symbol.iterator]){if(Array.isArray(s)||(f=_I(s))||l&&s&&"number"==typeof s.length){f&&(s=f);var g=0,_=function(){};return{s:_,n:function(){return g>=s.length?{done:!0}:{done:!1,value:s[g++]}},e:function(_t){throw _t},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k,q=!0,$=!1;return{s:function(){f=s[Symbol.iterator]()},n:function(){var _t=f.next();return q=_t.done,_t},e:function(_t){$=!0,k=_t},f:function(){try{q||null==f.return||f.return()}finally{if($)throw k}}}}CS&&(v2=function(s){(function(f,g,_){if(!(f instanceof g))throw TypeError("Incorrect Promise invocation")})(this,v2),X2(s),OC.call(this);var l=jL(this);try{s(Qw(G1,this,l),Qw(e1,this,l))}catch(f){e1(this,l,f)}},(OC=function(){Z6(this,{type:wE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(s,l,f){for(var g in l)K2(s,g,l[g],void 0);return s}(v2.prototype,{then:function(s,l){var f=X6(this),g=YT(Ve(this,v2));return g.ok="function"!=typeof s||s,g.fail="function"==typeof l&&l,g.domain=ES?WT.domain:void 0,f.parent=!0,f.reactions.push(g),0!=f.state&&_E(this,f,!1),g.promise},catch:function(s){return this.then(void 0,s)}}),fx=function(){var s=new OC,l=jL(s);this.promise=s,this.resolve=Qw(G1,s,l),this.reject=Qw(e1,s,l)},Ux.f=YT=function(s){return s===v2||s===J1?new fx:J6(s)},"function"==typeof BL&&mE({global:!0,enumerable:!0,forced:!0},{fetch:function(s){return u_(v2,BL.apply(Gy,arguments))}})),mE({global:!0,wrap:!0,forced:CS},{Promise:v2}),zT(v2,wE,!1),Hx=J2(wE),O0&&Hx&&!Hx[FL]&&(0,cx.f)(Hx,FL,{configurable:!0,get:function(){return this}}),J1=qT[wE],mE({target:wE,stat:!0,forced:CS},{reject:function(s){var l=YT(this);return l.reject.call(void 0,s),l.promise}}),mE({target:wE,stat:!0,forced:CS},{resolve:function(s){return u_(this,s)}}),mE({target:wE,stat:!0,forced:t8},{all:function(s){var l=this,f=YT(l),g=f.resolve,_=f.reject,k=m2(function(){var q=X2(l.resolve),$=[],_t=0,_n=1;y2(s,function(_i){var _o=_t++,xa=!1;$.push(void 0),_n++,q.call(l,_i).then(function(ka){xa||(xa=!0,$[_o]=ka,--_n||g($))},_)}),--_n||g($)});return k.error&&_(k.value),f.promise},race:function(s){var l=this,f=YT(l),g=f.reject,_=m2(function(){var k=X2(l.resolve);y2(s,function(q){k.call(l,q).then(f.resolve,g)})});return _.error&&g(_.value),f.promise}}),mE({target:"Promise",proto:!0,real:!0},{finally:function(s){var l=Ve(this,J2("Promise")),f="function"==typeof s;return this.then(f?function(g){return u_(l,s()).then(function(){return g})}:s,f?function(g){return u_(l,s()).then(function(){throw g})}:s)}}),"function"!=typeof Object.assign&&(Object.assign=function(s){if(null==s)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(s),f=1;f<arguments.length;f++){var g=arguments[f];if(null!=g)for(var _ in g)g.hasOwnProperty(_)&&(l[_]=g[_])}return l}),"function"!=typeof Object.values&&(Object.values=function(s){return Object.keys(s).map(function(l){return s[l]})}),Math.hypot=Math.hypot||function(){for(var s=0,l=arguments.length,f=0;f<l;f++){if(arguments[f]===1/0||arguments[f]===-1/0)return 1/0;s+=arguments[f]*arguments[f]}return Math.sqrt(s)},Math.log2=Math.log2||function(s){return Math.log(s)*Math.LOG2E},"undefined"!=typeof window?(!("performance"in window)&&(window.performance={}),RC=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),RC=self.performance),RC&&"function"!=typeof RC.now&&(wN=+new Date,RC.now=function(){return new Date-wN});var n8=b2;function b2(s,l){this.x=s,this.y=l}b2.prototype={clone:function(){return new b2(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,l){return this.clone()._rotateAround(s,l)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var l=s.x-this.x,f=s.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,l){return Math.atan2(this.x*l-this.y*s,this.x*s+this.y*l)},_matMult:function(s){var f=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=f,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var l=Math.cos(s),f=Math.sin(s),_=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=_,this},_rotateAround:function(s,l){var f=Math.cos(s),g=Math.sin(s),k=l.y+g*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-g*(this.y-l.y),this.y=k,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},b2.convert=function(s){return s instanceof b2||!Array.isArray(s)?s:new b2(s[0],s[1])};var Gx=PC;function PC(s,l,f,g,_){this.properties={},this.extent=f,this.type=0,this._pbf=s,this._geometry=-1,this._keys=g,this._values=_,s.readFields(bI,this,l)}function bI(s,l,f){1==s?l.id=f.readVarint():2==s?function(g,_){for(var k=g.readVarint()+g.pos;g.pos<k;){var q=_._keys[g.readVarint()],$=_._values[g.readVarint()];_.properties[q]=$}}(f,l):3==s?l.type=f.readVarint():4==s&&(l._geometry=f.pos)}PC.types=["Unknown","Point","LineString","Polygon"],PC.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var l,f,g=s.readVarint()+s.pos,_=1,k=0,q=0,$=0,_t=[];s.pos<g;)if(k||(_=7&(f=s.readVarint()),k=f>>3),k--,1===_||2===_)q+=s.readSVarint(),$+=s.readSVarint(),1===_&&(l&&_t.push(l),l=[]),l.push(new n8(q,$));else{if(7!==_)throw new Error("unknown command "+_);l&&l.push(l[0].clone())}return l&&_t.push(l),_t},PC.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var l,f=s.readVarint()+s.pos,g=1,_=0,k=0,q=0,$=1/0,_t=-1/0,_n=1/0,_i=-1/0;s.pos<f;)if(_||(g=7&(l=s.readVarint()),_=l>>3),_--,1===g||2===g)(k+=s.readSVarint())<$&&($=k),_t<k&&(_t=k),(q+=s.readSVarint())<_n&&(_n=q),_i<q&&(_i=q);else if(7!==g)throw new Error("unknown command "+g);return[$,_n,_t,_i]},PC.prototype.toGeoJSON=function(s,l,f){var g,_=this.extent*Math.pow(2,f),k=this.extent*s,q=this.extent*l,$=this.loadGeometry(),_t=PC.types[this.type];function _n(ka){for(var _l=0;_l<ka.length;_l++){var _f=ka[_l];ka[_l]=[360*(_f.x+k)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(_f.y+q)/_)*Math.PI/180))-90]}}switch(this.type){case 1:for(var _i=[],_o=0;_o<$.length;_o++)_i[_o]=$[_o][0];_n($=_i);break;case 2:for(_o=0;_o<$.length;_o++)_n($[_o]);break;case 3:for($=function(ka){var _l=ka.length;if(_l<=1)return[ka];for(var _f,_a,_g=[],ty=0;ty<_l;ty++){var ny=function(uy){for(var ry,ly,cy=0,by=0,Oy=uy.length,My=Oy-1;by<Oy;My=by++)cy+=((ly=uy[My]).x-(ry=uy[by]).x)*(ry.y+ly.y);return cy}(ka[ty]);0!==ny&&(void 0===_a&&(_a=ny<0),_a===ny<0?(_f&&_g.push(_f),_f=[ka[ty]]):_f.push(ka[ty]))}return _f&&_g.push(_f),_g}($),_o=0;_o<$.length;_o++)for(g=0;g<$[_o].length;g++)_n($[_o][g])}1===$.length?$=$[0]:_t="Multi"+_t;var xa={type:"Feature",geometry:{type:_t,coordinates:$},properties:this.properties};return"id"in this&&(xa.id=this.id),xa};var LC=Cx;function Cx(s,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(EN,this,l),this.length=this._features.length}function EN(s,l,f){15===s?l.version=f.readVarint():1===s?l.name=f.readString():5===s?l.extent=f.readVarint():2===s?l._features.push(f.pos):3===s?l._keys.push(f.readString()):4===s&&l._values.push(function(g){for(var _=null,k=g.readVarint()+g.pos;g.pos<k;){var q=g.readVarint()>>3;_=1==q?g.readString():2==q?g.readFloat():3==q?g.readDouble():4==q?g.readVarint64():5==q?g.readVarint():6==q?g.readSVarint():7==q?g.readBoolean():null}return _}(f))}function wI(s,l,f){var g;3!==s||(g=new LC(f,f.readVarint()+f.pos)).length&&(l[g.name]=g)}Cx.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var l=this._pbf.readVarint()+this._pbf.pos;return new Gx(this._pbf,l,this.extent,this._keys,this._values)};var aE,eA=function(s,l){this.layers=s.readFields(wI,{},l)},xI=Gx,xE="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},C0={};(function(){var s,l,f="function"==typeof Object.defineProperties?Object.defineProperty:function(kc,eg,fy){kc!=Array.prototype&&kc!=Object.prototype&&(kc[eg]=fy.value)},g="undefined"!=typeof window&&window===this||void 0===xE||null==xE?this:xE;if("function"==typeof Object.setPrototypeOf)s=Object.setPrototypeOf;else{t:{var _={};try{_.__proto__={ea:!0},l=_.ea;break t}catch(kc){}l=!1}s=l?function(kc,eg){if(kc.__proto__=eg,kc.__proto__!==eg)throw new TypeError(kc+" is not extensible");return kc}:null}var k=s;!function(kc,eg){if(eg){var fy=g;kc=kc.split(".");for(var gy=0;gy<kc.length-1;gy++){var yy=kc[gy];yy in fy||(fy[yy]={}),fy=fy[yy]}(eg=eg(gy=fy[kc=kc[kc.length-1]]))!=gy&&null!=eg&&f(fy,kc,{configurable:!0,writable:!0,value:eg})}}("Object.setPrototypeOf",function(kc){return kc||k});var q=this||self;function $(kc){var eg=D_(kc);if("object"==eg){if(!kc)return"null";if(kc instanceof Array)return"array";if(kc instanceof Object)return eg;var fy=Object.prototype.toString.call(kc);if("[object Window]"==fy)return"object";if("[object Array]"==fy||"number"==typeof kc.length&&void 0!==kc.splice&&void 0!==kc.propertyIsEnumerable&&!kc.propertyIsEnumerable("splice"))return"array";if("[object Function]"==fy||void 0!==kc.call&&void 0!==kc.propertyIsEnumerable&&!kc.propertyIsEnumerable("call"))return"function"}else if("function"==eg&&void 0===kc.call)return"object";return eg}function _t(kc){return"function"==$(kc)}function _n(kc){var eg=D_(kc);return"object"==eg&&null!=kc||"function"==eg}function _i(kc,eg){kc=kc.split(".");var fy,gy=q;for((kc[0]in gy||void 0===gy.execScript||gy.execScript("var "+kc[0]));kc.length&&(fy=kc.shift());)kc.length||void 0===eg?gy=gy[fy]&&gy[fy]!==Object.prototype[fy]?gy[fy]:gy[fy]={}:gy[fy]=eg}function _o(kc,eg){function fy(){}fy.prototype=eg.prototype,kc.ua=eg.prototype,kc.prototype=new fy,kc.prototype.constructor=kc}var xa=Math,ka=xa.min,_l=xa.max,_f=xa.round,_a=xa.floor,_g=xa.ceil,ty=xa.abs,ny=xa.log,uy=xa.sqrt,ry=xa.pow,ly=xa.sin,cy=xa.asin,by=xa.cos,Oy=xa.tan,My=xa.atan2,Sy=xa.PI,Vy=Sy/2,e0=Sy/4,Ly=2*Sy,Wy=3*Sy,E0=Sy/180,q0=180/Sy;function F0(kc,eg,fy){return fy<kc?fy:kc<eg?eg:kc}function _0(kc,eg,fy){return eg<fy?eg<=kc&&kc<=fy:fy<=kc&&kc<=eg}function o_(kc,eg,fy,gy,yy,Dy){return uy(ry((kc-yy)*(gy-Dy)-(eg-Dy)*(fy-yy),2)/(ry(fy-yy,2)+ry(gy-Dy,2)))}_i("H.math.normalize",function(kc,eg,fy){return eg-=fy=fy||0,(kc-=fy)-_a(kc/eg)*eg+fy}),_i("H.math.clamp",F0);var J0={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function b_(kc,eg){var fy=kc.x;kc=kc.y;for(var gy,yy,Dy,_v,Yy=eg.length,a0=Yy,x0=eg[0],T0=0,I0=0,m_=0;1!=T0&&1<a0;)yy=eg[--a0],gy=eg[--a0],_v=eg[a0?a0-1:(Yy+(a0-1))%Yy],Dy=eg[a0?a0-2:(Yy+(a0-2))%Yy],fy<=gy&&gy<=fy&&kc<=yy&&yy<=kc||fy<=Dy&&Dy<=fy&&kc<=_v&&_v<=kc?T0=1:T0||gy!==fy?!T0&&_0(fy,gy,Dy)&&((gy<fy&&fy<Dy||fy<gy&&Dy<fy)&&(I0+=kc<(x0=yy+(fy-gy)/(Dy-gy)*(_v-yy)),m_+=x0<kc),T0=_0(kc,yy,_v)&&o_(fy,kc,gy,yy,Dy,_v)<=0?2:0):(Dy===fy&&(yy<kc&&kc<_v||kc<yy&&_v<kc)||(x0<=fy&&fy<Dy||fy<=x0&&Dy<fy)&&(kc<=yy?++I0:++m_),T0=_0(kc,yy,_v)&&o_(fy,kc,gy,yy,Dy,_v)<=0?2:0),x0=gy;return T0||0===m_||I0%2==0||(T0=3),T0!==J0.NONE}function z0(kc,eg){this.x=+kc,this.y=+eg}function w_(kc,eg,fy,gy,yy,Dy,_v,Yy,a0,x0){return kc={x:kc,y:eg,next:fy||null,s:gy||null,ta:yy||null,X:Dy||null,o:!!_v,T:Yy||0,O:a0||0,alpha:x0||0},gy&&(kc.s.next=kc),fy&&(kc.next.s=kc),kc}function x1(kc){for(;kc&&kc.o;)kc=kc.next;return kc}function u1(kc){if(kc)for(;kc.next;)kc=kc.next;return kc}function i1(kc){var eg=u1(kc);(eg.s.next=kc).s=eg.s}function ix(kc){for(var eg=[];kc;)eg.push(kc.x,kc.y),kc=kc.next;return eg}function E1(kc,eg,fy){for(eg=eg.next;eg!==fy&&eg.alpha<=kc.alpha;)eg=eg.next;kc.next=eg,kc.s=eg.s,(kc.next.s=kc).s.next=kc}function c_(kc,eg){for(var fy,gy=null,yy=0,Dy=kc.length;yy<Dy;yy++)(fy=w_(kc[yy].x,kc[yy].y,gy)).qa=eg,(fy.next=gy)&&(gy.s=fy),gy=fy;return gy}function t1(kc,eg,fy,gy){return(kc-=fy)*kc+(eg-=gy)*eg}_i("H.math.CoverType",J0),_i("H.math.isPointInsidePolygon",b_),_i("H.math.flatten",function(kc){for(var eg=kc.length,fy=new Float64Array(2*eg),gy=eg&&kc[0].x!==R1;eg--;){var yy=kc[eg],Dy=eg<<1;fy[Dy]=gy?yy.x:yy[0],fy[1+Dy]=gy?yy.y:yy[1]}return fy}),_i("H.math.Point",z0),(z0.prototype.set=z0).prototype.clone=function(kc){return kc?(kc.x=this.x,kc.y=this.y):kc=new z0(this.x,this.y),kc},z0.prototype.add=function(kc){return this.x+=kc.x,this.y+=kc.y,this},z0.prototype.sub=function(kc){return this.x-=kc.x,this.y-=kc.y,this},z0.prototype.scale=function(kc,eg){return this.x*=kc,this.y*=void 0===eg?kc:eg,this},z0.prototype.round=function(){return this.x=_f(this.x),this.y=_f(this.y),this},z0.prototype.floor=function(){return this.x=_a(this.x),this.y=_a(this.y),this},z0.prototype.ceil=function(){return this.x=_g(this.x),this.y=_g(this.y),this},z0.prototype.equals=z0.prototype.w=function(kc){return!(!kc||this.x!==kc.x||this.y!==kc.y)},z0.prototype.getNearest=z0.prototype.la=function(kc,eg){var fy,gy=eg.x-kc.x,yy=eg.y-kc.y,Dy=kc;return(gy||yy)&&(Dy=(fy=((this.x-kc.x)*gy+(this.y-kc.y)*yy)/(gy*gy+yy*yy))<=0?kc:1<=fy?eg:new z0(kc.x+fy*gy,kc.y+fy*yy)),Dy},z0.prototype.distance=z0.prototype.R=function(kc){return uy(ry(this.x-kc.x,2)+ry(this.y-kc.y,2))},z0.fromIPoint=function(kc){if(!kc)throw Error("invalid argument");return kc instanceof z0?kc:new z0(kc.x,kc.y)},_i("H.math.clipping.clipStrips",function(kc,eg,fy,gy,yy,Dy){var _v,Yy,a0,x0=kc.length;if(x0)for(_v=[];x0--;)for(var I0,m_=kc[x0],z_=m_.length,K_=0,V0=1;V0<z_;V0++)(a0=function(H0,k0,h_,jy,Z_,M_){var R_=H0.x;H0=-H0.y;var A_=k0.x;if(k0=-k0.y,h_=-h_,M_=-M_,A_<R_){if(Z_<A_||R_<jy)return;var X0=R_,P0=H0;R_=A_,H0=k0,A_=X0,k0=P0,X0=1}else if(Z_<R_||A_<jy)return;if(k0<H0){if(h_<k0||H0<M_)return;var h1=1;H0=-H0,k0=-k0,P0=M_,M_=-h_,h_=-P0}else if(h_<H0||k0<M_)return;if(R_<jy){if((H0+=(jy-R_)*(k0-H0)/(A_-R_))>h_)return;R_=jy}if(H0<M_){if((R_+=(M_-H0)*(A_-R_)/(k0-H0))>Z_)return;H0=M_}return Z_<A_&&(k0=H0+(Z_-R_)*(k0-H0)/(A_-R_),A_=Z_),h_<k0&&(A_=R_+(h_-H0)*(A_-R_)/(k0-H0),k0=h_),h1&&(H0=-H0,k0=-k0),X0?[new z0(A_,-k0),new z0(R_,-H0)]:[new z0(R_,-H0),new z0(A_,-k0)]}(m_[V0-1],m_[V0],fy,eg,gy,yy))&&(I0=a0[1],K_&&K_.w(a0[0])?Yy.push(I0):_v.push(Yy=a0),K_=I0,Dy&&(V0=z_,x0=0));else _v=kc;return _v}),_i("H.math.clipping.clipPolygon",function(kc,eg,fy){var gy;kc=c_(kc,!0),eg=c_(eg,!1);var yy={},Dy=gy=1;switch(~~(fy||0)){case 1:Dy=gy=0;break;case 2:gy=0,Dy=1;break;case 3:gy=1,Dy=0}fy=gy;var _v,Yy,a0,x0,T0,I0,m_=Dy;if(eg&&kc){for(eg.M=w_(eg.x,eg.y,null,u1(eg)),kc.M=w_(kc.x,kc.y,null,u1(kc)),Dy=eg;Dy.next;Dy=Dy.next)if(!Dy.o)for(gy=kc;gy.next;gy=gy.next)gy.o||(I0=function K_(V0,H0,k0,h_,jy){var Z_,M_=H0.x-V0.x,R_=H0.y-V0.y,A_=h_.x-k0.x,X0=h_.y-k0.y,P0=M_*X0-R_*A_;return!P0||(A_=((k0.x-V0.x)*X0-(k0.y-V0.y)*A_)/P0,P0=(R_*(k0.x-V0.x)-M_*(k0.y-V0.y))/P0,A_<0||1<A_||P0<0||1<P0)?0:(0===A_?Z_=V0:1===A_?Z_=H0:0===P0?Z_=k0:1===P0&&(Z_=h_),Z_?(Z_.x+=2480549651603763e-20,Z_.y+=7321997314118067e-20,Z_.M&&(Z_.M.x=Z_.x,Z_.M.y=Z_.y),K_(V0,H0,k0,h_,jy)):(jy.xa=V0.x+A_*M_,jy.ya=V0.y+A_*R_,jy.fa=A_,jy.ga=P0,1))}(Dy,_v=x1(Dy.next),gy,Yy=x1(gy.next),yy))&&(a0=yy.ga,E1(I0=w_(x0=yy.xa,T0=yy.ya,null,null,null,null,!0,0,0,I0=yy.fa),Dy,_v),E1(_v=w_(x0,T0,null,null,null,null,!0,0,0,a0),gy,Yy),(I0.X=_v).X=I0);for(yy=b_(eg,ix(kc)),fy&&(yy=!yy),Dy=eg;Dy;Dy=Dy.next)Dy.o&&(yy=!(Dy.T=yy));for(yy=b_(kc,ix(eg)),m_&&(yy=!yy),gy=kc;gy.next;gy=gy.next)gy.o&&(yy=!(gy.T=yy));for(i1(eg),i1(kc);(kc=function(K_){var V0=K_;if(V0)for(;(V0=V0.next)!=K_&&(!V0.o||V0.o&&V0.O););return V0}(eg))!=eg;){for(fy=null;!kc.O;kc=kc.X){for(yy=kc.T;(fy=w_(kc.x,kc.y,fy)).artificial=kc.o||kc.qa,kc.O=1,kc=yy?kc.next:kc.s;)if(kc.o){kc.O=1;break}if(!kc)break}fy.ta=z_;var z_=fy}return z_}}),_i("H.math.simplifyDP",function(kc,eg,fy){return function gy(yy,Dy,_v,Yy,a0){var x0=0,T0=Yy,I0=yy[Yy].x,m_=yy[Yy].y,z_=yy[a0].x,K_=yy[a0].y,V0=Yy+1,H0=t1(I0,m_,z_,K_);if(H0)for(;V0<a0;){var k0=yy[V0++],h_=k0.x,jy=((h_-I0)*(z_-I0)+((k0=k0.y)-m_)*(K_-m_))/H0;x0<(h_=jy<0?t1(h_,k0,I0,m_):1<jy?t1(h_,k0,z_,K_):t1(h_,k0,I0+jy*(z_-I0),m_+jy*(K_-m_)))&&(x0=h_,T0=V0-1)}else for(;V0<a0;)x0<(h_=t1(h_=(k0=yy[V0++]).x,k0=k0.y,I0,m_))&&(x0=h_,T0=V0-1);return Dy<=x0||0<_v&&T0-Yy?(--_v,1<T0-Yy?(Yy=gy(yy,Dy,_v,Yy,T0)).splice(Yy.length-1,1):Yy=[yy[Yy]],Yy.concat(1<a0-T0?gy(yy,Dy,_v,T0,a0):yy.slice(T0,a0+1))):[yy[Yy],yy[a0]]}(kc,eg*eg,fy||0,0,kc.length-1)});var z1=this,O1=String,R1=[].pop(),N2=/x/.exec(""),ox="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sx(kc,eg){if(kc instanceof eg&&kc.constructor===eg)throw new TypeError("Illegal constructor "+RE(eg))}_i("H.lang.isArray",function(kc,eg,fy,gy){var yy;if(!(yy="Array"===OE(kc))&&eg)throw new $_(eg,fy,gy!==R1?gy:kc);return yy}),_i("H.lang.isString",function(kc){return"string"==typeof kc});var o1=isNaN;function Pw(kc){return kc===+kc}function OE(kc){var eg=Object[ox[0]][ox[6]].call(kc).match(/^\[object (\w+)\]$/);return eg?eg[1]:D_(kc)}_i("H.lang.isNumber",Pw),_i("H.lang.isInteger",Number.isInteger?Number.isInteger:function(kc){return"number"==typeof kc&&kc%1==0});var Zx=[];function RE(kc,eg,fy,gy){var yy,Dy,_v="",Yy=arguments.length<2;return Yy&&(eg={H:z1.H},fy="",gy=Zx.slice()),P2(eg,!0,function(a0,x0){try{if(T0=yy=a0[x0],P2(a0,!(I0=[]),function(m_,z_){m_[z_]===T0&&I0.push(z_)}),x0=I0.sort(YD)[0],!(_n(yy)&&yy.window===yy&&yy.self===yy||_n(yy)&&0<yy.nodeType&&_t(yy.cloneNode))&&_n(yy)){if(yy===kc)return _v=fy+"."+x0,1;if(gy.indexOf(yy)<0&&(gy.push(yy),_v=RE(kc,yy,fy+"."+x0,gy)))return 1}}catch(m_){}var T0,I0}),Yy&&(_v=_v?_v.substr(1).replace("."+ox[0]+".","#"):"~"+(_t(kc)?((Dy=/^\s*function ([^\( ]+)/.exec(Dy=kc))?Dy[1]:"anonymous")+"()":OE(kc))),_v}function YD(kc,eg){return eg.length-kc.length}Zx.indexOf(Zx)<0&&Zx.push(Zx);var hC=Object[ox[0]][ox[2]];function P2(kc,eg,fy){var gy;if(kc){for(yy in kc)if((!eg||hC.call(kc,yy))&&fy(kc,yy,!0))return;for(gy=ox.length;gy--;){var yy=ox[gy];if((!eg||hC.call(kc,yy))&&fy(kc,yy,!1))break}}}function yT(kc,eg,fy){fy[eg]="#"+eg}function $_(kc,eg,fy){var gy,yy,Dy=arguments.length;return(eg=eg!==R1?+eg:eg)!==R1&&((yy=gy=(yy=/^.*?\(([^\)]+)/.exec((""+kc).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?O1(yy[1].replace(/\s+/g,"")).split(","!==R1?",":" "):[]).forEach(yT),yy=yy[eg]||"#"+eg),gy=kc?RE(kc):"",Dy=2<Dy?O1(fy):"",(yy||Dy)&&(gy+=" (Argument "+(yy||"")+(Dy?" "+Dy:"")+")"),Dy=Error(gy),Object.setPrototypeOf(Dy,$_.prototype),Dy}function Nx(kc,eg,fy){var gy=F0(+kc,-90,90);if(eg&&o1(gy))throw new $_(eg,fy,kc);return gy}function Xx(kc,eg,fy){var gy,yy=+kc;if((yy<-180||180<yy)&&(yy=((gy=(yy+180)%360)<0?360+gy:gy)-180),eg&&o1(yy))throw new $_(eg,fy,kc);return yy}function yR(kc,eg,fy){var gy;if(kc!==R1&&o1(gy=+kc)&&eg)throw new $_(eg,fy,kc);return gy}function W1(){sx(this,W1)}function d_(kc,eg,fy){this.lat=Nx(kc,d_,0),this.lng=Xx(eg,d_,1),fy!==R1&&(this.alt=yR(fy,d_,2))}function t2(kc,eg,fy){var gy=_n(kc)&&!(o1(kc.lat=Nx(kc.lat))||o1(kc.lng=Xx(kc.lng))||kc.alt!==R1&&o1(kc.alt=yR(kc.alt)));if(!gy&&eg)throw new $_(eg,fy,kc);return gy}function o0(kc,eg,fy,gy){fC(this,Nx(kc,o0,0),Xx(eg,o0,1),Nx(fy,o0,2),Xx(gy,o0,3))}function fC(kc,eg,fy,gy,yy){return kc.f=fy,kc.g=yy,eg<gy&&(fy=eg,eg=gy,gy=fy),kc.i=eg,kc.h=gy,kc.m=kc.b=kc.c=null,kc}function e2(kc,eg){return(kc=eg-kc)+(kc<0?360:0)}function pC(kc,eg){return(kc+=eg/2)-(180<kc?360:0)}function dC(kc,eg,fy,gy,yy,Dy,_v,Yy,a0){fy=ka(fy,_v),kc=_l(kc,yy);var x0=pC(eg,yy=e2(eg,gy)),T0=pC(Dy,_v=e2(Dy,Yy))-x0,I0=(T0+=T0-1e-6<0?360:0)-1e-6<180?(x0=eg,Yy):(T0=360-T0,x0=Dy,gy);return 360<=(T0=T0+yy/2+_v/2)+5e-7?(x0=-180,I0=180):T0-5e-7<yy?(x0=eg,I0=gy):T0-5e-7<_v&&(x0=Dy,I0=Yy),a0?fC(a0,kc,x0,fy,I0):new o0(kc,x0,fy,I0)}function _A(kc,eg,fy){return fy||(t2(kc,_A,0),t2(eg,_A,1)),new o0(kc.lat,kc.lng,eg.lat,eg.lng)}function NE(kc,eg,fy,gy,yy,Dy){sx(this,NE),this.sa=kc||10,this.c=this.b=null,this.j=gy||0,this.l=yy||0,this.m=eg||1,this.u=fy||1,this.I=!!Dy,this.flush()}function bA(kc,eg,fy){var gy,yy;if(kc.I&&(gy=kc.c))for(yy=3;0<=yy;yy--){var Dy=eg[yy];if(yy%3?Dy>=gy[yy]:Dy<=gy[yy]){if(!fy){kc.c=null;break}gy[yy]=Dy}}}function hF(kc,eg){var fy,gy=kc.a;if(eg){var yy=eg;if(yy!==gy)for(gy=yy;yy=yy.c;)(yy.entries||1<yy.a)&&(gy=yy)}else for(;!gy.entries&&(fy=gy.a)<2&&fy;)gy=yy;kc.a=gy}_o($_,Error),_i("H.lang.InvalidArgumentError",$_),$_.prototype.name="InvalidArgumentError",_i("H.geo.isDBC",function(kc,eg){return 0!=(kc<0^eg<0)&&180<ty(eg-kc)}),_i("H.geo.AbstractGeometry",W1),W1.prototype.getBoundingBox=W1.prototype.D,W1.prototype.equals=W1.prototype.w,W1.prototype.a="",W1.prototype.l="",W1.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},W1.prototype.toGeoJSON=W1.prototype.va=function(){return{type:this.l,coordinates:this.u()}},W1.prototype.forWorkerMessage=W1.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},_o(d_,W1),_i("H.geo.Point",d_),d_.prototype.equals=d_.prototype.w=function(kc){return this===kc||!!kc&&this.lat===kc.lat&&this.lng===kc.lng&&(this.alt||0)===(kc.alt||0)},d_.prototype.distance=d_.prototype.R=function(kc){var eg,fy;return this===kc||this.lat===kc.lat&&this.lng===kc.lng?0:12742001.58*cy(ka(1,uy(ry(ly(((eg=this.lat*E0)-(fy=kc.lat*E0))/2),2)+by(eg)*by(fy)*ry(ly((this.lng*E0-kc.lng*E0)/2),2))))},d_.prototype.walk=d_.prototype.wa=function(kc,eg,fy){var gy,yy,Dy,_v,Yy,a0,x0;return fy?((eg/=6371000.79)&&(kc*=E0,gy=ly(Yy=E0*this.lat),yy=ly(eg),Dy=by(eg),_v=E0*this.lng,a0=by(Yy),Yy=cy(a0*by(kc)*yy+gy*Dy),a0=(kc=(_v+(kc=My(ly(kc)*a0*yy,Dy-gy*ly(Yy)))+Sy)%(2*Sy)-Sy)*q0),eg?new d_(Yy*q0,(a0+540)%360-180):this):(90+(kc=(kc%360+360)%360))%180==0?(Yy=this.lng+eg/(6371000.79*Ly*by(this.lat*E0))*(270===kc?-360:360),new d_(this.lat,(Yy+540)%360-180)):((eg/=6371000.79)&&(gy=this.lng*E0,Dy=(yy=(_v=this.lat*E0)+eg*by(kc*=E0))-_v,Yy=ny(Oy(yy/2+e0)/Oy(_v/2+e0)),Yy=o1(Dy/Yy)?by(_v):Dy/Yy,x0=eg*ly(kc)/Yy,ty(yy)>Vy&&(yy=0<yy?Sy-yy:-(Sy+yy))),eg?new d_(yy*q0,((gy+x0+Wy+(ty(_v+Dy)>Vy?Sy:0))%Ly-Sy)*q0):this)},d_.prototype.getBoundingBox=d_.prototype.D=function(){return new o0(this.lat,this.lng,this.lat,this.lng)},d_.validate=t2,d_.fromIPoint=function kc(eg){if(!eg)throw new $_(kc,0,eg);return new d_(eg.lat,eg.lng,eg.alt)},d_.prototype.a="Point",d_.prototype.I=function(kc){return kc.push("(",this.lng," ",this.lat,")"),kc},d_.prototype.l="Point",d_.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},d_.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},_o(o0,W1),_i("H.geo.Rect",o0),o0.prototype.a="Polygon",o0.prototype.I=function(kc){var eg=this.i,fy=this.f,gy=this.h,yy=this.g;return kc.push("(","(",fy," ",eg,",",yy," ",eg,",",yy," ",gy,",",fy," ",gy,",",fy," ",eg,")",")"),kc},o0.prototype.equals=o0.prototype.w=function(kc){return this===kc||!!kc&&this.i===kc.i&&this.f===kc.f&&this.h===kc.h&&this.g===kc.g},o0.prototype.clone=function(){return new o0(this.i,this.f,this.h,this.g)},o0.prototype.getTopLeft=o0.prototype.W=function(){return this.m||(this.m=new d_(this.i,this.f)),this.m},o0.prototype.getBottomRight=o0.prototype.V=function(){return this.b||(this.b=new d_(this.h,this.g)),this.b},o0.prototype.getTop=o0.prototype.na=function(){return this.i},o0.prototype.getBottom=o0.prototype.ha=function(){return this.h},o0.prototype.getLeft=o0.prototype.ja=function(){return this.f},o0.prototype.getRight=o0.prototype.ma=function(){return this.g},o0.prototype.getCenter=o0.prototype.F=function(){return this.c||(this.c=new d_(this.h+(this.i-this.h)/2,pC(this.f,this.A()))),this.c},o0.prototype.getWidth=o0.prototype.A=function(){return e2(this.f,this.g)},o0.prototype.getHeight=o0.prototype.G=function(){return this.i-this.h},o0.prototype.isCDB=o0.prototype.N=function(){return this.f>this.g},o0.prototype.isEmpty=o0.prototype.ra=function(){return!this.A()&&!this.G()},o0.prototype.getBoundingBox=o0.prototype.D=function(){return new o0(this.i,this.f,this.h,this.g)},o0.prototype.containsLatLng=o0.prototype.L=function(kc,eg,fy){var gy=this.F();return fy||(kc=Nx(kc,this.L,0),eg=Xx(eg,this.L,1)),(kc=(eg=this.B(kc,eg,fy)).F()).lat===gy.lat&&kc.lng===gy.lng&&this.G()===eg.G()&&this.A()===eg.A()},o0.prototype.containsPoint=o0.prototype.$=function(kc,eg){return eg||t2(kc,this.$,0),this.L(kc.lat,kc.lng,eg)},o0.prototype.containsRect=o0.prototype.aa=function(kc,eg){var fy=this.F();if(!(eg||kc instanceof o0))throw new $_(this.aa,0,kc);return(kc=(eg=this.J(kc,eg)).F()).lat===fy.lat&&kc.lng===fy.lng&&this.G()===eg.G()&&this.A()===eg.A()},o0.prototype.mergeLatLng=o0.prototype.B=function(kc,eg,fy,gy){if(!fy){if(o1(kc=Nx(kc)))throw new $_(this.B,0,kc);if(o1(eg=Xx(eg)))throw new $_(this.B,1,eg)}return dC(this.i,this.f,this.h,this.g,kc,eg,kc,eg,gy)},o0.prototype.mergePoint=o0.prototype.ca=function(kc,eg,fy){return eg||t2(kc,this.ca,0),this.B(kc.lat,kc.lng,eg,fy)},o0.prototype.mergeRect=o0.prototype.J=function(kc,eg,fy){if(!(eg||kc instanceof o0))throw new $_(this.J,0,kc);return dC(this.i,this.f,this.h,this.g,kc.i,kc.f,kc.h,kc.g,fy)},o0.prototype.mergeTopLeftBottomRight=o0.prototype.C=function(kc,eg,fy,gy,yy,Dy){return yy||(kc=Nx(kc,this.C,0),eg=Xx(eg,this.C,1),fy=Nx(fy,this.C,2),gy=Xx(gy,this.C,3)),dC(this.i,this.f,this.h,this.g,kc,eg,fy,gy,Dy)},o0.prototype.intersects=o0.prototype.ba=function(kc,eg){var fy=this.f<=this.g,gy=kc.f<=kc.g,yy=this.f<kc.g,Dy=kc.f<this.g;if(!(eg||kc instanceof o0))throw new $_(this.ba,0,kc);return this.h<=kc.i&&kc.h<=this.i&&(!fy&&(!gy||yy||Dy)||!gy&&(yy||Dy)||yy&&Dy)},o0.merge=dC,o0.fromPoints=_A,o0.coverPoints=function kc(eg,fy){var gy=1,yy=eg.length,Dy=null,_v=$(eg);if("array"!=_v&&("object"!=_v||"number"!=typeof eg.length))throw new $_(kc,0,eg);if(0<yy)for(Dy=_A(_v=eg[0],_v,fy);gy<yy;gy++)Dy.B((_v=eg[gy]).lat,_v.lng,fy,Dy);return Dy},o0.coverLatLngAlts=function kc(eg,fy){var gy,yy=3,Dy=eg.length;if(!(fy||eg&&null!=eg.length))throw new $_(kc,0,eg);if(0<Dy)for(gy=new o0(eg[0],eg[1],eg[0],eg[1]);yy<Dy;yy+=3)gy.B(eg[yy],eg[yy+1],fy,gy);return gy},o0.coverRects=function kc(eg,fy){var gy,yy=1,Dy=eg.length;if(fy&&(!eg||null==eg.length))throw new $_(kc,0,eg);if(0<Dy)for(gy=new o0(eg[0].i,eg[0].f,eg[0].h,eg[0].g);yy<Dy;yy++)gy.J(eg[yy],fy,gy);return gy},o0.prototype.resizeToCenter=o0.prototype.da=function(kc,eg){var fy=this.f,gy=this.i,yy=this.g,Dy=this.h,_v=this.F().lng;t2(kc,this.da,0);var Yy=kc.lat-Dy-(gy-Dy)/2,a0=kc.lng-_v;return kc=(kc=fy+((a0=180<a0||a0<-180?-(_v+kc.lng):a0)<0?2*a0:0))<-180?360+kc:kc,yy=180<(yy+=0<a0?2*a0:0)?yy-360:yy,90<=(gy=0<Yy?gy+2*Yy:gy)&&(gy=90),(Dy=Yy<0?Dy+2*Yy:Dy)<=-90&&(Dy=-90),eg?fC(eg,gy,kc,Dy,yy):new o0(gy,kc,Dy,yy)},o0.prototype.l="Polygon",o0.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},o0.prototype.U=function(){return this.j()},o0.prototype.j=function(){return[this.i,this.f,this.h,this.g]},NE.prototype.remove=function(kc){var eg,fy,gy,yy,Dy,_v,Yy=!1;if(kc&&(eg=kc.a)&&eg.b===this&&(fy=eg.entries)&&0<=(gy=fy.indexOf(kc))){for(fy.splice(gy,1),fy=this.a;eg;)(yy=eg.entries)&&yy.length||(yy&&delete eg.entries,eg.a||!(Dy=eg.c))?eg=N2:((gy=Dy)[_v=(Yy=eg).j]===Yy&&(delete gy[_v],delete Yy.c,--gy.a),fy===eg&&(fy=Dy),eg=Dy);this.a!==fy&&(this.a=fy,hF(this)),bA(this,kc,!1),Yy=!0}return Yy},NE.prototype.flush=function(){var kc=new a3(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(kc.b=this).a=this.b=kc,this.c=null},NE.prototype.o=function(kc,eg,fy,gy,yy,Dy){var _v=[],Yy=this.a,a0=this.b;return kc<=Yy[5]&&eg<=Yy[6]&&(yy?fy>=Yy[7]:fy>Yy[7])&&(Dy?gy>=Yy[4]:gy>Yy[4])&&function x0(T0,I0,m_,z_,K_,V0,H0,k0,h_){var jy,Z_=I0.entries,M_=I0[7],R_=I0[4],A_=I0[5],X0=I0[6],P0=I0[8],h1=I0[9];if(Z_){var _R=Z_.length;if(R_<K_||M_<z_||H0<X0||V0<A_)for(;_R--;)R_=(M_=Z_[_R])[3],A_=M_[0],X0=M_[1],K_<=M_[2]&&z_<=X0&&(A_<H0||k0&&A_==H0)&&(R_<V0||h_&&R_==V0)&&m_.push(M_);else for(;_R--;)m_.push(Z_[_R])}(P0<V0||h_&&V0==P0)&&(K_<h1&&(jy=I0[1])&&x0(T0,jy,m_,z_,K_,V0,H0,k0,h_),(h1<H0||k0&&H0==h1)&&(jy=I0[3])&&x0(T0,jy,m_,z_,K_,V0,H0,k0,h_)),z_<P0&&(K_<h1&&(jy=I0[0])&&x0(T0,jy,m_,z_,K_,V0,H0,k0,h_),(h1<H0||k0&&H0==h1)&&(jy=I0[2])&&x0(T0,jy,m_,z_,K_,V0,H0,k0,h_))}(this,Yy,_v,kc,eg,fy,gy,Dy||gy>=a0[6],yy||fy>=a0[5]),_v};var fF=0;function a3(kc,eg,fy,gy,yy,Dy){this.j=eg,kc&&(this.c=kc,this.b=kc.b,yy=1&eg?(fy=kc[8],kc[5]):(fy=kc[7],kc[8]),Dy=2&eg?(gy=kc[9],kc[6]):(gy=kc[4],kc[9])),this[7]=fy,this[5]=yy,this[8]=(fy+yy)/2,this[4]=gy,this[6]=Dy,this[9]=(gy+Dy)/2}function mR(kc,eg,fy,gy,yy,Dy){mR.ua.constructor.apply(this,arguments)}function u3(kc,eg,fy,gy,yy,Dy,_v){var Yy,a0,x0=eg[8],T0=eg[9];return _v&&(yy<x0||(Yy=x0<=fy))&&(Dy<T0||(a0=T0<=gy))?fy=(x0=u3)(kc,eg=eg[Yy|=a0<<1]||(++eg.a,eg[Yy]=new a3(eg,Yy)),fy,gy,yy,Dy,_v-1):(gy=fy=new RM(fy,gy,yy,Dy),(eg.entries||(eg.entries=[])).push(gy),gy.a=eg,bA(kc,fy,!0),hF(kc,eg)),fy}function RM(kc,eg,fy,gy){this.id=fF++,this[0]=eg,this[1]=fy,this[2]=gy,this[3]=kc}function n2(kc){this.l=new mR(+kc||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function l3(kc,eg,fy,gy,yy,Dy){if(Dy)Dy=new RM(yy,-eg,fy+360,-gy),kc.j.push(Dy),kc.m=!0,kc.a&&kc.a.C(eg,fy,gy,yy,!0,kc.a);else{var _v=-eg,Yy=-gy,a0=(Dy=kc.l).b,x0=a0[5],T0=a0[6];if(!(a0[7]<=fy&&a0[4]<=_v&&(yy<x0||x0===yy&&x0===a0.b.b[5])&&(Yy<T0||T0===Yy&&T0===a0.b.b[6])))throw Error("Coordinates out of bounds");Dy=u3(Dy,Dy.b,fy,_v,yy,Yy,Dy.sa),kc.b&&kc.b.C(eg,fy,gy,yy,!0,kc.b)}return kc.c=null,Dy}function pF(kc,eg,fy,gy,yy,Dy,_v){var Yy=(kc=kc.j).length,a0=[];if(Yy)for(var x0=fy+360,T0=yy+360;Yy--;){var I0=kc[Yy];(dF(I0,eg,fy,gy,yy,Dy,_v)||dF(I0,eg,x0,gy,T0,Dy,_v))&&a0.push(I0)}return a0}function dF(kc,eg,fy,gy,yy,Dy,_v){var Yy=kc[3],a0=kc[0],x0=kc[1];return kc=kc[2],(Dy?a0<=gy:a0<gy)&&(_v?Yy<=yy:Yy<yy)&&eg<=kc&&fy<=x0}function c3(kc,eg){var fy,gy;if(fy=eg.length){for(var yy=kc.length,Dy={};yy--;)Dy[kc[yy].id]=1;for(;fy--;)(gy=eg[fy]).id in Dy||kc.push(gy)}}function hE(){}function A1(kc,eg,fy){if(this.l=[],eg&&this.K(eg),fy&&!_t(fy))throw new $_(A1,2,fy);this.b=0,this.m=fy,this.a={},this.j=this.c=null,this.Z(kc)}function gF(kc,eg){return eg&&(kc.c=gC(kc,eg,kc.c)),eg}function h3(kc){for(;kc.b>kc.u&&kc.j;)NM(kc,kc.j,!0)}function gC(kc,eg,fy){return fy!==eg&&((eg.H||eg.v)&&NM(kc,eg,!1),(eg.H=fy)&&(eg.v=fy.v,fy.v=eg),eg.v||(kc.c=eg),eg.H||(kc.j=eg),kc.b+=eg.size),eg}function NM(kc,eg,fy){var gy=eg.v,yy=eg.H;(gy||yy||eg==kc.c&&eg==kc.j)&&(gy?gy.H=yy:kc.c=yy,yy?yy.v=gy:kc.j=gy,kc.b-=eg.size,fy&&(delete kc.a[eg.id],vR(kc,eg))),eg.H=eg.v=null}function vR(kc,eg){for(var fy=kc.l.length;fy--;)kc.l[fy].call(kc,eg.id,eg.data,eg.size)}a3.prototype.a=0,_o(mR,NE),_i("H.geo.QuadTree",n2),n2.prototype.N=function(){return this.m},n2.prototype.D=function(){var kc;if(!this.c){var eg,fy,gy=[];if((_v=!this.b)&&(Yy=(Dy=this.l).c,Dy.I&&!Yy&&((_v=Dy.a).entries||_v[0]||_v[1]||_v[2]||_v[3])&&(Yy=function x0(T0,I0){for(var m_,z_,K_=0,V0=3;0<=V0;V0--){for(var H0=V0+4,k0=0<V0%3,h_=[],jy=I0[V0],Z_=T0[V0],M_=Z_.length;M_--;){var R_=Z_[M_];if(m_=R_.entries)for(z_=m_.length;z_--;){var A_=m_[z_][V0];(k0?jy<A_:A_<jy)&&(jy=A_)}for(z_=4;z_--;)(m_=R_[z_])&&(k0?m_[H0]>jy:m_[H0]<jy)&&h_.push(m_)}K_+=h_.length,I0[V0]=jy,T0[V0]=h_}return K_&&(I0=x0(T0,I0)),I0}([Yy=[_v],Yy,Yy,Yy],[_v[6],_v[7],_v[4],_v[5]]),Dy.c=Yy),_v=Dy=Yy),_v&&(this.b=new o0(-Dy[0],Dy[3],-Dy[2],Dy[1])),(kc=this.b)&&gy.push(kc),!this.a&&(fy=(eg=this.j).length)){for(_v=360,Yy=-(Dy=90),a0=0;fy--;)var yy=eg[fy],Dy=ka(Dy,yy[0]),_v=ka(_v,yy[3]),Yy=_l(Yy,yy[2]),a0=_l(a0,yy[1]);this.a=new o0(-Dy,_v,-Yy,a0-360)}(kc=this.a)&&gy.push(kc),(kc=gy[0])&&(gy[1]&&(kc=kc.J(gy[1],!0)),this.c=kc)}return this.c},n2.prototype.insertBoundingBox=n2.prototype.oa=function(kc){var eg=kc.W(),fy=kc.V();return(kc=kc.N())?l3(this,eg.lat,fy.lng,fy.lat,eg.lng,kc):l3(this,eg.lat,eg.lng,fy.lat,fy.lng,kc)},n2.prototype.remove=function(kc){var eg,fy;return kc.a?(fy=this.l.remove(kc),this.b=null):(fy=0<=(kc=(eg=this.j).indexOf(kc)))&&(eg.splice(kc,1),this.m=0<eg.length,this.a=null),fy&&(this.c=null),fy},n2.prototype.intersectBoundingBox=n2.prototype.pa=function(kc,eg,fy){var gy=this.l,yy=kc.W(),Dy=kc.V(),_v=-yy.lat,Yy=(yy=yy.lng,-Dy.lat);return Dy=Dy.lng,!eg&&_v==Yy||!fy&&yy===Dy?kc=[]:kc.N()?(c3(kc=gy.o(-180,_v,Dy,Yy,fy,eg),gy.o(yy,_v,180,Yy,!1,eg)),c3(kc,pF(this,_v,Dy,Yy,yy+360,eg,fy))):c3(kc=gy.o(yy,_v,Dy,Yy,fy,eg),pF(this,_v,yy,Yy,Dy,eg,fy)),kc},_i("H.util.ICache",hE),hE.prototype.add=function(){},hE.prototype.get=function(){},hE.prototype.drop=hE.prototype.S=function(){},hE.prototype.forEach=function(){},hE.prototype.removeAll=hE.prototype.Y=function(){},hE.prototype.registerOnDrop=hE.prototype.K=function(){},hE.prototype.deRegisterOnDrop=hE.prototype.P=function(){},_i("H.util.Cache",A1),A1.prototype.add=function(kc,eg,fy){var gy,yy;if(!Pw(fy=+fy)||fy<0)throw new $_(this.add,2,fy);return kc=String(kc),(yy=!this.m||this.m(kc,eg,fy))&&((gy=this.a[kc])?(gy.data!==eg&&vR(this,gy),this.b+=fy-gy.size,gy.size=fy,gy.data=eg,gF(this,gy)):this.a[kc]=gC(this,{id:kc,data:eg,size:fy,H:null,v:null},this.c),h3(this)),yy},A1.prototype.registerOnDrop=A1.prototype.K=function(kc){if(!_t(kc))throw new $_(this.K,0,kc);this.l.push(kc)},A1.prototype.deRegisterOnDrop=A1.prototype.P=function(kc){this.l=this.l.filter(function(eg){return eg!==kc})},A1.prototype.get=function(kc,eg){return(kc=eg?this.a[kc]:gF(this,this.a[kc]))&&kc.data},A1.prototype.drop=A1.prototype.S=function(kc){var eg;(eg=this.a[kc])&&NM(this,eg,!0)},A1.prototype.forEach=function(kc,eg,fy){var gy;for(gy in this.a){var yy=this.a[gy];fy&&!fy(gy,yy.data,yy.size)||kc.call(eg,gy,yy.data,yy.size)}},A1.prototype.removeAll=A1.prototype.Y=function(kc){var eg;for(eg in this.a){var fy=this.a[eg];kc&&!kc(eg,fy.data,fy.size)||NM(this,this.a[eg],!0)}},A1.prototype.setMaxSize=A1.prototype.Z=function(kc){if(!(0<+kc))throw new $_(A1.prototype.Z,0,kc);return this.u=+kc,h3(this),this},A1.prototype.getMaxSize=A1.prototype.ka=function(){return this.u},A1.prototype.getCurrentSize=A1.prototype.ia=function(){return this.b}}).call(C0);var i0,J_=aE={};function AN(s){return NC(C0.H.math.Point,l_(s))}aE.clipPolygon=function(s,l){var f,g,_,k=[],q=C0.H.math.clipping.clipPolygon(s.map(AN),l.map(AN));if(q)do{for(f=[],g=q;f.push([(_=g).x,_.y]),g=g.next;);k.push(f)}while(q=q.nextPoly);else aE.isPointInsidePolygon(l[0],s)?k.push(l):aE.isPointInsidePolygon(s[0],l)&&k.push(s);return k},aE.isPointInsidePolygon=function(s,l){return C0.H.math.isPointInsidePolygon({x:s[0],y:s[1]},C0.H.math.flatten(l))},aE.clamp=function(s,l,f){return(s-=0)>f?f:s<l?l:s},aE.splitLegs=function(s,l){var f=[];s.push(s[0]);for(var g=0;g<s.length-1;g++){var k=s[g],q=s[g+1];f.push(k),Math.abs(q[0]-k[0])>=l&&f.push([(k[0]+q[0])/2,(k[1]+q[1])/2])}return f.length!==s.length-1?aE.splitLegs(f,l):f},aE.getBBox=function(s){var l=1/0,f=1/0,g=-1/0,_=-1/0;return s.forEach(function(k){k[0]<l&&(l=k[0]),k[1]<f&&(f=k[1]),k[0]>g&&(g=k[0]),k[1]>_&&(_=k[1])}),[l,f,g,_]},aE.getBBoxCenter=function(s){var l=g0(s,4),f=l[0],g=l[1];return[f+(l[2]-f)/2,g+(l[3]-g)/2]},aE.getLineLength=function(s,l,f,g){return Math.sqrt(Math.pow(s-f,2)+Math.pow(l-g,2))},aE.modulo=function(s,l){var f;return(f=s%l)<0==l<0?f:f+l};var Ry=i0={};i0.default_source_max_zoom=18,i0.default_view_max_zoom=20,i0.tile_size=256,i0.half_circumference_meters=20037508.342789244,i0.circumference_meters=2*i0.half_circumference_meters,i0.min_zoom_meters_per_pixel=i0.circumference_meters/i0.tile_size;var TS=[];i0.metersPerPixel=function(s){return TS[s]=TS[s]||i0.min_zoom_meters_per_pixel/Math.pow(2,s),TS[s]};var EI=[];i0.metersPerTile=function(s){return EI[s]=EI[s]||i0.circumference_meters/Math.pow(2,s),EI[s]},i0.tile_scale=4096,i0.units_per_pixel=i0.tile_scale/i0.tile_size,i0.height_scale=16;var AI=[];i0.unitsPerMeter=function(s){return AI[s]=AI[s]||i0.tile_scale/(i0.tile_size*i0.metersPerPixel(s)),AI[s]},i0.metersForTile=function(s){return{x:s.x*i0.circumference_meters/Math.pow(2,s.z)-i0.half_circumference_meters,y:-(s.y*i0.circumference_meters/Math.pow(2,s.z)-i0.half_circumference_meters)}},i0.tileForMeters=function(s,l){var f=g0(s,2),_=f[1];return{x:Math.floor((f[0]+i0.half_circumference_meters)/(i0.circumference_meters/Math.pow(2,l))),y:Math.floor((-_+i0.half_circumference_meters)/(i0.circumference_meters/Math.pow(2,l))),z:l}},i0.metersToExactTileCoords=function(s,l){var f=g0(s,2),g=f[0],_=f[1];return{x:Math.pow(2,l-1)*(1+g/i0.half_circumference_meters),y:Math.pow(2,l-1)*(1-_/i0.half_circumference_meters),z:l}},i0.wrapTile=function(s){var l=s.x,f=s.y,g=s.z,_=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},k=(1<<g)-1;return _.x&&(l&=k),_.y&&(f&=k),{x:l,y:f,z:g}},i0.wrapMeters=function(s){var f=s.y;return{x:J_.modulo(s.x+i0.half_circumference_meters,i0.circumference_meters)-i0.half_circumference_meters,y:f}},i0.metersToLatLng=function(s){var l=g0(s,2),f=l[0],g=l[1];return f/=i0.half_circumference_meters,g/=i0.half_circumference_meters,g=(2*Math.atan(Math.exp(g*Math.PI))-Math.PI/2)/Math.PI,[f*=180,g*=180]},i0.latLngToMeters=function(s){var l=g0(s,2),f=l[0],g=l[1];return g=Math.log(Math.tan(g*Math.PI/360+Math.PI/4))/Math.PI,g*=i0.half_circumference_meters,g=Math.min(Math.max(g,-i0.half_circumference_meters),i0.half_circumference_meters),[f*=i0.half_circumference_meters/180,g]},i0.tileSpaceToMeters=function(s,l,f){var g=g0(s,2),_=g[0],k=g[1],q=i0.unitsPerMeter(l);return[_/q+f.x,k/q+f.y]},i0.tileSpaceToLatlng=function(s,l,f){var g=i0.unitsPerMeter(l);return i0.transformGeometry(s,function(_){_[0]=_[0]/g+f.x,_[1]=_[1]/g+f.y;var k=g0(i0.metersToLatLng(_),2),$=k[1];_[0]=k[0],_[1]=$}),s},i0.copyGeometry=function(s){if(null!=s){var l={type:s.type};return"Point"===s.type?l.coordinates=[s.coordinates[0],s.coordinates[1]]:"LineString"===s.type||"MultiPoint"===s.type?l.coordinates=s.coordinates.map(function(f){return[f[0],f[1]]}):"Polygon"===s.type||"MultiLineString"===s.type?l.coordinates=s.coordinates.map(function(f){return f.map(function(g){return[g[0],g[1]]})}):"MultiPolygon"===s.type&&(l.coordinates=s.coordinates.map(function(f){return f.map(function(g){return g.map(function(_){return[_[0],_[1]]})})})),l}},i0.transformGeometry=function(s,l){null!=s&&("Point"===s.type?l(s.coordinates):"LineString"===s.type||"MultiPoint"===s.type?s.coordinates.forEach(l):"Polygon"===s.type||"MultiLineString"===s.type?s.coordinates.forEach(function(f){return f.forEach(l)}):"MultiPolygon"===s.type&&s.coordinates.forEach(function(f){f.forEach(function(g){return g.forEach(l)})}))},i0.boxIntersect=function(s,l){return!(l.sw.x>s.ne.x||l.ne.x<s.sw.x||l.sw.y>s.ne.y||l.ne.y<s.sw.y)},i0.findBoundingBox=function(s){for(var l=1/0,f=-1/0,g=1/0,_=-1/0,k=s[0].length,q=0;q<k;q++){var $=s[0][q];$[0]<l&&(l=$[0]),$[1]<g&&(g=$[1]),$[0]>f&&(f=$[0]),$[1]>_&&(_=$[1])}return[l,g,f,_]},i0.geometryType=function(s){return"Polygon"===s||"MultiPolygon"===s?"polygon":"LineString"===s||"MultiLineString"===s?"line":"Point"===s||"MultiPoint"===s?"point":void 0},i0.centroid=function(s){var l=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(s&&0!==s.length){var f,g=0,_=0,k=0,q=s[0],$=q.length;l&&(f=q[0],q=q.map(function(_l){return[_l[0]-f[0],_l[1]-f[1]]}));for(var _t=0,_n=$-1;_t<$;_n=_t,_t++){var _i=q[_t],_o=q[_n],xa=_i[1]*_o[0]-_o[1]*_i[0];g+=(_i[0]+_o[0])*xa,_+=(_i[1]+_o[1])*xa,k+=3*xa}var ka=[g/k,_/k];return l&&(ka[0]+=f[0],ka[1]+=f[1]),ka}},i0.multiCentroid=function(s){for(var l=s.length,f=[0,0],g=0;g<s.length;g++){var _=i0.centroid(s[g]);f[0]+=_[0],f[1]+=_[1]}return f[0]/=l,f[1]/=l,f},i0.signedPolygonRingAreaSum=function(s){for(var l=0,f=s.length,g=0;g<f-1;g++){var _=s[g],k=s[g+1];l+=_[0]*k[1]-k[0]*_[1]}return l+(s[f-1][0]*s[0][1]-s[0][0]*s[f-1][1])},i0.polygonRingArea=function(s){return Math.abs(i0.signedPolygonRingAreaSum(s))/2},i0.polygonArea=function(s){if(s)return i0.polygonRingArea(s[0])},i0.multiPolygonArea=function(s){for(var l=0,f=0;f<s.length;f++)l+=i0.polygonArea(s[f]);return l},i0.ringWinding=function(s){var l=i0.signedPolygonRingAreaSum(s);return 0<l?"CW":l<0?"CCW":void 0},i0.getTileBoundingBox=function(s,l){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,g=i0.wrapTile(s,{x:!0}),_=i0.metersForTile(g),k=i0.metersPerPixel(g.z),q=i0.metersToLatLng([_.x-f*k,_.y+f*k]),$=i0.metersToLatLng([_.x+(l+f)*k,_.y-(l+f)*k]),_t=i0.isLastTile(g);return new C0.H.geo.Rect(0===s.y?90:J_.clamp(q[1],-90,90),J_.clamp(q[0],-180,180),_t.row?-90:J_.clamp($[1],-90,90),_t.column?180:J_.clamp($[0],-180,180))},i0.isLastTile=function(s){var l=s.x,g=s.z;return{row:s.y===Math.pow(2,g)-1,column:l===Math.pow(2,g)-1}};var Ky,g_,CI=function(){M1(l,xN(Error));var s=j1(l);function l(f){var g;return A0(this,l),(g=s.call(this)).name="MethodNotImplemented",g.message="Method "+f+" must be implemented in subclass",g}return l}(),_1=!1,TI=!1;try{window.document!==HTMLDocument&&(TI=!0)}catch(s){void 0!==self&&(_1=!0,self.window={document:{}},self.document=self.window.document)}var n1={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==g_?g_:_1||self.is_fake_worker},set is_worker(s){g_=s},get is_main(){return void 0!==Ky?Ky:TI&&!self.is_fake_worker},set is_main(s){Ky=s},is_native_worker:_1},s0={},nA=0,qx={},DI={},SI={};function FC(s,l,f){var g=2<arguments.length&&void 0!==f?f:DI,_=[];if("string"==typeof s&&(s=(_=s.split(".")).pop()),n1.is_main&&l&&1===_.length&&"self"===_[0])g=l;else for(var k=0;k<_.length;k++){if(!g[_[k]])return[];g=g[_[k]]}return[s,g]}s0.addTarget=function(s,l){n1.is_fake_worker?SI[s]=l:DI[s]=l},s0.removeTarget=function(s){delete DI[s],delete SI[s]};var jC=" No object with that name is registered on main thread.",yb=" Object has no method with that name.",EE="_worker_broker_error_not_set_";function UA(s){Array.isArray(s)&&s.filter(function(l){return l.parent&&l.property}).forEach(function(l){return delete l.parent[l.property]})}s0.withTransferables=function(){for(var s=arguments.length,l=new Array(s),f=0;f<s;f++)l[f]=arguments[f];if(!(this instanceof s0.withTransferables))return NC(s0.withTransferables,l);this.value=l,this.transferables=function g(_){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,$=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!_)return $;if(Array.isArray(_))_.forEach(function(_n,_i){return g(_n,_,_i,$)});else if("object"===D_(_))if(_ instanceof ArrayBuffer)$.push({object:_,parent:k,property:q});else if(_.buffer instanceof ArrayBuffer)$.push({object:_.buffer,parent:k,property:q});else for(var _t in _)g(_[_t],_,_t,$);return $}(this.value)},n1.is_main&&(s0.postMessage=function(s,l){for(var f=arguments.length,g=new Array(2<f?f-2:0),_=2;_<f;_++)g[_-2]=arguments[_];if(Array.isArray(s))return Promise.all(s.map(function(_o){return s0.postMessage.apply(s0,[_o,l].concat(l_(g)))}));var k,q={};"object"===D_(l)&&(l=(q=l).method);var $="main_send";"string"==typeof s?(l=s,g=Array.prototype.slice.call(arguments,1),k=!0,$="worker_send"):s.init&&(k=!0);var _t,_n=[];if(g&&1===g.length&&g[0]instanceof s0.withTransferables&&(_n=g[0].transferables,g=g[0].value),_t={type:$,message_id:++nA,method:l,message:g},k)return function(_o,xa){var _l=g0(FC(_o.method,xa,"main_send"===_o.type?SI:DI),2),_f=_l[0],_a=_l[1],_g="Worker broker could not dispatch message type ".concat(_o.method," on target ").concat(_o.target,".");if(!_a)throw Error(_g+jC);var ty="function"==typeof _a[_f]&&_a[_f];if(!ty)throw Error(_g+yb);return new Promise(function(ny,uy){var ry;try{ry=ty.apply(_a,_o.message)}catch(ly){return void uy(ly)}ry instanceof Promise?ry.then(function(ly){ly instanceof s0.withTransferables&&(ly=ly.value[0]),ny(ly)},function(ly){uy(ly instanceof Error?"".concat(ly.message,": ").concat(ly.stack):ly)}):(ry instanceof s0.withTransferables&&(ry=ry.value[0]),ny(ry))})}(_t,s&&s.init?s:void 0);var _i=new Promise(function(_o,xa){qx[nA]={method:l,message:g,resolve:_o,reject:xa}});return q.stringify&&(_t=JSON.stringify(_t)),s.postMessage(_t,_n.map(function(_o){return _o.object})),UA(_n),_i},s0.addWorker=function(s){if(!(s instanceof Worker))throw Error("Worker broker could not add non-Worker object",s);s.addEventListener("message",function(l){var f="string"==typeof l.data?JSON.parse(l.data):l.data,g=f.message_id;if("worker_reply"===f.type)qx[g]&&(f.error?qx[g].reject(f.error):qx[g].resolve(f.message),delete qx[g]);else if("worker_send"===f.type&&null!=g){var _=g0(FC(f.method),2),k=_[0],q=_[1],$="Worker broker could not dispatch message type ".concat(f.method," on target ").concat(f.target,".");if(!q)throw Error($+jC);var _t="function"==typeof q[k]&&q[k];if(!_t)throw Error($+yb);var _n,_i=EE;try{_n=_t.apply(q,f.message)}catch(ka){_i=ka}var _o,xa=[];_n&&"function"==typeof _n.then?_n.then(function(ka){ka instanceof s0.withTransferables&&(xa=ka.transferables,ka=ka.value[0]),s.postMessage(_o={type:"main_reply",message_id:g,message:ka},xa.map(function(_l){return _l.object})),UA(xa)},function(ka){s.postMessage({type:"main_reply",message_id:g,error:ka instanceof Error?"".concat(ka.message,": ").concat(ka.stack):ka})}):(_n instanceof s0.withTransferables&&(xa=_n.transferables,_n=_n.value[0]),_o={type:"main_reply",message_id:g,message:_n,error:_i instanceof Error?"".concat(_i.message,": ").concat(_i.stack):_i},s.postMessage(_o,xa.map(function(ka){return ka.object})),UA(xa))}})},s0.getMessages=function(){return qx},s0.getMessageId=function(){return nA}),n1.is_worker&&(s0.postMessage=function(s){for(var l=arguments.length,f=new Array(1<l?l-1:0),g=1;g<l;g++)f[g-1]=arguments[g];var _={};"object"===D_(s)&&(s=(_=s).method);var k,q=new Promise(function(_t,_n){qx[nA]={method:s,message:f,resolve:_t,reject:_n}}),$=[];return f&&1===f.length&&f[0]instanceof s0.withTransferables&&($=f[0].transferables,f=f[0].value),k={type:"worker_send",message_id:nA,method:s,message:f},_.stringify&&(k=JSON.stringify(k)),self.postMessage(k,$.map(function(_t){return _t.object})),UA($),nA++,q},self.addEventListener("message",function(s){var l="string"==typeof s.data?JSON.parse(s.data):s.data,f=l.message_id;if("main_reply"===l.type)qx[f]&&(l.hasOwnProperty("error")&&l.error!==EE?qx[f].reject(l.error):qx[f].resolve(l.message),delete qx[f]);else if("main_send"===l.type&&null!=f){var g=g0(FC(l.method),2),_=g[0],k=g[1],q="Worker broker could not dispatch message type ".concat(l.method," on target ").concat(l.target,".");if(!k)throw Error(q+jC);var $,_t,_n="function"==typeof k[_]&&k[_];if(!_n)throw Error(q+yb);try{$=_n.apply(k,l.message)}catch(xa){_t=xa}var _i,_o=[];$ instanceof Promise?$.then(function(xa){xa instanceof s0.withTransferables&&(_o=xa.transferables,xa=xa.value[0]),_i={type:"worker_reply",message_id:f,message:xa},self.postMessage(_i,_o.map(function(ka){return ka.object})),UA(_o)},function(xa){self.postMessage({type:"worker_reply",message_id:f,error:xa instanceof Error?"".concat(xa.message,": ").concat(xa.stack):xa})}):($ instanceof s0.withTransferables&&(_o=$.transferables,$=$.value[0]),_i={type:"worker_reply",message_id:f,message:$,error:_t instanceof Error?"".concat(_t.message,": ").concat(_t.stack):_t},self.postMessage(_i,_o.map(function(xa){return xa.object})),UA(_o))}}));var r_,zE={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},MI={},DS={};function qy(s){var l,f="object"===D_(s)?s.level:s;if(zE[f]<=zE[qy.level]){for(var g=arguments.length,_=new Array(1<g?g-1:0),k=1;k<g;k++)_[k-1]=arguments[k];if(n1.is_native_worker)s0.postMessage.apply(s0,[{method:"_logProxy",stringify:!0},s].concat(_));else{if("object"===D_(s)&&!0===s.once){if(DS[JSON.stringify(_)])return;DS[JSON.stringify(_)]=!0}var q=(MI[l=f]=MI[l]||(console[l]?console[l]:console.log).bind(console),MI[l]);1<_.length?q.apply(void 0,["Tangram [".concat(f,"]: ").concat(_[0])].concat(l_(_.slice(1)))):q("Tangram [".concat(f,"]: ").concat(_[0]))}}}function SS(s,l,f){var g,_;return f=f||0,function(){var k=this,q=arguments;function $(){_=0,s.apply(k,q)}clearTimeout(g),_&&f&&Date.now()-_>=f?$():(_=_||Date.now(),g=setTimeout(function(){$()},l))}}qy.level="info",qy.workers=null,qy.setLevel=function(s){qy.level=s,n1.is_main&&Array.isArray(qy.workers)&&s0.postMessage(qy.workers,"_logSetLevelProxy",s)},n1.is_main&&(qy.setWorkers=function(s){qy.workers=s},qy.reset=function(){DS={}}),s0.addTarget("_logProxy",qy),s0.addTarget("_logSetLevelProxy",qy.setLevel);var R0=r_={};s0.addTarget("Utils",r_),r_.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},r_.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},r_._requests={},r_._proxy_requests={},r_.io=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",_=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},k=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,q=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(n1.is_worker&&r_.isMicrosoft())return qy("debug","Proxying request for URL to worker",s),k&&(r_._proxy_requests[k]=!0),s0.postMessage("Utils.io",s,l,f,g,_,k,!0);var $=new XMLHttpRequest,_t=(_t=new Promise(function(_n,_i){$.open(g,s,!0),$.timeout=l,$.responseType=f,$.onload=function(){200===$.status?-1<["text","json"].indexOf($.responseType)?_n($.responseText):_n($.response):_i(Error("Request error with a status of "+$.statusText))},$.onerror=function(_o){_i(Error("There was a network error"+_o.toString()))},$.ontimeout=function(_o){_i(Error("timeout "+_o.toString()))},$.send()})).then(function(_n){return k&&delete r_._requests[k],q?s0.withTransferables(_n):_n});return k&&(r_._requests[k]=$),_t},r_.cancelRequest=function(s){if(n1.is_worker&&r_._proxy_requests[s])return s0.postMessage("Utils.cancelRequest",s);r_._requests[s]?(qy("trace","Cancelling network request key '".concat(s,"'")),r_._requests[s].abort(),delete r_._requests[s]):qy("trace","Could not find network request key '".concat(s,"'"))},r_.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(s){setTimeout(s,1e3/60)})},r_.serializeWithFunctions=function(s){return"function"==typeof s?s.toString():JSON.stringify(s,function(l,f){return"function"==typeof f?f.toString():f})},r_.stringsToFunctions=function(s,l){if("string"==typeof s)s=r_.stringToFunction(s,l);else if(null!=s&&"object"===D_(s))for(var f in s)s[f]=r_.stringsToFunctions(s[f],l);return s},r_._use_count=0,r_._function_cache={};var GA,VC,II=SS(function(){qy("trace","Cleared cached ".concat(Object.keys(r_._function_cache).length," functions (reused ").concat(r_._use_count," times)")),r_._use_count=0,r_._function_cache={}},1e4),HL=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function BC(s){if("string"!=typeof s||-1!==s.search(/^(data|blob):/))return"";var l=s.indexOf("?");-1<l&&(s=s.substr(0,l));var f=s.indexOf("#");return-1<f&&(s=s.substr(0,f)),s.substr(0,s.lastIndexOf("/")+1)||""}function qA(s){return"string"==typeof s&&!(-1<s.search(/^(http|https|data|blob):/)||"//"===s.substr(0,2))}function MS(s){return void 0===GA&&"function"!=typeof(GA=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(GA=null,qy("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),GA?GA(s):s}r_.stringToFunction=function(s,l){var f=s;l&&(f+=l.toString());var g=r_._function_cache[f];if(II(),g)return r_._use_count++,g;var _="string"==typeof s&&s.match(HL);if(_&&2<_.length)try{var k=_[2],q=0<(q=0<_[1].length&&_[1].split(",").map(function(_t){return _t.trim()}).filter(function(_t){return _t})).length?q:["context"],$=new Function(q.toString(),"function"==typeof l?l(k):k);return r_._function_cache[f]=$}catch(_t){return s}return s},r_.device_pixel_ratio=1,r_.isPowerOf2=function(s){return 0==(s&s-1)},r_.interpolate=function(s,l,f){if(!Array.isArray(l)||!Array.isArray(l[0])||l.length<1)return l;var g,_,k,q,$;if(s<=l[0][0])q=l[0][1],"function"==typeof f&&(q=f(q));else if(s>=l[l.length-1][0])q=l[l.length-1][1],"function"==typeof f&&(q=f(q));else for(var _t=0;_t<l.length-1;_t++)if(s>=l[_t][0]&&s<l[_t+1][0]){if(g=l[_t][0],_=l[_t+1][0],Array.isArray(l[_t][1])){q=[];for(var _n=0;_n<l[_t][1].length;_n++)"function"==typeof f?($=f(l[_t][1][_n]),k=f(l[_t+1][1][_n])-$,q[_n]=k*(s-g)/(_-g)+$):q[_n]=(k=l[_t+1][1][_n]-l[_t][1][_n])*(s-g)/(_-g)+l[_t][1][_n]}else q="function"==typeof f?($=f(l[_t][1]),(k=f(l[_t+1][1])-$)*(s-g)/(_-g)+$):(k=l[_t+1][1]-l[_t][1])*(s-g)/(_-g)+l[_t][1];break}return q},r_.toCSSColor=function(s){return 1===s[3]?"rgb(".concat(s.slice(0,3).map(function(l){return Math.round(255*l)}).join(", "),")"):"rgba(".concat(s.map(function(l,f){return f<3&&Math.round(255*l)||l}).join(", "),")")},r_.pointInTile=function(s){return 0<=s[0]&&s[1]>-Ry.tile_scale&&s[0]<Ry.tile_scale&&s[1]<=0},r_.zoomToTileLevel=function(s){return Math.floor(s)};var _b=function(){function s(l,f){var g=this;if(A0(this,s),this.config=l,this.sources=f,this.id=l.id,this.name=l.name,this.pad_scale=l.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(l.rasters)&&l.rasters.forEach(function(k){-1===g.rasters.indexOf(k)&&g.rasters.push(k)}),this.preprocess=l.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=l.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===D_(this.transform))for(var _ in this.transform)"function"==typeof this.transform[_]&&(this.transform[_]=this.transform[_].bind(this));this.extra_data=l.extra_data,this.scripts=l.scripts,this.max_zoom=null!=l.max_zoom?l.max_zoom:Ry.default_source_max_zoom,this.setTileSize(l.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=l.min_display_zoom?l.min_display_zoom:0,this.max_display_zoom=null!=l.max_display_zoom?l.max_display_zoom:null,this._has_volatile_data=!!l.has_volatile_data}return L0(s,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(l){if(l.source_data.layers){var f={coords:l.coords},g=[];if("function"==typeof this.transform)g.push(this.transform);else if("object"===D_(this.transform))for(var _=Object.keys(this.transform).sort(),k=0;k<_.length;k++)g.push(this.transform[_[k]]);for(var q=1===Object.keys(l.source_data.layers).length&&l.source_data.layers._default,$=0;$<g.length;$++)q?l.source_data.layers._default=g[$](l.source_data.layers._default,this.extra_data,f):l.source_data.layers=g[$](l.source_data.layers,this.extra_data,f)}}},{key:"_postProcessTile",value:function(l){var f=this;for(var g in this._transformTile(l),l.source_data.layers){var _=l.source_data.layers[g];_&&_.features&&_.features.forEach(function(k){Ry.transformGeometry(k.geometry,function(q){q[1]=-q[1],f.pad_scale&&(q[0]=Math.round(q[0]*(1+f.pad_scale)-Ry.tile_scale*f.pad_scale/2),q[1]=Math.round(q[1]*(1+f.pad_scale)-Ry.tile_scale*f.pad_scale/2))}),f.updateDefaultWinding(k.geometry)})}l.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(l){return l.source_data={},l.source_data.layers={},l.pad_scale=this.pad_scale,l.rasters=l_(this.rasters),this._load(l)}},{key:"_load",value:function(){throw new CI("_load")}},{key:"setTileSize",value:function(l){this.tile_size=l||256,("number"!=typeof this.tile_size||this.tile_size<256||!R0.isPowerOf2(this.tile_size))&&(qy({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(l,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(l){return null==this.default_winding&&("Polygon"===l.type?this.default_winding=Ry.ringWinding(l.coordinates[0]):"MultiPolygon"===l.type&&(this.default_winding=Ry.ringWinding(l.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(l,f){if(l.z<this.min_display_zoom||null!=this.max_display_zoom&&f>this.max_display_zoom)return!1;for(var g=0;g<this.rasters.length;g++){var _=this.rasters[g];if(this.sources[_]&&this.sources[_]!==this&&!this.sources[_].includesTile(l,l.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(l){var f=0<arguments.length&&void 0!==l&&l;this._has_volatile_data=f}}],[{key:"create",value:function(l,f){for(var g in f)if(f[g].config.name===l.name&&s.sameConfig(f[g],{config:l}))return f[g];if(s.types[l.type])return new s.types[l.type](l,f)}},{key:"sameConfig",value:function(l,f){if(!l||!f)return!1;var g=Object.assign({},l.config,{id:null,tiled:null,url:null}),_=Object.assign({},f.config,{id:null,tiled:null,url:null});return JSON.stringify(g)===JSON.stringify(_)}},{key:"coordsToMeters",value:function(l){var f=g0(Ry.latLngToMeters(l),2),_=f[1];l[0]=f[0],l[1]=_}},{key:"projectData",value:function(l){for(var f in l.layers)for(var g=l.layers[f].features.length,_=0;_<g;_++)Ry.transformGeometry(l.layers[f].features[_].geometry,s.coordsToMeters)}},{key:"metersToTileUnits",value:function(l,f,g){g[0]=Math.round((g[0]-f.x)*l),g[1]=-1*Math.round((g[1]-f.y)*l)}},{key:"scaleData",value:function(l,f){var _=f.min,k=s.metersToTileUnits.bind(this,Ry.unitsPerMeter(f.coords.z),_);for(var q in l.layers)for(var $=l.layers[q].features.length,_t=0;_t<$;_t++)Ry.transformGeometry(l.layers[q].features[_t].geometry,k)}},{key:"register",value:function(l,f){l&&f&&(s.types[f]=l)}}]),s}();_b.types={};var TN=0,IS=function(){M1(l,_b);var s=j1(l);function l(f,g){var _;A0(this,l),(_=s.call(this,f,g)).response_type="";var k=g0(function(s,l){if(!l||0===Object.keys(l).length)return[s,[]];var f=s.indexOf("?"),g=s.indexOf("#"),_="";-1<g&&(_=s.slice(g),s=s.slice(0,g)),-1===f&&(f=s.length,s+="?"),f++;var k="",q=[];for(var $ in l)""===function(_t,_n){_t=_t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var _i=new RegExp("[\\?&]"+_t+"=([^&#]*)").exec(_n);return null===_i?"":decodeURIComponent(_i[1].replace(/\+/g," "))}($,s)?k+="".concat($,"=").concat(l[$],"&"):q.push([$,l[$]]);return[s=s.slice(0,f)+k+s.slice(f)+_,q]}(f.url,f.url_params),2),$=k[1];if(_.url=k[0],$.forEach(function(_t){var _n=g0(_t,2),_i=_n[0],_o=_n[1];qy({level:"warn",once:!0},"Data source '".concat(_.name,"': parameter '").concat(_i,"' already present in URL '").concat(f.url,"', ")+"skipping value '".concat(_i,"=").concat(_o,"' specified in 'url_params'"))}),"string"!=typeof _.url)throw Error("Network data source must provide a string `url` property");return _}return L0(l,[{key:"_load",value:function(f){var g=this,_=this.formatUrl(this.url,f),k=f.source_data;return k.url=_,new Promise(function(q,$){k.error=null;var _t=TN+++"-"+_,_n=R0.io(_,6e4,g.response_type,"GET",{},_t);k.request_id=_t,_n.then(function(_i){"function"==typeof g.preprocess&&(_i=g.preprocess(_i)),(_i=_i instanceof Promise?_i:Promise.resolve(_i)).then(function(_o){g.parseSourceData(f,k,_o),g._postProcessTile(f),q(f)})},function(_i){k.error=_i.stack,g._postProcessTile(f),q(f)})})}},{key:"formatUrl",value:function(){throw new CI("formatUrl")}},{key:"parseSourceData",value:function(){throw new CI("parseSourceData")}}]),l}(),UL=function(){M1(l,IS);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).tiled=!0,_.parseBounds(f),_.builds_geometry_tiles=!1,_.tms=!0===f.tms,-1<_.url.search("{s}")&&(Array.isArray(f.url_subdomains)&&0<f.url_subdomains.length?(_.url_subdomains=f.url_subdomains,_.next_url_subdomain=0):qy({level:"warn",once:!0},"Data source '".concat(_.name,"': source URL includes '{s}' subdomain marker ('").concat(_.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),_}return L0(l,[{key:"parseBounds",value:function(f){var g,_,k,q;Array.isArray(f.bounds)&&4===f.bounds.length&&(this.bounds=f.bounds,_=(g=g0(this.bounds,4))[0],k=g[1],q=g[2],this.bounds_meters={min:Ry.latLngToMeters([_,g[3]]),max:Ry.latLngToMeters([q,k])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(f){if(this.bounds){f=Ry.wrapTile(f,{x:!0});var g=(g=this.bounds_tiles.min[f.z])||(this.bounds_tiles.min[f.z]=Ry.tileForMeters(this.bounds_meters.min,f.z)),_=(_=this.bounds_tiles.max[f.z])||(this.bounds_tiles.max[f.z]=Ry.tileForMeters(this.bounds_meters.max,f.z));if(f.x<g.x||f.x>_.x||f.y<g.y||f.y>_.y)return!1}return!0}},{key:"includesTile",value:function(f,g){return!!S_(Q_(l.prototype),"includesTile",this).call(this,f,g)&&!!this.checkBounds(f)}},{key:"formatUrl",value:function(f,g){var _=Ry.wrapTile(g.coords,{x:!0});this.tms&&(_.y=Math.pow(2,_.z)-1-_.y);var k=f.replace("{x}",_.x).replace("{y}",_.y).replace("{z}",_.z);return null!=this.url_subdomains&&(k=k.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),k}},{key:"urlHasTilePattern",value:function(f){return f&&-1<f.search("{x}")&&-1<f.search("{y}")&&-1<f.search("{z}")}}]),l}(),HE=function(){M1(l,_b);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).target_name="MapsJsSource"+f.uid,_.tiled=!!f.tiled,s0.addTarget(_.target_name,KT(_)),n1.is_worker&&s0.postMessage(_.target_name+".onWorkerInitialized"),n1.is_main&&(_._workers_left=0),_}return L0(l,[{key:"initialize",value:function(f,g,_,k){this._main_initialized||(this.provider=f,this.worker=k,this._workers_left+=_,this._on_update=g,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),f.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(f){this._isReady()&&this.onProviderUpdate(f)}},{key:"onProviderUpdate",value:function(f){this.dispatchUpdate(void 0,f.data)}},{key:"dispatchUpdate",value:function(f,g){this._on_update(this.name,f,g)}},{key:"dispose",value:function(){s0.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),l}(),tx=function(s,l,f,g,_){var k,q,$=8*_-g-1,_t=(1<<$)-1,_n=_t>>1,_i=-7,_o=f?_-1:0,xa=f?-1:1,ka=s[l+_o];for(_o+=xa,k=ka&(1<<-_i)-1,ka>>=-_i,_i+=$;0<_i;k=256*k+s[l+_o],_o+=xa,_i-=8);for(q=k&(1<<-_i)-1,k>>=-_i,_i+=g;0<_i;q=256*q+s[l+_o],_o+=xa,_i-=8);if(0===k)k=1-_n;else{if(k===_t)return q?NaN:1/0*(ka?-1:1);q+=Math.pow(2,g),k-=_n}return(ka?-1:1)*q*Math.pow(2,k-g)},w2=function(s,l,f,g,_,k){var q,$,_t,_n=8*k-_-1,_i=(1<<_n)-1,_o=_i>>1,xa=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,ka=g?0:k-1,_l=g?1:-1,_f=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?($=isNaN(l)?1:0,q=_i):(q=Math.floor(Math.log(l)/Math.LN2),l*(_t=Math.pow(2,-q))<1&&(q--,_t*=2),2<=(l+=1<=q+_o?xa/_t:xa*Math.pow(2,1-_o))*_t&&(q++,_t/=2),_i<=q+_o?($=0,q=_i):1<=q+_o?($=(l*_t-1)*Math.pow(2,_),q+=_o):($=l*Math.pow(2,_o-1)*Math.pow(2,_),q=0));8<=_;s[f+ka]=255&$,ka+=_l,$/=256,_-=8);for(q=q<<_|$,_n+=_;0<_n;s[f+ka]=255&q,ka+=_l,q/=256,_n-=8);s[f+ka-_l]|=128*_f},d1=g1;function g1(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}g1.Varint=0,g1.Fixed64=1,g1.Bytes=2,g1.Fixed32=5;var kI=4294967296,DN=1/kI;function x2(s){return s.type===g1.Bytes?s.readVarint()+s.pos:s.pos+1}function SN(s,l,f){var g=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.ceil(Math.log(l)/(7*Math.LN2));f.realloc(g);for(var _=f.pos-1;s<=_;_--)f.buf[_+g]=f.buf[_]}function kS(s,l){for(var f=0;f<s.length;f++)l.writeVarint(s[f])}function OS(s,l){for(var f=0;f<s.length;f++)l.writeSVarint(s[f])}function RS(s,l){for(var f=0;f<s.length;f++)l.writeFloat(s[f])}function OI(s,l){for(var f=0;f<s.length;f++)l.writeDouble(s[f])}function MN(s,l){for(var f=0;f<s.length;f++)l.writeBoolean(s[f])}function GL(s,l){for(var f=0;f<s.length;f++)l.writeFixed32(s[f])}function rA(s,l){for(var f=0;f<s.length;f++)l.writeSFixed32(s[f])}function XT(s,l){for(var f=0;f<s.length;f++)l.writeFixed64(s[f])}function qL(s,l){for(var f=0;f<s.length;f++)l.writeSFixed64(s[f])}function NS(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16)+16777216*s[l+3]}function UE(s,l,f){s[f]=l,s[f+1]=l>>>8,s[f+2]=l>>>16,s[f+3]=l>>>24}function PS(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16)+(s[l+3]<<24)}g1.prototype={destroy:function(){this.buf=null},readFields:function(s,l,f){for(f=f||this.length;this.pos<f;){var g=this.readVarint(),_=g>>3,k=this.pos;this.type=7&g,s(_,l,this),this.pos===k&&this.skip(g)}return l},readMessage:function(s,l){return this.readFields(s,l,this.readVarint()+this.pos)},readFixed32:function(){var s=NS(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=PS(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=NS(this.buf,this.pos)+NS(this.buf,this.pos+4)*kI;return this.pos+=8,s},readSFixed64:function(){var s=NS(this.buf,this.pos)+PS(this.buf,this.pos+4)*kI;return this.pos+=8,s},readFloat:function(){var s=tx(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=tx(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var l=this.buf,f=l[this.pos++],g=127&f;return f<128?g:(g|=(127&(f=l[this.pos++]))<<7,f<128?g:(g|=(127&(f=l[this.pos++]))<<14,f<128?g:(g|=(127&(f=l[this.pos++]))<<21,f<128?g:function(_,k,q){var $,_t,_n=q.buf;if($=(112&(_t=_n[q.pos++]))>>4,_t<128||($|=(127&(_t=_n[q.pos++]))<<3,_t<128)||($|=(127&(_t=_n[q.pos++]))<<10,_t<128)||($|=(127&(_t=_n[q.pos++]))<<17,_t<128)||($|=(127&(_t=_n[q.pos++]))<<24,_t<128)||($|=(1&(_t=_n[q.pos++]))<<31,_t<128))return function(s,l,f){return f?4294967296*l+(s>>>0):4294967296*(l>>>0)+(s>>>0)}(_,$,k);throw new Error("Expected varint not more than 10 bytes")}(g|=(15&(f=l[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,l=function(f,g,_){for(var k,q,$,_t="",_n=g;_n<_;){var _i=f[_n],_o=null,xa=239<_i?4:223<_i?3:191<_i?2:1;if(_<_n+xa)break;1===xa?_i<128&&(_o=_i):2===xa?128==(192&(k=f[_n+1]))&&(_o=(31&_i)<<6|63&k)<=127&&(_o=null):3===xa?(q=f[_n+2],128==(192&(k=f[_n+1]))&&128==(192&q)&&((_o=(15&_i)<<12|(63&k)<<6|63&q)<=2047||55296<=_o&&_o<=57343)&&(_o=null)):4===xa&&(q=f[_n+2],$=f[_n+3],128==(192&(k=f[_n+1]))&&128==(192&q)&&128==(192&$)&&((_o=(15&_i)<<18|(63&k)<<12|(63&q)<<6|63&$)<=65535||1114112<=_o)&&(_o=null)),null===_o?(_o=65533,xa=1):65535<_o&&(_o-=65536,_t+=String.fromCharCode(_o>>>10&1023|55296),_o=56320|1023&_o),_t+=String.fromCharCode(_o),_n+=xa}return _t}(this.buf,this.pos,s);return this.pos=s,l},readBytes:function(){var s=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,s);return this.pos=s,l},readPackedVarint:function(s,l){var f=x2(this);for(s=s||[];this.pos<f;)s.push(this.readVarint(l));return s},readPackedSVarint:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readBoolean());return s},readPackedFloat:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readFloat());return s},readPackedDouble:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readDouble());return s},readPackedFixed32:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){var l=x2(this);for(s=s||[];this.pos<l;)s.push(this.readSFixed64());return s},skip:function(s){var l=7&s;if(l===g1.Varint)for(;127<this.buf[this.pos++];);else if(l===g1.Bytes)this.pos=this.readVarint()+this.pos;else if(l===g1.Fixed32)this.pos+=4;else{if(l!==g1.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(s,l){this.writeVarint(s<<3|l)},realloc:function(s){for(var l,f=this.length||16;f<this.pos+s;)f*=2;f!==this.length&&((l=new Uint8Array(f)).set(this.buf),this.buf=l,this.length=f)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),UE(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),UE(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),UE(this.buf,-1&s,this.pos),UE(this.buf,Math.floor(s*DN),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),UE(this.buf,-1&s,this.pos),UE(this.buf,Math.floor(s*DN),this.pos+4),this.pos+=8},writeVarint:function(s){268435455<(s=+s||0)||s<0?function(l,f){var g,_,k,q;if(0<=l?(g=l%4294967296|0,_=l/4294967296|0):(_=~(-l/4294967296),4294967295^(g=~(-l%4294967296))?g=g+1|0:_=_+1|(g=0)),0x10000000000000000<=l||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),k=g,(q=f).buf[q.pos++]=127&k|128,k>>>=7,q.buf[q.pos++]=127&k|128,k>>>=7,q.buf[q.pos++]=127&k|128,k>>>=7,q.buf[q.pos++]=127&k|128,q.buf[q.pos]=127&(k>>>=7),function(k,q){var $=(7&k)<<4;q.buf[q.pos++]|=$|((k>>>=3)?128:0),k&&(q.buf[q.pos++]=127&k|((k>>>=7)?128:0),k&&(q.buf[q.pos++]=127&k|((k>>>=7)?128:0),k&&(q.buf[q.pos++]=127&k|((k>>>=7)?128:0),k&&(q.buf[q.pos++]=127&k|((k>>>=7)?128:0),k&&(q.buf[q.pos++]=127&k)))))}(_,f)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(127<s?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(127<s?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(127<s?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var l=this.pos;this.pos=function(g,_,k){for(var q,$,_t=0;_t<_.length;_t++){if(55295<(q=_.charCodeAt(_t))&&q<57344){if(!$){56319<q||_t+1===_.length?(g[k++]=239,g[k++]=191,g[k++]=189):$=q;continue}if(q<56320){g[k++]=239,g[k++]=191,g[k++]=189,$=q;continue}q=$-55296<<10|q-56320|65536,$=null}else $&&(g[k++]=239,g[k++]=191,g[k++]=189,$=null);q<128?g[k++]=q:(q<2048?g[k++]=q>>6|192:(q<65536?g[k++]=q>>12|224:(g[k++]=q>>18|240,g[k++]=q>>12&63|128),g[k++]=q>>6&63|128),g[k++]=63&q|128)}return k}(this.buf,s,this.pos);var f=this.pos-l;128<=f&&SN(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(s){this.realloc(4),w2(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),w2(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var l=s.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=s[f]},writeRawMessage:function(s,l){this.pos++;var f=this.pos;s(l,this);var g=this.pos-f;128<=g&&SN(f,g,this),this.pos=f-1,this.writeVarint(g),this.pos+=g},writeMessage:function(s,l,f){this.writeTag(s,g1.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(s,l){this.writeMessage(s,kS,l)},writePackedSVarint:function(s,l){this.writeMessage(s,OS,l)},writePackedBoolean:function(s,l){this.writeMessage(s,MN,l)},writePackedFloat:function(s,l){this.writeMessage(s,RS,l)},writePackedDouble:function(s,l){this.writeMessage(s,OI,l)},writePackedFixed32:function(s,l){this.writeMessage(s,GL,l)},writePackedSFixed32:function(s,l){this.writeMessage(s,rA,l)},writePackedFixed64:function(s,l){this.writeMessage(s,XT,l)},writePackedSFixed64:function(s,l){this.writeMessage(s,qL,l)},writeBytesField:function(s,l){this.writeTag(s,g1.Bytes),this.writeBytes(l)},writeFixed32Field:function(s,l){this.writeTag(s,g1.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(s,l){this.writeTag(s,g1.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(s,l){this.writeTag(s,g1.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(s,l){this.writeTag(s,g1.Fixed64),this.writeSFixed64(l)},writeVarintField:function(s,l){this.writeTag(s,g1.Varint),this.writeVarint(l)},writeSVarintField:function(s,l){this.writeTag(s,g1.Varint),this.writeSVarint(l)},writeStringField:function(s,l){this.writeTag(s,g1.Bytes),this.writeString(l)},writeFloatField:function(s,l){this.writeTag(s,g1.Fixed32),this.writeFloat(l)},writeDoubleField:function(s,l){this.writeTag(s,g1.Fixed64),this.writeDouble(l)},writeBooleanField:function(s,l){this.writeVarintField(s,Boolean(l))}},xI.prototype.loadGeometry=function(s){var l=this._pbf;l.pos=this._geometry;for(var f,g,_=l.readVarint()+l.pos,k=1,q=0,$=0,_t=0,_n=[];l.pos<_;)if(q<=0&&(k=7&(g=l.readVarint()),q=g>>3),q--,1===k||2===k)$+=l.readSVarint(),_t+=l.readSVarint(),1===k&&(f&&_n.push(f),f=[]),f.push([$*s,_t*s]);else{if(7!==k)throw new Error("unknown command "+k);f&&f.push(f[0].slice())}return f&&_n.push(f),_n};function YL(s){var l=[],f=s&&s.features;if(f)for(var g=0,_=f.length;g<_;g++){var k=f[g],q=k.type,$=void 0;switch(q){case 1:$={type:"MultiPoint",coordinates:k.geometry.map(function(_t){return _t.slice()})};break;case 2:case 3:if($={type:"MultiLineString",coordinates:k.geometry.map(function(_t){return _t.map(function(_n){return _n.slice()})})},3===q&&null==($=$L($)))continue;break;default:continue}l.push({id:k.id,type:"Feature",geometry:$,properties:k.tags})}return{type:"FeatureCollection",features:l}}function $L(s){for(var l,f=[],g=[],_=0,k=s.coordinates.length;_<k;_++){var q=s.coordinates[_],$=Ry.ringWinding(q);null!=$&&($===(l=l||$)&&g.length&&(f.push(g),g=[]),g.push(q))}return 0<g.length&&f.push(g),1===f.length?(s.type="Polygon",s.coordinates=f[0]):1<f.length?(s.type="MultiPolygon",s.coordinates=f):s=null,s}var FS={type:"FeatureCollection",features:[]},RI=function(){M1(l,HE);var s=j1(l);function l(f,g){return A0(this,l),f.tiled=!0,s.call(this,f,g)}return L0(l,[{key:"fetchTile",value:function(f,g,_){return this.provider?this.provider.requestTileAsPromise(f,g,_).then(function(k){return k.data}):Promise.resolve()}},{key:"_load",value:function(f){var g=this,_=Ry.wrapTile(f.coords,{x:!0,y:!0});return s0.postMessage(this.target_name+".fetchTile",_.x,_.y,_.z).then(function(_t){var _n;return _t instanceof ArrayBuffer?(_n=new d1(new Uint8Array(_t)),f.source_data.layers=function(s){var l={};for(var f in s.layers){for(var g=s.layers[f],_=[],k=Ry.tile_scale/g.extent,q=0,$=g.length;q<$;q++){var _t=g.feature(q),_n=xI.types[_t.type],_i=_t.loadGeometry(k),_o=null;switch(_n){case"Point":_o=function(xa){var ka=xa.coordinates.length;if(1<ka){xa.type="MultiPoint";for(var _l=[],_f=0;_f<ka;_f++)_l.push(xa.coordinates[_f][0]);xa.coordinates=_l}else xa.type="Point",xa.coordinates=xa.coordinates[0][0];return xa}({coordinates:_i});break;case"LineString":_o=1===_i.length?{type:_n,coordinates:_i[0]}:{type:"MultiLineString",coordinates:_i};break;case"Polygon":_o=$L({coordinates:_i})}_o&&_o.coordinates&&_.push({type:"Feature",geometry:_o,properties:_t.properties})}l[f]={type:"FeatureCollection",features:_}}return l}(new eA(_n))):_t?f.source_data.error=_t:f.source_data.layers={_default:FS},g._postProcessTile(f),f})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),l}();function QT(s){return Math.max(s,0)}function HC(s){return isNaN(s)?0:s}function WA(s){return Array.isArray(s)?s.map(parseFloat).map(HC):HC(parseFloat(s))}function UC(s){return Array.isArray(s)?s.map(WA).map(QT):QT(WA(s))}_b.register(RI,"MVT"),_b.register(RI,"OMV");var YA=_e(function(s,l){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function g(_t){return(_t=Math.round(_t))<0?0:255<_t?255:_t}function k(_t){return g("%"===_t[_t.length-1]?parseFloat(_t)/100*255:parseInt(_t))}function q(_t){return function(_t){return _t<0?0:1<_t?1:_t}("%"===_t[_t.length-1]?parseFloat(_t)/100:parseFloat(_t))}function $(_t,_n,_i){return _i<0?_i+=1:1<_i&&--_i,6*_i<1?_t+(_n-_t)*_i*6:2*_i<1?_n:3*_i<2?_t+(_n-_t)*(2/3-_i)*6:_t}try{l.parseCSSColor=function(_t){var _n,_i=_t.replace(/ /g,"").toLowerCase();if(_i in f)return f[_i].slice();if("#"===_i[0])return 4===_i.length?0<=(_n=parseInt(_i.substr(1),16))&&_n<=4095?[(3840&_n)>>4|(3840&_n)>>8,240&_n|(240&_n)>>4,15&_n|(15&_n)<<4,1]:null:7===_i.length&&0<=(_n=parseInt(_i.substr(1),16))&&_n<=16777215?[(16711680&_n)>>16,(65280&_n)>>8,255&_n,1]:null;var _o=_i.indexOf("("),xa=_i.indexOf(")");if(-1!==_o&&xa+1===_i.length){var ka=_i.substr(0,_o),_l=_i.substr(_o+1,xa-(_o+1)).split(","),_f=1;switch(ka){case"rgba":if(4!==_l.length)return null;_f=q(_l.pop());case"rgb":return 3!==_l.length?null:[k(_l[0]),k(_l[1]),k(_l[2]),_f];case"hsla":if(4!==_l.length)return null;_f=q(_l.pop());case"hsl":if(3!==_l.length)return null;var _a=(parseFloat(_l[0])%360+360)%360/360,_g=q(_l[1]),ty=q(_l[2]),ny=ty<=.5?ty*(_g+1):ty+_g-ty*_g,uy=2*ty-ny;return[g(255*$(uy,ny,_a+1/3)),g(255*$(uy,ny,_a)),g(255*$(uy,ny,_a-1/3)),_f];default:return null}}return null}}catch(_t){}}),wy={};Object.assign(wy,{clampPositive:QT,noNaN:HC,parseNumber:WA,parsePositiveNumber:UC}),wy.wrapFunction=function(s){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(s," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},wy.zeroPair=Object.freeze([0,0]),wy.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},wy.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},wy.getFeatureParseContext=function(s,l,f,g){return{feature:s,tile:l,global:f,sources:g,zoom:l.style_zoom,geometry:Ry.geometryType(s.geometry.type),meters_per_pixel:l.meters_per_pixel,meters_per_pixel_sq:l.meters_per_pixel_sq,units_per_meter_overzoom:l.units_per_meter_overzoom}};var E2={STATIC:0,DYNAMIC:1,ZOOM:2};function iA(s){return"string"==typeof s&&"%"===s[s.length-1]}function GC(s){return"auto"===s}function KL(s){return iA(s)||GC(s)}wy.CACHE_TYPE=E2,wy.createPropertyCache=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=s){if(s.value)return{value:s.value,zoom:s.zoom?{}:null,type:s.type};var f={value:s,type:E2.STATIC};return Array.isArray(f.value)&&Array.isArray(f.value[0])?(f.zoom={},f.type=E2.ZOOM):"function"==typeof f.value&&(f.type=E2.DYNAMIC),"function"==typeof l&&(f.zoom?f.value=f.value.map(function(g,_){return[g[0],l(g[1],_)]}):"function"!=typeof f.value&&(f.value=l(f.value,0))),f}},wy.createColorPropertyCache=function(s){return wy.createPropertyCache(s,function(l){return"Style.color.pseudoRandomColor"===l?R0.stringToFunction(wy.wrapFunction(wy.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===l?wy.macros["Style.color.randomColor"]:l})};var NI="'size' can specify either width or height as derived from aspect ratio, but not both";wy.createPointSizePropertyCache=function(s){var l=null,f=null;if(iA(s))l=[!0];else if(Array.isArray(s))if(Array.isArray(s[0])){if(s.some(function(g){return Array.isArray(g[1])?g[1].some(KL):iA(g[1])})&&(l=s.map(function(g){return Array.isArray(g[1])?g[1].map(iA):iA(g[1])}),(f=s.map(function(g){return Array.isArray(g[1])&&g[1].map(GC)})).some(function(g){return Array.isArray(g)&&g.every(function(_){return _})})))throw NI}else if(s.some(KL)&&(l=[s.map(iA)],(f=[s.map(GC)])[0].every(function(g){return g})))throw NI;return l?((s={value:s}).has_pct=l,s.has_ratio=f,s.sprites={}):s=wy.createPropertyCache(s,UC),s},wy.evalCachedPointSizeProperty=function(s,l,f){return s.has_pct||s.has_ratio?l?(s.sprites[l.sprite]||(s.sprites[l.sprite]=wy.createPropertyCache(s.value,function(g,_){return Array.isArray(g)?(g=g.map(function(k,q){return s.has_ratio[_][q]?k:UC(k)}).map(function(k,q){return s.has_pct[_][q]?l.css_size[q]*k/100:k}),s.has_ratio[_][0]?g[0]=g[1]*l.aspect:s.has_ratio[_][1]&&(g[1]=g[0]/l.aspect)):(g=UC(g),g=s.has_pct[_]?l.css_size.map(function(k){return k*g/100}):[g,g]),g})),wy.evalCachedProperty(s.sprites[l.sprite],f)):void 0:wy.evalCachedProperty(s,f)},wy.evalCachedProperty=function(s,l){if(null!=s)return s.dynamic?s.dynamic(l):s.static?s.static:s.zoom&&s.zoom[l.zoom]?s.zoom[l.zoom]:"function"!=typeof s.value?Array.isArray(s.value)&&Array.isArray(s.value[0])?(s.zoom=s.zoom||{},s.zoom[l.zoom]=R0.interpolate(l.zoom,s.value),s.zoom[l.zoom]):(s.static=s.value,s.static):(s.dynamic=s.value,s.dynamic(l))},wy.convertUnits=function(s,l){if(null!=s.val)return"px"===s.units?s.val*Ry.metersPerPixel(l.zoom):s.val;if("string"==typeof s)"px"===s.trim().slice(-2)?(s=WA(s),s*=Ry.metersPerPixel(l.zoom)):s=WA(s);else if(Array.isArray(s))return Array.isArray(s[0])?s.map(function(f){return[f[0],wy.convertUnits(f[1],l)]}):s.map(function(f){return wy.convertUnits(f,l)});return s},wy.parseUnits=function(s){var l={val:WA(s)};return 0!==l.val&&"string"==typeof s&&"px"===s.trim().slice(-2)&&(l.units="px"),l},wy.evalCachedDistanceProperty=function(s,l){return s.dynamic?s.dynamic(l):s.zoom&&s.zoom[l.zoom]?s.zoom[l.zoom]:"function"!=typeof s.value?s.zoom?(s.zoom[l.zoom]=R0.interpolate(l.zoom,s.value,function(f){return wy.convertUnits(f,l)}),s.zoom[l.zoom]):wy.convertUnits(s.value,l):(s.dynamic=s.value,s.dynamic(l))},wy.string_colors={},wy.colorForString=function(s){if(wy.string_colors[s])return wy.string_colors[s];var l=null;return"none"!==s&&((l=YA.parseCSSColor(s))&&4===l.length?(l[0]/=255,l[1]/=255,l[2]/=255):l=wy.defaults.color),wy.string_colors[s]=l},wy.evalCachedColorProperty=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(s.dynamic){var f=s.dynamic(l);return"string"==typeof f&&(f=wy.colorForString(f)),f&&null==f[3]&&(f[3]=1),f}if(s.static)return s.static;if(s.zoom&&s.zoom[l.zoom])return s.zoom[l.zoom];if("function"==typeof s.value){s.dynamic=s.value;var g=s.dynamic(l);return"string"==typeof g&&(g=wy.colorForString(g)),g&&null==g[3]&&(g[3]=1),g}if("string"==typeof s.value)return s.static=wy.colorForString(s.value),s.static;if(s.zoom){if(!s.zoom_preprocessed){for(var _=0;_<s.value.length;_++){var k=s.value[_];k&&"string"==typeof k[1]&&(k[1]=wy.colorForString(k[1]))}s.zoom_preprocessed=!0}return s.zoom[l.zoom]=R0.interpolate(l.zoom,s.value),s.zoom[l.zoom][3]=s.zoom[l.zoom][3]||1,s.zoom[l.zoom]}return s.static=s.value.map(function(q){return q}),s.static&&null==s.static[3]&&(s.static[3]=1),s.static},wy.parseColor=function(s){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof s&&(s=s(l)),"string"==typeof s)s=wy.colorForString(s);else if(Array.isArray(s)&&Array.isArray(s[0])){for(var f=0;f<s.length;f++){var g=s[f];"string"==typeof g[1]&&(g[1]=wy.colorForString(g[1]))}l.zoom&&(s=R0.interpolate(l.zoom,s))}return Array.isArray(s)?null==(s=s.map(function(_){return _}))[3]&&(s[3]=1):s=[0,0,0,1],s},wy.calculateOrder=function(s,l){return"function"==typeof s?s=s(l):"string"==typeof s&&(s=l.feature.properties[s]?l.feature.properties[s]:UC(s)),s},wy.evalProperty=function(s,l){return"function"==typeof s?s(l):s};var JT=function(){function s(l,f){A0(this,s),this.key=l,this.repeat_dist=f,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return L0(s,[{key:"check",value:function(l){for(var f=l.position,g=0;g<this.positions.length;g++){var _=this.positions[g],k=f[0]-_[0],q=f[1]-_[1],$=k*k+q*q;if($<this.repeat_dist_sq)return{dist_sq:$,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(l){l&&l.position&&this.positions.push(l.position)}}],[{key:"clear",value:function(l){this.groups[l]={}}},{key:"check",value:function(l,f,g){if(f.repeat_distance&&f.repeat_group&&this.groups[g][f.repeat_group])return this.groups[g][f.repeat_group].check(l)}},{key:"add",value:function(l,f,g){f.repeat_distance&&f.repeat_group&&(null==this.groups[g][f.repeat_group]&&(this.groups[g][f.repeat_group]=new s(f.repeat_group,f.repeat_distance*f.repeat_scale)),this.groups[g][f.repeat_group].add(l))}}]),s}();JT.groups={};var IN=function(){function s(l,f,g){A0(this,s);var _=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(f/g);for(var q=0;q<this.xCellCount*this.yCellCount;q++)_.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}return L0(s,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(l,f,g,_,k){this._forEachCell(f,g,_,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(k)}},{key:"insertCircle",value:function(l,f,g,_){this._forEachCell(f-_,g-_,f+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(g),this.circles.push(_)}},{key:"insertCircleList",value:function(l,f){for(var g=0;g<f.length-2;g+=3)this.insertCircle("".concat(l,"/").concat(g),f[g],f[g+1],f[g+2])}},{key:"_insertBoxCell",value:function(l,f,g,_,k,q){this.boxCells[k].push(q)}},{key:"_insertCircleCell",value:function(l,f,g,_,k,q){this.circleCells[k].push(q)}},{key:"_query",value:function(l,f,g,_,k,q){if(g<0||l>this.width||_<0||f>this.height)return!k&&[];var $=[];if(l<=0&&f<=0&&this.width<=g&&this.height<=_){if(k)return!0;for(var _t=0;_t<this.boxKeys.length;_t++)$.push({key:this.boxKeys[_t],x1:this.bboxes[4*_t],y1:this.bboxes[4*_t+1],x2:this.bboxes[4*_t+2],y2:this.bboxes[4*_t+3]});for(var _n=0;_n<this.circleKeys.length;_n++){var _i=this.circles[3*_n],_o=this.circles[3*_n+1],xa=this.circles[3*_n+2];$.push({key:this.circleKeys[_n],x1:_i-xa,y1:_o-xa,x2:_i+xa,y2:_o+xa})}return q?$.filter(q):$}return this._forEachCell(l,f,g,_,this._queryCell,$,{hitTest:k,seenUids:{box:{},circle:{}}},q),k?0<$.length:$}},{key:"_queryCircle",value:function(l,f,g,_,k){var q=l-g,$=l+g,_t=f-g,_n=f+g;if($<0||q>this.width||_n<0||_t>this.height)return!_&&[];var _i=[];return this._forEachCell(q,_t,$,_n,this._queryCellCircle,_i,{hitTest:_,circle:{x:l,y:f,radius:g},seenUids:{box:{},circle:{}}},k),_?0<_i.length:_i}},{key:"query",value:function(l,f,g,_,k){return this._query(l,f,g,_,!1,k)}},{key:"hitTest",value:function(l,f,g,_,k){return this._query(l,f,g,_,!0,k)}},{key:"hitTestCircle",value:function(l,f,g,_){return this._queryCircle(l,f,g,!0,_)}},{key:"hitTestCircleList",value:function(l,f){for(var g=0;g<l.length-2;g+=3)if(this.hitTestCircle(l[g],l[g+1],l[g+2],f))return!0;return!1}},{key:"_queryCell",value:function(l,f,g,_,k,q,$,_t){var _n=$.seenUids,_i=this.boxCells[k];if(null!==_i){var _o,xa=this.bboxes,ka=ZT(_i);try{for(ka.s();!(_o=ka.n()).done;){var _l=_o.value;if(!_n.box[_l]){_n.box[_l]=!0;var _f=4*_l;if(l<=xa[2+_f]&&f<=xa[3+_f]&&g>=xa[0+_f]&&_>=xa[1+_f]&&(!_t||_t(this.boxKeys[_l]))){if($.hitTest)return q.push(!0),!0;q.push({key:this.boxKeys[_l],x1:xa[_f],y1:xa[1+_f],x2:xa[2+_f],y2:xa[3+_f]})}}}}catch(Oy){ka.e(Oy)}finally{ka.f()}}var _a=this.circleCells[k];if(null!==_a){var _g,ty=this.circles,ny=ZT(_a);try{for(ny.s();!(_g=ny.n()).done;){var uy=_g.value;if(!_n.circle[uy]){_n.circle[uy]=!0;var ry=3*uy;if(this._circleAndRectCollide(ty[ry],ty[1+ry],ty[2+ry],l,f,g,_)&&(!_t||_t(this.circleKeys[uy]))){if($.hitTest)return q.push(!0),!0;var ly=ty[ry],cy=ty[1+ry],by=ty[2+ry];q.push({key:this.circleKeys[uy],x1:ly-by,y1:cy-by,x2:ly+by,y2:cy+by})}}}}catch(Oy){ny.e(Oy)}finally{ny.f()}}}},{key:"_queryCellCircle",value:function(l,f,g,_,k,q,$,_t){var _n=$.circle,_i=$.seenUids,_o=this.boxCells[k];if(null!==_o){var xa,ka=this.bboxes,_l=ZT(_o);try{for(_l.s();!(xa=_l.n()).done;){var _f=xa.value;if(!_i.box[_f]){_i.box[_f]=!0;var _a=4*_f;if(this._circleAndRectCollide(_n.x,_n.y,_n.radius,ka[0+_a],ka[1+_a],ka[2+_a],ka[3+_a])&&(!_t||_t(this.boxKeys[_f])))return q.push(!0),!0}}}catch(cy){_l.e(cy)}finally{_l.f()}}var _g=this.circleCells[k];if(null!==_g){var ty,ny=this.circles,uy=ZT(_g);try{for(uy.s();!(ty=uy.n()).done;){var ry=ty.value;if(!_i.circle[ry]){_i.circle[ry]=!0;var ly=3*ry;if(this._circlesCollide(ny[ly],ny[1+ly],ny[2+ly],_n.x,_n.y,_n.radius)&&(!_t||_t(this.circleKeys[ry])))return q.push(!0),!0}}}catch(cy){uy.e(cy)}finally{uy.f()}}}},{key:"_forEachCell",value:function(l,f,g,_,k,q,$,_t){for(var _n=this._convertToXCellCoord(l),_i=this._convertToYCellCoord(f),_o=this._convertToXCellCoord(g),xa=this._convertToYCellCoord(_),ka=_n;ka<=_o;ka++)for(var _l=_i;_l<=xa;_l++)if(k.call(this,l,f,g,_,this.xCellCount*_l+ka,q,$,_t))return}},{key:"_convertToXCellCoord",value:function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}},{key:"_convertToYCellCoord",value:function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}},{key:"_circlesCollide",value:function(l,f,g,_,k,q){var $=_-l,_t=k-f,_n=g+q;return $*$+_t*_t<_n*_n}},{key:"_circleAndRectCollide",value:function(l,f,g,_,k,q,$){var _t=(q-_)/2,_n=Math.abs(l-(_+_t));if(_t+g<_n)return!1;var _i=($-k)/2,_o=Math.abs(f-(k+_i));if(_i+g<_o)return!1;if(_n<=_t||_o<=_i)return!0;var xa=_n-_t,ka=_o-_i;return xa*xa+ka*ka<=g*g}}]),s}(),ZL=function(s,l,f,g){var _;if(g&&(_=function(cy){return cy!==g.id}),!l){if("point"===s.type&&!s.angle){var k=s.getAABB();if(f.hitTest(k.left,-k.top,k.right,-k.bottom,_)){if(Array.isArray(s.layout.anchor))for(var _i=1;_i<s.layout.anchor.length;_i++){s.setAnchor(s.layout.anchor[_i]);var _o=s.getAABB();if(!f.hitTest(_o.left,-_o.top,_o.right,-_o.bottom,_))return!1}return!0}return!1}var _a=s.getBoundingCircles();return f.hitTestCircleList(_a,_)}if(l){if("point"===s.type&&!s.isFlat()){var _g=s.getScreenSpaceBoundingBox();return f.hitTest(_g.left,_g.top,_g.right,_g.bottom,_)}var ly=s.getBoundingCircles();return f.hitTestCircleList(ly,_)}return!1},ex={tiles:{},startTile:function(s,l){var f=1<arguments.length&&void 0!==l?l:{},g=f.apply_repeat_groups,_=void 0===g||g,k=f.return_hidden,q=void 0!==k&&k,$=f.grid_index,_t=void 0===$?null:$,_n=this.tiles[s]={grid_index:_t||new IN(Ry.tile_scale,Ry.tile_scale,240),objects:{},labels:{},styles:{},repeat:_,return_hidden:q};null==_n.complete&&(_n.complete=new Promise(function(_i,_o){_n.resolve=_i,_n.reject=_o}))},resetTile:function(s){delete this.tiles[s]},abortTile:function(s){this.tiles[s]&&this.tiles[s].resolve&&this.tiles[s].resolve([]),this.resetTile(s)},addStyle:function(s,l){this.tiles[l].styles[s]=!0},collide:function(s,l,f){var g=this.tiles[f];if(!g)return Promise.resolve([]);for(var _=g.objects,k=0;k<s.length;k++){var q=s[k],$=q.label.layout.priority;_[$]=_[$]||{},_[$][l]=_[$][l]||[],_[$][l].push(q)}return delete g.styles[l],0===Object.keys(g.styles).length&&this.endTile(f),g.complete.then(function(){return g.resolve=null,g.labels[l]||[]})},endTile:function(s){var l=this.tiles[s],f=l.labels;l.repeat&&JT.clear(s);for(var g=Object.keys(l.objects).sort(function(_i,_o){return _i-_o}),_=0;_<g.length;_++){var k=l.objects[g[_]];if(k)for(var q in k){var $=k[q];f[q]=f[q]||[];for(var _t=0;_t<$.length;_t++){var _n=$[_t];this.canBePlaced(_n,s,_n.linked,l)?_n.linked?this.canBePlaced(_n.linked,s,_n,l)?(_n.show=!0,(_n.label.breach||_n.linked.label.breach)&&(_n.label.breach=!0,_n.linked.label.breach=!0),f[q].push(_n),this.place(_n,s,l),this.place(_n.linked,s,l)):l.return_hidden&&(_n.show=!1,f[q].push(_n)):(_n.show=!0,f[q].push(_n),this.place(_n,s,l)):l.return_hidden&&(_n.show=!1,f[q].push(_n))}}}delete this.tiles[s],l.resolve()},canBePlaced:function(s,l,f,g){var _=2<arguments.length&&void 0!==f?f:null,k=(3<arguments.length&&void 0!==g?g:{}).repeat,q=void 0===k||k,$=s.label,_t=s.label.layout;if(null!==$.placed)return $.placed;var _n=this.tiles[l].grid_index;if(_t.collide&&ZL($,"main"===l,_n,_&&_.label))_t.collide&&($.placed=!1);else{if(!q||!JT.check($,_t,l))return!0;$.placed=!1}return $.placed},place:function(s,l,f){var g=s.label,_=f.repeat;null===g.placed&&((void 0===_||_)&&JT.add(g,g.layout,l),function(s,l,f){var g,_,k,_n,_i,_o,_f=s.id;s.placed=!0,l||("point"!==s.type||s.angle?(g=s.getBoundingCircles(),f.insertCircleList(_f,g)):(k=(_=s.getAABB()).left,f.insert(_f,k,-_.top,_.right,-_.bottom))),l&&("point"!==s.type||s.isFlat()?(_n=s.getBoundingCircles(),f.insertCircleList(_f,_n)):(_o=(_i=s.getScreenSpaceBoundingBox()).left,f.insert(_f,_o,_i.top,_i.right,_i.bottom)))}(g,"main"===l,this.tiles[l].grid_index))}},a1={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:SS(function(){a1.ignore_user_moving_view=!0},0,500),add:function(s){s.id=a1.id++,s.max_time=s.max_time||a1.max_time,s.pause_factor=s.pause_factor||1;var l=new Promise(function(f,g){s.resolve=f,s.reject=g});return s.promise=l,s.total_elapsed=0,s.stats={calls:0},this.queue.push(s),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<a1.max_time&&this.process(s),s.promise},remove:function(s){var l=this.queue.indexOf(s);-1<l&&this.queue.splice(l,1)},process:function(s){if(!this.state.user_moving_view||!1!==s.user_moving_view||this.ignore_user_moving_view)return s.pause?(s.pause--,!0):(s.stats.calls++,s.start_time=performance.now(),s.run(s));a1._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var s=0;s<this.queue.length;s++){var l=this.queue[s];if(!0!==this.process(l)&&(l.pause||(l.pause=l.elapsed>l.max_time?l.pause_factor:0),l.total_elapsed+=l.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=a1.max_time){this.start_time=null;break}}},finish:function(s,l){return s.elapsed=performance.now()-s.start_time,s.total_elapsed+=s.elapsed,this.remove(s),s.resolve(l),s.promise},cancel:function(s){var l;s.cancel instanceof Function&&(l=s.cancel(s)),s.resolve(l||{})},shouldContinue:function(s){return s.elapsed=performance.now()-s.start_time,this.elapsed=performance.now()-this.start_time,s.elapsed<s.max_time&&this.elapsed<a1.max_time},removeForTile:function(s){for(var l=this.queue.length-1;0<=l;l--)this.queue[l].tile_id===s&&(this.cancel(this.queue[l]),this.queue.splice(l,1))},setState:function(s){this.state=s},hasPendingTasks:function(){return!!this.queue.length}};function eD(s){return{coords:s.coords,uid:s.uid,filtering:s.filtering,sprites:s.sprites,url:s.url,element:s.element,data:s.data,width:s.width,height:s.height,density:s.density,repeat:s.repeat,TEXTURE_WRAP_S:s.TEXTURE_WRAP_S,TEXTURE_WRAP_T:s.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:s.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:s.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var qC=function(){function s(l,f,g){var _=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};A0(this,s),_=eD(_),this.gl=l,this.texture=l.createTexture(),this.texture&&(this.valid=!0),this.manager=g,this.bind(),this.name=f,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=_.filtering,this.density=_.density||1,this.sprites=_.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:f},_)),this.load(_),qy("trace","creating Texture ".concat(this.name))}return L0(s,[{key:"destroy",value:function(l){var f=(0<arguments.length&&void 0!==l?l:{}).force;0<this.retain_count&&!f?qy("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,qy("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&qy("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(l){var f=0<arguments.length&&void 0!==l?l:0;this.valid&&(this.manager.activeUnit!==f&&(this.gl.activeTexture(this.gl.TEXTURE0+f),this.manager.activeUnit=f,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(l){var f=this;return l?(this.loading=null,"string"==typeof l.url?(this.config_type="url",this.setUrl(l.url,l)):l.element?(this.config_type="element",this.setElement(l.element,l)):l.data&&l.width&&l.height&&(this.config_type="data",this.setData(l.width,l.height,l.data,l)),this.loading=this.loading&&this.loading.then(function(){return f.calculateSprites(),f})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(l,f){var g=this,_=1<arguments.length&&void 0!==f?f:{};if(this.valid)return this.url=l,this.loading=new Promise(function(k,q){var $=new Image;$.onload=function(){try{g.setElement($,_)}catch(_t){g.loaded=!1,qy("warn","Texture '".concat(g.name,"': failed to load url: '").concat(g.url,"'"),_t,_),g.manager.trigger("warning",{message:"Failed to load texture from ".concat(g.url),error:_t,texture:_})}g.loaded=!0,k(g)},$.onerror=function(_t){g.loaded=!1,qy("warn","Texture '".concat(g.name,"': failed to load url: '").concat(g.url,"'"),_t,_),g.manager.trigger("warning",{message:"Failed to load texture from ".concat(g.url),error:_t,texture:_}),k(g)},R0.isSafari()&&"data:"===g.url.slice(0,5)||($.crossOrigin="anonymous"),$.src=g.url}),this.loading}},{key:"setData",value:function(l,f,g,_){var k=3<arguments.length&&void 0!==_?_:{};return this.width=l,this.height=f,Array.isArray(g)&&(g=new Uint8Array(g)),this.update(g,k),this.setFiltering(k),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(l,f){var g,_=l;return"string"==typeof l&&(l=document.querySelector(l)),l instanceof HTMLCanvasElement||l instanceof HTMLImageElement||l instanceof HTMLVideoElement?(this.update(l,f),this.setFiltering(f)):(this.loaded=!1,g="the 'element' parameter (`element: ".concat(JSON.stringify(_),"`) must be a CSS "),g+="selector string, or a <canvas>, <image> or <video> object",qy("warn","Texture '".concat(this.name,"': ").concat(g),f),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(g),texture:f})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(l,f){var g=1<arguments.length&&void 0!==f?f:{};this.valid&&(this.bind(),l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof HTMLImageElement&&l.complete?(this.width=l.width,this.height=l.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==g.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,l)):(this._byte_length=l?l.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,l)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(l){var f,g=0<arguments.length&&void 0!==l?l:{};this.valid&&(g.filtering=g.filtering||"linear",f=this.gl,this.bind(),R0.isPowerOf2(this.width)&&R0.isPowerOf2(this.height)?(this.power_of_2=!0,f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,g.TEXTURE_WRAP_S||g.repeat&&f.REPEAT||f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,g.TEXTURE_WRAP_T||g.repeat&&f.REPEAT||f.CLAMP_TO_EDGE),"mipmap"===g.filtering?(this.filtering="mipmap",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR_MIPMAP_LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.generateMipmap(f.TEXTURE_2D)):"linear"===g.filtering?(this.filtering="linear",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):"nearest"===g.filtering&&(this.filtering="nearest",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST))):(this.power_of_2=!1,f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),"nearest"===g.filtering?(this.filtering="nearest",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)):(this.filtering="linear",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var l in this.sprites){var f=this.sprites[l];this.texcoords[l]=this.manager.getTexcoordsForSprite([f[0],f[1]],[f[2],f[3]],[this.width,this.height]),this.sizes[l]=[f[2],f[3]],this.css_sizes[l]=[f[2]/this.density,f[3]/this.density],this.aspects[l]=f[2]/f[3]}}}]),s}();function jS(s){var l=[];return Object.assign(s,{subscribe:function(f){-1===l.indexOf(f)&&l.push(f)},unsubscribe:function(f){var g=l.indexOf(f);-1<g&&l.splice(g,1)},unsubscribeAll:function(){l=[]},trigger:function(f){for(var g=arguments.length,_=new Array(1<g?g-1:0),k=1;k<g;k++)_[k-1]=arguments[k];l.forEach(function(q){if("function"==typeof q[f])try{q[f].apply(q,_)}catch($){qy("warn","Caught exception in listener for event '".concat(f,"':"),$)}})},hasSubscribersFor:function(f){var g=!1;return l.forEach(function(_){"function"==typeof _[f]&&(g=!0)}),g}})}var nD=function(){function s(l){A0(this,s),this.default=s.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=l,s0.addTarget("Texture"+this.scene_id,this),jS(this)}return L0(s,[{key:"create",value:function(l,f,g){for(var _=s.matchers_,k=0;k<_.length;k++){var q=_[k][0],$=_[k][1];if($&&$(g))return new q(l,f,this,g)}return new qC(l,f,this,g)}},{key:"retain",value:function(l){this.textures[l]&&this.textures[l].retain()}},{key:"release",value:function(l){this.textures[l]&&this.textures[l].release()}},{key:"getRetainCount",value:function(l){if(this.textures[l])return this.textures[l].retain_count}},{key:"getByteLength",value:function(l){if(this.textures[l])return this.textures[l].getByteLength()}},{key:"destroy",value:function(l){var f=this;Object.keys(this.textures).forEach(function(g){var _=f.textures[g];g!==f.default&&_.gl===l&&_.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(l,f){var g=this.textures[l];return g&&{size:g.sizes[f],css_size:g.css_sizes[f],aspect:g.aspects[f],texcoords:g.texcoords[f]}}},{key:"getTexcoordsForSprite",value:function(l,f,g){var _=g[1]-l[1]-f[1];return[l[0]/g[0],_/g[1],(f[0]+l[0])/g[0],(f[1]+_)/g[1]]}},{key:"createFromObject",value:function(l,f){var g=[];if(f)for(var _ in f){var k,q=f[_];this.changed(_,q)&&(k=this.create(l,_,q),g.push(k.loading))}return Promise.all(g)}},{key:"createDefault",value:function(l){return this.create(l,this.default)}},{key:"changed",value:function(l,f){var g=this.textures[l];if(g){if("element"===g.config_type||null!=f.element)return!0;if(f=eD(f),this.texture_configs[l]===JSON.stringify(Object.assign({name:l},f)))return!1}return!0}},{key:"getInfo",value:function(l){var f=this;if(l=l||Object.keys(this.textures),Array.isArray(l))return Promise.all(l.map(function(_){return f.getInfo(_)}));var g=this.textures[l];return g?(g.loading||Promise.resolve(g)).then(function(){return{name:g.name,width:g.width,height:g.height,density:g.density,sprites:g.sprites,texcoords:g.texcoords,sizes:g.sizes,css_sizes:g.css_sizes,aspects:g.aspects,filtering:g.filtering,power_of_2:g.power_of_2,valid:g.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(l){var f=this;return n1.is_main?Promise.all(l.map(function(g){var _=f.textures[g];return _&&_.loading||Promise.resolve()})).then(function(){return f.textures}):s0.postMessage("Texture"+this.scene_id+".getInfo",l).then(function(g){return g.forEach(function(_){f.textures[_.name]=_}),f.textures})}},{key:"getMaxTextureSize",value:function(l){return l.getParameter(l.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(l,f){var g=s.matchers_;if(!(l instanceof Function&&f instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(l),g.push([l,f])}},{key:"deRegister",value:function(l){for(var f=s.matchers_,g=0;g<f.length;g++)f[g][0]===l&&f.splice(g,1)}}]),s}();nD.DEFAULT_TEXTURE_NAME="__default",nD.matchers_=[];var VS={};function GE(s){return VS[s]||(VS[s]=new nD(s)),VS[s]}var PI=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},oA_fromValues=function(s,l,f){var g=new Float64Array(3);return g[0]=s,g[1]=l,g[2]=f,g},oA_transformMat4=function(s,l,f){var g=l[0],_=l[1],k=l[2],q=f[3]*g+f[7]*_+f[11]*k+f[15];return s[0]=(f[0]*g+f[4]*_+f[8]*k+f[12])/(q=q||1),s[1]=(f[1]*g+f[5]*_+f[9]*k+f[13])/q,s[2]=(f[2]*g+f[6]*_+f[10]*k+f[14])/q,s},q1_multiply=function(s,l,f){var g=l[0],_=l[1],k=l[2],q=l[3],$=l[4],_t=l[5],_n=l[6],_i=l[7],_o=l[8],xa=l[9],ka=l[10],_l=l[11],_f=l[12],_a=l[13],_g=l[14],ty=l[15],ny=f[0],uy=f[1],ry=f[2],ly=f[3];return s[0]=ny*g+uy*$+ry*_o+ly*_f,s[1]=ny*_+uy*_t+ry*xa+ly*_a,s[2]=ny*k+uy*_n+ry*ka+ly*_g,s[3]=ny*q+uy*_i+ry*_l+ly*ty,s[4]=(ny=f[4])*g+(uy=f[5])*$+(ry=f[6])*_o+(ly=f[7])*_f,s[5]=ny*_+uy*_t+ry*xa+ly*_a,s[6]=ny*k+uy*_n+ry*ka+ly*_g,s[7]=ny*q+uy*_i+ry*_l+ly*ty,s[8]=(ny=f[8])*g+(uy=f[9])*$+(ry=f[10])*_o+(ly=f[11])*_f,s[9]=ny*_+uy*_t+ry*xa+ly*_a,s[10]=ny*k+uy*_n+ry*ka+ly*_g,s[11]=ny*q+uy*_i+ry*_l+ly*ty,s[12]=(ny=f[12])*g+(uy=f[13])*$+(ry=f[14])*_o+(ly=f[15])*_f,s[13]=ny*_+uy*_t+ry*xa+ly*_a,s[14]=ny*k+uy*_n+ry*ka+ly*_g,s[15]=ny*q+uy*_i+ry*_l+ly*ty,s},q1_translate=function(s,l,f){var g,_,k,q,$,_t,_n,_i,_o,xa,ka,_l,_f=f[0],_a=f[1],_g=f[2];return l===s?(s[12]=l[0]*_f+l[4]*_a+l[8]*_g+l[12],s[13]=l[1]*_f+l[5]*_a+l[9]*_g+l[13],s[14]=l[2]*_f+l[6]*_a+l[10]*_g+l[14],s[15]=l[3]*_f+l[7]*_a+l[11]*_g+l[15]):(_=l[1],k=l[2],q=l[3],$=l[4],_t=l[5],_n=l[6],_i=l[7],_o=l[8],xa=l[9],ka=l[10],_l=l[11],s[0]=g=l[0],s[1]=_,s[2]=k,s[3]=q,s[4]=$,s[5]=_t,s[6]=_n,s[7]=_i,s[8]=_o,s[9]=xa,s[10]=ka,s[11]=_l,s[12]=g*_f+$*_a+_o*_g+l[12],s[13]=_*_f+_t*_a+xa*_g+l[13],s[14]=k*_f+_n*_a+ka*_g+l[14],s[15]=q*_f+_i*_a+_l*_g+l[15]),s},q1_identity=PI,q1_invert=function(s,l){var f=l[0],g=l[1],_=l[2],k=l[3],q=l[4],$=l[5],_t=l[6],_n=l[7],_i=l[8],_o=l[9],xa=l[10],ka=l[11],_l=l[12],_f=l[13],_a=l[14],_g=l[15],ty=f*$-g*q,ny=f*_t-_*q,uy=f*_n-k*q,ry=g*_t-_*$,ly=g*_n-k*$,cy=_*_n-k*_t,by=_i*_f-_o*_l,Oy=_i*_a-xa*_l,My=_i*_g-ka*_l,Sy=_o*_a-xa*_f,Vy=_o*_g-ka*_f,e0=xa*_g-ka*_a,Ly=ty*e0-ny*Vy+uy*Sy+ry*My-ly*Oy+cy*by;return Ly?(s[0]=($*e0-_t*Vy+_n*Sy)*(Ly=1/Ly),s[1]=(_*Vy-g*e0-k*Sy)*Ly,s[2]=(_f*cy-_a*ly+_g*ry)*Ly,s[3]=(xa*ly-_o*cy-ka*ry)*Ly,s[4]=(_t*My-q*e0-_n*Oy)*Ly,s[5]=(f*e0-_*My+k*Oy)*Ly,s[6]=(_a*uy-_l*cy-_g*ny)*Ly,s[7]=(_i*cy-xa*uy+ka*ny)*Ly,s[8]=(q*Vy-$*My+_n*by)*Ly,s[9]=(g*My-f*Vy-k*by)*Ly,s[10]=(_l*ly-_f*uy+_g*ty)*Ly,s[11]=(_o*uy-_i*ly-ka*ty)*Ly,s[12]=($*Oy-q*Sy-_t*by)*Ly,s[13]=(f*Sy-g*Oy+_*by)*Ly,s[14]=(_f*ny-_l*ry-_a*ty)*Ly,s[15]=(_i*ry-_o*ny+xa*ty)*Ly,s):null},uE_transformMat4=function(s,l,f){var g=l[0],_=l[1],k=l[2],q=l[3];return s[0]=f[0]*g+f[4]*_+f[8]*k+f[12]*q,s[1]=f[1]*g+f[5]*_+f[9]*k+f[13]*q,s[2]=f[2]*g+f[6]*_+f[10]*k+f[14]*q,s[3]=f[3]*g+f[7]*_+f[11]*k+f[15]*q,s},uE_scale=function(s,l,f){return s[0]=l[0]*f,s[1]=l[1]*f,s[2]=l[2]*f,s[3]=l[3]*f,s},AE=function(){function s(l,f){A0(this,s),this._gl=l,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var g=GE(f).create(this._gl,"selection_fbo",{filtering:"nearest"});g.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,g.texture,0);var _=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,_),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,_),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return L0(s,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var l;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(l=this._gl).clearColor.apply(l,l_(s.defaultColor))}},{key:"getFeatureAt",value:function(l,f,g){var _=f.radius,k=f.top_most_only,q=void 0===k||k;!l||l.x<0||l.y<0||1<l.x||1<l.y?g({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:l,radius:_,top_most_only:q,ttl:q?1:s.MAX_PICKING_TRIES,callback:g})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var l in this._requests)this._requests[l].callback(new Error("cleared")),delete this._requests[l];this._pending_deep_request=null}},{key:"read",value:function(l){if(this.hasPendingRequests()){var f=this._gl;for(var g in f.bindFramebuffer(f.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,l),this._requests)if(this.processRequest(this._requests[g],l))break;f.bindFramebuffer(f.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(l,f){var g,_,k,q=this._gl,$=255,_t=l.point,_n=l.radius,_i=(k=_n?(_=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*_n.x*this._fbo_size.width),_),y:Math.min(Math.ceil(2*_n.y*this._fbo_size.height),_)}):(_n={x:0,y:0},{x:1,y:1})).x*k.y*4;if(null==this._pixels||this._pixels.byteLength<_i)this._pixels=new Uint8Array(_i);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,_i);else for(var _o=0;_o<_i;_o++)this._pixels[_o]=0;q.readPixels(Math.round((_t.x-_n.x)*this._fbo_size.width),Math.round((1-_t.y-_n.y)*this._fbo_size.height),k.x,k.y,q.RGBA,q.UNSIGNED_BYTE,this._pixels),l.ttl--;var xa=Math.floor(k.x/2),ka=Math.floor(k.y/2),_f=this._pixels.slice(_l=4*(ka*k.x+xa),_l+4),_a=_f[0]+(_f[1]<<8)+(_f[2]<<16);if(0<_a)g=_a+(_f[3]<<24)>>>0,$=_f[3];else if(4<_i)for(var _g=1/0,_l=0,ty=0;ty<k.y;ty++)for(var ny,uy=0;uy<k.x;uy++,_l+=4)0<(_a=(_f=this._pixels.slice(_l,_l+4))[0]+(_f[1]<<8)+(_f[2]<<16))&&(ny=Math.pow(uy-xa,2)+Math.pow(ty-ka,2))<_g&&(g=_a+(_f[3]<<24)>>>0,$=_f[3],_g=ny);if(255!==$){var ry=this._getFeatureByKey(g,f);if(l.features||(l.features=[]),!ry)return void this._finishRead(l);if(l.features.every(function(ly){return ly.id!==ry.id})&&l.features.push(ry),l.ttl)return this._pending_deep_request=l,s._discardColor(_f),this._has_dirty_buffer=!0;this._finishRead(l)}else this._finishRead(l)}},{key:"_finishRead",value:function(l){var f=l.features||s.EMPTY_ARRAY;l.top_most_only||(this._pending_deep_request=null,s._resetDiscardedColors()),delete this._requests[l.id],l.callback({features:f})}},{key:"_getFeatureByKey",value:function(l,f){for(var g=null,_=0;_<f.length;_++){var k=f[_];if(k.selection_data&&(g=k.selection_data[l])){g.tile={coords:k.coords};break}}return g}},{key:"setupDiscards",value:function(l){for(var f=s.MAX_PICKING_TRIES;f--;)l.uniform("4fv","u_selection_discard".concat(f),s._discarded_colors[f]||s.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var l=255&this.map_entry,f=this.map_entry>>8&255,g=this.map_entry>>16&255,_=this.map_prefix;return{key:l+(f<<8)+(g<<16)+(_<<24)>>>0,color:[l/255,f/255,g/255,_/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(l){this.map_prefix=l}},{key:"_discardColor",value:function(l){this._discarded_colors.push([l[0]/255,l[1]/255,l[2]/255,l[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),s}();AE._discarded_colors=[],AE.map_entry=0,AE.map_prefix=0,AE.defaultColor=[0,0,0,1],AE.MAX_PICKING_TRIES=10,AE.EMPTY_ARRAY=Object.freeze([]);var px={parseUniforms:function(s){var l=[];for(var f in s){var g,_=f,k=s[f];if("number"==typeof k)l.push({type:"float",method:"1f",name:f,value:k,key:_,uniforms:s});else if(Array.isArray(k)){if("number"==typeof k[0])2<=k.length&&k.length<=4?l.push({type:"vec"+k.length,method:k.length+"fv",name:f,value:k,key:_,uniforms:s}):4<k.length&&l.push({type:"float[]",method:"1fv",name:f+"[0]",value:k,key:_,uniforms:s});else if("string"==typeof k[0])for(g=0;g<k.length;g++)l.push({type:"sampler2D",method:"1i",name:f+"["+g+"]",value:k[g],key:g,uniforms:k});else if(Array.isArray(k[0])&&"number"==typeof k[0][0]&&2<=k[0].length&&k[0].length<=4)for(g=0;g<k.length;g++)l.push({type:"vec"+k[0].length,method:k[g].length+"fv",name:f+"["+g+"]",value:k[g],key:g,uniforms:k})}else"boolean"==typeof k?l.push({type:"bool",method:"1i",name:f,value:k,key:_,uniforms:s}):"string"==typeof k&&l.push({type:"sampler2D",method:"1i",name:f,value:k,key:_,uniforms:s})}return l},defineVariable:function(s,l){var f,g;if("number"==typeof l)f="float";else if(Array.isArray(l))"number"==typeof l[0]?2<=l.length&&l.length<=4?f="vec"+l.length:(f="float",g=l.length):"string"==typeof l[0]&&(f="sampler2D",g=l.length);else if("boolean"==typeof l)f="bool";else{if("string"!=typeof l)return;f="sampler2D"}var _="";return _+="".concat(f," ").concat(s),g&&(_+="[".concat(g,"]")),_+";\n"},defineUniform:function(s,l){var f=px.defineVariable(s,l);if(f)return"uniform "+f},isUniformDefined:function(s,l){var f=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+s+"\\b","g");return!!l.match(f)},isSymbolReferenced:function(s,l){var f=new RegExp("\\b"+s+"\\b","g");return 0<=l.search(f)},expandVec3:function(s){var l,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(s)){if(2!==s.length)return s;l=[].concat(l_(s),[f]).map(parseFloat)}else l=[s,s,s].map(parseFloat);if(l&&l.every(function(g){return"number"==typeof g&&!isNaN(g)}))return l},expandVec4:function(s){var l,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(s)){if(3!==s.length)return s;l=[].concat(l_(s),[f]).map(parseFloat)}else l=[s,s,s,f].map(parseFloat);if(l&&l.every(function(g){return"number"==typeof g&&!isNaN(g)}))return l}},rD=[];function qE(s,l){var f=rD.filter(function(g){return g[0]===s})[0];return(f=f&&f[1])||(rD.push([s,{}]),f=rD[rD.length-1][1]),f[l]||(f[l]=s.getExtension(l)),f[l]}function dx(s){var l,f,g=0;if(0===s.length)return g;for(l=0,f=s.length;l<f;l++)g=(g<<5)-g+s.charCodeAt(l),g|=0;return g}var BS=_e(function(s){var l="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",f=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,g=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,_=s.exports=function(k,q){return k?_.block(_.line(k,q),q):""};_.block=function(k,q){q=q||{};var $=new RegExp("\\/\\*"+l,"gm");return q.safe&&($=new RegExp("\\/\\*(?!\\*?\\!)"+l,"gm")),k?k.replace($,""):""},_.line=function(k,q){var $=f;return(q=q||{}).safe&&($=g),k?k.replace($,""):""}}),$A=/^\s*#pragma.*$/gm,KA=/\\\s*\n/gm,u0=function(){function s(l,f,g,_,k){if(A0(this,s),k=k||{},this.textureManager=GE(_),this.gl=l,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!s.polyfills[_]){s.polyfills[_]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(q){s.polyfills[_].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function($,_t,_n){s.polyfills[_].uniformMatrix3fv.call(this,$,_t,new Float32Array(_n))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(q){s.polyfills[_].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function($,_t,_n){s.polyfills[_].uniformMatrix4fv.call(this,$,_t,new Float32Array(_n))}}}this.defines=Object.assign({},k.defines||{}),this.blocks=Object.assign({},k.blocks||{}),this.block_scopes=Object.assign({},k.block_scopes||{}),this.extensions=k.extensions||[],this.dependent_uniforms=k.uniforms,this.uniforms={},this.attribs={},this.vertex_source=f,this.fragment_source=g,this.id=s.id++,this.name=k.name}return L0(s,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(s.current!==this&&this.gl.useProgram(this.program),s.current=this)}},{key:"compile",value:function(){var l=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var f,g=this.checkExtensions(),_=this.buildDefineList(),k=this.buildShaderBlockList();for(var q in k){var $,_t,_n,_i=k[q];!_i||Array.isArray(_i)&&0===_i.length||(f=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+q+"\\s*$","m"),$=this.computed_vertex_source.match(f),_t=this.computed_fragment_source.match(f),null==$&&null==_t||(_n="",_i.forEach(function(ka){var _l="".concat(ka.scope,", ").concat(ka.key,", ").concat(ka.num);_n+="\n// tangram-block-start: ".concat(_l,"\n"),_n+=ka.source,_n+="\n// tangram-block-end: ".concat(_l,"\n")}),null!=$&&(this.computed_vertex_source=this.computed_vertex_source.replace(f,_n)),null!=_t&&(this.computed_fragment_source=this.computed_fragment_source.replace(f,_n)),_["TANGRAM_BLOCK_"+q.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace($A,""),this.computed_fragment_source=this.computed_fragment_source.replace($A,""),this.ensureUniforms(this.dependent_uniforms);var xa=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),_o=xa&&0<xa.precision?"precision highp float;\n":"precision mediump float;\n";_.TANGRAM_VERTEX_SHADER=!0,_.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=_o+s.buildDefineString(_)+this.computed_vertex_source,_.TANGRAM_VERTEX_SHADER=!1,_.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=s.buildExtensionString(g)+_o+s.buildDefineString(_)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(KA,""),this.computed_fragment_source=this.computed_fragment_source.replace(KA,"");try{this.program=s.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(ka){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=ka).type&&"fragment"!==ka.type||(this.shader_errors=ka.errors,this.shader_errors.forEach(function(_l){_l.type=ka.type,_l.block=l.block(ka.type,_l.line)})),ka}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var l,f={};for(l in s.defines)f[l]=s.defines[l];for(l in this.defines)f[l]=this.defines[l];return f}},{key:"buildShaderBlockList",value:function(){var l,f,g={};for(l in s.blocks)g[l]=[],Array.isArray(s.blocks[l])?(f=g[l]).push.apply(f,l_(s.blocks[l].map(function(_t,_n){return{key:l,source:_t,num:_n,scope:"ShaderProgram"}}))):g[l]=[{key:l,source:s.blocks[l],num:0,scope:"ShaderProgram"}];for(l in this.blocks)if(g[l]=g[l]||[],Array.isArray(this.blocks[l]))for(var _=this.block_scopes&&this.block_scopes[l]||[],k=null,q=0,$=0;$<this.blocks[l].length;$++)_[$]!==k&&(k=_[$],q=0),g[l].push({key:l,source:this.blocks[l][$],num:q,scope:k||this.name}),q++;else g[l].push({key:l,source:this.blocks[l],num:0,scope:this.name});return g}},{key:"ensureUniforms",value:function(l){if(l){var f,g=BS(this.computed_vertex_source),_=BS(this.computed_fragment_source),k=[],q=[];for(var $ in l){var _t=px.isUniformDefined($,g),_n=px.isUniformDefined($,_);if(!_t||!_n){if(!(f=px.defineUniform($,l[$])))continue;_t||(qy("trace","Program ".concat(this.name,": ").concat($," not defined in vertex shader, injecting: '").concat(f,"'")),k.push(f)),_n||(qy("trace","Program ".concat(this.name,": ").concat($," not defined in fragment shader, injecting: '").concat(f,"'")),q.push(f))}}0<k.length&&(this.computed_vertex_source=k.join("\n")+this.computed_vertex_source),0<q.length&&(this.computed_fragment_source=q.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(l,f){var g=!(1<arguments.length&&void 0!==f)||f;if(this.compiled){g&&(this.texture_unit=0);for(var _=px.parseUniforms(l),k=0;k<_.length;k++){var q=_[k];"sampler2D"===q.type?this.setTextureUniform(q.name,q.value):this.uniform(q.method,q.name,q.value)}}}},{key:"saveUniforms",value:function(l){var f=l||this.uniforms;for(var g in f){var _=this.uniforms[g];_&&(_.saved_value=_.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(l){var f=l||this.uniforms;for(var g in f){var _=this.uniforms[g];_&&_.saved_value&&(_.value=_.saved_value,this.updateUniform(_))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(l,f){var g=this.textureManager.textures[f];null!=g?(g.bind(this.texture_unit),this.uniform("1i",l,this.texture_unit),this.texture_unit++):qy("warn","Cannot find texture '".concat(f,"'"))}},{key:"uniform",value:function(l,f,g){var _;this.compiled&&(this.uniforms[f]=this.uniforms[f]||{},(_=this.uniforms[f]).name=f,void 0===_.location&&(_.location=this.gl.getUniformLocation(this.program,f)),_.method=l,_.value=g,this.updateUniform(_))}},{key:"updateUniform",value:function(l){this.compiled&&l&&null!=l.location&&(this.use(),this.commitUniform(l))}},{key:"commitUniform",value:function(l){var f=l.location,g=l.value;switch(l.method){case"1i":this.gl.uniform1i(f,g);break;case"1f":this.gl.uniform1f(f,g);break;case"2f":this.gl.uniform2f(f,g[0],g[1]);break;case"3f":this.gl.uniform3f(f,g[0],g[1],g[2]);break;case"4f":this.gl.uniform4f(f,g[0],g[1],g[2],g[3]);break;case"1iv":this.gl.uniform1iv(f,g);break;case"3iv":this.gl.uniform3iv(f,g);break;case"1fv":this.gl.uniform1fv(f,g);break;case"2fv":this.gl.uniform2fv(f,g);break;case"3fv":this.gl.uniform3fv(f,g);break;case"4fv":this.gl.uniform4fv(f,g);break;case"Matrix3fv":this.gl.uniformMatrix3fv(f,!1,g);break;case"Matrix4fv":this.gl.uniformMatrix4fv(f,!1,g)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var l in this.uniforms){var f=this.uniforms[l];f.location=this.gl.getUniformLocation(this.program,l),this.updateUniform(f)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(l){if(this.compiled){var f=this.attribs[l]=this.attribs[l]||{};return null!=f.location||(f.name=l,f.location=this.gl.getAttribLocation(this.program,l)),f}}},{key:"source",value:function(l){return"vertex"===l?this.computed_vertex_source:"fragment"===l?this.computed_fragment_source:void 0}},{key:"lines",value:function(l){var f=this.source(l);return f?f.split("\n"):[]}},{key:"line",value:function(l,f){var g=this.lines(l);if(g)return g[f]}},{key:"block",value:function(l,f){for(var g,_=this.lines(l),k=0;k<f&&k<_.length;k++){var q=_[k],$=q.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);$&&1<$.length?g={scope:$[1],name:$[2],num:$[3]}:($=q.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<$.length&&(g=null),g&&(g.line=null==g.line?-1:g.line+1,g.source=q)}return g}},{key:"checkExtensions",value:function(){var l=this,f=[];return this.extensions.forEach(function(g){var _=qE(l.gl,g),k="TANGRAM_EXTENSION_".concat(g);l.defines[k]=null!=_,_?f.push(g):qy("debug","Could not enable extension '".concat(g,"'"))}),f}}]),s}();u0.polyfills={},u0.id=0,u0.current=null,u0.defines={},u0.blocks={},u0.reset=function(){u0.programs_by_source={},u0.shaders_by_source={}},u0.reset(),u0.buildDefineString=function(s){var l="";for(var f in s)null!=s[f]&&!1!==s[f]&&("boolean"==typeof s[f]&&!0===s[f]?l+="#define "+f+"\n":"number"==typeof s[f]&&Math.floor(s[f])===s[f]?l+="#define "+f+" "+s[f].toFixed(1)+"\n":l+="#define "+f+" "+s[f]+"\n");return l},u0.buildExtensionString=function(s){var l="";return(s=s||[]).forEach(function(f){l+="#ifdef GL_".concat(f,"\n#extension GL_").concat(f," : enable\n#endif\n")}),l},u0.addBlock=function(s){var l;u0.blocks[s]=u0.blocks[s]||[];for(var f=arguments.length,g=new Array(1<f?f-1:0),_=1;_<f;_++)g[_-1]=arguments[_];(l=u0.blocks[s]).push.apply(l,g)},u0.removeBlock=function(s){u0.blocks[s]=[]},u0.replaceBlock=function(s){u0.removeBlock(s);for(var l=arguments.length,f=new Array(1<l?l-1:0),g=1;g<l;g++)f[g-1]=arguments[g];u0.addBlock.apply(u0,[s].concat(f))},u0.updateProgram=function(s,l,f,g){var _=dx(s._tangram_id+"::"+f+"::"+g);if(u0.programs_by_source[_])return qy("trace","Reusing identical source GL program object"),u0.programs_by_source[_];var k=u0.createShader(s,f,s.VERTEX_SHADER),q=u0.createShader(s,g,s.FRAGMENT_SHADER);if(s.useProgram(null),null!=l)for(var $=s.getAttachedShaders(l),_t=0;_t<$.length;_t++)s.detachShader(l,$[_t]);else l=s.createProgram();if(null==k||null==q)return l;if(s.attachShader(l,k),s.attachShader(l,q),s.linkProgram(l),s.getProgramParameter(l,s.LINK_STATUS))return u0.programs_by_source[_]=l;var _n=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(s.getProgramParameter(l,s.VALIDATE_STATUS),"\n            ERROR: ").concat(s.getError(),"\n            --- Vertex Shader ---\n            ").concat(f,"\n            --- Fragment Shader ---\n            ").concat(g));throw Object.assign(new Error(_n),{type:"program"})};var F_,sA={disabled:!(u0.createShader=function(s,l,f){var g=dx(s._tangram_id+"::"+l);if(u0.shaders_by_source[g])return qy("trace","Reusing identical source GL shader object"),u0.shaders_by_source[g];var _=s.createShader(f);if(s.shaderSource(_,l),s.compileShader(_),s.getShaderParameter(_,s.COMPILE_STATUS))return u0.shaders_by_source[g]=_;var k=f===s.VERTEX_SHADER?"vertex":"fragment",q=s.getShaderInfoLog(_),$=function(s){s=String(s);for(var l,f=[];l=s.match(/ERROR\:([^\n]+)/);){s=s.slice(l.index+1);var g=(q=l[1].trim()).split(":"),_=g.slice(2).join(":").trim(),k=parseInt(g[0],10),q=parseInt(g[1],10);f.push({message:_,file:k,line:q})}return f}(q);throw Object.assign(new Error(q),{type:k,errors:$})}),bound_vao:[],init:function(s){var l;!0!==this.disabled&&(l=qE(s,"OES_vertex_array_object")),null!=l?qy("info","Vertex Array Object extension available"):qy("warn",!0!==this.disabled?"Vertex Array Object extension NOT available":"Vertex Array Object extension force disabled")},create:function(s,l,f){var g={};g.setup=l,g.teardown=f;var _=qE(s,"OES_vertex_array_object");return null!=_&&(g._vao=_.createVertexArrayOES(),_.bindVertexArrayOES(g._vao)),g.setup(!0),g},getCurrentBinding:function(s){var l=this.bound_vao.filter(function(f){return f[0]===s})[0];return l&&l[1]},setCurrentBinding:function(s,l){var f=this.bound_vao,g=f.filter(function(_){return _[0]===s})[0];null==g?f.push([s,l]):g[1]=l},bind:function(s,l){var f,g=qE(s,"OES_vertex_array_object");null!=l?null!=g&&null!=l._vao?(g.bindVertexArrayOES(l._vao),this.setCurrentBinding(s,l)):l.setup(!1):(f=this.getCurrentBinding(s),null!=g?g.bindVertexArrayOES(null):null!=f&&"function"==typeof f.teardown&&f.teardown(),this.setCurrentBinding(s,null))},destroy:function(s,l){var f=qE(s,"OES_vertex_array_object");null!=f&&null!=l&&null!=l._vao&&(f.deleteVertexArrayOES(l._vao),l._vao=null)}},ZA=function(){function s(l,f,g,_,k,q){A0(this,s),q=q||{},this.textureManager=GE(k),this.gl=l,this.vertex_data=f,this.element_data=g,this.vertex_layout=_,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=q.draw_mode||this.gl.TRIANGLES,this.data_usage=q.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=q.uniforms,this.textures=q.textures,this.retain=q.retain||!1,this.created_at=+new Date,this.fade_in_time=q.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return L0(s,[{key:"render",value:function(l){var f=0<arguments.length&&void 0!==l?l:{};if(!this.valid)return!1;var g=f.program||u0.current;g.use(),this.uniforms&&(g.saveUniforms(this.uniforms),g.setUniforms(this.uniforms,!1));var _=(new Date-this.created_at)/1e3;return g.uniform("1f","u_visible_time",_),this.bind(g),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),sA.bind(this.gl,null),this.uniforms&&g.restoreUniforms(this.uniforms),_<this.fade_in_time}},{key:"bind",value:function(l){var f=this,g=this.vaos[l.id];g?sA.bind(this.gl,g):this.vaos[l.id]=sA.create(this.gl,function(_){f.gl.bindBuffer(f.gl.ARRAY_BUFFER,f.vertex_buffer),f.toggle_element_array&&f.gl.bindBuffer(f.gl.ELEMENT_ARRAY_BUFFER,f.element_buffer),f.vertex_layout.enable(f.gl,l,_)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var l=this;if(!this.valid)return!1;for(var f in this.valid=!1,this.vaos)sA.destroy(this.gl,this.vaos[f]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(g){return l.textureManager.release(g)}),!0}}]),s}(),ON=["emission","ambient","diffuse","specular"],LI=function(){function s(l){var f=this;A0(this,s),l=l||{},ON.forEach(function(g){var _=l[g];null!=_&&(f[g]=_.texture?{texture:_.texture,mapping:_.mapping||"spheremap",scale:px.expandVec3(null!=_.scale?_.scale:1),amount:px.expandVec4(null!=_.amount?_.amount:1)}:"number"==typeof _||Array.isArray(_)?{amount:px.expandVec4(_)}:"string"==typeof _?{amount:wy.parseColor(_)}:_)}),this.specular&&(this.specular.shininess=l.shininess?parseFloat(l.shininess):.2),null!=l.normal&&(this.normal={texture:l.normal.texture,mapping:l.normal.mapping||"triplanar",scale:px.expandVec3(null!=l.normal.scale?l.normal.scale:1),amount:null!=l.normal.amount?l.normal.amount:1})}return L0(s,[{key:"inject",value:function(l){var f=this;ON.forEach(function(g){var _="TANGRAM_MATERIAL_".concat(g.toUpperCase()),k=_+"_TEXTURE";l.defines[_]=null!=f[g],f[g]&&f[g].texture&&(l.defines[k]=!0,l.defines[k+"_"+f[g].mapping.toUpperCase()]=!0,l.defines["TANGRAM_MATERIAL_TEXTURE_".concat(f[g].mapping.toUpperCase())]=!0,l.texcoords=l.texcoords||"uv"===f[g].mapping)}),this.normal&&this.normal.texture&&(l.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,l.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,l.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,l.texcoords=l.texcoords||"uv"===this.normal.mapping),l.replaceShaderBlock(s.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),l.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(l){var f=this;ON.forEach(function(g){f[g]&&(f[g].texture?(l.setTextureUniform("u_material_".concat(g,"_texture"),f[g].texture),l.uniform("3fv","u_material.".concat(g,"Scale"),f[g].scale),l.uniform("4fv","u_material.".concat(g),f[g].amount)):f[g].amount&&l.uniform("4fv","u_material.".concat(g),f[g].amount))}),this.specular&&l.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(l.setTextureUniform("u_material_normal_texture",this.normal.texture),l.uniform("3fv","u_material.normalScale",this.normal.scale),l.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(l){return null!=l&&(null!=l.emission||null!=l.ambient||null!=l.diffuse||null!=l.specular)}}]),s}();LI.block="material";var r0=F_={};F_.copy=function(s){for(var l=[],f=s.length,g=0;g<f;g++)l[g]=s[g];return l},F_.neg=function(s){for(var l=[],f=s.length,g=0;g<f;g++)l[g]=-s[g];return l},F_.add=function(s,l){for(var f=[],g=Math.min(s.length,l.length),_=0;_<g;_++)f[_]=s[_]+l[_];return f},F_.sub=function(s,l){for(var f=[],g=Math.min(s.length,l.length),_=0;_<g;_++)f[_]=s[_]-l[_];return f},F_.signed_area=function(s,l,f){return(l[0]-s[0])*(f[1]-s[1])-(f[0]-s[0])*(l[1]-s[1])},F_.mult=function(s,l){var f,g=[],_=s.length;if("number"==typeof l)for(f=0;f<_;f++)g[f]=s[f]*l;else for(_=Math.min(s.length,l.length),f=0;f<_;f++)g[f]=s[f]*l[f];return g},F_.multMatrix=function(s,l){return[s[0][0]*l[0]+s[0][1]*l[1],s[1][0]*l[0]+s[1][1]*l[1]]},F_.div=function(s,l){var f=[];if("number"==typeof l)for(_=0;_<s.length;_++)f[_]=s[_]/l;else for(var g=Math.min(s.length,l.length),_=0;_<g;_++)f[_]=s[_]/l[_];return f},F_.perp=function(s,l){return[l[1]-s[1],s[0]-l[0]]},F_.rot=function(s,l){var f=Math.cos(l),g=Math.sin(l);return[s[0]*f-s[1]*g,s[0]*g+s[1]*f]},F_.angle=function(s){var l=g0(s,2);return Math.atan2(l[1],l[0])},F_.angleBetween=function(s,l){var f=F_.dot(F_.normalize(F_.copy(s)),F_.normalize(F_.copy(l)));return 1<f&&(f=1),Math.acos(f)},F_.signedAngleBetween=function(s,l){return Math.atan2(s[0]*l[1]-s[1]*l[0],s[0]*l[0]+s[1]*l[1])},F_.isEqual=function(s,l){for(var f=s.length,g=0;g<f;g++)if(s[g]!==l[g])return!1;return!0},F_.lengthSq=function(s){return 2===s.length?s[0]*s[0]+s[1]*s[1]:3<=s.length?s[0]*s[0]+s[1]*s[1]+s[2]*s[2]:0},F_.length=function(s){return Math.sqrt(F_.lengthSq(s))},F_.normalize=function(s){var l;if(2===s.length){if(1==(l=s[0]*s[0]+s[1]*s[1]))return s;0!==(l=Math.sqrt(l))?(s[0]/=l,s[1]/=l):(s[0]=0,s[1]=0)}else if(3<=s.length){if(1==(l=s[0]*s[0]+s[1]*s[1]+s[2]*s[2]))return s;0!==(l=Math.sqrt(l))?(s[0]/=l,s[1]/=l,s[2]/=l):(s[0]=0,s[1]=0,s[2]=0)}return s},F_.cross=function(s,l){return 2===s.length?s[0]*l[1]-s[1]*l[0]:3===s.length?[s[1]*l[2]-s[2]*l[1],s[2]*l[0]-s[0]*l[2],s[0]*l[1]-s[1]*l[0]]:void 0},F_.dot=function(s,l){for(var f=0,g=Math.min(s.length,l.length),_=0;_<g;_++)f+=s[_]*l[_];return f};var nx=function(){function s(l,f){A0(this,s),this.name=f.name,this.view=l,this.ambient=null==f.ambient||"number"==typeof f.ambient?px.expandVec3(f.ambient||0):wy.parseColor(f.ambient).slice(0,3),this.diffuse=null==f.diffuse||"number"==typeof f.diffuse?px.expandVec3(null!=f.diffuse?f.diffuse:1):wy.parseColor(f.diffuse).slice(0,3),this.specular=null==f.specular||"number"==typeof f.specular?px.expandVec3(f.specular||0):wy.parseColor(f.specular).slice(0,3)}return L0(s,[{key:"inject",value:function(){var l="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),f="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");u0.addBlock(s.block,l),u0.addBlock("setup",f)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(l){l.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),l.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),l.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(l,f){if(s.types[f.type])return new s.types[f.type](l,f)}},{key:"setMode",value:function(l,f){!0===l&&(l="fragment"),f.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===(l=s.enabled&&(null!=l?l:"fragment")),f.defines.TANGRAM_LIGHTING_VERTEX="vertex"===l}},{key:"inject",value:function(l){if(u0.removeBlock(s.block),s.enabled){var f="";if(l&&0<Object.keys(l).length){var g={};for(var _ in l)g[l[_].type]=!0;for(var k in g)s.types[k].inject();for(var q in l)l[q].inject(),f+="calculateLight(".concat(q,", _eyeToPoint, _normal);\n")}var $="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(f,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");u0.addBlock(s.block,$)}}}]),s}();nx.types={},nx.block="lighting",nx.enabled=!0;var XL=function(){M1(l,nx);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).type="ambient",_.struct_name="AmbientLight",_}return L0(l,[{key:"setupProgram",value:function(f){f.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){u0.addBlock(nx.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),l}();nx.types.ambient=XL;var p_=function(){M1(l,nx);var s=j1(l);function l(f,g){var _,k;return A0(this,l),(_=s.call(this,f,g)).type="directional",_.struct_name="DirectionalLight",g.direction?_._direction=g.direction:(k=Math.sin(60*Math.PI/180),_._direction=[Math.cos(135*Math.PI/180)*k,Math.sin(135*Math.PI/180)*k,-.5]),null==g.ambient&&(_.ambient=px.expandVec3(.5)),_.direction=_._direction.map(parseFloat),_._initial_direction=[_.direction[0],_.direction[1],_.direction[2]],_}return L0(l,[{key:"update",value:function(){oA_transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(f){S_(Q_(l.prototype),"setupProgram",this).call(this,f),f.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(f){this._direction=r0.normalize(r0.copy(f))}}],[{key:"inject",value:function(){u0.addBlock(nx.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),l}();nx.types.directional=p_;var RN=function(){M1(l,nx);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).type="point",_.struct_name="PointLight",_.position=g.position||[0,0,"100px"],_.position_eye=[],_.origin=g.origin||"ground",_.attenuation=isNaN(parseFloat(g.attenuation))?0:parseFloat(g.attenuation),_.radius=g.radius?Array.isArray(g.radius)&&2===g.radius.length?g.radius:[null,g.radius]:null,_}return L0(l,[{key:"inject",value:function(){S_(Q_(l.prototype),"inject",this).call(this),u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var f,g,_,k=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(g=(f=g0(Ry.latLngToMeters(this.position),2))[0],_=f[1],this.position_eye[0]=g-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=_-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=wy.convertUnits(this.position[2],{zoom:k,meters_per_pixel:Ry.metersPerPixel(k)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=wy.convertUnits(this.position,{zoom:k,meters_per_pixel:Ry.metersPerPixel(k)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(f){S_(Q_(l.prototype),"setupProgram",this).call(this,f),f.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&f.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var g=this.view.lookAtManipulator.getLookAtData().zoom;u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&f.uniform("1f","u_".concat(this.name,".innerRadius"),wy.convertUnits(this.radius[0],{zoom:g,meters_per_pixel:Ry.metersPerPixel(g)})),u0.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&f.uniform("1f","u_".concat(this.name,".outerRadius"),wy.convertUnits(this.radius[1],{zoom:g,meters_per_pixel:Ry.metersPerPixel(g)}))}}],[{key:"inject",value:function(){u0.addBlock(nx.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),l}();nx.types.point=RN;var NN=function(){M1(l,RN);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).type="spotlight",_.struct_name="SpotLight",_.direction=_._direction=(g.direction||[0,0,-1]).map(parseFloat),_._initial_direction=[_.direction[0],_.direction[1],_.direction[2]],_.exponent=g.exponent?parseFloat(g.exponent):.2,_.angle=g.angle?parseFloat(g.angle):20,_}return L0(l,[{key:"setupProgram",value:function(f){S_(Q_(l.prototype),"setupProgram",this).call(this,f),f.uniform("3fv","u_".concat(this.name,".direction"),this.direction),f.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),f.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){S_(Q_(l.prototype),"update",this).call(this),oA_transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(f){this._direction=r0.normalize(r0.copy(f))}}],[{key:"inject",value:function(){u0.addBlock(nx.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),l}();function aA(s){for(var l=0;l<(arguments.length<=1?0:arguments.length-1);l++){var f=l+1<1||arguments.length<=l+1?void 0:arguments[l+1];if(f)for(var g in f){var _=f[g];null===_||"object"!==D_(_)||Array.isArray(_)?void 0!==_&&(s[g]=_):s[g]=null===s[g]||"object"!==D_(s[g])||Array.isArray(s[g])?aA({},_):aA(s[g],_)}}return s}nx.types.spotlight=NN;var QL="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",r1={init:function(s){var l=0<arguments.length&&void 0!==s?s:{},f=l.generation,g=l.styles,_=l.sources,k=void 0===_?{}:_,q=l.introspection,$=l.id,_t=void 0!==$?$+"/":"";this.scene_id=$,this.textureManager=GE($),this.main_thread_target="".concat(_t,"Style/").concat(this.name),this.setGeneration(f),this.styles=g,this.sources=k,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=q||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof LI||(LI.isValid(this.material)||(this.material=wy.defaults.material),this.material=new LI(this.material)),this.material.inject(this),nx.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),s0.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(s){this.generation=s,n1.is_main&&s0.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(s,l,f,g){var _=g.size,k=void 0===(k=g.offset)?0:k,q=s.index[l];if(void 0!==q)for(var $=0;$<_;++$)this.vertex_template[q+$+k]=f.length>$?f[$]:f;else qy("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(l,"'"))},startData:function(s){this.tile_data[s.id]=this.tile_data[s.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(s){var l=this.tile_data[s.id];if(this.tile_data[s.id]=null,l&&0<Object.keys(l.meshes).length){for(var f in l.meshes){var g=l.meshes[f];0!==g.vertex_data.vertex_count?(g.vertex_data.end(),g.vertex_elements=g.vertex_data.element_buffer,g.vertex_data=g.vertex_data.vertex_buffer):delete l.meshes[f]}return s.mesh_data[this.name]=l,this.buildRasterTextures(s,l).then(function(_){return _})}return Promise.resolve(null)},hasDataForTile:function(s){return null!=this.tile_data[s.id]},getTileMesh:function(s,l){var f=this.tile_data[s.id].meshes;return null==f[l.key]&&(f[l.key]={variant:l,vertex_data:this.vertexLayoutForMeshVariant(l).createVertexData()}),f[l.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(s,l){this.style_mesh_variants[s]||(this.style_mesh_variants[s]={variants:{}});var f=this.computeVariantForDraw(l);return this.style_mesh_variants[s].variants[f.key]={variant:f,times_unref:0},this.style_mesh_variants[s].variants[f.key].variant},getMeshVariantTypeForDraw:function(s){return this.getMeshVariantType(this.base,s)},getMeshVariantType:function(s,l){void 0===s&&(s="default");var f=this.style_mesh_variants[s];if(void 0===l.variantKey||!f||!f.variants[l.variantKey])return this.addMeshVariantForDraw(s,l);var _=f.variants[l.variantKey];return _.times_unref=0,_.variant},updateMeshVariantTypeCache:function(s){for(var l in this.style_mesh_variants){var f=this.style_mesh_variants[l].variants;for(var g in f){var _=f[g];_.times_unref++,_.times_unref>s&&("default"!==l||0!=+g)&&(delete f[g],0===Object.keys(f).length&&delete this.style_mesh_variants[l])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(s,l,f){var g=f.tile;this.tile_data[g.id]||this.startData(g);var _,k,q,$,_t=this.parseFeature(s,l,f);_t&&(_=this.getMeshVariantTypeForDraw("lines"===this.base?l:_t),q=(k=this.getTileMesh(g,_)).vertex_data.offset,$=k.vertex_data.vertex_count,0<this.buildGeometry(s.geometry,_t,k,f)?s.generation=this.generation:k.vertex_data.vertex_count>$&&(k.vertex_data.vertex_buffer.fill(0,q,k.vertex_data.offset),k.vertex_data.vertex_count=$,k.vertex_data.offset=q))},buildGeometry:function(s,l,f,g){var _;return"Polygon"===s.type?_=this.buildPolygons([s.coordinates],l,f,g):"MultiPolygon"===s.type?_=this.buildPolygons(s.coordinates,l,f,g):"LineString"===s.type?_=this.buildLines([s.coordinates],l,f,g):"MultiLineString"===s.type?_=this.buildLines(s.coordinates,l,f,g):"Point"===s.type?_=this.buildPoints([s.coordinates],l,f,g):"MultiPoint"===s.type&&(_=this.buildPoints(s.coordinates,l,f,g)),_},parseFeature:function(s,l,f){try{var g,_,k,q=this.feature_style;if(q.order=this.parseOrder(l.order,f),null==q.order&&"overlay"!==this.blend){var $="Layer '".concat(l.layers.join(", "),"', draw group '").concat(l.group,"': ");return $+="'order' parameter is required unless blend mode is 'overlay'",null!=l.order&&($+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",$+="or JS function), but evaluated to null for one or more features"),void qy({level:"warn",once:!0},$)}return(q=this._parseFeature(s,l,f))?(q.interactive=!!this.selection&&wy.evalProperty(this.introspection||l.interactive,f),!0===q.interactive?(_=(g=AE.makeEntry()).color,k=g.key,q.selection_color=_,f.tile.selection_data||(f.tile.selection_data={}),f.tile.selection_data[k]={id:s.id||k,properties:s.properties,source_name:f.source,source_layer:f.layer,layers:f.layers}):q.selection_color=AE.defaultColor,q):void 0}catch(_t){qy("error","Style.parseFeature: style parsing error",s,q,_t.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(s,l){if(!s.preprocessed){if(this.draw)for(var f in this.draw){var g=this.draw[f];"object"!==D_(g)||Array.isArray(g)?null==s[f]&&(s[f]=g):s[f]=aA({},g,s[f])}if(!(s=this._preprocess(s,l||"")))return;s.preprocessed=!0}return s},_preprocess:function(s){return s},parseOrder:function(s,l){return"number"!=typeof s?wy.calculateOrder(s,l):s},scaleOrder:function(s){return 2*s},parseColor:function(s,l){return s?wy.evalCachedColorProperty(s,l):this.shaders.blocks.color||this.shaders.blocks.filter?wy.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(s){this.gl=s,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(s,l,f){var g=2<arguments.length&&void 0!==f?f:{},_=this.vertexLayoutForMeshVariant(g.variant);return new ZA(this.gl,s,l,_,this.scene_id,g)},render:function(s){return s.render()},getProgram:function(s){var l=0<arguments.length&&void 0!==s?s:"program";this.compileSetup();var f=this[l];if(f&&!f.error){if(!f.compiled)try{f.compile()}catch(g){qy("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(l,"')"),this,g.stack)}return f}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var s,l=this.buildDefineList();this.selection&&((s=Object.assign({},l)).TANGRAM_FEATURE_SELECTION=!0);var f=this.shaders&&this.shaders.blocks,g=this.shaders&&this.shaders.block_scopes,_=Object.assign({},this.shaders&&this.shaders.uniforms);for(var k in _)null==_[k]&&qy({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(k,"': uniform values must be non-null"));var q=this.shaders&&this.shaders.extensions;"string"==typeof q&&(q=[q]),this.program=new u0(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:l,uniforms:_,blocks:f,block_scopes:g,extensions:q}),this.selection_program=this.selection?new u0(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:s,uniforms:_,blocks:f,block_scopes:g,extensions:q}):null,this.compile_setup=!0}},addShaderBlock:function(s,l,f){var g=2<arguments.length&&void 0!==f?f:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[s]=this.shaders.blocks[s]||[],this.shaders.blocks[s].push(l),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[s]=this.shaders.block_scopes[s]||[],this.shaders.block_scopes[s].push(g)},removeShaderBlock:function(s){this.shaders.blocks&&(this.shaders.blocks[s]=null)},replaceShaderBlock:function(s,l,f){var g=2<arguments.length&&void 0!==f?f:null;this.removeShaderBlock(s),this.addShaderBlock(s,l,g)},buildDefineList:function(){var s={};if(null!=this.defines)for(var l in this.defines)s[l]=this.defines[l];if(null!=this.shaders&&null!=this.shaders.defines)for(l in this.shaders.defines)s[l]=this.shaders.defines[l];return s},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!n1.is_main||!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var s=!1;for(var l in this.sources)if(this.sources[l]instanceof FI){s=!0;break}return!!s&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",QL,"Raster"),!0)},buildRasterTextures:function(s,l){var f=this;if(!this.hasRasters())return Promise.resolve(l);var g={};return s.rasters.map(function(_){return f.sources[_]}).filter(function(_){return _}).forEach(function(_,k){var q;_ instanceof FI&&(q=_.tileTexture(s),g[q.url]=q)}),0===Object.keys(g).length?Promise.resolve(l):s0.postMessage(this.main_thread_target+".loadTextures",g).then(function(_){if(!_||_.length<1)return qy("trace","Missing texture info for tile ".concat(s.key)),null;if(_.some(function(_n){return!_n.loaded}))return null;l.uniforms=l.uniforms||{},l.textures=l.textures||[];var q,$=_[0].name,_t=g[$].coords;return l.uniforms.u_raster=$,l.textures.push($),s.coords.z>_t.z?(q=Math.pow(2,s.coords.z-_t.z),l.uniforms.u_raster_offset=[(s.coords.x%q+q)%q/q,(q-1-s.coords.y%q)/q,1/q]):l.uniforms.u_raster_offset=[0,0,1],l})},loadTextures:function(s){var l=this;return this.textureManager.createFromObject(this.gl,s).then(function(){return Promise.all(Object.keys(s).map(function(f){return l.textureManager.textures[f]&&l.textureManager.textures[f].load()}).filter(function(f){return f}))}).then(function(f){return f.forEach(function(g){return g.retain()}),f.map(function(g){return{name:g.name,width:g.width,height:g.height,loaded:g.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(u0.current)},setUniforms:function(){var s=u0.current;s&&s.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(s){var l=[],f={};for(var g in s.forEach(function(_){var k=parseInt(_.name,10)||0;f[k]||(f[k]=[]),f[k].push(_)}),f)l.push.apply(l,l_(f[g].sort(r1.blendOrderSort)));return l},blendOrderSort:function(s,l){return"opaque"===s.blend||"opaque"===l.blend?"opaque"===s.blend&&"opaque"===l.blend?s.name<l.name?-1:1:"opaque"===s.blend?-1:1:s.blend_order<l.blend_order||!(s.blend_order>l.blend_order)&&(r1.default_blend_orders[s.blend]<r1.default_blend_orders[l.blend]||!(r1.default_blend_orders[s.blend]>r1.default_blend_orders[l.blend])&&s.name<l.name)?-1:1}},r8=0,i8=0,c1=function(){function s(l){var f=l.coords,g=l.style_zoom,_=l.source,k=l.worker,q=l.view,$=l.sceneId;A0(this,s),this.textureManager=GE($),this.id=r8++,this.worker=k,this.view=q,this.source=_,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=g,this.coords=s.normalizedCoordinate(f,this.source,this.style_zoom),this.key=s.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Ry.metersForTile(this.coords),this.max=Ry.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Ry.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Ry.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Ry.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return L0(s,[{key:"freeResources",value:function(){for(var l in this.meshes)this.meshes[l].forEach(function(f){return f.destroy()});this.meshes={}}},{key:"destroy",value:function(){a1.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var l=arguments.length,f=new Array(l),g=0;g<l;g++)f[g]=arguments[g];return s0.postMessage.apply(s0,[this.worker].concat(f))}},{key:"build",value:function(l,f){var g=(1<arguments.length&&void 0!==f?f:{}).fade_in,_=void 0===g||g;return this.generation=l,this.fade_in=_,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(l,f){if(!this.error){this.build_id=i8++;var g={},_=this.mesh_data;if(_)for(var k in _){for(var q in _[k].meshes){var $=_[k].meshes[q];if($.vertex_data){if(!l[k]){qy("warn","Could not create mesh because style '".concat(k,"' not found, for tile ").concat(this.key,", aborting tile"));break}var _t=Object.assign({},_[k]);_t.uniforms=Object.assign({},_t.uniforms,$.uniforms),_t.variant=$.variant,$.textures&&(_t.textures=$.textures),$.labels&&(_t.retain=!0);var _n=l[k].makeMesh($.vertex_data,$.vertex_elements,_t);_n.variant=_t.variant,_n.labels=$.labels,g[k]=g[k]||[],g[k].push(_n),null==_n.variant.order&&(_n.variant.order=g[k].length-1)}}g[k]&&g[k].sort(function(xa,ka){var _l=xa.variant.order,_f=ka.variant.order;return null!=_l&&(null==_f||_l<_f)?-1:1})}for(var _i in delete this.mesh_data,g)this.meshes[_i]&&this.meshes[_i].forEach(function(xa){return xa.destroy()}),this.meshes[_i]=g[_i],this.new_mesh_styles.push(_i);if(f.done){for(var _o in this.meshes)-1===this.new_mesh_styles.indexOf(_o)&&(this.meshes[_o].forEach(function(xa){return xa.destroy()}),delete this.meshes[_o]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(l){l?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(l),this.proxy_depth=1,l.proxied_as=l.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(l){return!this.proxy_for||this.proxy_for.some(function(f){return null==f.meshes[l]})}},{key:"setupProgram",value:function(l,f){var g=l.model,_=l.model32;f.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),f.uniform("1f","u_tile_proxy_depth",this.proxy_depth),q1_identity(g),q1_translate(g,g,oA_fromValues(this.min.x,this.min.y,0)),function(s,l,f){var g=f[0],_=f[1],k=f[2];s[0]=l[0]*g,s[1]=l[1]*g,s[2]=l[2]*g,s[3]=l[3]*g,s[4]=l[4]*_,s[5]=l[5]*_,s[6]=l[6]*_,s[7]=l[7]*_,s[8]=l[8]*k,s[9]=l[9]*k,s[10]=l[10]*k,s[11]=l[11]*k,s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15]}(g,g,oA_fromValues(this.span.x/Ry.tile_scale,-1*this.span.y/Ry.tile_scale,1)),function(s,l){s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15]}(_,g),f.uniform("Matrix4fv","u_model",_),f.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(l){return this.loading=l.loading,this.loaded=l.loaded,this.generation=l.generation,this.error=l.error,this.mesh_data=l.mesh_data,this.selection_data?Object.assign(this.selection_data,l.selection_data):this.selection_data=l.selection_data,this}}],[{key:"coord",value:function(l){return{x:l.x,y:l.y,z:l.z,key:s.coordKey(l)}}},{key:"coordKey",value:function(l){return l.x+"/"+l.y+"/"+l.z}},{key:"key",value:function(l,f,g){if(!(l.y<0||l.y>=1<<l.z||l.z<0))return[f.name,g,l.x,l.y,l.z].join("/")}},{key:"normalizedKey",value:function(l,f,g){return s.key(s.normalizedCoordinate(l,f,g),f,g)}},{key:"normalizedCoordinate",value:function(l,f){return f.zoom_bias&&(l=s.coordinateAtZoom(l,Math.max(0,l.z-f.zoom_bias))),s.coordinateWithMaxZoom(l,f.max_zoom)}},{key:"coordinateAtZoom",value:function(l,f){var g,_=l.x,k=l.y,q=l.z;return q!==f&&(g=Math.pow(2,q-f),_=Math.floor(_/g),k=Math.floor(k/g),q=f),s.coord({x:_,y:k,z:q})}},{key:"coordinateWithMaxZoom",value:function(l,f){var g=l.x,_=l.y,k=l.z;return void 0!==f&&f<k?s.coordinateAtZoom({x:g,y:_,z:k},f):s.coord({x:g,y:_,z:k})}},{key:"childrenForCoordinate",value:function(l){var f=l.x,g=l.y,_=l.z,k=l.key;return s.coord_children[k]||(_++,s.coord_children[k]=[s.coord({x:f*=2,y:g*=2,z:_}),s.coord({x:f+1,y:g,z:_}),s.coord({x:f,y:g+1,z:_}),s.coord({x:f+1,y:g+1,z:_})]),s.coord_children[k]}},{key:"isDescendant",value:function(l,f){if(f.z>l.z){var g=s.coordinateAtZoom(f,l.z);return l.x===g.x&&l.y===g.y}return!1}},{key:"cancel",value:function(l){l&&(l.canceled=!0,l.source_data&&l.source_data.request_id&&(R0.cancelRequest(l.source_data.request_id),l.source_data.request_id=null),s.abortBuild(l))}},{key:"buildGeometry",value:function(l,f){var g=f.scene_id,_=f.layers,k=f.styles,q=f.global,$=f.sources,_t=f.meshVariantMaxLife,_n=l.source_data;for(var _i in ex.startTile(l.id,{apply_repeat_groups:!0}),_){var _o=_[_i];if(_o&&_o.config_data){if(_o.config_data.source===l.source)for(var xa=s._getDataForSource(_n,_o.config_data,_i),ka=0;ka<xa.length;ka++){var _l=xa[ka],_f=_l.geom;if(_f)for(var _a=0;_a<_f.features.length;_a++){var _g=_f.features[_a];if(null!=_g.geometry){var ty=wy.getFeatureParseContext(_g,l,q,$);ty.winding=l.default_winding,ty.source=l.source,ty.layer=_l.layer;var ny=_o.buildDrawGroups(ty,!0);if(ny)for(var uy in ny){var ry=ny[uy],ly=ry.style||uy,cy=k[ly];cy?null!=(ry=cy.preprocess(ry,l.source))&&!1!==ry.visible&&(ty.layers=ry.layers,cy.addFeature(_g,ry,ty)):qy("warn","Style '".concat(ly,"' not found, skipping layer '").concat(_i,"':"),ry,_g)}}}}}else qy("warn","Layer ".concat(_i," was defined without a geometry data source and will not be rendered."))}var by=s._stylesForTile(l,k);s._sendStyleGroups(l,by,{scene_id:g,meshVariantMaxLife:_t},function(Oy){return Oy.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(l,f){var g=[];for(var _ in f)f[_].hasDataForTile(l)&&g.push(f[_]);return g}},{key:"_sendStyleGroups",value:function(l,f,g,_){var k=g.scene_id,q=g.meshVariantMaxLife,$={};f.forEach(function(_t){var _n=_(_t);$[_n]=$[_n]||[],$[_n].push(_t)}),0<Object.keys($).length?function(){var _t={start:!0};for(var _n in l.mesh_data={},$)!function(_i){Promise.all($[_i].map(function(xa){return xa.endData(l)})).then(function(){qy("trace","Finished style group '".concat(_i,"' for tile ").concat(l.key)),$[_i]=[],Object.keys($).every(function(xa){return 0===$[xa].length})&&(_t.done=!0),s0.postMessage("TileManager_".concat(k,".buildTileStylesCompleted"),s0.withTransferables({tile:s.slice(l,["mesh_data","selection_data"]),progress:_t})),_t.start=null,l.mesh_data={},l.selection_data={},_t.done&&ex.resetTile(l.id)},function(xa){qy("error","Error for style group '".concat(_i,"' for tile ").concat(l.key),xa)})}(_n);r1.updateMeshVariantTypeCache(q)}():(s0.postMessage("TileManager_".concat(k,".buildTileStylesCompleted"),s0.withTransferables({tile:s.slice(l),progress:{start:!0,done:!0}})),ex.resetTile(l.id))}},{key:"_getDataForSource",value:function(l,f,g){var _=2<arguments.length&&void 0!==g?g:null,k=[];return null!=f&&null!=l&&null!=l.layers&&(!f.layer&&l.layers._default||"string"==typeof f.layer&&!l.layers[f.layer]&&new RegExp("^\\d+_"+f.layer+"$").test(_)&&l.layers._default?k.push({geom:l.layers._default}):!f.layer&&_?k.push({layer:_,geom:l.layers[_]}):"string"==typeof f.layer?k.push({layer:f.layer,geom:l.layers[f.layer]}):Array.isArray(f.layer)&&f.layer.forEach(function(q){l.layers[q]&&l.layers[q].features&&k.push({layer:q,geom:l.layers[q]})})),k}},{key:"abortBuild",value:function(l,f){if(a1.removeForTile(l.id),ex.abortTile(l.id),l.mesh_data)for(var g in l.mesh_data){var _=l.mesh_data[g].textures;_&&_.forEach(function(k){var q=GE(f).textures[k];q&&(qy("trace","releasing texture ".concat(k," for tile ").concat(l.key)),q.release())})}}},{key:"slice",value:function(l,f){var g=["id","key","loading","loaded","generation","error","debug"];Array.isArray(f)&&g.push.apply(g,l_(f));for(var _={},k=0;k<g.length;k++){var q=g[k];_[q]=l[q]}return _}}]),s}();c1.coord_children={};var PN,FI=function(){M1(l,UL);var s=j1(l);function l(f,g){var _;return A0(this,l),-1===(_=s.call(this,f,g)).rasters.indexOf(_.name)&&_.rasters.unshift(_.name),_.filtering=f.filtering,_.textures={},_}return L0(l,[{key:"load",value:function(f){f.source_data={},f.source_data.layers={},f.pad_scale=this.pad_scale,f.rasters=l_(this.rasters);var g=Ry.tile_scale;return f.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[g,0],[g,-g],[0,-g],[0,0]]]},properties:{}}]}},f.default_winding="CW",Promise.resolve(f)}},{key:"tileTexture",value:function(f){var g,_,k=f.coords.key;return this.textures[k]||(g=c1.coordinateWithMaxZoom(f.coords,this.max_zoom),_=this.formatUrl(this.url,{coords:g}),this.textures[k]={url:_,filtering:this.filtering,coords:g}),this.textures[k]}}]),l}();_b.register(FI,"Raster");var LN=PN={};function XA(s,l,f,g){for(var _,k=g,q=f-l>>1,$=f-l,_t=s[l],_n=s[l+1],_i=s[f],_o=s[f+1],xa=l+3;xa<f;xa+=3){var ka,_l=(_f=s[xa],_a=s[xa+1],cy=void 0,ry=void 0,ly=void 0,ly=(uy=_o)-(ty=_n),0==(ry=(ny=_i)-(_g=_t))&&0===ly||(1<(cy=((_f-_g)*ry+(_a-ty)*ly)/(ry*ry+ly*ly))?(_g=ny,ty=uy):0<cy&&(_g+=ry*cy,ty+=ly*cy)),(ry=_f-_g)*ry+(ly=_a-ty)*ly);k<_l?(_=xa,k=_l):_l!==k||(ka=Math.abs(xa-q))<$&&(_=xa,$=ka)}var _f,_a,_g,ty,ny,uy,cy,ry,ly;g<k&&(3<_-l&&XA(s,l,_,g),s[_+2]=k,3<f-_&&XA(s,_,f,g))}function zS(s,l,f,g){var _={id:void 0===s?null:s,type:l,geometry:f,tags:g,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(k){var q=k.geometry,$=k.type;if("Point"===$||"MultiPoint"===$||"LineString"===$)b1(k,q);else if("Polygon"===$||"MultiLineString"===$)for(var _t=0;_t<q.length;_t++)b1(k,q[_t]);else if("MultiPolygon"===$)for(_t=0;_t<q.length;_t++)for(var _n=0;_n<q[_t].length;_n++)b1(k,q[_t][_n])}(_),_}function b1(s,l){for(var f=0;f<l.length;f+=3)s.minX=Math.min(s.minX,l[f]),s.minY=Math.min(s.minY,l[f+1]),s.maxX=Math.max(s.maxX,l[f]),s.maxY=Math.max(s.maxY,l[f+1])}function oD(s,l){var f=[];if("FeatureCollection"===s.type)for(var g=0;g<s.features.length;g++)QA(f,s.features[g],l,g);else QA(f,"Feature"===s.type?s:{geometry:s},l);return f}function QA(s,l,f,g){if(l.geometry){var _=l.geometry.coordinates,k=l.geometry.type,q=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),$=[],_t=l.id;if(f.promoteId?_t=l.properties[f.promoteId]:f.generateId&&(_t=g||0),"Point"===k)JL(_,$);else if("MultiPoint"===k)for(var _n=0;_n<_.length;_n++)JL(_[_n],$);else if("LineString"===k)jI(_,$,q,!1);else if("MultiLineString"===k){if(f.lineMetrics){for(_n=0;_n<_.length;_n++)jI(_[_n],$=[],q,!1),s.push(zS(_t,"LineString",$,l.properties));return}Tx(_,$,q,!1)}else if("Polygon"===k)Tx(_,$,q,!0);else{if("MultiPolygon"!==k){if("GeometryCollection"!==k)throw new Error("Input data is not a valid GeoJSON object.");for(_n=0;_n<l.geometry.geometries.length;_n++)QA(s,{id:_t,geometry:l.geometry.geometries[_n],properties:l.properties},f,g);return}for(_n=0;_n<_.length;_n++){var _i=[];Tx(_[_n],_i,q,!0),$.push(_i)}}s.push(zS(_t,k,$,l.properties))}}function JL(s,l){l.push(CE(s[0])),l.push(sD(s[1])),l.push(0)}function jI(s,l,f,g){for(var _,k,q=0,$=0;$<s.length;$++){var _t=CE(s[$][0]),_n=sD(s[$][1]);l.push(_t),l.push(_n),l.push(0),0<$&&(q+=g?(_*_n-_t*k)/2:Math.sqrt(Math.pow(_t-_,2)+Math.pow(_n-k,2))),_=_t,k=_n}var _i=l.length-3;l[2]=1,XA(l,0,_i,f),l[2+_i]=1,l.size=Math.abs(q),l.start=0,l.end=l.size}function Tx(s,l,f,g){for(var _=0;_<s.length;_++){var k=[];jI(s[_],k,f,g),l.push(k)}}function CE(s){return s/360+.5}function sD(s){var l=Math.sin(s*Math.PI/180),f=.5-.25*Math.log((1+l)/(1-l))/Math.PI;return f<0?0:1<f?1:f}function Xb(s,l,f,g,_,k,q,$){if(g/=l,(f/=l)<=k&&q<g)return s;if(q<f||g<=k)return null;for(var _t=[],_n=0;_n<s.length;_n++){var _i=s[_n],_o=_i.geometry,xa=_i.type,ka=0===_?_i.minX:_i.minY,_l=0===_?_i.maxX:_i.maxY;if(f<=ka&&_l<g)_t.push(_i);else if(!(_l<f||g<=ka)){var _f=[];if("Point"===xa||"MultiPoint"===xa)!function(ty,ny,uy,ry,ly){for(var cy=0;cy<ty.length;cy+=3){var by=ty[cy+ly];uy<=by&&by<=ry&&(ny.push(ty[cy]),ny.push(ty[cy+1]),ny.push(ty[cy+2]))}}(_o,_f,f,g,_);else if("LineString"===xa)A2(_o,_f,f,g,_,!1,$.lineMetrics);else if("MultiLineString"===xa)BI(_o,_f,f,g,_,!1);else if("Polygon"===xa)BI(_o,_f,f,g,_,!0);else if("MultiPolygon"===xa)for(var _a=0;_a<_o.length;_a++){var _g=[];BI(_o[_a],_g,f,g,_,!0),_g.length&&_f.push(_g)}if(_f.length){if($.lineMetrics&&"LineString"===xa){for(_a=0;_a<_f.length;_a++)_t.push(zS(_i.id,xa,_f[_a],_i.tags));continue}"LineString"!==xa&&"MultiLineString"!==xa||(1===_f.length?(xa="LineString",_f=_f[0]):xa="MultiLineString"),"Point"!==xa&&"MultiPoint"!==xa||(xa=3===_f.length?"Point":"MultiPoint"),_t.push(zS(_i.id,xa,_f,_i.tags))}}}return _t.length?_t:null}function A2(s,l,f,g,_,k,q){for(var $,_t,_n=VI(s),_i=0===_?o8:s8,_o=s.start,xa=0;xa<s.length-3;xa+=3){var ny=s[xa],uy=s[xa+1],ry=s[xa+2],ka=s[xa+3],_l=s[xa+4],_f=0===_?ny:uy,_a=0===_?ka:_l,_g=!1;q&&($=Math.sqrt(Math.pow(ny-ka,2)+Math.pow(uy-_l,2))),_f<f?f<_a&&(_t=_i(_n,ny,uy,ka,_l,f),q&&(_n.start=_o+$*_t)):g<_f?_a<g&&(_t=_i(_n,ny,uy,ka,_l,g),q&&(_n.start=_o+$*_t)):zI(_n,ny,uy,ry),_a<f&&f<=_f&&(_t=_i(_n,ny,uy,ka,_l,f),_g=!0),g<_a&&_f<=g&&(_t=_i(_n,ny,uy,ka,_l,g),_g=!0),!k&&_g&&(q&&(_n.end=_o+$*_t),l.push(_n),_n=VI(s)),q&&(_o+=$)}var ty=s.length-3;ny=s[ty],uy=s[ty+1],ry=s[ty+2],f<=(_f=0===_?ny:uy)&&_f<=g&&zI(_n,ny,uy,ry),ty=_n.length-3,k&&3<=ty&&(_n[ty]!==_n[0]||_n[ty+1]!==_n[1])&&zI(_n,_n[0],_n[1],_n[2]),_n.length&&l.push(_n)}function VI(s){var l=[];return l.size=s.size,l.start=s.start,l.end=s.end,l}function BI(s,l,f,g,_,k){for(var q=0;q<s.length;q++)A2(s[q],l,f,g,_,k,!1)}function zI(s,l,f,g){s.push(l),s.push(f),s.push(g)}function o8(s,l,f,g,_,k){var q=(k-l)/(g-l);return s.push(k),s.push(f+(_-f)*q),s.push(1),q}function s8(s,l,f,g,_,k){var q=(k-f)/(_-f);return s.push(l+(g-l)*q),s.push(k),s.push(1),q}function HI(s,l){var f=l.buffer/l.extent,g=s,_=Xb(s,1,-1-f,f,0,-1,2,l),k=Xb(s,1,1-f,2+f,0,-1,2,l);return(_||k)&&(g=Xb(s,1,-f,1+f,0,-1,2,l)||[],_&&(g=Dx(_,1).concat(g)),k&&(g=g.concat(Dx(k,-1)))),g}function Dx(s,l){for(var f=[],g=0;g<s.length;g++){var _,k=s[g],q=k.type;if("Point"===q||"MultiPoint"===q||"LineString"===q)_=aD(k.geometry,l);else if("MultiLineString"===q||"Polygon"===q){_=[];for(var $=0;$<k.geometry.length;$++)_.push(aD(k.geometry[$],l))}else if("MultiPolygon"===q)for(_=[],$=0;$<k.geometry.length;$++){for(var _t=[],_n=0;_n<k.geometry[$].length;_n++)_t.push(aD(k.geometry[$][_n],l));_.push(_t)}f.push(zS(k.id,q,_,k.tags))}return f}function aD(s,l){var f=[];f.size=s.size,void 0!==s.start&&(f.start=s.start,f.end=s.end);for(var g=0;g<s.length;g+=3)f.push(s[g]+l,s[g+1],s[g+2]);return f}function uA(s,l){if(s.transformed)return s;for(var f,g=1<<s.z,_=s.x,k=s.y,q=0;q<s.features.length;q++){var $=s.features[q],_t=$.geometry,_n=$.type;if($.geometry=[],1===_n)for(f=0;f<_t.length;f+=2)$.geometry.push(t4(_t[f],_t[f+1],l,g,_,k));else for(f=0;f<_t.length;f++){for(var _i=[],_o=0;_o<_t[f].length;_o+=2)_i.push(t4(_t[f][_o],_t[f][_o+1],l,g,_,k));$.geometry.push(_i)}}return s.transformed=!0,s}function t4(s,l,f,g,_,k){return[Math.round(f*(s*g-_)),Math.round(f*(l*g-k))]}function UI(s,l,f,g,_){for(var k=l===_.maxZoom?0:_.tolerance/((1<<l)*_.extent),q={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:g,z:l,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$=0;$<s.length;$++){q.numFeatures++,function(xa,ka,_l,_f){var _a=ka.geometry,_g=ka.type,ty=[];if("Point"===_g||"MultiPoint"===_g)for(var ny=0;ny<_a.length;ny+=3)ty.push(_a[ny]),ty.push(_a[ny+1]),xa.numPoints++,xa.numSimplified++;else if("LineString"===_g)GI(ty,_a,xa,_l,!1,!1);else if("MultiLineString"===_g||"Polygon"===_g)for(ny=0;ny<_a.length;ny++)GI(ty,_a[ny],xa,_l,"Polygon"===_g,0===ny);else if("MultiPolygon"===_g)for(var uy=0;uy<_a.length;uy++){var ry=_a[uy];for(ny=0;ny<ry.length;ny++)GI(ty,ry[ny],xa,_l,!0,0===ny)}if(ty.length){var ly=ka.tags||null;if("LineString"===_g&&_f.lineMetrics){for(var cy in ly={},ka.tags)ly[cy]=ka.tags[cy];ly.mapbox_clip_start=_a.start/_a.size,ly.mapbox_clip_end=_a.end/_a.size}var by={geometry:ty,type:"Polygon"===_g||"MultiPolygon"===_g?3:"LineString"===_g||"MultiLineString"===_g?2:1,tags:ly};null!==ka.id&&(by.id=ka.id),xa.features.push(by)}}(q,s[$],k,_);var _t=s[$].minX,_n=s[$].minY,_i=s[$].maxX,_o=s[$].maxY;_t<q.minX&&(q.minX=_t),_n<q.minY&&(q.minY=_n),_i>q.maxX&&(q.maxX=_i),_o>q.maxY&&(q.maxY=_o)}return q}function GI(s,l,f,g,_,k){var q=g*g;if(0<g&&l.size<(_?q:g))f.numPoints+=l.length/3;else{for(var $=[],_t=0;_t<l.length;_t+=3)(0===g||l[_t+2]>q)&&(f.numSimplified++,$.push(l[_t]),$.push(l[_t+1])),f.numPoints++;_&&function(_n,_i){for(var _o=0,xa=0,ka=_n.length,_l=ka-2;xa<ka;_l=xa,xa+=2)_o+=(_n[xa]-_n[_l])*(_n[xa+1]+_n[_l+1]);if(0<_o===_i)for(xa=0,ka=_n.length;xa<ka/2;xa+=2){var _f=_n[xa],_a=_n[xa+1];_n[xa]=_n[ka-2-xa],_n[xa+1]=_n[ka-1-xa],_n[ka-2-xa]=_f,_n[ka-1-xa]=_a}}($,k),s.push($)}}var e4={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(PN.deepClone=function(s){return Array.isArray(s)?s.map(PN.deepClone):s}),promoteId:null,generateId:!1};function n4(s,l,f,g,_){var k=Object.assign({},e4,_),q=oD(s,k),$=function(_f){var _a,_g=2,ty=-1,ny=1,uy=0,ry=ZT(_f);try{for(ry.s();!(_a=ry.n()).done;){var ly=_a.value;ly.minX<_g&&(_g=ly.minX),ly.maxX>ty&&(ty=ly.maxX),ly.minY<ny&&(ny=ly.minY),ly.maxY>uy&&(uy=ly.maxY)}}catch(cy){ry.e(cy)}finally{ry.f()}return{minX:_g,maxX:ty,minY:ny,maxY:uy}}(q=HI(q,k)),_n=$.minY,_o=$.maxY,xa=1<<l,ka=k.buffer/k.extent,_l=1+ka;return q=Xb(q,xa,f-ka,f+_l,0,$.minX,$.maxX,k)||[],uA(UI(q=Xb(q,xa,g-ka,g+_l,1,_n,_o,k)||[],l,f,g,k),k.extent)}function FN(s,l){this.items=[],this.algorithm=s;var f=void 0===(l=l||{}).sort||l.sort;this.sort=f}FN.prototype={addItem:function(s){this.items.push(s)},normalizeCoordinates:function(){var s=this.items,l=1/0,f=1/0;s.forEach(function(g){var _=g;l=Math.min(l,_.x),f=Math.min(f,_.y)}),s.forEach(function(g){var _=g;_.x-=l,_.y-=f})},getStats:function(){var s=this.items.map(function(k){return k}),l=s.map(function(k){return k.x}),f=s.map(function(k){return k.y}),g=s.map(function(k){return k.x+k.width}),_=s.map(function(k){return k.y+k.height});return{minX:Math.max.apply(Math,l),minY:Math.max.apply(Math,f),maxX:Math.max.apply(Math,g),maxY:Math.max.apply(Math,_)}},getItems:function(){return this.items},processItems:function(){var s=this.items;return this.sort&&(s=this.algorithm.sort(s)),s=this.algorithm.placeItems(s),this.items=s},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var s=this.exportItems(),l=this.getStats();return{height:l.maxY,width:l.maxX,items:s}}};var jN=FN,Sx=[],Mx=[],HS="undefined"!=typeof Uint8Array?Uint8Array:Array,VN=!1;function WC(){VN=!0;for(var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=s.length;l<f;++l)Sx[l]=s[l],Mx[s.charCodeAt(l)]=l;Mx["-".charCodeAt(0)]=62,Mx["_".charCodeAt(0)]=63}function YC(s,l,f){for(var _,k=[],q=l;q<f;q+=3)k.push(Sx[(_=(s[q]<<16)+(s[q+1]<<8)+s[q+2])>>18&63]+Sx[_>>12&63]+Sx[_>>6&63]+Sx[63&_]);return k.join("")}function BN(s){var l;VN||WC();for(var f=s.length,g=f%3,_="",k=[],q=0,$=f-g;q<$;q+=16383)k.push(YC(s,q,$<q+16383?$:q+16383));return 1==g?(_+=Sx[(l=s[f-1])>>2],_+=Sx[l<<4&63],_+="=="):2==g&&(_+=Sx[(l=(s[f-2]<<8)+s[f-1])>>10],_+=Sx[l>>4&63],_+=Sx[l<<2&63],_+="="),k.push(_),k.join("")}function US(s,l,f,g,_){var k,q,$=8*_-g-1,_t=(1<<$)-1,_n=_t>>1,_i=-7,_o=f?_-1:0,xa=f?-1:1,ka=s[l+_o];for(_o+=xa,k=ka&(1<<-_i)-1,ka>>=-_i,_i+=$;0<_i;k=256*k+s[l+_o],_o+=xa,_i-=8);for(q=k&(1<<-_i)-1,k>>=-_i,_i+=g;0<_i;q=256*q+s[l+_o],_o+=xa,_i-=8);if(0===k)k=1-_n;else{if(k===_t)return q?NaN:1/0*(ka?-1:1);q+=Math.pow(2,g),k-=_n}return(ka?-1:1)*q*Math.pow(2,k-g)}function zN(s,l,f,g,_,k){var q,$,_t,_n=8*k-_-1,_i=(1<<_n)-1,_o=_i>>1,xa=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,ka=g?0:k-1,_l=g?1:-1,_f=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?($=isNaN(l)?1:0,q=_i):(q=Math.floor(Math.log(l)/Math.LN2),l*(_t=Math.pow(2,-q))<1&&(q--,_t*=2),2<=(l+=1<=q+_o?xa/_t:xa*Math.pow(2,1-_o))*_t&&(q++,_t/=2),_i<=q+_o?($=0,q=_i):1<=q+_o?($=(l*_t-1)*Math.pow(2,_),q+=_o):($=l*Math.pow(2,_o-1)*Math.pow(2,_),q=0));8<=_;s[f+ka]=255&$,ka+=_l,$/=256,_-=8);for(q=q<<_|$,_n+=_;0<_n;s[f+ka]=255&q,ka+=_l,q/=256,_n-=8);s[f+ka-_l]|=128*_f}var WI={}.toString,r4=Array.isArray||function(s){return"[object Array]"==WI.call(s)};_m.TYPED_ARRAY_SUPPORT=void 0===xE.TYPED_ARRAY_SUPPORT||xE.TYPED_ARRAY_SUPPORT;var YI=lA();function lA(){return _m.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Wx(s,l){if(lA()<l)throw new RangeError("Invalid typed array length");return _m.TYPED_ARRAY_SUPPORT?(s=new Uint8Array(l)).__proto__=_m.prototype:(null===s&&(s=new _m(l)),s.length=l),s}function _m(s,l,f){if(!(_m.TYPED_ARRAY_SUPPORT||this instanceof _m))return new _m(s,l,f);if("number"!=typeof s)return l0(this,s,l,f);if("string"==typeof l)throw new Error("If encoding is specified then the first argument must be a string");return HN(this,s)}function l0(s,l,f,g){if("number"==typeof l)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&l instanceof ArrayBuffer?function(_,k,q,$){if(q<0||k.byteLength<q)throw new RangeError("'offset' is out of bounds");if(k.byteLength<q+($||0))throw new RangeError("'length' is out of bounds");return k=void 0===q&&void 0===$?new Uint8Array(k):void 0===$?new Uint8Array(k,q):new Uint8Array(k,q,$),_m.TYPED_ARRAY_SUPPORT?(_=k).__proto__=_m.prototype:_=C2(_,k),_}(s,l,f,g):"string"==typeof l?function(_,k,q){if("string"==typeof q&&""!==q||(q="utf8"),!_m.isEncoding(q))throw new TypeError('"encoding" must be a valid string encoding');var $=0|KI(k,q),_t=(_=Wx(_,$)).write(k,q);return _t!==$&&(_=_.slice(0,_t)),_}(s,l,f):function(_,k){if(WE(k)){var q=0|JA(k.length);return 0===(_=Wx(_,q)).length||k.copy(_,0,0,q),_}if(k){if("undefined"!=typeof ArrayBuffer&&k.buffer instanceof ArrayBuffer||"length"in k)return"number"!=typeof k.length||($=k.length)!=$?Wx(_,0):C2(_,k);if("Buffer"===k.type&&r4(k.data))return C2(_,k.data)}var $;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(s,l)}function $I(s){if("number"!=typeof s)throw new TypeError('"size" argument must be a number');if(s<0)throw new RangeError('"size" argument must not be negative')}function HN(s,l){if($I(l),s=Wx(s,l<0?0:0|JA(l)),!_m.TYPED_ARRAY_SUPPORT)for(var f=0;f<l;++f)s[f]=0;return s}function C2(s,l){var f=l.length<0?0:0|JA(l.length);s=Wx(s,f);for(var g=0;g<f;g+=1)s[g]=255&l[g];return s}function JA(s){if(s>=lA())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+lA().toString(16)+" bytes");return 0|s}function WE(s){return null!=s&&s._isBuffer}function KI(s,l){if(WE(s))return s.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(s)||s instanceof ArrayBuffer))return s.byteLength;"string"!=typeof s&&(s=""+s);var f=s.length;if(0===f)return 0;for(var g=!1;;)switch(l){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":case void 0:return XI(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*f;case"hex":return f>>>1;case"base64":return QI(s).length;default:if(g)return XI(s).length;l=(""+l).toLowerCase(),g=!0}}function UN(s,l,f){var g,_,k,q=!1;if((void 0===l||l<0)&&(l=0),l>this.length||((void 0===f||f>this.length)&&(f=this.length),f<=0)||(f>>>=0)<=(l>>>=0))return"";for(s=s||"utf8";;)switch(s){case"hex":return function($,_t,_n){var ka,_i=$.length;(!_t||_t<0)&&(_t=0),(!_n||_n<0||_i<_n)&&(_n=_i);for(var _o="",xa=_t;xa<_n;++xa)_o+=(ka=$[xa])<16?"0"+ka.toString(16):ka.toString(16);return _o}(this,l,f);case"utf8":case"utf-8":return GN(this,l,f);case"ascii":return function($,_t,_n){var _i="";_n=Math.min($.length,_n);for(var _o=_t;_o<_n;++_o)_i+=String.fromCharCode(127&$[_o]);return _i}(this,l,f);case"latin1":case"binary":return function($,_t,_n){var _i="";_n=Math.min($.length,_n);for(var _o=_t;_o<_n;++_o)_i+=String.fromCharCode($[_o]);return _i}(this,l,f);case"base64":return g=this,k=f,0===(_=l)&&k===g.length?BN(g):BN(g.slice(_,k));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function($,_t,_n){for(var _i=$.slice(_t,_n),_o="",xa=0;xa<_i.length;xa+=2)_o+=String.fromCharCode(_i[xa]+256*_i[xa+1]);return _o}(this,l,f);default:if(q)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),q=!0}}function $C(s,l,f){var g=s[l];s[l]=s[f],s[f]=g}function tC(s,l,f,g,_){if(0===s.length)return-1;if("string"==typeof f?(g=f,f=0):2147483647<f?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,isNaN(f)&&(f=_?0:s.length-1),f<0&&(f=s.length+f),f>=s.length){if(_)return-1;f=s.length-1}else if(f<0){if(!_)return-1;f=0}if("string"==typeof l&&(l=_m.from(l,g)),WE(l))return 0===l.length?-1:gx(s,l,f,g,_);if("number"==typeof l)return l&=255,_m.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?_?Uint8Array.prototype.indexOf.call(s,l,f):Uint8Array.prototype.lastIndexOf.call(s,l,f):gx(s,[l],f,g,_);throw new TypeError("val must be string, number or Buffer")}function gx(s,l,f,g,_){var k=1,q=s.length,$=l.length;if(void 0!==g&&("ucs2"===(g=String(g).toLowerCase())||"ucs-2"===g||"utf16le"===g||"utf-16le"===g)){if(s.length<2||l.length<2)return-1;q/=k=2,$/=2,f/=2}function _t(ka,_l){return 1===k?ka[_l]:ka.readUInt16BE(_l*k)}if(_)for(var _n=-1,_i=f;_i<q;_i++)if(_t(s,_i)===_t(l,-1===_n?0:_i-_n)){if(-1===_n&&(_n=_i),_i-_n+1===$)return _n*k}else-1!==_n&&(_i-=_i-_n),_n=-1;else for(q<f+$&&(f=q-$),_i=f;0<=_i;_i--){for(var _o=!0,xa=0;xa<$;xa++)if(_t(s,_i+xa)!==_t(l,xa)){_o=!1;break}if(_o)return _i}return-1}function uD(s,l,f,g){return qS(function(_){for(var k=[],q=0;q<_.length;++q)k.push(255&_.charCodeAt(q));return k}(l),s,f,g)}function cA(s,l,f,g){return qS(function(_,k){for(var q,$,_n=[],_i=0;_i<_.length&&!((k-=2)<0);++_i)$=(q=_.charCodeAt(_i))>>8,_n.push(q%256),_n.push($);return _n}(l,s.length-f),s,f,g)}function GN(s,l,f){f=Math.min(s.length,f);for(var g=[],_=l;_<f;){var k,q,$,_t,_n=s[_],_i=null,_o=239<_n?4:223<_n?3:191<_n?2:1;if(_+_o<=f)switch(_o){case 1:_n<128&&(_i=_n);break;case 2:128==(192&(k=s[_+1]))&&127<(_t=(31&_n)<<6|63&k)&&(_i=_t);break;case 3:q=s[_+2],128==(192&(k=s[_+1]))&&128==(192&q)&&2047<(_t=(15&_n)<<12|(63&k)<<6|63&q)&&(_t<55296||57343<_t)&&(_i=_t);break;case 4:q=s[_+2],$=s[_+3],128==(192&(k=s[_+1]))&&128==(192&q)&&128==(192&$)&&65535<(_t=(15&_n)<<18|(63&k)<<12|(63&q)<<6|63&$)&&_t<1114112&&(_i=_t)}null===_i?(_i=65533,_o=1):65535<_i&&(g.push((_i-=65536)>>>10&1023|55296),_i=56320|1023&_i),g.push(_i),_+=_o}return function(xa){var ka=xa.length;if(ka<=ZI)return String.fromCharCode.apply(String,xa);for(var _l="",_f=0;_f<ka;)_l+=String.fromCharCode.apply(String,xa.slice(_f,_f+=ZI));return _l}(g)}_m.poolSize=8192,_m._augment=function(s){return s.__proto__=_m.prototype,s},_m.from=function(s,l,f){return l0(null,s,l,f)},_m.TYPED_ARRAY_SUPPORT&&(_m.prototype.__proto__=Uint8Array.prototype,_m.__proto__=Uint8Array),_m.alloc=function(s,l,f){return g=null,k=l,q=f,$I(_=s),_<=0||void 0===k?Wx(g,_):"string"==typeof q?Wx(g,_).fill(k,q):Wx(g,_).fill(k);var g,_,k,q},_m.allocUnsafe=function(s){return HN(null,s)},_m.allocUnsafeSlow=function(s){return HN(null,s)},_m.isBuffer=ZC,_m.compare=function(s,l){if(!WE(s)||!WE(l))throw new TypeError("Arguments must be Buffers");if(s===l)return 0;for(var f=s.length,g=l.length,_=0,k=Math.min(f,g);_<k;++_)if(s[_]!==l[_]){f=s[_],g=l[_];break}return f<g?-1:g<f?1:0},_m.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_m.concat=function(s,l){if(!r4(s))throw new TypeError('"list" argument must be an Array of Buffers');if(0===s.length)return _m.alloc(0);if(void 0===l)for(_=l=0;_<s.length;++_)l+=s[_].length;for(var f=_m.allocUnsafe(l),g=0,_=0;_<s.length;++_){var k=s[_];if(!WE(k))throw new TypeError('"list" argument must be an Array of Buffers');k.copy(f,g),g+=k.length}return f},_m.byteLength=KI,_m.prototype._isBuffer=!0,_m.prototype.swap16=function(){var s=this.length;if(s%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var l=0;l<s;l+=2)$C(this,l,l+1);return this},_m.prototype.swap32=function(){var s=this.length;if(s%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var l=0;l<s;l+=4)$C(this,l,l+3),$C(this,l+1,l+2);return this},_m.prototype.swap64=function(){var s=this.length;if(s%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var l=0;l<s;l+=8)$C(this,l,l+7),$C(this,l+1,l+6),$C(this,l+2,l+5),$C(this,l+3,l+4);return this},_m.prototype.toString=function(){var s=0|this.length;return 0==s?"":0===arguments.length?GN(this,0,s):UN.apply(this,arguments)},_m.prototype.equals=function(s){if(!WE(s))throw new TypeError("Argument must be a Buffer");return this===s||0===_m.compare(this,s)},_m.prototype.inspect=function(){var s="";return 0<this.length&&(s=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(s+=" ... ")),"<Buffer "+s+">"},_m.prototype.compare=function(s,l,f,g,_){if(!WE(s))throw new TypeError("Argument must be a Buffer");if(void 0===l&&(l=0),void 0===f&&(f=s?s.length:0),void 0===g&&(g=0),void 0===_&&(_=this.length),l<0||f>s.length||g<0||_>this.length)throw new RangeError("out of range index");if(_<=g&&f<=l)return 0;if(_<=g)return-1;if(f<=l)return 1;if(this===s)return 0;for(var k=(_>>>=0)-(g>>>=0),q=(f>>>=0)-(l>>>=0),$=Math.min(k,q),_t=this.slice(g,_),_n=s.slice(l,f),_i=0;_i<$;++_i)if(_t[_i]!==_n[_i]){k=_t[_i],q=_n[_i];break}return k<q?-1:q<k?1:0},_m.prototype.includes=function(s,l,f){return-1!==this.indexOf(s,l,f)},_m.prototype.indexOf=function(s,l,f){return tC(this,s,l,f,!0)},_m.prototype.lastIndexOf=function(s,l,f){return tC(this,s,l,f,!1)},_m.prototype.write=function(s,l,f,g){if(void 0===l)g="utf8",f=this.length,l=0;else if(void 0===f&&"string"==typeof l)g=l,f=this.length,l=0;else{if(!isFinite(l))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");l|=0,isFinite(f)?(f|=0,void 0===g&&(g="utf8")):(g=f,f=void 0)}var _=this.length-l;if((void 0===f||_<f)&&(f=_),0<s.length&&(f<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");g=g||"utf8";for(var q,$,_n,_i,_o=!1;;)switch(g){case"hex":return function(xa,ka,_l,_f){_l=Number(_l)||0;var _a=xa.length-_l;(!_f||_a<(_f=Number(_f)))&&(_f=_a);var _g=ka.length;if(_g%2!=0)throw new TypeError("Invalid hex string");_g/2<_f&&(_f=_g/2);for(var ty=0;ty<_f;++ty){var ny=parseInt(ka.substr(2*ty,2),16);if(isNaN(ny))return ty;xa[_l+ty]=ny}return ty}(this,s,l,f);case"utf8":case"utf-8":return _i=f,qS(XI(s,this.length-(_n=l)),this,_n,_i);case"ascii":case"latin1":case"binary":return uD(this,s,l,f);case"base64":return q=l,$=f,qS(QI(s),this,q,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cA(this,s,l,f);default:if(_o)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),_o=!0}},_m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ZI=4096;function I1(s,l,f){if(s%1!=0||s<0)throw new RangeError("offset is not uint");if(f<s+l)throw new RangeError("Trying to access beyond buffer length")}function _w(s,l,f,g,_,k){if(!WE(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(_<l||l<k)throw new RangeError('"value" argument is out of bounds');if(f+g>s.length)throw new RangeError("Index out of range")}function lD(s,l,f,g){l<0&&(l=65535+l+1);for(var _=0,k=Math.min(s.length-f,2);_<k;++_)s[f+_]=(l&255<<8*(g?_:1-_))>>>8*(g?_:1-_)}function GS(s,l,f,g){l<0&&(l=4294967295+l+1);for(var _=0,k=Math.min(s.length-f,4);_<k;++_)s[f+_]=l>>>8*(g?_:3-_)&255}function qN(s,l,f,g){if(f+g>s.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function eC(s,l,f,g,_){return _||qN(s,0,f,4),zN(s,l,f,g,23,4),f+4}function KC(s,l,f,g,_){return _||qN(s,0,f,8),zN(s,l,f,g,52,8),f+8}_m.prototype.slice=function(s,l){var f=this.length;if((s=~~s)<0?(s+=f)<0&&(s=0):f<s&&(s=f),(l=void 0===l?f:~~l)<0?(l+=f)<0&&(l=0):f<l&&(l=f),l<s&&(l=s),_m.TYPED_ARRAY_SUPPORT)(_=this.subarray(s,l)).__proto__=_m.prototype;else for(var g=l-s,_=new _m(g,void 0),k=0;k<g;++k)_[k]=this[k+s];return _},_m.prototype.readUIntLE=function(s,l,f){s|=0,l|=0,f||I1(s,l,this.length);for(var g=this[s],_=1,k=0;++k<l&&(_*=256);)g+=this[s+k]*_;return g},_m.prototype.readUIntBE=function(s,l,f){s|=0,l|=0,f||I1(s,l,this.length);for(var g=this[s+--l],_=1;0<l&&(_*=256);)g+=this[s+--l]*_;return g},_m.prototype.readUInt8=function(s,l){return l||I1(s,1,this.length),this[s]},_m.prototype.readUInt16LE=function(s,l){return l||I1(s,2,this.length),this[s]|this[s+1]<<8},_m.prototype.readUInt16BE=function(s,l){return l||I1(s,2,this.length),this[s]<<8|this[s+1]},_m.prototype.readUInt32LE=function(s,l){return l||I1(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+16777216*this[s+3]},_m.prototype.readUInt32BE=function(s,l){return l||I1(s,4,this.length),16777216*this[s]+(this[s+1]<<16|this[s+2]<<8|this[s+3])},_m.prototype.readIntLE=function(s,l,f){s|=0,l|=0,f||I1(s,l,this.length);for(var g=this[s],_=1,k=0;++k<l&&(_*=256);)g+=this[s+k]*_;return(_*=128)<=g&&(g-=Math.pow(2,8*l)),g},_m.prototype.readIntBE=function(s,l,f){s|=0,l|=0,f||I1(s,l,this.length);for(var g=l,_=1,k=this[s+--g];0<g&&(_*=256);)k+=this[s+--g]*_;return(_*=128)<=k&&(k-=Math.pow(2,8*l)),k},_m.prototype.readInt8=function(s,l){return l||I1(s,1,this.length),128&this[s]?-1*(255-this[s]+1):this[s]},_m.prototype.readInt16LE=function(s,l){l||I1(s,2,this.length);var f=this[s]|this[s+1]<<8;return 32768&f?4294901760|f:f},_m.prototype.readInt16BE=function(s,l){l||I1(s,2,this.length);var f=this[s+1]|this[s]<<8;return 32768&f?4294901760|f:f},_m.prototype.readInt32LE=function(s,l){return l||I1(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},_m.prototype.readInt32BE=function(s,l){return l||I1(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},_m.prototype.readFloatLE=function(s,l){return l||I1(s,4,this.length),US(this,s,!0,23,4)},_m.prototype.readFloatBE=function(s,l){return l||I1(s,4,this.length),US(this,s,!1,23,4)},_m.prototype.readDoubleLE=function(s,l){return l||I1(s,8,this.length),US(this,s,!0,52,8)},_m.prototype.readDoubleBE=function(s,l){return l||I1(s,8,this.length),US(this,s,!1,52,8)},_m.prototype.writeUIntLE=function(s,l,f,g){s=+s,l|=0,f|=0,g||_w(this,s,l,f,Math.pow(2,8*f)-1,0);var _=1,k=0;for(this[l]=255&s;++k<f&&(_*=256);)this[l+k]=s/_&255;return l+f},_m.prototype.writeUIntBE=function(s,l,f,g){s=+s,l|=0,f|=0,g||_w(this,s,l,f,Math.pow(2,8*f)-1,0);var _=f-1,k=1;for(this[l+_]=255&s;0<=--_&&(k*=256);)this[l+_]=s/k&255;return l+f},_m.prototype.writeUInt8=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,1,255,0),_m.TYPED_ARRAY_SUPPORT||(s=Math.floor(s)),this[l]=255&s,l+1},_m.prototype.writeUInt16LE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,2,65535,0),_m.TYPED_ARRAY_SUPPORT?(this[l]=255&s,this[l+1]=s>>>8):lD(this,s,l,!0),l+2},_m.prototype.writeUInt16BE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,2,65535,0),_m.TYPED_ARRAY_SUPPORT?(this[l]=s>>>8,this[l+1]=255&s):lD(this,s,l,!1),l+2},_m.prototype.writeUInt32LE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,4,4294967295,0),_m.TYPED_ARRAY_SUPPORT?(this[l+3]=s>>>24,this[l+2]=s>>>16,this[l+1]=s>>>8,this[l]=255&s):GS(this,s,l,!0),l+4},_m.prototype.writeUInt32BE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,4,4294967295,0),_m.TYPED_ARRAY_SUPPORT?(this[l]=s>>>24,this[l+1]=s>>>16,this[l+2]=s>>>8,this[l+3]=255&s):GS(this,s,l,!1),l+4},_m.prototype.writeIntLE=function(s,l,f,g){var _;s=+s,l|=0,g||_w(this,s,l,f,(_=Math.pow(2,8*f-1))-1,-_);var k=0,q=1,$=0;for(this[l]=255&s;++k<f&&(q*=256);)s<0&&0===$&&0!==this[l+k-1]&&($=1),this[l+k]=(s/q>>0)-$&255;return l+f},_m.prototype.writeIntBE=function(s,l,f,g){var _;s=+s,l|=0,g||_w(this,s,l,f,(_=Math.pow(2,8*f-1))-1,-_);var k=f-1,q=1,$=0;for(this[l+k]=255&s;0<=--k&&(q*=256);)s<0&&0===$&&0!==this[l+k+1]&&($=1),this[l+k]=(s/q>>0)-$&255;return l+f},_m.prototype.writeInt8=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,1,127,-128),_m.TYPED_ARRAY_SUPPORT||(s=Math.floor(s)),s<0&&(s=255+s+1),this[l]=255&s,l+1},_m.prototype.writeInt16LE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,2,32767,-32768),_m.TYPED_ARRAY_SUPPORT?(this[l]=255&s,this[l+1]=s>>>8):lD(this,s,l,!0),l+2},_m.prototype.writeInt16BE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,2,32767,-32768),_m.TYPED_ARRAY_SUPPORT?(this[l]=s>>>8,this[l+1]=255&s):lD(this,s,l,!1),l+2},_m.prototype.writeInt32LE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,4,2147483647,-2147483648),_m.TYPED_ARRAY_SUPPORT?(this[l]=255&s,this[l+1]=s>>>8,this[l+2]=s>>>16,this[l+3]=s>>>24):GS(this,s,l,!0),l+4},_m.prototype.writeInt32BE=function(s,l,f){return s=+s,l|=0,f||_w(this,s,l,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),_m.TYPED_ARRAY_SUPPORT?(this[l]=s>>>24,this[l+1]=s>>>16,this[l+2]=s>>>8,this[l+3]=255&s):GS(this,s,l,!1),l+4},_m.prototype.writeFloatLE=function(s,l,f){return eC(this,s,l,!0,f)},_m.prototype.writeFloatBE=function(s,l,f){return eC(this,s,l,!1,f)},_m.prototype.writeDoubleLE=function(s,l,f){return KC(this,s,l,!0,f)},_m.prototype.writeDoubleBE=function(s,l,f){return KC(this,s,l,!1,f)},_m.prototype.copy=function(s,l,f,g){if(f=f||0,g||0===g||(g=this.length),l>=s.length&&(l=s.length),0<g&&g<f&&(g=f),g===f||0===s.length||0===this.length)return 0;if((l=l||0)<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("sourceStart out of bounds");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),s.length-l<g-f&&(g=s.length-l+f);var _,k=g-f;if(this===s&&f<l&&l<g)for(_=k-1;0<=_;--_)s[_+l]=this[_+f];else if(k<1e3||!_m.TYPED_ARRAY_SUPPORT)for(_=0;_<k;++_)s[_+l]=this[_+f];else Uint8Array.prototype.set.call(s,this.subarray(f,f+k),l);return k},_m.prototype.fill=function(s,l,f,g){if("string"==typeof s){var _;if("string"==typeof l?(g=l,l=0,f=this.length):"string"==typeof f&&(g=f,f=this.length),1!==s.length||(_=s.charCodeAt(0))<256&&(s=_),void 0!==g&&"string"!=typeof g)throw new TypeError("encoding must be a string");if("string"==typeof g&&!_m.isEncoding(g))throw new TypeError("Unknown encoding: "+g)}else"number"==typeof s&&(s&=255);if(l<0||this.length<l||this.length<f)throw new RangeError("Out of range index");if(f<=l)return this;if(l>>>=0,f=void 0===f?this.length:f>>>0,"number"==typeof(s=s||0))for($=l;$<f;++$)this[$]=s;else for(var k=WE(s)?s:XI(new _m(s,g).toString()),q=k.length,$=0;$<f-l;++$)this[$+l]=k[$%q];return this};var i4=/[^+\/0-9A-Za-z-_]/g;function XI(s,l){var f;l=l||1/0;for(var g=s.length,_=null,k=[],q=0;q<g;++q){if(55295<(f=s.charCodeAt(q))&&f<57344){if(!_){if(56319<f){-1<(l-=3)&&k.push(239,191,189);continue}if(q+1===g){-1<(l-=3)&&k.push(239,191,189);continue}_=f;continue}if(f<56320){-1<(l-=3)&&k.push(239,191,189),_=f;continue}f=65536+(_-55296<<10|f-56320)}else _&&-1<(l-=3)&&k.push(239,191,189);if(_=null,f<128){if(--l<0)break;k.push(f)}else if(f<2048){if((l-=2)<0)break;k.push(f>>6|192,63&f|128)}else if(f<65536){if((l-=3)<0)break;k.push(f>>12|224,f>>6&63|128,63&f|128)}else{if(!(f<1114112))throw new Error("Invalid code point");if((l-=4)<0)break;k.push(f>>18|240,f>>12&63|128,f>>6&63|128,63&f|128)}}return k}function QI(s){return function(s){var l,f,g,_;VN||WC();var k=s.length;if(0<k%4)throw new Error("Invalid string. Length must be a multiple of 4");_=new HS(3*k/4-(g="="===s[k-2]?2:"="===s[k-1]?1:0)),l=0<g?k-4:k;for(var q=0,$=0;$<l;$+=4,0)f=Mx[s.charCodeAt($)]<<18|Mx[s.charCodeAt($+1)]<<12|Mx[s.charCodeAt($+2)]<<6|Mx[s.charCodeAt($+3)],_[q++]=f>>16&255,_[q++]=f>>8&255,_[q++]=255&f;return 2==g?(f=Mx[s.charCodeAt($)]<<2|Mx[s.charCodeAt($+1)]>>4,_[q++]=255&f):1==g&&(f=Mx[s.charCodeAt($)]<<10|Mx[s.charCodeAt($+1)]<<4|Mx[s.charCodeAt($+2)]>>2,_[q++]=f>>8&255,_[q++]=255&f),_}(function(l){var f;if((l=((f=l).trim?f.trim():f.replace(/^\s+|\s+$/g,"")).replace(i4,"")).length<2)return"";for(;l.length%4!=0;)l+="=";return l}(s))}function qS(s,l,f,g){for(var _=0;_<g&&!(_+f>=l.length||_>=s.length);++_)l[_+f]=s[_];return _}function ZC(s){return null!=s&&(!!s._isBuffer||WN(s)||"function"==typeof(l=s).readFloatLE&&"function"==typeof l.slice&&WN(l.slice(0,0)));var l}function WN(s){return!!s.constructor&&"function"==typeof s.constructor.isBuffer&&s.constructor.isBuffer(s)}var o4=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:YI,Buffer:_m,SlowBuffer:function(s){return+s!=s&&(s=0),_m.alloc(+s)},isBuffer:ZC}),WS="function"==typeof Object.create?function(s,l){s.super_=l,s.prototype=Object.create(l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:function(s,l){function f(){}s.super_=l,f.prototype=l.prototype,s.prototype=new f,s.prototype.constructor=s};function T2(s,l){var f={seen:[],stylize:a4};return 3<=arguments.length&&(f.depth=arguments[2]),4<=arguments.length&&(f.colors=arguments[3]),$S(l)?f.showHidden=l:l&&function(g,_){if(_&&KS(_))for(var k=Object.keys(_),q=k.length;q--;)g[k[q]]=_[k[q]]}(f,l),nC(f.showHidden)&&(f.showHidden=!1),nC(f.depth)&&(f.depth=2),nC(f.colors)&&(f.colors=!1),nC(f.customInspect)&&(f.customInspect=!0),f.colors&&(f.stylize=XC),YS(f,s,f.depth)}function XC(s,l){var f=T2.styles[l];return f?"\x1b["+T2.colors[f][0]+"m"+s+"\x1b["+T2.colors[f][1]+"m":s}function a4(s,l){return s}function YS(s,l,f){if(s.customInspect&&l&&cD(l.inspect)&&l.inspect!==T2&&(!l.constructor||l.constructor.prototype!==l)){var g=l.inspect(f,s);return _k(g)||(g=YS(s,g,f)),g}var _=function(_l,_f){if(nC(_f))return _l.stylize("undefined","undefined");if(_k(_f)){var _a="'"+JSON.stringify(_f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _l.stylize(_a,"string")}return"number"==typeof _f?_l.stylize(""+_f,"number"):$S(_f)?_l.stylize(""+_f,"boolean"):JI(_f)?_l.stylize("null","null"):void 0}(s,l);if(_)return _;var k,q=Object.keys(l),$=(k={},q.forEach(function(_l,_f){k[_l]=!0}),k);if(s.showHidden&&(q=Object.getOwnPropertyNames(l)),XS(l)&&(0<=q.indexOf("message")||0<=q.indexOf("description")))return YN(l);if(0===q.length){if(cD(l))return s.stylize("[Function"+(l.name?": "+l.name:"")+"]","special");if(TE(l))return s.stylize(RegExp.prototype.toString.call(l),"regexp");if(ZS(l))return s.stylize(Date.prototype.toString.call(l),"date");if(XS(l))return YN(l)}var _i,_l,_f,_a,_o="",xa=!1,ka=["{","}"];return Array.isArray(l)&&(xa=!0,ka=["[","]"]),cD(l)&&(_o=" [Function"+(l.name?": "+l.name:"")+"]"),TE(l)&&(_o=" "+RegExp.prototype.toString.call(l)),ZS(l)&&(_o=" "+Date.prototype.toUTCString.call(l)),XS(l)&&(_o=" "+YN(l)),0!==q.length||xa&&0!=l.length?f<0?TE(l)?s.stylize(RegExp.prototype.toString.call(l),"regexp"):s.stylize("[Object]","special"):(s.seen.push(l),_i=xa?function(_l,_f,_a,_g,ty){for(var ny=[],uy=0,ry=_f.length;uy<ry;++uy)DE(_f,String(uy))?ny.push(QC(_l,_f,_a,_g,String(uy),!0)):ny.push("");return ty.forEach(function(ly){ly.match(/^\d+$/)||ny.push(QC(_l,_f,_a,_g,ly,!0))}),ny}(s,l,f,$,q):q.map(function(_l){return QC(s,l,f,$,_l,xa)}),s.seen.pop(),_f=_o,_a=ka,60<(_l=_i).reduce(function(_g,ty){return ty.indexOf("\n"),_g+ty.replace(/\u001b\[\d\d?m/g,"").length+1},0)?_a[0]+(""===_f?"":_f+"\n ")+" "+_l.join(",\n  ")+" "+_a[1]:_a[0]+_f+" "+_l.join(", ")+" "+_a[1]):ka[0]+_o+ka[1]}function YN(s){return"["+Error.prototype.toString.call(s)+"]"}function QC(s,l,f,g,_,k){var q,$,_t=Object.getOwnPropertyDescriptor(l,_)||{value:l[_]};if(_t.get?$=s.stylize(_t.set?"[Getter/Setter]":"[Getter]","special"):_t.set&&($=s.stylize("[Setter]","special")),DE(g,_)||(q="["+_+"]"),$||(s.seen.indexOf(_t.value)<0?-1<($=JI(f)?YS(s,_t.value,null):YS(s,_t.value,f-1)).indexOf("\n")&&($=k?$.split("\n").map(function(_n){return"  "+_n}).join("\n").substr(2):"\n"+$.split("\n").map(function(_n){return"   "+_n}).join("\n")):$=s.stylize("[Circular]","special")),nC(q)){if(k&&_.match(/^\d+$/))return $;q=(q=JSON.stringify(""+_)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(q=q.substr(1,q.length-2),s.stylize(q,"name")):(q=q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s.stylize(q,"string"))}return q+": "+$}function $S(s){return"boolean"==typeof s}function JI(s){return null===s}function _k(s){return"string"==typeof s}function nC(s){return void 0===s}function TE(s){return KS(s)&&"[object RegExp]"===yx(s)}function KS(s){return"object"==typeof s&&null!==s}function ZS(s){return KS(s)&&"[object Date]"===yx(s)}function XS(s){return KS(s)&&("[object Error]"===yx(s)||s instanceof Error)}function cD(s){return"function"==typeof s}function $N(s){return null===s||"boolean"==typeof s||"number"==typeof s||"string"==typeof s||"symbol"==typeof s||void 0===s}function yx(s){return Object.prototype.toString.call(s)}function DE(s,l){return Object.prototype.hasOwnProperty.call(s,l)}function tO(s,l){if(s===l)return 0;for(var f=s.length,g=l.length,_=0,k=Math.min(f,g);_<k;++_)if(s[_]!==l[_]){f=s[_],g=l[_];break}return f<g?-1:g<f?1:0}T2.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T2.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var eO,u4=Object.prototype.hasOwnProperty,KN=Object.keys||function(s){var l=[];for(var f in s)u4.call(s,f)&&l.push(f);return l},ZN=Array.prototype.slice;function XN(){return void 0!==eO?eO:eO="foo"===function(){}.name}function nO(s){return Object.prototype.toString.call(s)}function QN(s){if(!ZC(s)&&"function"==typeof xE.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(s);if(s)return s instanceof DataView||!!(s.buffer&&s.buffer instanceof ArrayBuffer)}}function mx(s,l){s||vx(s,!0,l,"==",lE)}var l4=/\s*function\s+([^\(\s]*)\s*/;function JN(s){if(cD(s)){if(XN())return s.name;var l=s.toString().match(l4);return l&&l[1]}}function c4(s){this.name="AssertionError",this.actual=s.actual,this.expected=s.expected,this.operator=s.operator,s.message?(this.message=s.message,this.generatedMessage=!1):(this.message=tP(JC(this.actual),128)+" "+this.operator+" "+tP(JC(this.expected),128),this.generatedMessage=!0);var f,g,_,k,q,$=s.stackStartFunction||vx;Error.captureStackTrace?Error.captureStackTrace(this,$):(f=new Error).stack&&(q=f.stack,g=JN($),0<=(_=q.indexOf("\n"+g))&&(k=q.indexOf("\n",_+1),q=q.substring(k+1)),this.stack=q)}function tP(s,l){return"string"!=typeof s||s.length<l?s:s.slice(0,l)}function JC(s){if(XN()||!cD(s))return T2(s);var l=JN(s);return"[Function"+(l?": "+l:"")+"]"}function vx(s,l,f,g,_){throw new c4({message:f,actual:s,expected:l,operator:g,stackStartFunction:_})}function lE(s,l){s||vx(s,!0,l,"==",lE)}function YE(s,l,f,g){if(s===l)return!0;if(ZC(s)&&ZC(l))return 0===tO(s,l);if(ZS(s)&&ZS(l))return s.getTime()===l.getTime();if(TE(s)&&TE(l))return s.source===l.source&&s.global===l.global&&s.multiline===l.multiline&&s.lastIndex===l.lastIndex&&s.ignoreCase===l.ignoreCase;if(null!==s&&"object"==typeof s||null!==l&&"object"==typeof l){if(QN(s)&&QN(l)&&nO(s)===nO(l)&&!(s instanceof Float32Array||s instanceof Float64Array))return 0===tO(new Uint8Array(s.buffer),new Uint8Array(l.buffer));if(ZC(s)!==ZC(l))return!1;var _=(g=g||{actual:[],expected:[]}).actual.indexOf(s);return-1!==_&&_===g.expected.indexOf(l)||(g.actual.push(s),g.expected.push(l),function(k,q,$,_t){if(null==k||null==q)return!1;if($N(k)||$N(q))return k===q;if($&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(q))return!1;var _n=rO(k),_i=rO(q);if(_n&&!_i||!_n&&_i)return!1;if(_n)return YE(k=ZN.call(k),q=ZN.call(q),$);var _o,xa,ka=KN(k),_l=KN(q);if(ka.length!==_l.length)return!1;for(ka.sort(),_l.sort(),xa=ka.length-1;0<=xa;xa--)if(ka[xa]!==_l[xa])return!1;for(xa=ka.length-1;0<=xa;xa--)if(!YE(k[_o=ka[xa]],q[_o],$,_t))return!1;return!0}(s,l,f,g))}return f?s===l:s==l}function rO(s){return"[object Arguments]"==Object.prototype.toString.call(s)}function iO(s,l){if(s&&l){if("[object RegExp]"==Object.prototype.toString.call(l))return l.test(s);try{if(s instanceof l)return 1}catch(f){}if(!Error.isPrototypeOf(l))return!0===l.call({},s)}}function oO(s,l,f,g){var _;if("function"!=typeof l)throw new TypeError('"block" argument must be a function');"string"==typeof f&&(g=f,f=null),_=function($){var _t;try{$()}catch(_n){_t=_n}return _t}(l),g=(f&&f.name?" ("+f.name+").":".")+(g?" "+g:"."),s&&!_&&vx(_,f,"Missing expected exception"+g);var k="string"==typeof g,q=!s&&_&&!f;if((!s&&XS(_)&&k&&iO(_,f)||q)&&vx(_,f,"Got unwanted exception"+g),s&&_&&f&&!iO(_,f)||!s&&_)throw _}function h4(){}WS(mx.AssertionError=c4,Error),mx.fail=vx,mx.ok=lE,mx.equal=function s(l,f,g){l!=f&&vx(l,f,g,"==",s)},mx.notEqual=function s(l,f,g){l==f&&vx(l,f,g,"!=",s)},mx.deepEqual=function s(l,f,g){YE(l,f,!1)||vx(l,f,g,"deepEqual",s)},mx.deepStrictEqual=function s(l,f,g){YE(l,f,!0)||vx(l,f,g,"deepStrictEqual",s)},mx.notDeepEqual=function s(l,f,g){YE(l,f,!1)&&vx(l,f,g,"notDeepEqual",s)},mx.notDeepStrictEqual=function s(l,f,g){YE(l,f,!0)&&vx(l,f,g,"notDeepStrictEqual",s)},mx.strictEqual=function s(l,f,g){l!==f&&vx(l,f,g,"===",s)},mx.notStrictEqual=function s(l,f,g){l===f&&vx(l,f,g,"!==",s)},mx.throws=function(s,l,f){oO(!0,s,l,f)},mx.doesNotThrow=function(s,l,f){oO(!1,s,l,f)},mx.ifError=function(s){if(s)throw s};var sO={sort:function(s){return s.sort(function(l,f){return Math.sqrt(Math.pow(l.height,2)+Math.pow(l.width,2))-Math.sqrt(Math.pow(f.height,2)+Math.pow(f.width,2))}),s},placeItems:function(s){var l=0,f=0;return s.forEach(function(g){g.x=l,g.y=f,l+=g.width,f+=g.height}),s}},aO={sort:function(s){return s.sort(function(l,f){return Math.sqrt(Math.pow(l.height,2)+Math.pow(l.width,2))-Math.sqrt(Math.pow(f.height,2)+Math.pow(f.width,2))}),s},placeItems:function(s){var l=0,f=0;return s.forEach(function(g){var _=g.width;g.x=l-_,g.y=f,l-=_,f+=g.height}),s}};h4.prototype={fit:function(s){var l,f,g,_,k=s.length;for(this.root={x:0,y:0,width:0<k?s[0].width:0,height:0<k?s[0].height:0},l=0;l<k;l++)_=(f=this.findNode(this.root,(g=s[l]).width,g.height))?this.splitNode(f,g.width,g.height):this.growNode(g.width,g.height),g.x=_.x,g.y=_.y},findNode:function(s,l,f){return s.used?this.findNode(s.right,l,f)||this.findNode(s.down,l,f):l<=s.width&&f<=s.height?s:null},splitNode:function(s,l,f){return s.used=!0,s.down={x:s.x,y:s.y+f,width:s.width,height:s.height-f},s.right={x:s.x+l,y:s.y,width:s.width-l,height:f},s},growNode:function(s,l){var f=s<=this.root.width,g=l<=this.root.height,k=f&&this.root.width>=this.root.height+l;return g&&this.root.height>=this.root.width+s?this.growRight(s,l):k?this.growDown(s,l):g?this.growRight(s,l):f?this.growDown(s,l):null},growRight:function(s,l){var f;return this.root={used:!0,x:0,y:0,width:this.root.width+s,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:s,height:this.root.height}},(f=this.findNode(this.root,s,l))?this.splitNode(f,s,l):null},growDown:function(s,l){var f;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+l,down:{x:0,y:this.root.height,width:this.root.width,height:l},right:this.root},(f=this.findNode(this.root,s,l))?this.splitNode(f,s,l):null}};var uO=h4,l8={sort:function(s){return s},placeItems:function(s){return function(l,f){f=f||{};var g=new uO,_=f.inPlace||!1,k=(k=l.map(function($){return _?$:{width:$.width,height:$.height,item:$}})).sort(function($,_t){return _t.width*_t.height-$.width*$.height});g.fit(k);var q={width:k.reduce(function($,_t){return Math.max($,_t.x+_t.width)},0),height:k.reduce(function($,_t){return Math.max($,_t.y+_t.height)},0)};_||(q.items=k)}(s,{inPlace:!0}),s}},eP={};function hD(s,l){var f=s||"top-down";return"string"==typeof f&&mx(f=eP[s],"Sorry, the '"+s+"' algorithm could not be loaded."),new jN(f,l)}function tT(s,l){eP[s]=l}hD.PackingSmith=jN,hD.addAlgorithm=tT,hD.algorithms=eP,tT("top-down",{sort:function(s){return s.sort(function(l,f){return l.height-f.height}),s},placeItems:function(s){var l=0;return s.forEach(function(f){f.x=0,f.y=l,l+=f.height}),s}}),tT("left-right",{sort:function(s){return s.sort(function(l,f){return l.width-f.width}),s},placeItems:function(s){var l=0;return s.forEach(function(f){f.x=l,f.y=0,l+=f.width}),s}}),tT("diagonal",sO),tT("alt-diagonal",aO),tT("binary-tree",l8);var lO=hD;function nP(s){var l;try{s.getContext("2d").getImageData(0,0,1,1)}catch(f){l=f.message}return l}function rP(s,l,f){var g;return s instanceof HTMLImageElement&&((g=s.ownerDocument.createElement("canvas")).width=l,g.height=f,g.getContext("2d").drawImage(s,0,0,l,f),s=g),s}var fD=Ry.metersToLatLng([Ry.half_circumference_meters,Ry.half_circumference_meters]),QS=Math.log(Ry.tile_size)/Math.LN2,cO=function(){M1(l,HE);var s=j1(l);function l(f,g){var _;return A0(this,l),_=s.call(this,f,g),n1.is_worker&&(_._quad_tree=new C0.H.geo.QuadTree,_._marker_quad_tree=new C0.H.geo.QuadTree,_._tree_entries_by_object_id={},_._groups_by_id={},_._layersCache=new C0.H.util.Cache(100)),n1.is_main&&(_._objects_by_id={},_._commands=[],_._sendCommands=SS(_._sendCommands,100,200),_.dispatchUpdate=_.dispatchUpdate.bind(KT(_))),_}return L0(l,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var f,g,_=this.provider.getRootGroup(),k=_.getObjects(!0),q=[];for(k.push(_),f=k.length;f--;)this._isObjectSupported(g=k[f])&&this._shouldBeStored(g)&&(this._objects_by_id[g.getId()]=g,q.push(g.forWorkerMessage()));this._sendImmediateCommands([{method_name:"addObjects",arguments:[q]}])}},{key:"onProviderUpdate",value:function(f){var g,_,k,q,$=f.target,_t=f.currentTarget.getInvalidations($.type);this._isObjectSupported($)&&(g=this._synced_at,_=$.getId(),_t.isRemove(g)?(delete this._objects_by_id[_],this._commands.push({method_name:"removeObjectsByIds",arguments:[[_],!0]})):_t.isAdd(g)?this._shouldBeStored($)&&(this._objects_by_id[_]=$,this._commands.push({method_name:"addObjects",arguments:[[$.forWorkerMessage()]]})):_t.isSpatial(g)||_t.isZOrder(g)?this._shouldBeStored($)&&(k=[{method_name:"removeObjectsByIds",arguments:[[_],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[_]=$).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(k):this._commands.push(k[0],k[1])):_t.isVisual(g)?this._shouldBeStored($)&&(q={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[_]=$).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([q]):this._commands.push(q)):_t.isVolatility(g)&&(delete this._objects_by_id[_],this._commands.push({method_name:"removeObjectsByIds",arguments:[[_],!0]}),this._shouldBeStored($)&&(this._objects_by_id[_]=$,this._commands.push({method_name:"addObjects",arguments:[[$.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=_t.getMark()}},{key:"_shouldBeStored",value:function(f){return 16===f.type||(!f.getIcon||1===f.getIcon().getState())&&this._hasSameVolatility(f)}},{key:"_hasSameVolatility",value:function(f){return f.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(f){f.length&&s0.postMessage(this.worker,this.target_name+".executeCommands",f).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(f){return f.forWorkerMessage&&8!==f.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(f){return this._objects_by_id[f]}},{key:"getIconBitmapByObjectId",value:function(f,g){var _=this.getMapObjectById(f);if(_){var k=_.getIcon();if(k.uid===g&&1===k.getState()){var q=k.getSize();return rP(k.getBitmap(),q.w,q.h)}}}},{key:"_getRastersForMarkers",value:function(f){for(var g={},_=lO("binary-tree"),k=0;k<f.length;k++){var q=f[k],$=q.properties.icon;g[$.id]||(_.addItem({width:$.size.w,height:$.size.h,meta:{objectId:q.id,id:$.id}}),g[$.id]=!0)}return _.export()}},{key:"fetchFeaturesForTile",value:function(f){var g=[],_=[],k=[],q=[],$=[],_t=this._marker_quad_tree.intersectBoundingBox(Ry.getTileBoundingBox(f.coords,this.tile_size));f.source_data.error=null;for(var _n=0;_n<_t.length;_n++){var _i={id:_t[_n].$feature$.id,properties:Object.assign({},_t[_n].$feature$.properties),geometry:{type:_t[_n].$feature$.geometry.type,coordinates:LN.deepClone(_t[_n].$feature$.geometry.coordinates)}};g.push(_i)}_t=this._quad_tree.intersectBoundingBox(Ry.getTileBoundingBox(f.coords,this.tile_size,100));for(var _o=0;_o<_t.length;_o++){var xa,ka={id:_t[_o].$feature$.id,properties:Object.assign({},_t[_o].$feature$.properties),geometry:{type:_t[_o].$feature$.geometry.type,coordinates:LN.deepClone(_t[_o].$feature$.geometry.coordinates)}};ka.properties.overlay?_.push(ka):ka.geometry.type.includes("LineString")?k.push(ka):ka.geometry.type.includes("Polygon")&&(q.push(ka),xa={id:ka.id,properties:ka.properties,geometry:{type:ka.geometry.type,coordinates:LN.deepClone(ka.geometry.coordinates)}},$.push(xa))}g.sort(l._compareZInfo),q.sort(l._compareZInfo),_.sort(l._compareZInfo);var _l=this.has_volatile_data?4096:0;$.sort(l._compareZInfo);for(var _f=0;_f<$.length;_f++)$[_f].properties.effectiveZIdx=_l++;k.sort(l._compareZInfo);for(var _a=0;_a<k.length;_a++)k[_a].properties.effectiveZIdx=_l++;f.source_data.layers.markers={type:"FeatureCollection",features:g},f.source_data.layers.polylines={type:"FeatureCollection",features:k},f.source_data.layers.polygons={type:"FeatureCollection",features:q},f.source_data.layers.outlines={type:"FeatureCollection",features:$},f.source_data.layers.overlays={type:"FeatureCollection",features:_}}},{key:"tileTexture",value:function(f){var g=f.source_data.layers.overlays;if(g){var _=this.name+"_"+f.coords.key,k=c1.coordinateWithMaxZoom(f.coords,this.max_zoom);return{name:_,filtering:this.filtering,coords:k,width:Ry.tile_size,height:Ry.tile_size,overlays_config:g.features[0].properties.overlays_config,source:this.name}}}},{key:"_load",value:function(f){var g=Ry.wrapTile(f.coords,{x:!0}),_=g.z,k=g.x,q=g.y,$="".concat(_,"_").concat(k,"_").concat(q),_t=this._layersCache.get($),_n=!1;if(_t)f.source_data.layers=_t;else{this.fetchFeaturesForTile(f);var _i={maxZoom:this.max_zoom,tolerance:1.5,extent:Ry.tile_scale},_o=f.source_data.layers.overlays;_o.features.length&&delete f.source_data.layers.overlays;var xa=f.source_data.layers.markers;for(var ka in xa.features.length&&delete f.source_data.layers.markers,f.source_data.layers){var _l,_f=f.source_data.layers[ka];_f.features.length&&(_i.buffer=ka.includes("lines")?100*Ry.units_per_pixel:0,_l=n4(_f,_,k,q,_i),f.source_data.layers[ka]=YL(_l))}f.source_data.layers.overlays=this._processOverlays(f,_o);for(var _a=f.source_data.layers.overlays.features.length;_a--;)if(!f.source_data.layers.overlays.features[_a].id){_n=!0,this._layersCache.drop($);break}f.source_data.layers.markers=this._processMarkers(f,xa),this._postProcessTile(f),_n||this._layersCache.add($,f.source_data.layers,1)}return f.rasters=this._getRastersForMarkers(f.source_data.layers.markers.features),Promise.resolve(f)}},{key:"_processMarkers",value:function(f,g){var _=g.features.length;if(_){for(var k=Ry.unitsPerMeter(f.coords.z),q=Ry.wrapTile(f.coords,{x:!0}),$=Ry.metersForTile(q),_t=Ry.isLastTile(q),_n=Ry.wrapMeters(f.min),_i=Ry.wrapMeters(f.max),_o=function(_g){_b.coordsToMeters(_g);var ty=g0(_g,2),ny=ty[0],uy=ty[1],ry=ny>=_n.x&&(_t.column||ny<_i.x)&&uy>=_i.y&&(_t.row||!f.coords.y||uy<_n.y);return _b.metersToTileUnits(k,$,_g),ry},xa=[],ka=0;ka<_;ka++){var _l,_f=g.features[ka].geometry,_a=!1;"Point"===_f.type?_o(_l=_f.coordinates)?_f.coordinates=_l:_a=!0:"MultiPoint"===_f.type&&(_f.coordinates=_f.coordinates.filter(_o),0===_f.coordinates.length&&(_a=!0)),_a||xa.push(g.features[ka])}g.features=xa}return g}},{key:"_processOverlays",value:function(f,g){var _=this;if(!g.features.length)return g;var k={coords:f.coords,min:Ry.metersForTile(Ry.wrapTile(f.coords,{x:!0}))},q={coords:f.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:g.features}}}},$=Math.pow(2,f.coords.z+QS);HE.projectData(q.source_data),HE.scaleData(q.source_data,k);var _t=g.features.map(function(_i){var _o=_i.geometry.coordinates[0],xa=_o[0],ka=_o[5===_o.length?2:3],_l=Math.floor(xa[0]/Ry.tile_scale*Ry.tile_size),_f=Math.floor(xa[1]/Ry.tile_scale*Ry.tile_size),_a=Math.floor(ka[0]/Ry.tile_scale*Ry.tile_size),_g=Math.floor(ka[1]/Ry.tile_scale*Ry.tile_size)-_f,ty=_a<=_l,ny=ty?$-(_l-_a):_a-_l,uy=[];return _l<=Ry.tile_size&&uy.push([_l,_f,ny,_g]),ty&&0<_a&&uy.push([_l-$,_f,ny,_g]),{id:_i.id,properties:_i.properties,texcoords:uy}}).filter(function(_i){return _._isVisible(_i.properties)&&_.isInMinMaxRange(_i.properties,f.style_zoom)}),_n=Ry.tile_scale;return f.pad_scale=this.pad_scale,f.default_winding="CW",g.features=_t.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[_n,0],[_n,_n],[0,_n],[0,0]]]},properties:{overlays_config:_t}}]:_t,g}},{key:"executeCommands",value:function(f){for(var g,_=f.length<10,k=0;k<f.length;k++){var q=f[k];q.arguments.push(_);var $=this[q.method_name].apply(this,q.arguments);_&&($&&g?g.mergeRect($,!0,g):$&&(g=$))}return g?g.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(f){var g=f.geometry.boundingBox;return new C0.H.geo.Rect(J_.clamp(g[0],-fD[1],fD[1]),g[1],J_.clamp(g[2],-fD[1],fD[1]),g[3])}},{key:"addObjects",value:function(f,g){for(var _,k=1<arguments.length&&void 0!==g&&g,q=0;q<f.length;q++){var $,_t,_n,_i=f[q];"Group"===_i.type?(_i.$children_ids$={},this._groups_by_id[_i.id]=_i):(l._preprocessGeometry(_i.geometry),$=this._getClampedGeoRectForFeature(_i),k&&(_?_.mergeRect($,!0,_):_=$),(_n=(_t=-1!==_i.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox($)).$tree=_t,_n.$feature$=_i,this._tree_entries_by_object_id[_i.id]=_n)}for(var _o=0;_o<f.length;_o++){var xa=f[_o];xa.properties.parent&&(this._groups_by_id[xa.properties.parent].$children_ids$[xa.id]=xa.id),xa.properties.ref={effectiveVisibility:this._isVisible(xa.properties),zInfo:this._getZInfo([],xa)}}return this._layersCache.removeAll(),_}},{key:"removeObjectsByIds",value:function(f,g,_){for(var k,q=2<arguments.length&&void 0!==_&&_,$=0;$<f.length;$++){var _t,_n=f[$],_i=void 0,_o=void 0;(_i=this._tree_entries_by_object_id[_n])?(q&&(_t=this._getClampedGeoRectForFeature(_i.$feature$),k?k.mergeRect(_t,!0,k):k=_t),delete this._groups_by_id[_i.$feature$.properties.parent].$children_ids$[_n],_i.$tree.remove(_i),delete this._tree_entries_by_object_id[_n]):(_o=this._groups_by_id[_n])&&(_o.properties.parent&&delete this._groups_by_id[_o.properties.parent].$children_ids$[_n],g&&this.removeObjectsByIds(Object.keys(_o.$children_ids$),!0),delete this._groups_by_id[_n])}return this._layersCache.removeAll(),k}},{key:"updateObjectProperties",value:function(f,g){var _,k=1<arguments.length&&void 0!==g&&g;return"Group"===f.type?(aA(this._groups_by_id[f.id].properties,f.properties),this._groups_by_id[f.id].properties.ref.effectiveVisibility=this._isVisible(f.properties)):(this._tree_entries_by_object_id[f.id]||this.addObjects([f]),aA(this._tree_entries_by_object_id[f.id].$feature$.properties,f.properties),this._tree_entries_by_object_id[f.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(f.properties),k&&(_=this._getClampedGeoRectForFeature(f))),_}},{key:"_getZInfo",value:function(f,g){var _=g.properties.zIdx,k=g.properties.sIdx;return f[0]|=void 0!==_,f.splice(1,0,_||0,k<0?g.id:k),0===g.properties.parent?f:this._getZInfo(f,this._groups_by_id[g.properties.parent])}},{key:"_isVisible",value:function(f){var g=f.visible,_=!f.parent||this._isVisible(this._groups_by_id[f.parent].properties);return g&&_}},{key:"isInMinMaxRange",value:function(f,g){var _=f.min<=g&&f.max>=g,k=!f.parent||this.isInMinMaxRange(this._groups_by_id[f.parent].properties,g);return _&&k}},{key:"dispose",value:function(){this._commands=[],S_(Q_(l.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(f,g){for(var _,k=f.properties.ref.zInfo,q=g.properties.ref.zInfo,$=k.length,_t=q.length,_n=Math.min($,_t),_i=1;_i<_n;_i++)if(_=k[_i]-q[_i])return _;return $-_t}},{key:"_preprocessGeometry",value:function(f){var g=f.type;f.coordinates="Point"===g?l._processPointCoordinates(f.coordinates):"MultiPoint"===g?f.coordinates.map(l._processPointCoordinates):"LineString"===g?l._processLineStringCoordinates(f.coordinates):"MultiLineString"===g?f.coordinates.map(l._processLineStringCoordinates):"Polygon"===g?f.coordinates.map(l._processPolygonCoordinates):"MultiPolygon"===g?f.coordinates.map(l._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(f){return[f[1],f[0],f[2]]}},{key:"_processLineStringCoordinates",value:function(f){return l._latLngAltArrayToLineString(f,!1)}},{key:"_processPolygonCoordinates",value:function(f){return l._latLngAltArrayToLineString(f,!0)}},{key:"_processMultiPolygonCoordinates",value:function(f){return f.map(l._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(f,g){for(var _=[],k=f.length,q=0;q<k;q+=3)_.push([f[q+1],f[q]]);return g&&_.push([f[1],f[0]]),_}}]),l}();HE.register(cO,"ObjectSource");var f4=function(){function s(){A0(this,s),this._map={}}return L0(s,[{key:"set",value:function(l,f,g){var _;this._map[l]?this._map[l].accumulator.add(g):((_=new Set).add(g),this._map[l]={value:f,accumulator:_})}},{key:"get",value:function(l){return this._map[l]&&this._map[l].value}},{key:"delete",value:function(l,f){var g=this._map[l];g&&g.accumulator&&(g.accumulator.delete(f),0===g.accumulator.size&&delete this._map[l])}}]),s}(),p4=function(){M1(l,HE);var s=j1(l);function l(f,g){var _;return A0(this,l),_=s.call(this,f,g),n1.is_worker||(_._icons=new f4),_}return L0(l,[{key:"onProviderUpdate",value:function(f){f.target instanceof H.map.provider.Tile?this.dispatchUpdate(f.target,f.data):this.dispatchUpdate(void 0,f.data)}},{key:"onReady",value:function(){var f=this.provider;f.setTileCanvasRendering&&f.setTileCanvasRendering(!1),f.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),f.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){S_(Q_(l.prototype),"dispose",this).call(this);var f=this.provider;f.providesMarkers()&&f.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(f,g){this.provider.cacheFilter(f)&&this._deleteIcons(f,g.data)}},{key:"_deleteIcons",value:function(f,g){for(var _=0,k=g.length;_<k;_++){var q=g[_].getIcon();this._icons.delete(q.uid,f)}}},{key:"getIconBitmapByObjectId",value:function(f,g){var _=this._icons.get(g);return _&&_.getBitmap()}},{key:"requestMarkerTile",value:function(f){var g=this;return new Promise(function(_,k){g.provider?g.provider.requestTileAsPromise(f.x,f.y,f.z,!1).then(function(q){var $,_t,_n=[];if(q.data)for(_t=($=q.data).length;_t--;){var _i=$[_t],_o=_i.getIcon();g._icons.set(_o.uid,_o,q.key),_n.push(_i.forWorkerMessage())}_(_n)}):_([])})}},{key:"requestSpatialTile",value:function(f){var g=this;return new Promise(function(_,k){g.provider?g.provider.requestTileAsPromise(f.x,f.y,f.z,!1).then(function(q){var $,_t=[];if(q.getObjects){$=q.getObjects();for(var _n=0;_n<$.length;_n++){var _i=$[_n];_t.push({id:_i.getId(),geometries:_i.getGeometriesForTile(q),isClosed:_i.isClosed(),style:_i.getStyle().forWorkerMessage()})}}_(_t)}):_([])})}},{key:"_pointToArray",value:function(f){var g=Ry.tile_scale/this.tile_size;return[f.x*g,f.y*g]}},{key:"_getGeoJsonMultiPolygon",value:function(f){for(var g=f.geometries,_=g.length,k=[],q={coordinates:k,type:"MultiPolygon"},$=0;$<_;$++){var _t=g[$],_n=_t.paths,_i=_n.length,_o=_t.interiorsIndex,xa=_t.outlinesIndex,ka=Math.min(_o,xa,_i),_l=void 0,_f=void 0;for(_f=0;_f<ka;_f++)_l=[_n[_f].map(this._pointToArray,this)],k.push(_l);if(1===ka)for(ka=Math.min(xa,_i),_f=_o;_f<ka;_f++)_l.push(_n[_f].map(this._pointToArray,this))}return q}},{key:"_getGeoJsonMultiLineString",value:function(f,g){for(var _=1<arguments.length&&void 0!==g&&g,k={coordinates:[],type:"MultiLineString"},q=f.geometries,$=0;$<q.length;$++)for(var _t=q[$],_n=_?_t.outlinesIndex:0,_i=_?_t.paths.length:Math.min(_t.interiorsIndex,_t.outlinesIndex,_t.paths.length),_o=_n;_o<_i;_o++){var xa=_t.paths[_o].map(this._pointToArray,this);k.coordinates.push(xa)}return k}},{key:"_getGeoJsonGeometry",value:function(f,g){var _=1===g?this._getGeoJsonMultiPolygon(f):this._getGeoJsonMultiLineString(f,3===g);return _.coordinates.length?_:null}},{key:"_load",value:function(f){var g=this;return new Promise(function(_,k){var q=s0.postMessage(g.target_name+".requestMarkerTile",f.coords).then(g._prepareTileData.bind(g,f)),$=new Promise(function(_t,_n){s0.postMessage(g.target_name+".requestSpatialTile",f.coords).then(function(_i){for(var _o=[],xa=[],ka=[],_l=0;_l<_i.length;_l++){var _f,_a=_i[_l],_g=void 0,ty=_a.isClosed?(_g=xa,1):(_g=_o,2),ny=g._getGeoJsonGeometry(_a,ty);ny&&(_f={id:_a.id,type:"Feature",properties:{height:0,style:_a.style},geometry:ny},2===ty&&(_f.properties.effectiveZIdx=_o.length),_g.push(_f));var uy=g._getGeoJsonGeometry(_a,3);uy&&ka.push({id:_a.id,type:"Feature",properties:{height:0,style:_a.style,effectiveZIdx:ka.length},geometry:uy})}f.source_data.layers.polylines={type:"FeatureCollection",features:_o},f.source_data.layers.polygons={type:"FeatureCollection",features:xa},f.source_data.layers.outlines={type:"FeatureCollection",features:ka},_t(f)})});Promise.all([q,$]).then(function(_t){g._postProcessTile(f),_(f)})})}},{key:"_prepareTileData",value:function(f,g){var _=Ry.wrapTile(f.coords,{x:!0,y:!0}),k=Ry.metersForTile(_);f.source_data.layers={markers:{features:g,type:"FeatureCollection"}};var q={coords:_,min:k},$=f.source_data,_t=lO("binary-tree"),_n={};for(var _i in $.layers)for(var _o=$.layers[_i].features.length,xa=0;xa<_o;xa++){var ka=$.layers[_i].features[xa],_l=ka.properties.icon;_n[_l.id]||(_t.addItem({width:_l.size.w,height:_l.size.h,meta:{objectId:ka.id,id:_l.id}}),_n[_l.id]=!0),Ry.transformGeometry(ka.geometry,function(_f){var _a=_f[0];_f[0]=_f[1],_f[1]=_a})}return f.rasters=_t.export(),HE.projectData(f.source_data),HE.scaleData(f.source_data,q),f}}]),l}();HE.register(p4,"ObjectTileSource");var tM=function(){M1(l,FI);var s=j1(l);function l(f,g){var _;return A0(this,l),(_=s.call(this,f,g)).uid_=f.uid,_}return L0(l,[{key:"initialize",value:function(f,g){this.provider=f,this._on_update=g,this._onProviderUpdate=this._onProviderUpdate.bind(this),f.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(f){return Object.assign(S_(Q_(l.prototype),"tileTexture",this).call(this,f),{uid:this.uid_,url:this.uid_+"_"+f.coords.key,coords:f.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),l}();function pD(s,l){var f=(l=this.options=function(_,k){for(var q in k)_[q]=k[q];return _}(Object.create(this.options),l)).debug;if(f&&console.time("preprocess data"),l.maxZoom<0||24<l.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(l.promoteId&&l.generateId)throw new Error("promoteId and generateId cannot be used together.");var g=oD(s,l);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",l.indexMaxZoom,l.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(g=HI(g,l)).length&&this.splitTile(g,0,0,0),f&&(g.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hO(s,l,f){return 32*((1<<s)*f+l)+s}_b.register(tM,"RemoteRasterTileSource"),pD.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},pD.prototype.splitTile=function(s,l,f,g,_,k,q){for(var $=[s,l,f,g],_t=this.options,_n=_t.debug;$.length;){g=$.pop(),f=$.pop(),l=$.pop(),s=$.pop();var _i,_o,xa,ka,_l,_f,_a,_g,ty,ny,uy,ry=1<<l,ly=hO(l,f,g),cy=this.tiles[ly];if(cy||(1<_n&&console.time("creation"),cy=this.tiles[ly]=UI(s,l,f,g,_t),this.tileCoords.push({z:l,x:f,y:g}),_n&&(1<_n&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",l,f,g,cy.numFeatures,cy.numPoints,cy.numSimplified),console.timeEnd("creation")),this.stats[_i="z"+l]=(this.stats[_i]||0)+1,this.total++)),cy.source=s,_){if(l===_t.maxZoom||l===_)continue;var by=1<<_-l;if(f!==Math.floor(k/by)||g!==Math.floor(q/by))continue}else if(l===_t.indexMaxZoom||cy.numPoints<=_t.indexMaxPoints)continue;cy.source=null,0!==s.length&&(1<_n&&console.time("clipping"),xa=.5-(_o=.5*_t.buffer/_t.extent),_l=1+_o,ty=_f=_a=_g=null,ny=Xb(s,ry,f-_o,f+(ka=.5+_o),0,cy.minX,cy.maxX,_t),uy=Xb(s,ry,f+xa,f+_l,0,cy.minX,cy.maxX,_t),s=null,ny&&(ty=Xb(ny,ry,g-_o,g+ka,1,cy.minY,cy.maxY,_t),_f=Xb(ny,ry,g+xa,g+_l,1,cy.minY,cy.maxY,_t),ny=null),uy&&(_a=Xb(uy,ry,g-_o,g+ka,1,cy.minY,cy.maxY,_t),_g=Xb(uy,ry,g+xa,g+_l,1,cy.minY,cy.maxY,_t),uy=null),1<_n&&console.timeEnd("clipping"),$.push(ty||[],l+1,2*f,2*g),$.push(_f||[],l+1,2*f,2*g+1),$.push(_a||[],l+1,2*f+1,2*g),$.push(_g||[],l+1,2*f+1,2*g+1))}},pD.prototype.getTile=function(s,l,f){var g=this.options,_=g.extent,k=g.debug;if(s<0||24<s)return null;var q=1<<s,$=hO(s,l=(l%q+q)%q,f);if(this.tiles[$])return uA(this.tiles[$],_);1<k&&console.log("drilling down to z%d-%d-%d",s,l,f);for(var _t,_n=s,_i=l,_o=f;!_t&&0<_n;)_n--,_i=Math.floor(_i/2),_o=Math.floor(_o/2),_t=this.tiles[hO(_n,_i,_o)];return _t&&_t.source?(1<k&&console.log("found parent tile z%d-%d-%d",_n,_i,_o),1<k&&console.time("drilling down"),this.splitTile(_t.source,_n,_i,_o,s,l,f),1<k&&console.timeEnd("drilling down"),this.tiles[$]?uA(this.tiles[$],_):null):null};var d4={type:"FeatureCollection",features:[]},g4=function(){M1(l,HE);var s=j1(l);function l(f,g){return A0(this,l),f.tiled=!0,f.url="",s.call(this,f,g)}return L0(l,[{key:"fetchTile",value:function(f,g,_){return this.provider?this.provider.requestTileAsPromise(f,g,_).then(function(k){return k.data}):Promise.resolve(d4)}},{key:"_load",value:function(f){var g=this,_=Ry.wrapTile(f.coords,{x:!0,y:!0}),k={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Ry.tile_scale};return s0.postMessage(this.target_name+".fetchTile",_.x,_.y,_.z).then(function(q){for(var $ in f.source_data.layers="FeatureCollection"===q.type?{_default:q}:q,f.source_data.layers){var _t=new pD(f.source_data.layers[$],k).getTile(_.z,_.x,_.y);f.source_data.layers[$]=YL(_t)}return g._postProcessTile(f),f})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),l}();_b.register(g4,"GeoJSONTileSource");var oP,y4={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},c8=function(){M1(l,_b);var s=j1(l);function l(f,g){return A0(this,l),f.max_zoom=0,s.call(this,f,g)}return L0(l,[{key:"load",value:function(f){return f.source_data="0/0/0"===f.coords.key?y4:void 0,Promise.resolve(f)}}]),l}();_b.register(c8,"SkyBox");var $E,dD=oP={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function fO(s,l){var f={};return l.forEach(function(g){return f[g]=s[g]}),f}var D2,Sw=$E={},gD=0;$E.getContext=function(s,l){var f=!1;null==s&&((s=document.createElement("canvas")).style.position="absolute",s.style.top=0,s.style.left=0,s.style.zIndex=-1,document.body.appendChild(s),f=!0);var g=s.getContext("webgl",l)||s.getContext("experimental-webgl",l);if(!g)throw new Error("Couldn't create WebGL context.");return g._tangram_id=gD++,f?($E.resize(g,window.innerWidth,window.innerHeight,l.device_pixel_ratio),window.addEventListener("resize",function(){$E.resize(g,window.innerWidth,window.innerHeight,l.device_pixel_ratio)})):$E.resize(g,parseFloat(s.style.width),parseFloat(s.style.height),l.device_pixel_ratio),g},$E.resize=function(s,l,f,g){s.canvas.style.width=l+"px",s.canvas.style.height=f+"px",s.canvas.width=Math.round(l*g),s.canvas.height=Math.round(f*g),s.bindFramebuffer(s.FRAMEBUFFER,null),s.viewport(0,0,s.canvas.width,s.canvas.height)};var d0=D2={};D2.BYTE=5120,D2.UNSIGNED_BYTE=5121,D2.SHORT=5122,D2.UNSIGNED_SHORT=5123,D2.INT=5124,D2.UNSIGNED_INT=5125,D2.FLOAT=5126;var hA,m4=Math.pow(2,16)-1,pO=!1,nM=function(){function s(l){A0(this,s),this.size_=l||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return L0(s,[{key:"push",value:function(l){if(!this.overflows_||pO){if(m4<l){if(this.overflows_=!0,!pO)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=l,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var l=this.buffer_,f=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,l.subarray(0,f)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var l=new this.ArrayType_(this.size_);l.set(this.buffer_),this.buffer_=l}}]),s}();nM.setElementIndexUint=function(s){pO=s};var v4=(_2(hA={},d0.FLOAT,Float32Array),_2(hA,d0.BYTE,Int8Array),_2(hA,d0.UNSIGNED_BYTE,Uint8Array),_2(hA,d0.INT,Int32Array),_2(hA,d0.UNSIGNED_INT,Uint32Array),_2(hA,d0.SHORT,Int16Array),_2(hA,d0.UNSIGNED_SHORT,Uint16Array),hA),dO=function(){function s(l){var f=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,g=void 0===f?500:f;A0(this,s),this.vertex_layout=l,this.vertex_elements=new nM,this.stride=this.vertex_layout.stride,0<s.array_pool.length?(this.vertex_buffer=s.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),qy("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=g,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return L0(s,[{key:"setBufferViews",value:function(){var l=this;this.views={},this.views[d0.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(f){null==l.views[f.type]&&(l.views[f.type]=new(0,v4[f.type])(l.vertex_buffer.buffer))})}},{key:"checkBufferSize",value:function(){var l;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(l=new Uint8Array(this.byte_length)).set(this.vertex_buffer),s.array_pool.push(this.vertex_buffer),this.vertex_buffer=l,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(l){this.checkBufferSize(),this.vertexLayoutAddVertex(l,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),qy("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),s}();dO.array_pool=[];var S2=function(){function s(l){A0(this,s),this.attribs=l,this.dynamic_attribs=this.attribs.filter(function(_n){return!_n.static}),this.components=[],this.index={},this.offset={};for(var f=this.stride=0,g=0,_=0;_<this.attribs.length;_++){var k=this.attribs[_];if(null==k.static){k.offset=this.stride,k.byte_size=k.size;var q=0;switch(k.type){case d0.FLOAT:case d0.INT:case d0.UNSIGNED_INT:k.byte_size*=4,q=2;break;case d0.SHORT:case d0.UNSIGNED_SHORT:k.byte_size*=2,q=1}3&k.byte_size&&(k.byte_size+=4-(3&k.byte_size)),this.stride+=k.byte_size;for(var $=k.offset>>q,_t=0;_t<k.size;_t++)this.components.push({type:k.type,shift:q,offset:$++,index:g++});this.index[k.name]=f,f+=k.size,this.offset[k.name]=k.offset}else k.static=Array.isArray(k.static)?k.static:[k.static],k.method="vertexAttrib".concat(k.static.length,"fv")}}return L0(s,[{key:"enable",value:function(l,f,g){for(var _,k,q=0;q<this.attribs.length;q++)-1!==(k=f.attribute((_=this.attribs[q]).name).location)&&(null==_.static?(s.enabled_attribs[k]&&!g||l.enableVertexAttribArray(k),l.vertexAttribPointer(k,_.size,_.type,_.normalized,this.stride,_.offset),s.enabled_attribs[k]=f):l[_.method]instanceof Function&&(l.enableVertexAttribArray(k),l[_.method](k,_.static),l.disableVertexAttribArray(k),delete s.enabled_attribs[k]));for(k in s.enabled_attribs)this.disableUnusedAttribute(l,k,f)}},{key:"disableUnusedAttribute",value:function(l,f,g){s.enabled_attribs[f]!==g&&(l.disableVertexAttribArray(f),delete s.enabled_attribs[f])}},{key:"createVertexData",value:function(){return new dO(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var l=dx(JSON.stringify(this.attribs));if(null==s.add_vertex_funcs[l]){var f,g=["var t, o;"],_=l_(this.components);_.sort(function(_t,_n){return _t.type!==_n.type?_t.type-_n.type:_t.index-_n.index});for(var k=0;k<_.length;k++){var q=_[k];f!==q.type&&(g.push("t = vs[".concat(q.type,"];")),g.push("o = off".concat(q.shift?" >> "+q.shift:"",";")),f=q.type),g.push("t[o + ".concat(q.offset,"] = v[").concat(q.index,"];"))}g=g.join("\n");var $=new Function("v","vs","off",g);s.add_vertex_funcs[l]=$}this.addVertex=s.add_vertex_funcs[l]}}]),s}();S2.enabled_attribs={},S2.add_vertex_funcs={};var rM=[{x:0,y:0},{x:Ry.tile_scale,y:-Ry.tile_scale}],eT=[0,0,1,1];function yD(s,l,f){var g=rM[0],_=rM[1];return s[0]<=g.x+f&&l[0]<=g.x+f||s[0]>=_.x-f&&l[0]>=_.x-f||s[1]>=g.y-f&&l[1]>=g.y-f||s[1]<=_.y+f&&l[1]<=_.y+f}function SE(s,l){var f=rM[0],g=rM[1];return s[0]<=f.x+(l=l||0)||s[0]>=g.x-l||s[1]>=f.y-l||s[1]<=g.y+l}var gO=yO;function yO(s,l,f){f=f||2;var g,_,k,q,$,_t,_n,_i=l&&l.length,_o=_i?l[0]*f:s.length,xa=_4(s,0,_o,f,!0),ka=[];if(!xa)return ka;if(_i&&(xa=function(_f,_a,_g,ty){var ny,uy,cy,Oy,My,Sy,by=[];for(ny=0,uy=_a.length;ny<uy;ny++)(cy=_4(_f,_a[ny]*ty,ny<uy-1?_a[ny+1]*ty:_f.length,ty,!1))===cy.next&&(cy.steiner=!0),by.push(function(Oy){for(var My=Oy,Sy=Oy;My.x<Sy.x&&(Sy=My),(My=My.next)!==Oy;);return Sy}(cy));for(by.sort(b4),ny=0;ny<by.length;ny++)Sy=void 0,(My=function(Vy,e0){var Ly,Wy=e0,E0=Vy.x,q0=Vy.y,F0=-1/0;do{if(q0<=Wy.y&&q0>=Wy.next.y){var _0=Wy.x+(q0-Wy.y)*(Wy.next.x-Wy.x)/(Wy.next.y-Wy.y);if(_0<=E0&&F0<_0){if((F0=_0)===E0){if(q0===Wy.y)return Wy;if(q0===Wy.next.y)return Wy.next}Ly=Wy.x<Wy.next.x?Wy:Wy.next}}Wy=Wy.next}while(Wy!==e0);if(!Ly)return null;if(E0===F0)return Ly.prev;var o_,J0=Ly,b_=Ly.x,z0=Ly.y,w_=1/0;for(Wy=Ly.next;Wy!==J0;)E0>=Wy.x&&Wy.x>=b_&&KE(q0<z0?E0:F0,q0,b_,z0,q0<z0?F0:E0,q0,Wy.x,Wy.y)&&((o_=Math.abs(q0-Wy.y)/(E0-Wy.x))<w_||o_===w_&&Wy.x>Ly.x)&&mD(Wy,Vy)&&(Ly=Wy,w_=o_),Wy=Wy.next;return Ly}(Oy=by[ny],My=_g))&&nT(Sy=uP(My,Oy),Sy.next),_g=nT(_g,_g.next);return _g}(s,l,xa,f)),s.length>80*f){g=k=s[0],_=q=s[1];for(var _l=f;_l<_o;_l+=f)($=s[_l])<g&&(g=$),(_t=s[_l+1])<_&&(_=_t),k<$&&(k=$),q<_t&&(q=_t);_n=Math.max(k-g,q-_)}return fA(xa,ka,f,g,_,_n),ka}function _4(s,l,f,g,_){var k,q;if(_===0<vO(s,l,f,g))for(k=l;k<f;k+=g)q=vD(k,s[k],s[k+1],q);else for(k=f-g;l<=k;k-=g)q=vD(k,s[k],s[k+1],q);return q&&rC(q,q.next)&&(rx(q),q=q.next),q}function nT(s,l){if(!s)return s;l=l||s;var f,g=s;do{if(f=!1,g.steiner||!rC(g,g.next)&&0!==_x(g.prev,g,g.next))g=g.next;else{if(rx(g),(g=l=g.prev)===g.next)return null;f=!0}}while(f||g!==l);return l}function fA(s,l,f,g,_,k,q){if(s){!q&&k&&function(_i,_o,xa,ka){for(var _l=_i;null===_l.z&&(_l.z=mO(_l.x,_l.y,_o,xa,ka)),_l.prevZ=_l.prev,_l.nextZ=_l.next,(_l=_l.next)!==_i;);_l.prevZ.nextZ=null,_l.prevZ=null,function(_f){var _a,_g,ty,ny,uy,ry,ly,cy,by=1;do{for(_g=_f,uy=_f=null,ry=0;_g;){for(ry++,ty=_g,_a=ly=0;_a<by&&(ly++,ty=ty.nextZ);_a++);for(cy=by;0<ly||0<cy&&ty;)0!==ly&&(0===cy||!ty||_g.z<=ty.z)?(_g=(ny=_g).nextZ,ly--):(ty=(ny=ty).nextZ,cy--),uy?uy.nextZ=ny:_f=ny,ny.prevZ=uy,uy=ny;_g=ty}uy.nextZ=null,by*=2}while(1<ry)}(_l)}(s,g,_,k);for(var $,_t,_n=s;s.prev!==s.next;)if($=s.prev,_t=s.next,k?function(_i,_o,xa,ka){var _l=_i.prev,_f=_i,_a=_i.next;if(0<=_x(_l,_f,_a))return!1;for(var ny=_l.x>_f.x?_l.x>_a.x?_l.x:_a.x:_f.x>_a.x?_f.x:_a.x,uy=_l.y>_f.y?_l.y>_a.y?_l.y:_a.y:_f.y>_a.y?_f.y:_a.y,ry=mO(_l.x<_f.x?_l.x<_a.x?_l.x:_a.x:_f.x<_a.x?_f.x:_a.x,_l.y<_f.y?_l.y<_a.y?_l.y:_a.y:_f.y<_a.y?_f.y:_a.y,_o,xa,ka),ly=mO(ny,uy,_o,xa,ka),cy=_i.nextZ;cy&&cy.z<=ly;){if(cy!==_i.prev&&cy!==_i.next&&KE(_l.x,_l.y,_f.x,_f.y,_a.x,_a.y,cy.x,cy.y)&&0<=_x(cy.prev,cy,cy.next))return!1;cy=cy.nextZ}for(cy=_i.prevZ;cy&&cy.z>=ry;){if(cy!==_i.prev&&cy!==_i.next&&KE(_l.x,_l.y,_f.x,_f.y,_a.x,_a.y,cy.x,cy.y)&&0<=_x(cy.prev,cy,cy.next))return!1;cy=cy.prevZ}return!0}(s,g,_,k):function(_i){var _o=_i.prev,xa=_i,ka=_i.next;if(0<=_x(_o,xa,ka))return!1;for(var _l=_i.next.next;_l!==_i.prev;){if(KE(_o.x,_o.y,xa.x,xa.y,ka.x,ka.y,_l.x,_l.y)&&0<=_x(_l.prev,_l,_l.next))return!1;_l=_l.next}return!0}(s))l.push($.i/f),l.push(s.i/f),l.push(_t.i/f),rx(s),s=_t.next,_n=_t.next;else if((s=_t)===_n){q?1===q?fA(s=function(_i,_o,xa){var ka=_i;do{var _l=ka.prev,_f=ka.next.next;!rC(_l,_f)&&aP(_l,ka,ka.next,_f)&&mD(_l,_f)&&mD(_f,_l)&&(_o.push(_l.i/xa),_o.push(ka.i/xa),_o.push(_f.i/xa),rx(ka),rx(ka.next),ka=_i=_f),ka=ka.next}while(ka!==_i);return ka}(s,l,f),l,f,g,_,k,2):2===q&&function(_i,_o,xa,ka,_l,_f){var ny,uy,_a=_i;do{for(var _g=_a.next.next;_g!==_a.prev;){if(_a.i!==_g.i&&(ny=_a).next.i!==(uy=_g).i&&ny.prev.i!==uy.i&&!function(ry,ly){var cy=ry;do{if(cy.i!==ry.i&&cy.next.i!==ry.i&&cy.i!==ly.i&&cy.next.i!==ly.i&&aP(cy,cy.next,ry,ly))return!0;cy=cy.next}while(cy!==ry);return!1}(ny,uy)&&mD(ny,uy)&&mD(uy,ny)&&function(ry,ly){for(var cy=ry,by=!1,Oy=(ry.x+ly.x)/2,My=(ry.y+ly.y)/2;cy.y>My!=cy.next.y>My&&Oy<(cy.next.x-cy.x)*(My-cy.y)/(cy.next.y-cy.y)+cy.x&&(by=!by),(cy=cy.next)!==ry;);return by}(ny,uy)){var ty=uP(_a,_g);return _a=nT(_a,_a.next),ty=nT(ty,ty.next),fA(_a,_o,xa,ka,_l,_f),fA(ty,_o,xa,ka,_l,_f)}_g=_g.next}_a=_a.next}while(_a!==_i)}(s,l,f,g,_,k):fA(nT(s),l,f,g,_,k,1);break}}}function b4(s,l){return s.x-l.x}function mO(s,l,f,g,_){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-f)/_)|s<<8))|s<<4))|s<<2))|s<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-g)/_)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function KE(s,l,f,g,_,k,q,$){return 0<=(_-q)*(l-$)-(s-q)*(k-$)&&0<=(s-q)*(g-$)-(f-q)*(l-$)&&0<=(f-q)*(k-$)-(_-q)*(g-$)}function _x(s,l,f){return(l.y-s.y)*(f.x-l.x)-(l.x-s.x)*(f.y-l.y)}function rC(s,l){return s.x===l.x&&s.y===l.y}function aP(s,l,f,g){return rC(s,l)&&rC(f,g)||rC(s,g)&&rC(f,l)||0<_x(s,l,f)!=0<_x(s,l,g)&&0<_x(f,g,s)!=0<_x(f,g,l)}function mD(s,l){return _x(s.prev,s,s.next)<0?0<=_x(s,l,s.next)&&0<=_x(s,s.prev,l):_x(s,l,s.prev)<0||_x(s,s.next,l)<0}function uP(s,l){var f=new iM(s.i,s.x,s.y),g=new iM(l.i,l.x,l.y),_=s.next,k=l.prev;return(s.next=l).prev=s,(f.next=_).prev=f,(g.next=f).prev=g,(k.next=g).prev=k,g}function vD(s,l,f,g){var _=new iM(s,l,f);return g?(_.next=g.next,(_.prev=g).next.prev=_,g.next=_):(_.prev=_).next=_,_}function rx(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function iM(s,l,f){this.i=s,this.x=l,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vO(s,l,f,g){for(var _=0,k=l,q=f-g;k<f;k+=g)_+=(s[q]-s[k])*(s[k+1]+s[q+1]),q=k;return _}yO.deviation=function(s,l,f,g){var _=l&&l.length,q=Math.abs(vO(s,0,_?l[0]*f:s.length,f));if(_)for(var $=0,_t=l.length;$<_t;$++)q-=Math.abs(vO(s,l[$]*f,$<_t-1?l[$+1]*f:s.length,f));var _o=0;for($=0;$<g.length;$+=3){var xa=g[$]*f,ka=g[$+1]*f,_l=g[$+2]*f;_o+=Math.abs((s[xa]-s[_l])*(s[1+ka]-s[1+xa])-(s[xa]-s[ka])*(s[1+_l]-s[1+xa]))}return 0===q&&0===_o?0:Math.abs((_o-q)/q)},yO.flatten=function(s){for(var l=s[0][0].length,f={vertices:[],holes:[],dimensions:l},g=0,_=0;_<s.length;_++){for(var k=0;k<s[_].length;k++)for(var q=0;q<l;q++)f.vertices.push(s[_][k][q]);0<_&&f.holes.push(g+=s[_-1].length)}return f};var w4=[0,0,1];function _O(s,l,f,g){var _,k,q,$,_t,_n=g.texcoord_index,_o=g.texcoord_normalize,xa=l.vertex_elements;_n&&(_o=_o||1,k=(_=g0(g.texcoord_scale||eT,4))[0],q=_[1],$=_[2],_t=_[3]);for(var ka,_l=0,_f=s.length,_a=0;_a<_f;_a++){var _g,ty,ny,uy,ry,ly=l.vertex_count,cy=s[_a];_n&&(ty=(_g=g0(Ry.findBoundingBox(cy),4))[0],uy=($-k)/(_g[2]-ty),ry=(_t-q)/(_g[3]-(ny=_g[1])));for(var by=0;by<cy.length;by++)for(var Oy=cy[by],My=0;My<Oy.length;My++){var Sy=Oy[My];f[0]=Sy[0],f[1]=Sy[1],_n&&(f[_n+0]=((Sy[0]-ty)*uy+k)*_o,f[_n+1]=((Sy[1]-ny)*ry+q)*_o),l.addVertex(f)}for(var Vy=(ka=gO.flatten(cy),gO(ka.vertices,ka.holes,ka.dimensions)),e0=0;e0<Vy.length;e0++)xa.push(ly+Vy[e0]);_l+=Vy.length/3}return _l}var x4="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",bO="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",rT=Object.create(r1);Object.assign(rT,{name:"polygons",built_in:!0,vertex_shader_src:x4,fragment_shader_src:bO,selection:!0,init:function(){r1.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var s;return this.vertex_layout||(s=[{name:"a_position",size:4,type:d0.SHORT,normalized:!1},{name:"a_normal",size:3,type:d0.BYTE,normalized:!0},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&s.push({name:"a_texcoord",size:2,type:d0.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new S2(s)),this.vertex_layout},_parseFeature:function(s,l,f){var g=this.feature_style;return g.color=this.parseColor(l.color,f),g.color?(g.z=l.z&&wy.evalCachedDistanceProperty(l.z,f)||wy.defaults.z,g.z*=Ry.height_scale,g.extrude=wy.evalProperty(l.extrude,f),g.extrude&&(!0===g.extrude?(g.height=void 0!==s.properties.height?s.properties.height:wy.defaults.height,g.min_height=void 0!==s.properties.min_height?s.properties.min_height:wy.defaults.min_height):"number"==typeof g.extrude?(g.height=g.extrude,g.min_height=0):Array.isArray(g.extrude)&&(g.min_height=g.extrude[0],g.height=g.extrude[1]),g.height*=Ry.height_scale,g.min_height*=Ry.height_scale),g.tile_edges=l.tile_edges,g):null},_preprocess:function(s){return s.color=wy.createColorPropertyCache(s.color),s.z=wy.createPropertyCache(s.z,wy.parseUnits),s},makeVertexTemplate:function(s){var l=0;return this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=s.z||0,this.vertex_template[l++]=this.scaleOrder(s.order),this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=127,this.vertex_template[l++]=255*s.color[0],this.vertex_template[l++]=255*s.color[1],this.vertex_template[l++]=255*s.color[2],this.vertex_template[l++]=255*s.color[3],this.selection&&(this.vertex_template[l++]=255*s.selection_color[0],this.vertex_template[l++]=255*s.selection_color[1],this.vertex_template[l++]=255*s.selection_color[2],this.vertex_template[l++]=255*s.selection_color[3]),this.texcoords&&(this.vertex_template[l++]=0,this.vertex_template[l++]=0),this.vertex_template},buildPolygons:function(s,l,f,g){var _=this.makeVertexTemplate(l),k={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!l.tile_edges,tile_edge_tolerance:Ry.tile_scale*g.tile.pad_scale*4,winding:g.winding};return l.extrude&&l.height?function(q,$,_t,_n,_i,_o,xa,ka,_l){var _f=_l.remove_tile_edges,_a=_l.tile_edge_tolerance,_g=_l.texcoord_index,ty=_l.texcoord_scale,ny=_l.texcoord_normalize,uy=_l.winding,ry=$+(_n||0),ly=$+_t;_o[2]=ly;var cy,by,Oy,My,Sy,Vy,e0=_O(q,_i,_o,{texcoord_index:_g,texcoord_scale:ty,texcoord_normalize:ny}),Ly=_i.vertex_elements,Wy=_i.vertex_count;_g&&(ny=ny||1,Vy=[[by=(cy=g0(ty||eT,4))[0],Sy=cy[3]],[by,Oy=cy[1]],[My=cy[2],Oy],[My,Sy]]);for(var E0=q.length,q0=0;q0<E0;q0++)for(var F0=q[q0],_0=0;_0<F0.length;_0++)for(var o_=F0[_0],J0=0;J0<o_.length-1;J0++)if(!_f||!yD(o_[J0],o_[J0+1],_a)){var z0,b_=void 0,w_=[[o_[z0="CCW"===uy?(b_=J0)+1:(b_=J0+1,J0)][0],o_[z0][1],ly],[o_[z0][0],o_[z0][1],ry],[o_[b_][0],o_[b_][1],ry],[o_[b_][0],o_[b_][1],ly]],x1=r0.normalize([o_[z0][0]-o_[b_][0],o_[z0][1]-o_[b_][1],0]),u1=r0.cross(w4,x1);_o[xa+0]=127*u1[0],_o[xa+1]=127*u1[1],_o[xa+2]=127*u1[2];for(var i1=0;i1<w_.length;i1++)_o[0]=w_[i1][0],_o[1]=w_[i1][1],_o[2]=w_[i1][2],_g&&(_o[_g+0]=Vy[i1][0]*ny,_o[_g+1]=Vy[i1][1]*ny),_i.addVertex(_o);Ly.push(Wy+0),Ly.push(Wy+1),Ly.push(Wy+2),Ly.push(Wy+2),Ly.push(Wy+3),Ly.push(Wy+0),Wy+=4,e0+=2}return e0}(s,l.z,l.height,l.min_height,f.vertex_data,_,this.vertex_layout.index.a_normal,0,k):_O(s,f.vertex_data,_,k)}});var E4=[0,0],iT={butt:0,square:1,round:2},Mw={miter:0,bevel:1,round:2},h8=Ry.tile_scale,oT=[0,0],pA=[1,0],lP=[.5,0];function kx(s,l){if(!(s.length<2)){var f,g,_=l.join_type,k=l.cap_type,q=l.closed_polygon,$=l.remove_tile_edges,_t=l.tile_edge_tolerance,_n=l.v_scale,_i=l.miter_len_sq,_o=l.crop_by_tile,xa=null!=l.texcoord_index,ka=0;if(q&&_===Mw.miter){var _l=function(My){if(SE(My[0]))return 0;for(var Sy=0;Sy<My.length;Sy++)if(SE(My[My.length-1-Sy]))return My.length-1-Sy;return 0}(s);if(0!==_l){var _f=function(My,Sy){for(var Vy=[],e0=0;e0<My.length;e0++){var Ly=(e0+Sy)%My.length;0!=Ly&&Vy.push(My[Ly])}return Vy.push(Vy[0]),Vy}(s,_l);return l.extra_lines=l.extra_lines||[],void l.extra_lines.push(_f)}}var _a=0,_g=s.length-1,ty=0;for(cy=s[_a],by=s[_a+1];r0.isEqual(cy,by);)if(cy=by,by=s[1+ ++_a],ty++,_a===s.length-1)return;for(;r0.isEqual(s[_g],s[_g-1]);)if(ty++,0==--_g)return;if(!(s.length<2+ty))if(g=r0.normalize(r0.perp(cy,by)),$&&yD(cy,by,_t)){var ny=oM(s,_a,_t);ny&&(l.extra_lines=l.extra_lines||[],l.extra_lines.push(ny))}else{q?(My=cy,Sy=f=r0.normalize(r0.perp(s[_g-1],cy)),Vy=g,Ly=l,void 0===(e0=_)||SE(My)&&!Ly.crop_by_tile?(y_(My,Vy,Vy,1,0,Ly,1),y_(My,Vy,Vy,0,0,Ly,-1)):e0===Mw.miter?cP(0,My,Sy,Vy,Ly.miter_len_sq,!0,Ly):sM(e0,0,My,Sy,Vy,!0,Ly)):(!_o&&SE(cy)||(aM(cy,ka,g,k,!0,l),xa&&k!==iT.butt&&(ka+=.5*_n*l.texcoord_width)),y_(cy,g,g,1,ka,l,1),y_(cy,g,g,0,ka,l,-1)),xa&&(ka+=_n*r0.length(r0.sub(by,cy)));for(var uy=_a+1;uy<_g;uy++){var ry=uy,cy=s[ry],by=s[uy+1];if(!r0.isEqual(cy,by)){if($&&yD(cy,by,_t)){y_(cy,g,g,1,ka,l,1),y_(cy,g,g,0,ka,l,-1),ME(1,l);var Oy=oM(s,ry+1,_t);return void(Oy&&(l.extra_lines=l.extra_lines||[],l.extra_lines.push(Oy)))}f=g,g=r0.normalize(r0.perp(cy,by)),_===Mw.miter?cP(ka,cy,f,g,_i,!1,l):sM(_,ka,cy,f,g,!1,l),xa&&(ka+=_n*r0.length(r0.sub(by,cy)))}}cy=by,f=g,q?function(My,Sy,Vy,e0,Ly,Wy){var E0;SE(My)&&!Wy.crop_by_tile?(y_(My,Sy,Sy,1,Ly,Wy,1),y_(My,Sy,Sy,0,Ly,Wy,-1)):(E0=_D(Sy,Vy),e0===Mw.miter&&r0.lengthSq(E0)>Wy.miter_len_sq&&(e0=Mw.bevel),e0===Mw.miter?(y_(My,E0,Sy,1,Ly,Wy,1),y_(My,E0,Sy,0,Ly,Wy,-1)):(y_(My,Sy,Sy,1,Ly,Wy,1),y_(My,Sy,Sy,0,Ly,Wy,-1))),ME(1,Wy)}(cy,f,g=r0.normalize(r0.perp(cy,s[1])),_,ka,l):(y_(cy,f,g,1,ka,l,1),y_(cy,f,g,0,ka,l,-1),ME(1,l),!_o&&SE(cy)||aM(cy,ka,f,k,!1,l))}}var My,Sy,Vy,e0,Ly}function oM(s,l,f){for(var g=l;s[g+1]&&yD(s[g],s[g+1],f);)g++;return 2<=s.length-g&&s.slice(g)}function _D(s,l){var f=r0.normalize(r0.add(s,l)),g=2/(1+Math.abs(r0.dot(s,f)));return r0.mult(f,g*g)}function cP(s,l,f,g,_,k,q){var $=_D(f,g);r0.lengthSq($)>_?sM(Mw.bevel,s,l,f,g,k,q):(y_(l,$,$,1,s,q,1),y_(l,$,$,0,s,q,-1),k||ME(1,q))}function sM(s,l,f,g,_,k,q){var $=_D(g,_),_t=0<_[0]*g[1]-_[1]*g[0];null!=q.texcoord_index&&(oT[1]=l,pA[1]=l),_t?(y_(f,$,$,1,l,q,1),y_(f,g,$,0,l,q,-1),k||ME(1,q),bD(f,r0.neg(g),$,r0.neg(_),$,oT,pA,oT,!1,s===Mw.bevel,q),y_(f,$,$,1,l,q,1),y_(f,_,$,0,l,q,-1)):(y_(f,g,$,1,l,q,1),y_(f,$,$,0,l,q,-1),k||ME(1,q),bD(f,g,r0.neg($),_,$,pA,oT,pA,!1,s===Mw.bevel,q),y_(f,_,$,1,l,q,1),y_(f,$,$,0,l,q,-1))}function ME(s,l){for(var f=l.vertex_data.vertex_elements,g=l.vertex_data.vertex_count-2*s-2,_=0;_<s;_++)f.push(g+2*_+2),f.push(g+2*_+1),f.push(g+2*_),f.push(g+2*_+2),f.push(g+2*_+3),f.push(g+2*_+1),l.geom_count+=2}function y_(s,l,f,g,_,k,q){var $=k.vertex_template,_t=k.vertex_data;$[0]=s[0],$[1]=s[1];var _n=k.half_width*q;$[k.extrude_index+0]=l[0]*_n,$[k.extrude_index+1]=l[1]*_n,k.offset&&($[k.offset_index+0]=f[0]*k.offset,$[k.offset_index+1]=f[1]*k.offset),null!=k.texcoord_index&&($[k.texcoord_index+0]=g*k.texcoord_normalize,$[k.texcoord_index+1]=_*k.texcoord_normalize),_t.addVertex($)}var dA=[0,0];function bD(s,l,f,g,_,k,q,$,_t,_n,_i){for(var _o=l[0]*g[1]-l[1]*g[0],xa=r0.dot(l,g),ka=Math.atan2(_o,xa);ka>=Math.PI;)ka-=2*Math.PI;if(_n)_l=1;else{var _l=function(My,Sy){My<0&&(My=-My);var Vy=Sy>10?Math.log2(Sy/5):1;return Math.ceil(My/Math.PI*Vy)}(ka,_i.half_width);if(_l<1)return}var _f=_i.vertex_data.vertex_count,_a=_i.vertex_data.vertex_elements;y_(s,f,_,q[0],q[1],_i,1),y_(s,l,_,k[0],k[1],_i,1);var _g,ty,ny=l,uy=null!=_i.texcoord_index;uy&&(_t?_g=r0.sub(k,q):(dA=r0.copy(k),ty=r0.div(r0.sub($,k),_l)));for(var ry,ly=ka/_l,cy=ka<0?-1:1,by=0<_o?(ry=2,1):(ry=1,2),Oy=0;Oy<_l;Oy++)0===Oy&&ka<0&&(ny=r0.neg(ny)),ny=r0.rot(ny,ly),uy&&(_t?(_g=r0.rot(_g,ly),dA[0]=_g[0]+q[0],dA[1]=_g[1]*_i.texcoord_width*_i.v_scale+q[1]):dA=r0.add(dA,ty)),y_(s,ny,_,dA[0],dA[1],_i,cy),_a.push(_f+Oy+ry),_a.push(_f),_a.push(_f+Oy+by)}function aM(s,l,f,g,_,k){var q,$=r0.neg(f),_t=null!=k.texcoord_index;switch(g){case iT.square:_?(y_(s,r0.add(f,q=[f[1],-f[0]]),f,1,l,k,1),y_(s,r0.add($,q),f,0,l,k,1),_t&&(l+=.5*k.texcoord_width*k.v_scale),y_(s,f,f,1,l,k,1),y_(s,$,f,0,l,k,1)):(q=[-f[1],f[0]],y_(s,f,f,1,l,k,1),y_(s,$,f,0,l,k,1),_t&&(l+=.5*k.texcoord_width*k.v_scale),y_(s,r0.add(f,q),f,1,l,k,1),y_(s,r0.add($,q),f,0,l,k,1)),ME(1,k);break;case iT.round:var _n,_i,_o=oT,xa=pA,ka=lP;_?(_n=f,_i=$,_t&&(l+=.5*k.texcoord_width*k.v_scale,_o=pA,xa=oT,ka=lP)):(_n=$,_i=f),_t&&(oT[1]=l,pA[1]=l,lP[1]=l),bD(s,_n,E4,_i,f,_o,ka,xa,!0,!1,k);break;case iT.butt:return}}var hP=[255,255,255,255],f8=[0,0,0,0],Ow=Object.create(r1);function wO(s,l,f,g,_,k){for(var q={closed:k,vertex_data:f,vertex_template:g,half_width:l/2,vertex_layout_index:_,geom_count:0},$=0,_t=s.length;$<_t;$++)!function(_n,_i){if(!(_n.length<2)){for(var _o=[_n[0]],xa=0,ka=[],_l=[],_f=1,_a=_n.length;_f<_a;_f++){var _g,ty;_n[_f][0]===_n[_f-1][0]&&_n[_f][1]===_n[_f-1][1]||(_o.push(_n[_f]),_g=r0.sub(_n[_f],_n[_f-1]),ty=r0.length(_g),ka.push(_g),_l.push([xa,xa+ty]),xa+=ty)}if(!(_o.length<2)){var ny=0,uy=ka[ka.length-1],ry=ka[0],ly=ka[1],cy=[0,0];2<_o.length&&(_i.closed&&(cy[0]=r0.signedAngleBetween(uy,ry)),cy[1]=r0.signedAngleBetween(ry,ly));var by=_o[0],Oy=_l[0];_i.closed?(Ox(by,_i,ny++,Oy,xa,cy,[uy,ry]),Ox(by,_i,ny++,Oy,xa,cy,[uy,ry])):(Ox(by,_i,ny++,Oy,xa,cy,[ry,ry]),Ox(by,_i,ny++,Oy,xa,cy,[ry,ry]));for(var My=1,Sy=_o.length-1;My<Sy;My++)ly=ka[My+1],Ox(by=_o[My],_i,ny++,Oy=_l[My-1],xa,cy,[uy=ka[My-1],ry=ka[My]]),Ox(by,_i,ny++,Oy,xa,cy,[uy,ry]),xO(_i),Oy=_l[My],cy[0]=cy[1],cy[1]=My!==Sy-1?r0.signedAngleBetween(ry,ly):_i.closed?r0.signedAngleBetween(ry,ka[0]):0,Ox(by,_i,ny++,Oy,xa,cy,[uy,ry]),Ox(by,_i,ny++,Oy,xa,cy,[uy,ry]);by=_o[_o.length-1],Oy=_l[_l.length-1],ry=ka[ka.length-1],_i.closed?(Ox(by,_i,ny++,Oy,xa,cy,[ry,ka[0]]),Ox(by,_i,ny++,Oy,xa,cy,[ry,ka[0]])):(Ox(by,_i,ny++,Oy,xa,cy,[ry,ry]),Ox(by,_i,ny++,Oy,xa,cy,[ry,ry])),xO(_i)}}}(s[$],q);return q.geom_count}function xO(s){var l=s.vertex_data.vertex_elements,f=s.vertex_data.vertex_count-4;l.push(2+f),l.push(1+f),l.push(f),l.push(2+f),l.push(3+f),l.push(1+f),s.geom_count+=2}Ow.vertex_layouts=[[],[]],Ow.dash_textures={},Object.assign(Ow,{name:"lines",built_in:!0,vertex_shader_src:x4,fragment_shader_src:bO,selection:!0,init:function(){r1.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(s,l){return s&&wy.evalCachedDistanceProperty(s,l)||0},calcDistanceNextZoom:function(s,l){l.zoom++;var f=this.calcDistance(s,l);return l.zoom--,f},calcWidth:function(s,l,f){var g=this.calcDistance(s.width,f);if(!(g<0)){var _,k=s.next_width?this.calcDistanceNextZoom(s.next_width,f):g/2;return!(0===g&&0===k||k<0||(l.width_unscaled=g,l.next_width_unscaled=k,s.next_width?(_=.5*(g+(k*=2)),l.width=_*f.units_per_meter_overzoom,l.width_scale=1-k/_):(l.width=g*f.units_per_meter_overzoom,l.width_scale=0),s.texcoords&&(l.texcoord_width=s.inline_texcoord_width?s.inline_texcoord_width:(l.width_unscaled||l.next_width_unscaled)*f.units_per_meter_overzoom/f.tile.overzoom2),0))}},calcOffset:function(s,l,f){var g,_;s.offset_precalc?(l.offset=s.offset_precalc,l.offset_scale=s.offset_scale_precalc):s.offset?(g=this.calcDistance(s.offset,f),s.next_offset?(_=2*this.calcDistanceNextZoom(s.next_offset,f),Math.abs(g)>=Math.abs(_)?(l.offset=g*f.units_per_meter_overzoom,l.offset_scale=0!==g?1-_/g:0):(l.offset=_*f.units_per_meter_overzoom,l.offset_scale=0!=_?-1*(1-g/_):0)):(l.offset=g*f.units_per_meter_overzoom,l.offset_scale=0)):(l.offset=0,l.offset_scale=0),wy.evalProperty(s.offset_reverse,f)&&(l.offset*=-1)},_parseFeature:function(s,l,f){var g,_,k=this.feature_style;if(!1!==this.calcWidth(l,k,f)&&(this.calcOffset(l,k,f),k.color=this.parseColor(l.color,f),k.color))return k.variantKey=l.variantKey,k.z=l.z&&wy.evalCachedDistanceProperty(l.z||0,f)||wy.defaults.z,k.height=s.properties.height||wy.defaults.height,k.extrude=wy.evalProperty(l.extrude,f),k.extrude&&("number"==typeof k.extrude?k.height=k.extrude:Array.isArray(k.extrude)&&(k.height=k.extrude[1])),k.extrude&&k.height&&(k.z+=k.height),k.z*=Ry.height_scale,k.height*=Ry.height_scale,k.cap=wy.evalProperty(l.cap,f),k.join=wy.evalProperty(l.join,f),k.miter_limit=wy.evalProperty(l.miter_limit,f),k.tile_edges=l.tile_edges,k.outline=k.outline||{width:{},next_width:{},preprocessed:!0},l.outline&&!1!==l.outline.visible&&l.outline.color&&l.outline.width?(g=2*this.calcDistance(l.outline.width,f),_=2*this.calcDistanceNextZoom(l.outline.next_width,f),0==g&&0==_||g<0||_<0?(k.outline.width.value=null,k.outline.next_width.value=null,k.outline.color=null,k.outline.inline_texcoord_width=null,k.outline.texcoords=!1):(k.outline.width.value=g+k.width_unscaled,k.outline.next_width.value=_+k.next_width_unscaled,k.outline.inline_texcoord_width=k.texcoord_width,k.outline.offset_precalc=k.offset,k.outline.offset_scale_precalc=k.offset_scale,k.outline.color=l.outline.color,k.outline.cap=l.outline.cap,k.outline.join=l.outline.join,k.outline.miter_limit=l.outline.miter_limit,k.outline.texcoords=l.outline.texcoords,k.outline.style=l.outline.style,k.outline.variantKey=l.outline.variantKey,k.outline.order=l.outline.order?this.parseOrder(l.outline.order,f):k.order,k.outline.order>k.order&&(k.outline.order=k.order),k.outline.order-=.5,k.outline.variant_order=0)):(k.outline.width.value=null,k.outline.next_width.value=null,k.outline.color=null,k.outline.inline_texcoord_width=null),k},_preprocess:function(s,l){var f,g=this.sources[l]?this.sources[l].config.uid:"";return s.color=wy.createColorPropertyCache(s.color),s.width=wy.createPropertyCache(s.width,wy.parseUnits),s.width&&s.width.type!==wy.CACHE_TYPE.STATIC&&(s.next_width=wy.createPropertyCache(s.width,wy.parseUnits)),s.offset=s.offset&&wy.createPropertyCache(s.offset,wy.parseUnits),s.offset&&s.offset.type!==wy.CACHE_TYPE.STATIC&&(s.next_offset=wy.createPropertyCache(s.offset,wy.parseUnits)),s.z=wy.createPropertyCache(s.z,wy.parseUnits),s.dash=void 0!==s.dash?s.dash:this.dash,s.dash_key=s.dash&&this.dashTextureKey(s.dash,g),s.dash_background_color=void 0!==s.dash_background_color?s.dash_background_color:this.dash_background_color,s.dash_background_color=s.dash_background_color&&wy.parseColor(s.dash_background_color),s.texture_merged=s.dash_key||(void 0!==s.texture?s.texture:this.texture),s.texcoords=this.texcoords||s.texture_merged?1:0,this.addMeshVariantForDraw(this.base,s),s.outline&&(s.outline.style=s.outline.style||this.name,s.outline.color=wy.createColorPropertyCache(s.outline.color),s.outline.width=wy.createPropertyCache(s.outline.width,wy.parseUnits),s.outline.next_width=wy.createPropertyCache(s.outline.width,wy.parseUnits),s.outline.cap=s.outline.cap||s.cap,s.outline.join=s.outline.join||s.join,s.outline.miter_limit=s.outline.miter_limit||s.miter_limit,s.outline.offset=s.offset,(f=this.styles[s.outline.style])?(s.outline.dash=void 0!==s.outline.dash?s.outline.dash:f.dash,s.outline.texture=void 0!==s.outline.texture?s.outline.texture:f.texture,null!=s.outline.dash?(s.outline.dash_key=s.outline.dash&&this.dashTextureKey(s.outline.dash,g),s.outline.texture_merged=s.outline.dash_key):null===s.outline.dash||null!=s.outline.texture?(s.outline.dash_key=null,s.outline.texture_merged=s.outline.texture):(s.outline.dash=s.dash,s.outline.dash_key=s.outline.dash&&this.dashTextureKey(s.outline.dash,g),s.outline.texture_merged=s.outline.dash_key),s.outline.dash_background_color=void 0!==s.outline.dash_background_color?s.outline.dash_background_color:f.dash_background_color,s.outline.dash_background_color=void 0!==s.outline.dash_background_color?s.outline.dash_background_color:s.dash_background_color,s.outline.dash_background_color=s.outline.dash_background_color&&wy.parseColor(s.outline.dash_background_color),s.outline.texcoords=f.texcoords||s.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,s.outline)):(qy({level:"warn",once:!0},"Layer '".concat(s.layers[s.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(s.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),s.outline=null)),s},dashTextureKey:function(s,l){return"__dash_"+l+"_"+this.scene_id+"_"+JSON.stringify(s)},getDashTexture:function(s,l){var f,g=this.dashTextureKey(s,this.sources[l].config.uid);null==Ow.dash_textures[g]&&(Ow.dash_textures[g]=!0,f=function(_,k){var q=1<arguments.length&&void 0!==k?k:{},$=q.dash_color||hP,_t=q.background_color||f8,_n=_,_i=q.scale||1;_n.length%2==1&&Array.prototype.push.apply(_n,_n);for(var _o=!0,xa=[],ka=0;ka<_n.length;ka++){for(var _l=Math.floor(_n[ka]*_i),_f=0;_f<_l;_f++)Array.prototype.push.apply(xa,_o?$:_t);_o=!_o}return{pixels:xa=new Uint8Array(xa),length:xa.length/4}}(s,{scale:20}),this.textureManager.create(this.gl,g,{data:f.pixels,height:f.length,width:1,filtering:"nearest"}))},endData:function(s){var l=this;return r1.endData.call(this,s).then(function(f){if(f){f.uniforms.u_has_line_texture=!1,f.uniforms.u_texture=l.textureManager.default,f.uniforms.u_v_scale_adjust=Ry.tile_scale;var g=[];for(var _ in f.meshes)!function(k){var q,$,_t=f.meshes[k].variant;_t.texture&&((q=f.meshes[k].uniforms=f.meshes[k].uniforms||{}).u_has_line_texture=!0,q.u_texture=_t.texture,q.u_texture_ratio=1,_t.dash&&(q.u_v_scale_adjust=20*Ry.tile_scale,q.u_dash_background_color=_t.dash_background_color||[0,0,0,0]),_t.dash_key&&null==Ow.dash_textures[_t.dash_key]&&(Ow.dash_textures[_t.dash_key]=!0,s0.postMessage(l.main_thread_target+".getDashTexture",_t.dash,s.source)),null==l.textureManager.textures[_t.texture]?g.push(l.textureManager.syncTexturesToWorker([_t.texture]).then(function(_n){var _i=_n[_t.texture];_i&&(q.u_texture_ratio=_i.height/_i.width)})):q.u_texture_ratio=($=l.textureManager.textures[_t.texture]).height/$.width)}(_);return s.mesh_data[l.name]=f,Promise.all(g).then(function(){return f})}return f})},computeVariantForDraw:function(s){var l=s.offset?1:0;return s.dash_key&&(l+=s.dash_key,s.dash_background_color&&(l+=s.dash_background_color)),s.texture_merged&&(l+=s.texture_merged),l=dx(l+="/"+s.texcoords),{key:s.variantKey=l,order:s.variant_order,offset:s.offset?1:0,texcoords:s.texcoords,texture:s.texture_merged,dash:s.dash,dash_key:s.dash_key,dash_background_color:s.dash_background_color}},vertexLayoutForMeshVariant:function(s){return null==Ow.vertex_layouts[s.key]&&(Ow.vertex_layouts[s.key]=new S2([{name:"a_position",size:4,type:d0.SHORT,normalized:!1},{name:"a_extrude",size:2,type:d0.SHORT,normalized:!1},{name:"a_offset",size:2,type:d0.SHORT,normalized:!1,static:s.offset?null:[0,0]},{name:"a_scaling",size:2,type:d0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:d0.UNSIGNED_SHORT,normalized:!0,static:s.texcoords?null:[0,0]},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0}])),Ow.vertex_layouts[s.key]},makeVertexTemplate:function(s,l){var f=0;return this.vertex_template[f++]=0,this.vertex_template[f++]=0,this.vertex_template[f++]=s.z||0,this.vertex_template[f++]=this.scaleOrder(s.order),this.vertex_template[f++]=0,this.vertex_template[f++]=0,l.variant.offset&&(this.vertex_template[f++]=0,this.vertex_template[f++]=0),this.vertex_template[f++]=1024*s.width_scale,this.vertex_template[f++]=1024*s.offset_scale,l.variant.texcoords&&(this.vertex_template[f++]=0,this.vertex_template[f++]=0),this.vertex_template[f++]=255*s.color[0],this.vertex_template[f++]=255*s.color[1],this.vertex_template[f++]=255*s.color[2],this.vertex_template[f++]=255*s.color[3],this.selection&&(this.vertex_template[f++]=255*s.selection_color[0],this.vertex_template[f++]=255*s.selection_color[1],this.vertex_template[f++]=255*s.selection_color[2],this.vertex_template[f++]=255*s.selection_color[3]),this.vertex_template},buildLines:function(s,l,f,g,_){var k;this.feature_style=this.outline_feature_style,!l.outline||null==l.outline.color||null==l.outline.width.value||(k=this.styles[l.outline.style])&&k.addFeature(g.feature,l.outline,g),this.feature_style=this.inline_feature_style;var q=f.vertex_data,$=q.vertex_layout,_t=this.makeVertexTemplate(l,f);return function(_n,_i,_o,xa,ka){var _l,_f,ny=ka.texcoord_index,uy=ka.texcoord_width,ry=ka.texcoord_ratio,ly=ka.texcoord_normalize,Oy=ka.join,My=ka.cap,Sy=ka.miter_limit,Wy=Oy?Mw[Oy]:Mw.miter;Wy===Mw.miter&&(_l=(Sy=Sy||3)*Sy),ny&&(ly=ly||1,_f=1/(uy*(ry=ry||1)*h8));for(var E0={closed_polygon:ka.closed_polygon,remove_tile_edges:ka.remove_tile_edges,tile_edge_tolerance:ka.tile_edge_tolerance,miter_len_sq:_l,join_type:Wy,cap_type:My?iT[My]:iT.butt,vertex_data:_o,vertex_template:xa,half_width:_i/2,extrude_index:ka.extrude_index,offset_index:ka.offset_index,v_scale:_f,texcoord_index:ny,texcoord_width:uy,texcoord_normalize:ly,offset:ka.offset,geom_count:0,crop_by_tile:ka.crop_by_tile},q0=0;q0<_n.length;q0++)kx(_n[q0],E0);if(E0.extra_lines)for(var F0=0;F0<E0.extra_lines.length;F0++)kx(E0.extra_lines[F0],E0);return E0.geom_count}(s,l.width,q,_t,{cap:l.cap,join:l.join,miter_limit:l.miter_limit,extrude_index:$.index.a_extrude,offset_index:$.index.a_offset,texcoord_index:$.index.a_texcoord,texcoord_width:l.texcoord_width,texcoord_normalize:65535,closed_polygon:_&&_.closed_polygon,remove_tile_edges:!l.tile_edges&&_&&_.remove_tile_edges,tile_edge_tolerance:Ry.tile_scale*g.tile.pad_scale*2,offset:l.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(s,l,f,g){for(var _=0,k=0;k<s.length;k++)_+=this.buildLines(s[k],l,f,g,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return _}});var A4=[[1,1],[1,-1],[-1,1],[-1,-1]];function Ox(s,l,f,g,_,k,q){var $,_t=l.vertex_template,_n=l.vertex_data;M2(l,"a_position",s),M2(l,"a_width",l.half_width),l.vertex_layout_index.a_barycentric&&(($=[0,0,0])[f%3]=1,M2(l,"a_barycentric",$)),M2(l,"a_tangents",q[0].concat(q[1])),M2(l,"a_segment",g),M2(l,"a_texcoord",A4[f%4]),M2(l,"a_length",_),M2(l,"a_closed",l.closed?1:0),M2(l,"a_angles",k),_n.addVertex(_t)}function M2(s,l,f){var g=f.length,_=s.vertex_template,k=s.vertex_layout_index[l],q=0;if(g)for(;q!==g;)_[k+q]=f[q],q++;else _[k+q]=f}function C4(s,l){for(var f=s.reduce(function(xa,ka){return xa+ka}),g=0,_=[],k=0,q=s.length;k<=q;k+=2){var $=Math.max(1e-4,s[k%q]),_t=Math.max(1e-4,s[(k+1)%q]);_.push(g,g+$),g+=$+_t}for(var _n=new Uint8Array(4*l),_i=0,_o=0;_o<l;_o++)!function(xa){var ka=f*xa/(l-1),_l=function(ty){for(var ny=ty[0],uy=0,ry=1,ly=ty.length;ry<ly;ry++)ty[ry]<ny&&(ny=ty[uy=ry]);return uy}(_.map(function(ty){return Math.abs(ty-ka)})),_f=void 0,_a=void 0,_g=_l%2==0?(_f=ka<=_[_l]?1:0,_a=_[_l],_[_l+1]):(_f=ka>_[_l]?2:0,_a=_[_l-1],_[_l]);_n[_i++]=_[_l],_n[_i++]=_f,_n[_i++]=_a,_n[_i++]=_g}(_o);return _n}var sT=Object.create(r1),EO={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},AO={miter:0,round:1,bevel:2},T4=EO.round,fP=AO.miter,CO=[0,0],TO="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(sT,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){r1.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},sT.vertex_layouts=[]},calcDistance:function(s,l){return s&&wy.evalCachedDistanceProperty(s,l)||0},calcDash:function(s,l){var f=wy.evalProperty(s.dash,l),g=0;return f&&((f=Array.isArray(f)&&f.length?f:CO).length%2==1&&(f=f.concat(f)),g=+(g=f.reduce(function(_,k){return _+k}))||0),{dash:f,dash_period:g}},calcWidth:function(s,l,f){var g=this.calcDistance(s.width,f);return!(g<0||(l.width=g*f.units_per_meter_overzoom,0))},getCapType:function(s,l,f){var g=wy.evalProperty(s,l);return void 0!==EO[g]?EO[g]:f},_parseFeature:function(s,l,f){if(!1!==this.calcWidth(l,this.feature_style,f)){var g=this.parseColor(l.color,f);if(g&&0!==g[3]){var _=this.getCapType(l.cap,f,T4),k=wy.evalProperty(l.join,f),q=+wy.evalProperty(l.miter_limit,f),$=this.calcDash(l,f),_t=$.dash,_n=$.dash_period,_i=Object.assign({color:g,antialias:l.antialias,linecaps:[this.getCapType(l.tail_cap,f,_),this.getCapType(l.head_cap,f,_)],join:void 0!==AO[k]?AO[k]:fP,miter_limit:0<=q?q:3,dash_index:0===_n?0:1,dash:_t,dash_caps:[this.getCapType(l.tail_cap,f,_),this.getCapType(l.head_cap,f,_)],dash_phase:+wy.evalProperty(l.dash_phase,f)||0,dash_period:_n},this.feature_style);return _i.z=l.z&&wy.evalCachedDistanceProperty(l.z||0,f)||wy.defaults.z,_i.z*=Ry.height_scale,_i.extrude=wy.evalProperty(l.extrude,f),_i.extrude&&(!0===_i.extrude?(_i.height=void 0!==s.properties.height?s.properties.height:wy.defaults.height,_i.min_height=void 0!==s.properties.min_height?s.properties.min_height:wy.defaults.min_height):"number"==typeof _i.extrude?(_i.height=_i.extrude,_i.min_height=0):Array.isArray(_i.extrude)&&(_i.min_height=_i.extrude[0],_i.height=_i.extrude[1]),_i.height*=Ry.height_scale,_i.min_height*=Ry.height_scale),this.addMeshVariantForDraw(this.base,_i),_i}}},_preprocess:function(s){s.color=wy.createColorPropertyCache(s.color),s.width=wy.createPropertyCache(s.width,wy.parseUnits),s.width&&s.width.type!==wy.CACHE_TYPE.STATIC&&(s.next_width=wy.createPropertyCache(s.width,wy.parseUnits)),s.z=wy.createPropertyCache(s.z,wy.parseUnits);var l=+s.antialias;return s.antialias=isNaN(l)?0:l,s},buildRasterTextures:function(s,l){var f=[];for(var g in l.meshes){var _,k=this.getMeshVariantTypeForDraw({variantKey:g}),q=k.uniforms,$=k.pattern;q.u_dash_index&&(_="__dash_"+$.join("_")+"_"+s.key+"_"+s.id,f.push({name:_,data:C4($,1024)}),q.u_dash_atlas=_,l.meshes[g].textures=[_]),l.meshes[g].uniforms=q}return l.uniforms=l.uniforms||{},f.length?s0.postMessage(this.main_thread_target+".loadTextures",f).then(function(_t){return l}):Promise.resolve(l)},loadTextures:function(s){for(var l=[],f=0;f<s.length;f++){var g=s[f],_=(_=this.textureManager.textures[g.name])||this.textureManager.create(this.gl,g.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:g.data});l.push(_.loading)}return Promise.all(l).then(function(k){return k.map(function(q){return q.retain(),q.name})})},computeVariantForDraw:function(s){var l=function(f){for(var g=[],_=0,k=TO.length;_<k;_++){var q=f[TO[_]];Array.isArray(q)?g.push(q.join("_")):"boolean"==typeof q?g.push(q?1:0):q&&g.push(q.toString())}return g.join("/")}(s);return{key:s.variantKey=l,order:s.variant_order,uniforms:{u_antialias:s.antialias,u_linecaps:s.linecaps,u_linejoin:s.join,u_miter_limit:s.miter_limit,u_dash_index:s.dash_index,u_dash_caps:s.dash_caps,u_dash_phase:s.dash_phase,u_dash_period:s.dash_period},pattern:s.dash}},vertexLayoutForMeshVariant:function(s){var l;return null==sT.vertex_layouts[s.key]&&(l=[{name:"a_position",size:4,type:d0.SHORT,normalized:!1},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:d0.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:d0.FLOAT,normalized:!1},{name:"a_segment",size:2,type:d0.FLOAT,normalized:!1},{name:"a_angles",size:2,type:d0.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:d0.FLOAT,normalized:!0},{name:"a_length",size:1,type:d0.FLOAT,normalized:!1},{name:"a_closed",size:1,type:d0.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&l.push({name:"a_barycentric",size:3,type:d0.SHORT,normalized:!1}),sT.vertex_layouts[s.key]=new S2(l)),sT.vertex_layouts[s.key]},makeVertexTemplate:function(s){var l=0;return this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=s.z+s.height||0,this.vertex_template[l++]=this.scaleOrder(s.order),this.vertex_template[l++]=255*s.color[0],this.vertex_template[l++]=255*s.color[1],this.vertex_template[l++]=255*s.color[2],this.vertex_template[l++]=255*s.color[3],this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.selection&&(this.vertex_template[l++]=255*s.selection_color[0],this.vertex_template[l++]=255*s.selection_color[1],this.vertex_template[l++]=255*s.selection_color[2],this.vertex_template[l++]=255*s.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[l++]=0,this.vertex_template[l++]=0,this.vertex_template[l++]=0),this.vertex_template},buildLines:function(s,l,f,g,_){var k=4<arguments.length&&void 0!==_&&_,q=f.vertex_data,$=q.vertex_layout,_t=this.makeVertexTemplate(l,f);return wO(s,l.width,q,_t,$.index,k)},buildPolygons:function(s,l,f,g){for(var _=0,k=0,q=s.length;k<q;k++)_+=this.buildLines(s[k],l,f,g,!0);return _}});var DO=0,uM={id_prefix:"",nextLabelId:function(){return"".concat(uM.id_prefix,"/").concat(DO++)}};function SO(s){return{priority:s.priority,collide:s.collide,repeat_distance:s.repeat_distance,repeat_group:s.repeat_group,buffer:s.buffer,italic:s.italic}}var pP=["left","top-left","bottom-left"],dP=["right","top-right","bottom-right"],iC=["top","top-left","top-right"],gP=["bottom","bottom-left","bottom-right"],oC={computeOffset:function(s,l,f,g){if(!f||"center"===f)return s;var k=[s[0],s[1]],_=(_=3<arguments.length&&void 0!==g?g:null)||this.default_buffer;return this.isLeftAnchor(f)?(k[0]-=l[0]/2,"left"===f&&(k[0]-=_[0])):this.isRightAnchor(f)&&(k[0]+=l[0]/2,"right"===f&&(k[0]+=_[1])),this.isTopAnchor(f)?(k[1]-=l[1]/2,"top"===f&&(k[1]-=_[2])):this.isBottomAnchor(f)&&(k[1]+=l[1]/2,"bottom"===f&&(k[1]+=_[3])),k},alignForAnchor:function(s){if(s&&"center"!==s){if(this.isLeftAnchor(s))return"right";if(this.isRightAnchor(s))return"left"}return"center"},isLeftAnchor:function(s){return-1<pP.indexOf(s)},isRightAnchor:function(s){return-1<dP.indexOf(s)},isTopAnchor:function(s){return-1<iC.indexOf(s)},isBottomAnchor:function(s){return-1<gP.indexOf(s)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function lM(s,l,f,g,_){var k=[],q=f-s,$=g-l,_t=J_.getLineLength(s,l,f,g),_n=2*_;if((_i=_t/_n)<=1)k.push(s+q/2,l+$/2,_);else{var _i,_o=_n/_t,xa=q*_o,ka=$*_o;(_i=_t/_/2)%1&&k.push(f-xa/2,g-ka/2,_),_i|=0;for(var _l=s+xa/2,_f=l+ka/2;_i--;)k.push(_l,_f,_),_l+=xa,_f+=ka}return k}var V1=function(){function s(l,f,g,_){A0(this,s),this.id=uM.nextLabelId(),this.position=[l[0],l[1]],void 0!==l[2]&&this.position.push(l[2]),this.size=f,this.layout=_,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||oC.alignForAnchor(this.anchor),this._is_flat=g}return L0(s,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:SO(this.layout)}}},{key:"inTileBounds",value:function(){var l=this.getAABB(),_=l.right,k=l.bottom;return R0.pointInTile([l.left,l.top])&&R0.pointInTile([_,k])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(l){this._circles=void 0,this._aabb=void 0,this.anchor=l,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var l,f=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(f=oC.computeOffset(f,(l=this.parent).size,l.anchor,oC.zero_buffer),f=oC.computeOffset(f,l.size,this.anchor,oC.zero_buffer),l.offset!==wy.zeroPair&&(f===wy.zeroPair?f=l.offset:(f[0]+=l.offset[0],f[1]+=l.offset[1]))),oC.computeOffset(f,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(k=-(g=(f=this.size[0]/2*(l=this.layout.units_per_pixel))*Math.cos(this.angle)),q=-(_=f*Math.sin(this.angle)),_t=($=g0(this.position,2))[0],_n=$[1],_+=_n*=-1,this._circles=lM(g+=_t,_,k+=_t,q+=_n,this.size[1]/2*l)),this._circles):[];var l,f,g,_,k,q,$,_t,_n}},{key:"getAABB",value:function(){var l,f,g,_,k;return this._aabb||(this._aabb={left:(_=this.position[0]+this.offset[0]*(l=this.layout.units_per_pixel))-(f=(this.size[0]/2+this.layout.buffer[0])*l),top:(k=this.position[1]-this.offset[1]*l)+(g=(this.size[1]/2+this.layout.buffer[1])*l),right:_+f,bottom:k-g}),this._aabb}},{key:"getSides",value:function(){var l=this.getAABB(),k=(l.top+l.bottom)/2;return[l.left,k,l.right,k]}}]),s}();V1.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var MO=V1.PLACEMENT;function wD(s,l,f,g){var _=[],k=g.placement,q=Math.max(l[0],l[1])*g.placement_min_length_ratio*g.units_per_pixel;switch(k){case MO.SPACED:var $=function(cy,by,Oy){var Sy=(Oy.placement_spacing||80)*Oy.units_per_pixel,Vy=function(J0){for(var b_=0,z0=0;z0<J0.length-1;z0++)b_+=aT(J0[z0],J0[z0+1]);return b_}(cy);if(Vy<=by)return!1;for(var e0=Math.max(Math.floor(Vy/Sy),1),Ly=[],Wy=[],E0=.5*(Vy-(e0-1)*Sy),q0=0;q0<e0;q0++){var F0=function(J0,b_,z0,w_){for(var x1,u1,i1=0,ix=0;ix<J0.length-1;ix++){var E1=J0[ix],c_=J0[ix+1],t1=aT(E1,c_);if(!(t1<=z0)&&b_<(i1+=t1)){void 0,x1=[(ox=(i1-b_)/aT(z1=E1,O1=c_))*z1[0]+(1-ox)*O1[0],ox*z1[1]+(1-ox)*O1[1]],u1=xD(E1,c_,w_.angle);break}}var z1,O1,ox;return{position:x1,angle:u1}}(cy,E0,by,Oy),_0=F0.position,o_=F0.angle;null!=_0&&null!=o_&&(Ly.push(_0),Wy.push(o_)),E0+=Sy}return{positions:Ly,angles:Wy}}(s,q,g);if(!$)return[];for(var _t=$.positions,_n=$.angles,_i=0;_i<_t.length;_i++){var _o,xa=_t[_i],ka=_n[_i];!0!==g.tile_edges&&SE(xa)||((_o=new V1(xa,l,f,g)).angle=ka,_.push(_o))}break;case MO.VERTEX:for(var _l,_f,_a,_g=0;_g<s.length-1;_g++)_l=s[_g],_f=s[_g+1],!0!==g.tile_edges&&SE(_l)||((_a=new V1(_l,l,f,g)).angle=xD(_l,_f,g.angle),_.push(_a));(_a=new V1(_f,l,f,g)).angle=xD(_l,_f,g.angle),_.push(_a);break;case MO.MIDPOINT:for(var ty=0;ty<s.length-1;ty++){var ny,uy=s[ty],ry=s[ty+1],ly=[.5*(uy[0]+ry[0]),.5*(uy[1]+ry[1])];!0!==g.tile_edges&&SE(ly)||(!q||aT(uy,ry)>q)&&((ny=new V1(ly,l,f,g)).angle=xD(uy,ry,g.angle),_.push(ny))}}return _}function xD(s,l,f){var g=2<arguments.length&&void 0!==f?f:0;return"auto"===g?Math.atan2(l[0]-s[0],l[1]-s[1]):g}function aT(s,l){return Math.sqrt(Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2))}var cM={key:function(s){return[s.style,s.weight,s.family,s.px_size,s.fill,s.stroke,s.stroke_width,s.transform,s.text_wrap,s.max_lines,s.supersample,s.background_color,s.outline_color,s.outline_width,s.padding,R0.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(s,l,f){var g={};if(l.font=l.font||this.defaults,g.can_articulate=l.can_articulate,g.fill=l.font.fill&&R0.toCSSColor(wy.evalCachedColorProperty(l.font.fill,f))||this.defaults.fill,g.style=l.font.style||this.defaults.style,g.weight=l.font.weight||this.defaults.weight,l.font.family?(g.family=l.font.family,g.family!==this.defaults.family&&(g.family+=", "+this.defaults.family)):g.family=this.defaults.family,g.transform=l.font.transform,g.size=l.font.size||this.defaults.size,g.supersample=l.supersample_text?1.5:1,g.px_size=wy.evalCachedProperty(l.font.px_size,f)*g.supersample,0!==g.px_size){l.font.stroke&&l.font.stroke.color&&(g.stroke=R0.toCSSColor(wy.evalCachedColorProperty(l.font.stroke.color,f)||this.defaults.stroke),g.stroke_width=wy.evalCachedProperty(l.font.stroke.width,f)||this.defaults.stroke_width),g.font_css=this.fontCSS(g);var _=l.text_wrap;return null==_&&"line"!==Ry.geometryType(s.geometry.type)&&(_=!0),!0===_&&(_=this.defaults.text_wrap),g.text_wrap=_,g.max_lines=l.max_lines||this.defaults.max_lines,g.background_color=l.background&&l.background.color&&!l.can_articulate?R0.toCSSColor(wy.evalCachedColorProperty(l.background.color,f)):this.defaults.background_color,g.outline_color=l.outline&&l.outline.color&&!l.can_articulate?R0.toCSSColor(wy.evalCachedColorProperty(l.outline.color,f)):this.defaults.outline_color,g.outline_width=l.outline&&l.outline.width&&!l.can_articulate?wy.evalCachedProperty(l.outline.width,f):this.defaults.outline_width,g.padding=l.padding&&!l.can_articulate?wy.evalCachedProperty(l.padding,f):this.defaults.padding,g}},fontCSS:function(s){return[s.style,s.weight,s.px_size+"px",s.family].filter(function(l){return l}).join(" ")}},hM=_e(function(s){function l(xa,ka){document.addEventListener?xa.addEventListener("scroll",ka,!1):xa.attachEvent("scroll",ka)}function f(xa){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(xa)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function g(xa,ka){xa.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+ka+";"}function _(xa){var ka=xa.a.offsetWidth,_l=ka+100;return xa.f.style.width=_l+"px",xa.c.scrollLeft=_l,xa.b.scrollLeft=xa.b.scrollWidth+100,xa.g!==ka&&(xa.g=ka,1)}function k(xa,ka){function _l(){var _a=_f;_(_a)&&_a.a.parentNode&&ka(_a.g)}var _f=xa;l(xa.b,_l),l(xa.c,_l),_(xa)}function q(xa,ka){var _l=ka||{};this.family=xa,this.style=_l.style||"normal",this.weight=_l.weight||"normal",this.stretch=_l.stretch||"normal"}function $(xa,ka){return[xa.style,xa.weight,function(){if(null===_i){var _l=document.createElement("div");try{_l.style.font="condensed 100px sans-serif"}catch(_f){}_i=""!==_l.style.font}return _i}()?xa.stretch:"","100px",ka].join(" ")}var _t,_n,_i,_o;_o=_i=_n=_t=null,q.prototype.load=function(xa,ka){var _l=this,_f=xa||"BESbswy",_a=0,_g=ka||3e3,ty=(new Date).getTime();return new Promise(function(ny,uy){var ry,ly,cy;null===_o&&(_o=!!document.fonts),(ry=_o)&&(null===_n&&(_n=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),ry=!_n),ry?(ry=new Promise(function(by,Oy){!function My(){(new Date).getTime()-ty>=_g?Oy():document.fonts.load($(_l,'"'+_l.family+'"'),_f).then(function(Sy){1<=Sy.length?by():setTimeout(My,25)},function(){Oy()})}()}),ly=new Promise(function(by,Oy){_a=setTimeout(Oy,_g)}),Promise.race([ly,ry]).then(function(){clearTimeout(_a),ny(_l)},function(){uy(_l)})):(cy=function(){function by(){var _0;(_0=-1!=Vy&&-1!=e0||-1!=Vy&&-1!=Ly||-1!=e0&&-1!=Ly)&&((_0=Vy!=e0&&Vy!=Ly&&e0!=Ly)||(null===_t&&(_0=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),_t=!!_0&&(parseInt(_0[1],10)<536||536===parseInt(_0[1],10)&&parseInt(_0[2],10)<=11)),_0=_t&&(Vy==Wy&&e0==Wy&&Ly==Wy||Vy==E0&&e0==E0&&Ly==E0||Vy==q0&&e0==q0&&Ly==q0)),_0=!_0),_0&&(F0.parentNode&&F0.parentNode.removeChild(F0),clearTimeout(_a),ny(_l))}var Oy=new f(_f),My=new f(_f),Sy=new f(_f),Vy=-1,e0=-1,Ly=-1,Wy=-1,E0=-1,q0=-1,F0=document.createElement("div");F0.dir="ltr",g(Oy,$(_l,"sans-serif")),g(My,$(_l,"serif")),g(Sy,$(_l,"monospace")),F0.appendChild(Oy.a),F0.appendChild(My.a),F0.appendChild(Sy.a),document.body.appendChild(F0),Wy=Oy.a.offsetWidth,E0=My.a.offsetWidth,q0=Sy.a.offsetWidth,function _0(){var o_;(new Date).getTime()-ty>=_g?(F0.parentNode&&F0.parentNode.removeChild(F0),uy(_l)):(!0!==(o_=document.hidden)&&void 0!==o_||(Vy=Oy.a.offsetWidth,e0=My.a.offsetWidth,Ly=Sy.a.offsetWidth,by()),_a=setTimeout(_0,50))}(),k(Oy,function(_0){Vy=_0,by()}),g(Oy,$(_l,'"'+_l.family+'",sans-serif')),k(My,function(_0){e0=_0,by()}),g(My,$(_l,'"'+_l.family+'",serif')),k(Sy,function(_0){Ly=_0,by()}),g(Sy,$(_l,'"'+_l.family+'",monospace'))},document.body?cy():document.addEventListener?document.addEventListener("DOMContentLoaded",function by(){document.removeEventListener("DOMContentLoaded",by),cy()}):document.attachEvent("onreadystatechange",function by(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",by),cy())}))})},s.exports=q}),ED={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(s){var l=this,f=JSON.stringify(s)===this.last_loaded;return s&&!f&&function(){var g=[];for(var _ in s)!function(k){Array.isArray(s[k])?s[k].forEach(function(q){return g.push(l.loadFontFace(k,q))}):g.push(l.loadFontFace(k,s[k]))}(_);l.last_loaded=JSON.stringify(s),l.fonts_loaded=Promise.all(g.filter(function(k){return k}))}(),this.fonts_loaded},loadFontFace:function(s,l){if(null!=l&&("object"===D_(l)||"external"===l)){var f={family:s},g=Promise.resolve();"object"===D_(l)&&(Object.assign(f,l),"string"==typeof l.url&&(g=this.injectFontFace(f)));var _=new hM(s,f);return g.then(function(){return _.load()}).then(function(){qy("debug","Font face '".concat(s,"' is available"),f)},function(){qy("debug","Font face '".concat(s,"' is NOT available"),f)})}},injectFontFace:function(s){var l=this,f=s.family,g=s.url,_=s.weight,k=s.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var q=Promise.resolve(g);return"blob:"===g.slice(0,5)&&(q=R0.io(g,6e4,"arraybuffer").then(function($){var _t=new Uint8Array($);if(l.supports_native_font_loading)return _t;for(var _n="",_i=0;_i<_t.length;_i++)_n+=String.fromCharCode(_t[_i]);return"data:font/opentype;base64,"+btoa(_n)})),q.then(function($){var _t,_n,_i;l.supports_native_font_loading?("string"==typeof $?_t=new FontFace(f,"url(".concat(encodeURI($),")"),{weight:_,style:k}):$ instanceof Uint8Array&&(_t=new FontFace(f,$,{weight:_,style:k})),document.fonts.add(_t),qy("trace","Adding FontFace to document.fonts:",_t)):(_n="\n                    @font-face {\n                        font-family: '".concat(f,"';\n                        font-weight: ").concat(_||"normal",";\n                        font-style: ").concat(k||"normal",";\n                        src: url(").concat(encodeURI($),");\n                    }\n                "),(_i=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(_i),_i.sheet.insertRule(_n,0),qy("trace","Injecting CSS font face:",_n))})}},bx=function(){function s(){A0(this,s),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=lO("binary-tree")}return L0(s,[{key:"createCanvas",value:function(l,f){var g=document.createElement("canvas");return l&&f&&(g.width=l,g.height=f),g.style.backgroundColor="transparent",g}},{key:"setFont",value:function(l,f){var g=f.font_css,_=f.fill,k=f.stroke,q=f.stroke_width,_t=f.supersample;this.px_size=f.px_size;var _n=R0.device_pixel_ratio*_t;k&&0<q&&(l.strokeStyle=k,l.lineWidth=q*_n),l.fillStyle=_,l.textBaseline="bottom",l.font=g,l.miterLimit=2}},{key:"textSizes",value:function(l,f,g){var _=this;return ED.loadFonts().then(function(){return a1.add({type:"textSizes",run:_.processTextSizesTask.bind(_),texts:f,tile_id:l,cursor:{ctx:g,styles:Object.keys(f),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(l){var g=l.cursor,_=l.texts,k=g.ctx;for(g.style_idx=g.style_idx||0;g.style_idx<g.styles.length;){var q=g.styles[g.style_idx];null==g.text_idx&&(g.text_idx=0,g.texts=Object.keys(_[q]));for(var $=_[q],_t=!0;g.text_idx<g.texts.length;){var _n=g.texts[g.text_idx],_i=$[_n],_o=_i.text_settings;if(_t&&(this.setFont(k,_o),_t=!1),_i.size=this.textSize(k,q,_n,_o).size,_o.can_articulate){var xa=!1,ka=!1;if(kO(_n)&&(mP(_n)?xa=!0:ka=!0),_i.isRTL=xa,_i.no_curving=ka||_P.test(_n),_i.vertical_buffer=this.vertical_text_buffer+_o.outline_width+(_o.padding[0]+_o.padding[2])/2,_i.segment_sizes=[],!_i.no_curving){var _l=function(_a,_g){var ty=_g?1:M4;if(_a.length<ty)return[_a];var ny=_a;if(bx.cache.segment[ny])return bx.cache.stats.segment_hits++,bx.cache.segment[ny];var uy=[];if(vP.exec(_a)){uy=_a.split(D4);for(var ry,ly=-1,cy=0;cy<uy.length-1;cy++)0<cy&&(ry=S4.exec(uy[cy]))&&(uy[cy]=uy[cy].substring(ry[0].length),uy[cy-1]+=ry[0],ly+=ry[0].length),uy[cy]+=_a.slice(ly+=1+uy[cy].length,ly+1);_a=""}for(;_a.length;){for(var by="",Oy=_a,My=0;My<ty&&Oy.length;My++){var Sy=(RO.exec(Oy)||Oy)[0];by+=Sy,Oy=Oy.substring(Sy.length)}uy.push(by),_a=_a.substring(by.length)}return _g&&uy.reverse(),bx.cache.stats.segment_misses++,bx.cache.segment[ny]=uy}(_n,xa);_i.segments=_l;for(var _f=0;_f<_l.length;_f++)_i.segment_sizes.push(this.textSize(k,q,_l[_f],_o).size)}}if(g.text_idx++,!a1.shouldContinue(l))return!1}g.text_idx=null,g.style_idx++}return a1.finish(l,{texts:_}),!0}},{key:"textSize",value:function(l,f,g,_){var k=_.transform,q=_.text_wrap,$=_.max_lines,_t=_.stroke_width,_n=void 0===_t?0:_t,_i=_.supersample,_o=_.padding,xa=_.outline_width,ka=_.can_articulate;if((s.cache.text[f]=s.cache.text[f]||{})[g])return s.cache.stats.text_hits++,s.cache.text[f][g];s.cache.stats.text_misses++,s.cache.text_count++;var _l=R0.device_pixel_ratio*_i,_f=this.applyTextTransform(g,k),_a=_l*(this.vertical_text_buffer+xa+(_o[0]+_o[2])/2),_g=_l*(this.horizontal_text_buffer+xa+_n+(_o[1]+_o[3])/2),ny=this.px_size+2*_l,uy=PO.parse(_f,q,$,ny,l),ry=uy.height,ly=uy.width,cy=uy.lines,by=[ly/_l,ry/_l];ka||(by[0]+=2*_g/_l,by[1]+=2*_a/_l);var Oy=[ly+2*_g,ry+2*_a];return s.cache.text[f][g]={lines:cy,size:{collision_size:by,texture_size:Oy,logical_size:[Oy[0]/_l,Oy[1]/_l],line_height:ny}}}},{key:"drawTextMultiLine",value:function(l,f,g,_,k,q){var $=g0(g,2),_t=$[0],_n=$[1],_i=R0.device_pixel_ratio*k.supersample,_o=k.stroke_width||0,xa=k.stroke;k.background_color&&(l.fillStyle=k.background_color,l.fillRect(_t,_n,_.texture_size[0],_.texture_size[1]));var ka=k.outline_width*_i,_l=k.outline_color;ka&&_l&&(l.strokeStyle=_l,l.lineWidth=ka,l.strokeRect(_t+ka/2,_n+ka/2,_.texture_size[0]-ka,_.texture_size[1]-ka)),(k.background_color||ka&&_l)&&this.setFont(l,k);for(var _f,_a,_g,ty,ny=_.line_height,uy=_n,ry=0;ry<f.length;ry++)this.drawTextLine(l,f[ry],[_t,uy],_,k,q),uy+=ny;dD.draw_label_collision_boxes&&(l.save(),_f=_i*(this.horizontal_text_buffer+k.outline_width+_o+(k.padding[1]+k.padding[3])/2),_a=_i*(this.vertical_text_buffer+k.outline_width+(k.padding[0]+k.padding[2])/2),_g=_.collision_size,l.strokeStyle="blue",l.lineWidth=2,l.strokeRect(_t+_f,_n+_a,_i*_g[0],_i*_g[1]),"curved"===q&&xa&&0<_o&&l.strokeRect(_t+_.texture_size[0]+_f,_n+_a,_i*_g[0],_i*_g[1]),l.restore()),dD.draw_label_texture_boxes&&(l.save(),ty=_.texture_size,l.strokeStyle="green",l.lineWidth=2,l.strokeRect(_t+2,_n+2,ty[0]-4,ty[1]-4),"curved"===q&&xa&&0<_o&&l.strokeRect(_t+2+_.texture_size[0],_n+2,ty[0]-4,ty[1]-4),l.restore())}},{key:"drawTextLine",value:function(l,f,g,_,k,q){var $,_t=g0(g,2),_n=_t[0],_i=_t[1],_o=k.stroke,xa=k.stroke_width,ka=void 0===xa?0:xa,_g=k.padding,ty=k.outline_width,ny=R0.device_pixel_ratio*k.supersample,_f=(_f=k.align)||"center",uy=_.texture_size,ry=_.line_height,ly=ny*(this.vertical_text_buffer+ty),cy=ny*(this.horizontal_text_buffer+ty+ka),by=this.applyTextTransform(f.text,k.transform);"left"===_f?$=_n+cy+_g[3]*ny:"center"===_f?$=_n+uy[0]/2-f.width/2-(_g[1]-_g[3])*ny/2:"right"===_f&&($=_n+uy[0]-f.width-cy-_g[1]*ny);var My=_i+ly+ry+_g[0]*ny;_o&&0<ka&&l.strokeText(by,$+("curved"===q?uy[0]:0),My),l.fillText(by,$,My)}},{key:"rasterize",value:function(l,f,g,_,k,q){return a1.removeForTile(g),a1.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:s.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:l,textures:f,texture_prefix:_,gl:k,tile_id:g,texture_manager:q,cursor:{styles:Object.keys(l),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(l){if(!a1.shouldContinue(l))return!1;for(var f=l.cursor,g=l.texts,_=l.textures;f.texture_idx<l.textures.length;){for(var k=!1,q=_[f.texture_idx],$=this.createCanvas.apply(this,l_(q.texture_size)),_t=$.getContext("2d");f.style_idx<f.styles.length;){var _n=f.styles[f.style_idx];null==f.text_idx&&(f.text_idx=0,f.texts=Object.keys(g[_n]));for(var _i=g[_n],_o=!0;f.text_idx<f.texts.length;){var xa=f.texts[f.text_idx],ka=_i[xa],_l=ka.text_settings;if(_o&&(this.setFont(_t,_l),_o=!1),_l.can_articulate){ka.texcoords=ka.texcoords||{};for(var _f=0;_f<ka.type.length;_f++){var _a=ka.type[_f];switch(_a){case"straight":if(ka.textures[_f]!==f.texture_idx)continue;var _g,ty,ny,ry=ka.isRTL?xa.split().reverse().join():xa,ly=q.texcoord_cache[_n][ry],cy=void 0;ly.texcoord?cy=ly.texcoord:(_g=ly.texture_position,ny=(ty=this.textSize(_t,_n,ry,_l)).size,this.drawTextMultiLine(_t,ty.lines,_g,ny,_l,_a),cy=l.texture_manager.getTexcoordsForSprite(_g,ny.texture_size,q.texture_size),ly.texcoord=cy),ka.texcoords[_a]={texcoord:cy,texture_id:ly.texture_id};break;case"curved":var by=ka.segments;ka.texcoords.curved=[],ka.texcoords_stroke=[];for(var Oy,My,Sy,Vy,e0,Ly,Wy,q0=0;q0<by.length;q0++)ka.textures[_f][q0]===f.texture_idx&&(Vy=Sy=void 0,(My=q.texcoord_cache[_n][Oy=by[q0]]).texcoord&&My.texcoord_stroke?(Sy=My.texcoord,Vy=My.texcoord_stroke):(e0=My.texture_position,Wy=(Ly=this.textSize(_t,_n,Oy,_l)).size,this.drawTextMultiLine(_t,Ly.lines,e0,Wy,_l,_a),Sy=l.texture_manager.getTexcoordsForSprite(e0,Wy.texture_size,q.texture_size),Vy=_l.stroke&&0<_l.stroke_width?l.texture_manager.getTexcoordsForSprite([e0[0]+Wy.texture_size[0],e0[1]],Wy.texture_size,q.texture_size):(k=!0,l.texture_manager.getTexcoordsForSprite([q.texture_size[0],q.texture_size[1]],[0,0],q.texture_size)),My.texcoord=Sy,My.texcoord_stroke=Vy),ka.texcoords_stroke.push(Vy),ka.texcoords.curved.push({texcoord:Sy,texture_id:My.texture_id}))}}}else{var F0=this.textSize(_t,_n,xa,_l).lines;for(var _0 in ka.align)ka.align[_0].texture_id===f.texture_idx&&(this.drawTextMultiLine(_t,F0,ka.align[_0].texture_position,ka.size,{stroke:_l.stroke,stroke_width:_l.stroke_width,transform:_l.transform,supersample:_l.supersample,align:_0,background_color:_l.background_color,outline_width:_l.outline_width,outline_color:_l.outline_color,padding:_l.padding,fill:_l.fill,font_css:_l.font_css,px_size:_l.px_size}),ka.align[_0].texcoords=l.texture_manager.getTexcoordsForSprite(ka.align[_0].texture_position,ka.size.texture_size,q.texture_size))}f.text_idx++}f.text_idx=null,f.style_idx++}!0===k&&(_t.fillStyle="rgba(0, 0, 0, 0)",_t.fillRect($.width-1,$.height-1,1,1));var o_=l.texture_prefix+f.texture_idx;l.texture_manager.create(l.gl,o_,{element:$,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),f.texture_names.push(o_),f.texture_idx++,f.style_idx=0,$.width=0,$.height=0}return a1.finish(l,f.texture_names),!0}},{key:"setTextureTextPositions",value:function(l){var f={texture_id:0,texcoord_cache:{}},g=[];for(var _ in l){var k=l[_];for(var q in k){var $=k[q],_t=$.text_settings,_n=_t.can_articulate,_i=_t.stroke,_o=_t.stroke_width;if(_n){$.textures=[],f.texcoord_cache[_]=f.texcoord_cache[_]||{};for(var xa=0;xa<$.type.length;xa++)switch($.type[xa]){case"straight":var ka,_l=$.isRTL?q.split().reverse().join():q;f.texcoord_cache[_][_l]||(ka=$.size.texture_size,f.texcoord_cache[_][_l]={},this.placeText(ka[0],ka[1],{can_articulate:_n,style:_,word:_l})),$.textures[xa]=f.texture_id;break;case"curved":$.textures[xa]=[];for(var _f=0;_f<$.segment_sizes.length;_f++){var _a,_g,ty=$.segments[_f];f.texcoord_cache[_][ty]||(_g=(_a=$.segment_sizes[_f].texture_size)[0],_i&&0<_o&&(_g*=2),f.texcoord_cache[_][ty]={},this.placeText(_g,_a[1],{can_articulate:_n,style:_,word:ty})),$.textures[xa].push(f.texture_id)}}}else{var ny=$.size.texture_size;this.placeText(ny[0],ny[1],{can_articulate:_n,text_info:$})}}}var uy=this.layout.export(),ry=uy.items,ly=uy.width,cy=uy.height;f.texcoord_cache={};for(var by=0,Oy=ry.length;by<Oy;by++){var My=ry[by],Sy=My.x,Vy=My.y;if(My.meta.can_articulate){var Wy=My.meta,E0=Wy.style,q0=Wy.word;f.texcoord_cache[E0]=f.texcoord_cache[E0]||{},f.texcoord_cache[E0][q0]||(f.texcoord_cache[E0][q0]={texture_id:f.texture_id,texture_position:[Sy,Vy]})}else{var e0=My.meta.text_info;for(var Ly in e0.align)e0.align[Ly].texture_id=f.texture_id,e0.align[Ly].texture_position=[Sy,Vy]}}return 0<ly&&0<cy&&(g[f.texture_id]={texture_size:[ly,cy],texcoord_cache:f.texcoord_cache}),g}},{key:"placeText",value:function(l,f,g){this.layout.addItem({width:l+this.vertical_text_buffer,height:f+this.vertical_text_buffer,meta:g})}},{key:"applyTextTransform",value:function(l,f){return"capitalize"===f?l.replace(/\w\S*/g,function(g){return g.charAt(0).toUpperCase()+g.substr(1)}):"uppercase"===f?l.toUpperCase():"lowercase"===f?l.toLowerCase():l}}],[{key:"fontPixelSize",value:function(l){if(null!=l){var f=g0((l="string"==typeof l?l:String(l)).match(s.font_size_re)||[],3),g=f[1],_=f[2];return"em"===(_=_||"px")?g*=16:"pt"===_?g/=.75:"%"===_&&(g/=6.25),(g=wy.parsePositiveNumber(g))*R0.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){s.cache.text_count>s.cache.text_count_max&&(s.cache.text={},s.cache.text_count=0,qy("debug","CanvasText: pruning text cache")),Object.keys(s.cache.segment).length>s.cache.segment_count_max&&(s.cache.segment={},qy("debug","CanvasText: pruning segment cache"))}}]),s}();bx.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,bx.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},bx.EMPTY_TEXTURES_ARR=[],bx.returnNoTextures=function(){return bx.EMPTY_TEXTURES_ARR};var IO=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function kO(s){return IO.test(s)}var AD="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",CD=new RegExp("["+AD+"]+");function mP(s){return CD.test(s)}var vP=new RegExp("^["+AD+"\u0600-\u06ff]+"),D4=new RegExp("["+AD+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),S4=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),OO="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",RO=new RegExp("^.(?:"+OO+"+)?([\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]\\W(?:"+OO+"+)?)*"),NO={Mongolian:"\u1800-\u18af"},p8=Object.keys(NO).map(function(s){return NO[s]}).join(""),_P=new RegExp("["+p8+"]"),M4=2,PO=function(){function s(l){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;A0(this,s),this.width=0,this.height=0,this.lines=[],this.max_lines=f,this.text_wrap=g,this.context=l}return L0(s,[{key:"createLine",value:function(l){return this.lines.length<this.max_lines&&new I4(l,this.text_wrap)}},{key:"push",value:function(l){if(this.lines.length<this.max_lines){var f=this.context.measureText(l.text).width;return(l.width=f)>this.width&&(this.width=Math.ceil(f)),this.lines.push(l),this.height+=l.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(l,f){return!!this.push(l)&&this.createLine(f)}},{key:"addEllipsis",value:function(){var l=this.lines[this.lines.length-1],f=Math.ceil(this.context.measureText(s.ellipsis).width);l.append(s.ellipsis),l.width+=f,l.width>this.width&&(this.width=l.width)}},{key:"finish",value:function(l){l?this.push(l):this.addEllipsis()}}],[{key:"parse",value:function(l,f,g,_,k){for(var q="number"==typeof f?l.split(" "):[l],$=new s(k,g,f),_t=$.createLine(_),_n=0;_n<q.length;_n++){for(var _i=q[_n].split("\n"),_o=0===_n,xa=0;xa<_i.length&&_t;xa++){var ka=_i[xa];kO(ka)&&mP(ka[ka.length-1])&&(ka+="\u200f");var _l=_o?ka:" "+ka;if(f&&0<_n&&_t.exceedsTextwrap(_l)){if(!(_t=$.advance(_t,_)))break;_t.append(ka),_o=!0}else _t.append(_l);xa<_i.length-1&&(_t=$.advance(_t,_),_o=!0)}_n===q.length-1&&$.finish(_t)}return $}}]),s}();PO.ellipsis="...";var I4=function(){function s(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;A0(this,s),this.chars=0,this.text="",this.height=Math.ceil(l),this.text_wrap=f}return L0(s,[{key:"append",value:function(l){this.chars+=l.length,this.text+=l}},{key:"exceedsTextwrap",value:function(l){return l.length+this.chars>this.text_wrap}}]),s}(),k4={resetText:function(){this.texts={}},freeText:function(s){delete this.texts[s.id]},parseTextFeature:function(s,l,f,g){var _=this.parseTextSource(s,l,f);if(null!=_&&""!==_){var k=cM.compute(s,l,f);if(k){var q=cM.key(k);this.texts[g.id]=this.texts[g.id]||{};var $=this.texts[g.id][q]=this.texts[g.id][q]||{};if(_ instanceof Object){var _t=[],_n=_.left+"-"+_.right;for(var _i in _){var _o,xa=_[_i];xa&&(_o=this.computeTextLayout({},s,l,f,g,xa,k,_n,_i),$[xa]||($[xa]={text_settings:k,ref:0}),_t.push({draw:l,text:xa,text_settings_key:q,layout:_o}))}return 0<_t.length&&_t}var ka=this.computeTextLayout({},s,l,f,g,_,k);return $[_]||($[_]={text_settings:k,ref:0}),{draw:l,text:_,text_settings_key:q,layout:ka}}}},parseTextSource:function(s,l,f){var g,_=l.text_source||"name";if(null!=_&&"object"===D_(_))for(var k in g={},_)g[k]=this.parseTextSourceValue(_[k],s,f);else g=this.parseTextSourceValue(_,s,f);return g},parseTextSourceValue:function(s,l,f){var g;if(Array.isArray(s)){for(var _=0;_<s.length;_++)if("string"==typeof s[_]?g=l.properties[s[_]]:"function"==typeof s[_]&&(g=s[_](f)),g)return g}else"string"==typeof s?g=l.properties[s]:s instanceof Function&&(g=s(f));return g},prepareTextLabels:function(s,l,f){var g=this;return 0===Object.keys(this.texts[s.id]||{}).length?Promise.resolve([]):s0.postMessage(this.main_thread_target+".calcTextSizes",s.id,this.texts[s.id]).then(function(_){var k=_.texts;return s.canceled?(qy("trace","Style ".concat(g.name,": stop tile build because tile was canceled: ").concat(s.key,", post-calcTextSizes()")),[]):(g.texts[s.id]=k||[],k?g.buildTextLabels(s,f):(ex.abortTile(s.id),[]))})},collideAndRenderTextLabels:function(s,l,f){var g=this;return this.prepareTextLabels(s,l,f).then(function(_){return 0===_.length?(ex.collide([],l,s.id),Promise.resolve({})):ex.collide(_,l,s.id).then(function(k){if(s.canceled)return qy("trace","stop tile build because tile was canceled: ".concat(s.key,", post-collide()")),{};var q=g.texts[s.id];return null==q||0===k.length?{}:(g.cullTextStyles(q,k),k.forEach(function($){var _t=$.text_settings_key,_n=q[_t]&&q[_t][$.text];_n.text_settings.can_articulate?(_n.type||(_n.type=[]),-1===_n.type.indexOf($.label.type)&&_n.type.push($.label.type)):(_n.align=_n.align||{},_n.align[$.label.align]={})}),{labels:k,texts:q,textures:[]})})})},cullTextStyles:function(s,l){for(var f=0;f<l.length;f++){var g=l[f];s[g.text_settings_key][g.text].ref++}for(var _ in s)for(var k in s[_])s[_][k].ref<1&&delete s[_][k];for(var q in s)0===Object.keys(s[q]).length&&delete s[q]},calcTextSizes:function(s,l){return this._canvas_text||(this._canvas_text=new bx,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(s,l,this._canvas_ctx_for_sizes)},preprocessText:function(s){if(s&&s.font&&"object"===D_(s.font))return s.font.fill=wy.createPropertyCache(s.font.fill),s.font.stroke&&(s.font.stroke.color=wy.createPropertyCache(s.font.stroke.color)),s.background&&s.background.color&&(s.background.color=wy.createPropertyCache(s.background.color)),s.outline&&(s.outline.color&&(s.outline.color=wy.createPropertyCache(s.outline.color)),s.outline.width&&(s.outline.width=wy.createPropertyCache(s.outline.width,wy.parsePositiveNumber))),s.padding&&(Array.isArray(s.padding)?2===s.padding.length&&(s.padding=[s.padding[0],s.padding[1],s.padding[0],s.padding[1]]):s.padding=Array(4).fill(s.padding),s.padding=wy.createPropertyCache(s.padding,function(l){return l.map(wy.parsePositiveNumber)})),s.font.px_size=wy.createPropertyCache(s.font.size||cM.defaults.size,bx.fontPixelSize),s.font.stroke&&null!=s.font.stroke.width&&(s.font.stroke.width=wy.createPropertyCache(s.font.stroke.width,wy.parsePositiveNumber)),s.offset=wy.createPropertyCache(s.offset,function(l){return Array.isArray(l)&&l.map(wy.parseNumber)}),s.buffer=wy.createPropertyCache(s.buffer,function(l){return(Array.isArray(l)?l:[l,l]).map(wy.parsePositiveNumber)}),s.repeat_distance=wy.createPropertyCache(s.repeat_distance||Ry.tile_size,wy.parsePositiveNumber),s},computeTextLayout:function(s,l,f,g,_,k,q,$,_t){var _n=s||{};return(_n=this.computeLayout(_n,l,f,g,_)).repeat_distance&&($&&(_n.repeat_group+="/"+$),_n.repeat_group+="/"+k),_n.subdiv=_.overzoom2,_n.align=f.align,_n.italic="normal"!==q.style,"right"===_t?_n.orientation=1:"left"===_t&&(_n.orientation=-1),_n}},B1=Math.PI/180,O4=function(){function s(l,f){A0(this,s),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=l,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),f?this.setLookAtData(f):this._updateMatrices(),u0.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return L0(s,[{key:"getZoomForBounds",value:function(l,f,g,_){var k,q=this.clone(),$=this._max_zoom,_t=this._min_zoom,_n=($-_t)/2,_i=$-_n,_o=f,xa=J_.getBBoxCenter(J_.getBBox(l));for(void 0===_o?_o=xa:(k=xa[0]-_o[0],Math.abs(k)>Ry.half_circumference_meters+1e-8&&(_o[0]+=Math.round(k/Ry.circumference_meters)*Ry.circumference_meters));.001<_n;)!function(){q.setLookAtData({zoom:_i,position:_o,tilt:g,heading:_});var ka,_l,ty=q.getLookAtData().bounds;l.every(function(ny){return J_.isPointInsidePolygon(ny,ty)})?_t=_i:(_l=(ka=g0(J_.getBBox(ty),4))[0],ka[2]-_l+1e-8>=Ry.circumference_meters&&ka[3]-ka[1]+1e-8>=Ry.circumference_meters?_t=_i:$=_i),_i=$-(_n=($-_t)/2)}();return _t}},{key:"setZoomConstraints",value:function(l,f){this._min_zoom=l,this._max_zoom=f,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(l,f){var g,_,k,q,$,_t=l.position,_n=l.zoom;_t===g&&l.bounds!==g&&(_t=J_.getBBoxCenter(J_.getBBox(l.bounds))),_n===g&&l.bounds!==g&&(_n=this.getZoomForBounds(l.bounds,_t,l.tilt,l.heading)),f!==g&&(_=_t||this.screenToWorld(f)),_n!==g&&(_n=J_.clamp(_n,this._min_zoom,this._max_zoom),(k=R0.zoomToTileLevel(_n))!==(q=this._lookAtData.tile_level)&&(this._zoom_direction=q<k?1:-1),this._lookAtData.zoom=_n,this._lookAtData.tile_level=k),l.tilt!==g&&(this._lookAtData.tilt=l.tilt),l.heading!==g&&(this._lookAtData.heading=l.heading),f!==g?(this._updateMatrices(),$=this.screenToWorld(f),this._lookAtData.position[0]-=$[0]-_[0],this._lookAtData.position[1]-=$[1]-_[1]):_t&&(this._lookAtData.position=_t),this._lookAtData.position[2]=0,this._lookAtData.position[1]=J_.clamp(this._lookAtData.position[1],-Ry.half_circumference_meters,Ry.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(l){var f=0<arguments.length&&void 0!==l&&l,g=this._viewport,_=g.width,k=g.height;this._viewport_aspect_ratio=_/k;var q=this._viewport.center.x-(_/2<<0),$=this._viewport.center.y-(k/2<<0);this._center_offset[0]=q,this._center_offset[1]=$,this._center_offset_normalized[0]=q/_,this._center_offset_normalized[1]=$/-k,f||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(l,f){q1_multiply(l.model_view32,this._view_matrix,l.model),f.uniform("Matrix4fv","u_modelView",l.model_view32),function(s,l){var f=l[0],g=l[1],_=l[2],k=l[3],q=l[4],$=l[5],_t=l[6],_n=l[7],_i=l[8],_o=l[9],xa=l[10],ka=l[11],_l=l[12],_f=l[13],_a=l[14],_g=l[15],ty=f*$-g*q,ny=f*_t-_*q,uy=f*_n-k*q,ry=g*_t-_*$,ly=g*_n-k*$,cy=_*_n-k*_t,by=_i*_f-_o*_l,Oy=_i*_a-xa*_l,My=_i*_g-ka*_l,Sy=_o*_a-xa*_f,Vy=_o*_g-ka*_f,e0=xa*_g-ka*_a,Ly=ty*e0-ny*Vy+uy*Sy+ry*My-ly*Oy+cy*by;Ly&&(s[0]=($*e0-_t*Vy+_n*Sy)*(Ly=1/Ly),s[1]=(_t*My-q*e0-_n*Oy)*Ly,s[2]=(q*Vy-$*My+_n*by)*Ly,s[3]=(_*Vy-g*e0-k*Sy)*Ly,s[4]=(f*e0-_*My+k*Oy)*Ly,s[5]=(g*My-f*Vy-k*by)*Ly,s[6]=(_f*cy-_a*ly+_g*ry)*Ly,s[7]=(_a*uy-_l*cy-_g*ny)*Ly,s[8]=(_l*ly-_f*uy+_g*ty)*Ly)}(l.normal32,l.model_view32),function(s,l){var f=l[0],g=l[1],_=l[2],k=l[3],q=l[4],$=l[5],_t=l[6],_n=l[7],_i=l[8],_o=_i*q-$*_n,xa=-_i*k+$*_t,ka=_n*k-q*_t,_l=f*_o+g*xa+_*ka;_l&&(s[0]=_o*(_l=1/_l),s[1]=(-_i*g+_*_n)*_l,s[2]=($*g-_*q)*_l,s[3]=xa*_l,s[4]=(_i*f-_*_t)*_l,s[5]=(-$*f+_*k)*_l,s[6]=ka*_l,s[7]=(-_n*f+g*_t)*_l,s[8]=(q*f-g*k)*_l)}(l.inverse_normal32,l.normal32),f.uniform("Matrix3fv","u_normalMatrix",l.normal32),f.uniform("Matrix3fv","u_inverseNormalMatrix",l.inverse_normal32)}},{key:"_updateMatrices",value:function(){var l=this._viewport.height*Ry.metersPerPixel(this._lookAtData.zoom),f=R0.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=l/2*f;var g=this._lookAtData.position[0],_=this._lookAtData.position[1];(function(s,l,f,g){var _,k,q,$,_t,_n,_i,_o,xa,ka,_l=l[0],_f=l[1],_a=l[2],_g=g[0],ty=g[1],ny=g[2],uy=f[0],ry=f[1],ly=f[2];Math.abs(_l-uy)<1e-6&&Math.abs(_f-ry)<1e-6&&Math.abs(_a-ly)<1e-6?PI(s):(_i=_l-uy,_o=_f-ry,xa=_a-ly,_=ty*(xa*=ka=1/Math.sqrt(_i*_i+_o*_o+xa*xa))-ny*(_o*=ka),k=ny*(_i*=ka)-_g*xa,q=_g*_o-ty*_i,(ka=Math.sqrt(_*_+k*k+q*q))?(_*=ka=1/ka,k*=ka,q*=ka):q=k=_=0,$=_o*q-xa*k,_t=xa*_-_i*q,_n=_i*k-_o*_,(ka=Math.sqrt($*$+_t*_t+_n*_n))?($*=ka=1/ka,_t*=ka,_n*=ka):_n=_t=$=0,s[0]=_,s[1]=$,s[2]=_i,s[3]=0,s[4]=k,s[5]=_t,s[6]=_o,s[7]=0,s[8]=q,s[9]=_n,s[10]=xa,s[11]=0,s[12]=-(_*_l+k*_f+q*_a),s[13]=-($*_l+_t*_f+_n*_a),s[14]=-(_i*_l+_o*_f+xa*_a),s[15]=1)})(this._view_matrix,oA_fromValues(g,_,0),oA_fromValues(g,_,-1),oA_fromValues(0,1,0)),this._heading_matrix=q1_identity(this._heading_matrix);var k=180-this._lookAtData.heading;k*=B1,this._heading_matrix[0]=Math.cos(k),this._heading_matrix[1]=-Math.sin(k),this._heading_matrix[4]=Math.sin(k),this._heading_matrix[5]=Math.cos(k),this._tilt_matrix=q1_identity(this._tilt_matrix),k=0<(k=this._lookAtData.tilt?this._lookAtData.tilt*B1:0)?-k:k,this._tilt_matrix[5]=Math.cos(k),this._tilt_matrix[6]=Math.sin(k),this._tilt_matrix[9]=-Math.sin(k),this._tilt_matrix[10]=Math.cos(k),q1_multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),q1_multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var q=2*Math.atan(1/f),$=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log($),function(s,l,f,g,_){var k=1/Math.tan(l/2),q=1/(g-_);s[0]=k/f,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(_+g)*q,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*_*g*q,s[15]=0}(this._projection_matrix,q,this._viewport_aspect_ratio,1,$),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],q1_translate(this._projection_matrix,this._projection_matrix,oA_fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=q1_multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var l,f,g,_,k,q=this._viewport,$=q.width,_t=q.height,_n=q.padding,_i=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((_n.top+_t)/2-Math.cos(_i)*(_n.top*(1-Math.sin(_i))+.75*_t),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([$,this._horizon]),this.screenToWorld([$,_t]),this.screenToWorld([0,_t])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===_n.left&&0===_n.top&&0===_n.right&&0===_n.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(l=_n.left,f=Math.max(this._horizon,_n.top),g=$-_n.right,_=_t-_n.bottom,k=[this.screenToWorld([l,f]),this.screenToWorld([g,f]),this.screenToWorld([g,_]),this.screenToWorld([l,_])],this._lookAtData.bounds=this._clipAgainstGeoBounds(k))}},{key:"_clipAgainstGeoBounds",value:function(l){var f,_,q,g=g0(J_.getBBox(l),4),_t=Ry.half_circumference_meters,_i=J_.clipPolygon([[(_=g[0])-1,+_t],[(q=g[2])+1,+_t],[q+1,-_t],[_-1,-_t]],l)[0],_o=g0(J_.getBBox(_i),4),k=_o[1],$=_o[3];(q=_o[2])-(_=_o[0])>=Ry.circumference_meters&&(_i=[[(f=(q-_)/2)-_t,$],[f+_t,$],[f+_t,k],[f-_t,k]]);var xa=[];return _i&&(xa=J_.splitLegs(_i,_t)),xa}},{key:"applyPxOffset",value:function(l){var f=g0(l,2),g=f[0],_=f[1],k=Math.PI-this._lookAtData.heading*B1,q=Ry.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(g*Math.cos(k)+_*Math.sin(k))*q,this._lookAtData.position[1]-=(_*Math.cos(k)-g*Math.sin(k))*q,this._lookAtData.position[1]=J_.clamp(this._lookAtData.position[1],-Ry.half_circumference_meters,Ry.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(l){var f=g0(l,2),g=f[0],_=f[1],k=this._viewport,q=k.width,$=k.height;return 0===q||0===$?[0,0]:this._clipCoordsToWorldPlaneCoords([2*((g-=q/2)+q/2)/q-1,1-2*((_-=$/2)+$/2)/$,-1,1])}},{key:"_clipToScreenCoords",value:function(l){var f=this._viewport,_=f.height;return[(.5*l[0]+.5)*f.width,_-(.5*l[1]+.5)*_]}},{key:"_isScreenPointInViewPort",value:function(l){var f=this._viewport;return 0<=l[0]&&l[0]<=f.width&&0<=l[1]&&l[1]<=f.height}},{key:"worldToScreen",value:function(l,f){var g,_,k,q,$,_t,_n=1<arguments.length&&void 0!==f&&f;return l[2]||(l[2]=0),_n?(g=this._worldToClipCoords(l),$=this._clipToScreenCoords(g)):(_=Math.sign(this._lookAtData.position[0]),k=Math.trunc(this._lookAtData.position[0]/Ry.circumference_meters+_/2),l[0]+=Ry.circumference_meters*k,q=this._worldToClipCoords(l),_t=$=this._clipToScreenCoords(q),this._isScreenPointInViewPort($)||(q=this._worldToClipCoords([l[0]+Ry.circumference_meters,l[1],l[2]]),$=this._clipToScreenCoords(q),this._isScreenPointInViewPort($)||(q=this._worldToClipCoords([l[0]-Ry.circumference_meters,l[1],l[2]]),$=this._clipToScreenCoords(q)),this._isScreenPointInViewPort($)||($=_t))),$}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(l){var f=[],g=this._lookAtData.distance,_=this._lookAtData.position,k=[0,0,g,0],q=0,$=g*Math.sin(B1*this._lookAtData.tilt)*Math.cos(B1*this._lookAtData.heading),_t=g*Math.sin(B1*this._lookAtData.tilt)*Math.sin(B1*this._lookAtData.heading),_n=new Float64Array(16),_i=new Float64Array(16);return q1_invert(_n,this._projection_matrix),uE_transformMat4(f,l,_n),f[2]=-1,f[3]=0,q1_invert(_i,this._view_matrix),uE_transformMat4(f,f,_i),function(s,l){var f=l[0],g=l[1],_=l[2],k=l[3],q=f*f+g*g+_*_+k*k;0<q&&(q=1/Math.sqrt(q),s[0]=f*q,s[1]=g*q,s[2]=_*q,s[3]=k*q)}(f,f),uE_transformMat4(k,k,this._transformation_matrix),0!==f[2]&&(q=-k[2]/f[2]),uE_scale(f,f,q),[_[0]+(f[0]+_t),_[1]+(f[1]+$)]}},{key:"_worldToClipCoords",value:function(l){var f=[l[0],l[1],l[2],1];return uE_transformMat4(f,f,this._view_matrix),uE_transformMat4(f,f,this._projection_matrix),uE_scale(f,f,1/f[3]),f}},{key:"setupProgram",value:function(l){l.uniform("Matrix4fv","u_projection",this._projection_matrix),l.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),l.uniform("2fv","u_center_offset",this._center_offset_normalized),l.uniform("1f","u_tilt",this._lookAtData.tilt*B1),l.uniform("1f","u_heading",this._lookAtData.heading*B1),l.uniform("1f","u_near_plane",1),l.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var l=new s(this._viewport,this._lookAtData);return l.setZoomConstraints(this._min_zoom,this._max_zoom),l}},{key:"getViewport",value:function(){return this._viewport}}]),s}();function LO(s){return void 0===s.x?s[0]:s.x}function bP(s){return void 0===s.y?s[1]:s.y}function wP(s,l){return LO(s)-LO(l)}function xP(s,l){return bP(s)-bP(l)}function EP(s){return s.sort(wP)}function FO(s,l){for(var f,g=s[0],_=g,k=0;k<s.length;k+=1)l(f=s[k],g)<0?g=f:0<l(f,_)&&(_=f);return[g,_]}function AP(s,l){return Object.values(l.reduce(function(f,g){var _=g[+s];return f[_]||(f[_]=[]),f[_].push(g),f},{}))}function CP(s,l,f){var g=+s,_=l[g],k=f[g];if(k<_)return[];var q=[l];if(k<_)return q;for(var $=l[(1+g)%2],_t=s?function(_i){return q.push([$,_i])}:function(_i){return q.push([_i,$])},_n=_+1;_n<k;_n+=1)_t(_n);return q.push(f),q}function TP(s,l){return CP(!1,s,l)}function $0(s,l){return CP(!0,s,l)}function Rx(s){var l={},f=[];return s.forEach(function(g){var _=g.key||(Array.isArray(g)?"".concat(g[0],"/").concat(g[1]):"".concat(g.x,"/").concat(g.y));l[_]||(l[_]=!0,f.push(g))}),f}function jO(s){return s.reduce(function(l,f){return l.concat(f)})}function VO(s,l,f){var g=function($,_t,_n){var _i=g0($,2),_o=_i[0],xa=_i[1],ka=g0(_t,2),_l=ka[0],_f=ka[1],_a=g0(_n,2),_g=_a[0],ty=_a[1],ny=_o+(_f-xa)/(ty-xa)*(_g-_o);return[[[_o,xa]].concat(l_(EP([[_l,_f],[ny,_f]]))),[].concat(l_(EP([[_l,_f],[ny,_f]])),[[_g,ty]])]}.apply(void 0,l_([s,l,f].sort(xP))),_=g0(g,2),q=_[1];return Rx(function($,_t,_n){var _i=g0($,2),_o=_i[0],xa=_i[1],ka=g0(_t,2),_f=ka[1];return pM(_o,ka[0],g0(_n,1)[0],xa,_f)}.apply(void 0,l_(_[0])).concat(function($,_t,_n){var _i=g0($,2),_o=_i[0],xa=_i[1],ka=g0(_t,1)[0],_l=g0(_n,2);return pM(_l[0],_o,ka,_l[1],xa)}.apply(void 0,l_(q))))}function pM(s,l,f,g,_){var k,q,$,_t,_n,_o,xa,ka,_l,_f=Math.min(s,l),_a=Math.max(s,f),_g=Math.min(g,_),ty=Math.max(g,_);if(Math.floor(g)===Math.floor(_))return BO(_f,_a,g);if(ty-_g<.125)return k=[_a,ty],$=(q=g0([_f,_g],2))[0],_t=q[1],_o=(_n=g0(k,2))[1],ka=kE(xa=dM($,_n[0]),_t),_l=kE(xa,_o),ka.concat(_l);function ny(Wy){My=My.concat(BO(Sy,Vy,Math.floor(Wy))),Sy+=by,Vy+=Oy}var uy,ry,ly=.125*((ry=ty)-(uy=_g))/(Math.ceil(ry)-Math.floor(uy)),cy=(ty-_g)/ly,by=(l-s)/cy,Oy=(f-s)/cy,My=[],Sy=s,Vy=s;if(g<_)for(var e0=_g;e0<=ty;e0+=ly)ny(e0);else for(var Ly=ty;_g<=Ly;Ly-=ly)ny(Ly);return Rx(My)}function kE(s,l){return s.map(function(f){return[f,l]})}function dM(s,l){var f=Math.floor(s),g=Math.floor(l);if(g<f)return[];if(f===g)return[f];for(var _=[],k=f;k<=g;k+=1)_.push(k);return _}function BO(s,l,f){return kE(dM(s,l),f)}var zO=function(){function s(l,f){A0(this,s),jS(this),this.scene=l,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==f.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new O4(f.viewport),this._viewport=f.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return L0(s,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(l){var f=0<arguments.length&&void 0!==l&&l,g=this._viewport,_=g.width,k=g.height;this.size.css={width:_,height:k},this.size.device={width:Math.round(_*R0.device_pixel_ratio),height:Math.round(k*R0.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),f||this.updateBounds()}},{key:"setLookAtData",value:function(l,f){s._setLookAtDataForManipulator(this.lookAtManipulator,l,f),this.updateBounds()}},{key:"getLookAtData",value:function(l){var f=0<arguments.length&&void 0!==l&&l;return s._getLookAtDataFromManipulator(this.lookAtManipulator,f)}},{key:"getBestLookAtData",value:function(l,f,g){var _=2<arguments.length&&void 0!==g&&g,k=this.lookAtManipulator.clone();return s._setLookAtDataForManipulator(k,l,f),s._getLookAtDataFromManipulator(k,_)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(l){var f=this._offset_buffer;f[0]+=l[0],f[1]+=l[1];var g,_,k=Math.abs(f[0]),q=Math.abs(f[1]);(1<=k||1<=q)&&(g=~~f[0],_=~~f[1],this.lookAtManipulator.applyPxOffset([k<1?0:g,q<1?0:_]),1<=k&&(f[0]-=g),1<=q&&(f[1]-=_),this.updateBounds())}},{key:"setPanning",value:function(l){this.panning=l,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var l,f;this.markUserInput(),this.ready()&&(this.center_tile=Ry.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),l=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),f=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:l[0],y:l[1]},ne:{x:f[0],y:f[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(l,f,g,_,k,q){var $,_t=4<arguments.length&&void 0!==k?k:0,_n=!(5<arguments.length&&void 0!==q)||q,_i=this.lookAtManipulator.getLookAtData().tile_level,_o=Ry.tileForMeters([f,l],_i),xa=Ry.tileForMeters([_,g],_i);_o.x-=_t,_o.y-=_t,xa.x+=_t,xa.y+=_t,!1===_n&&($=(1<<_i)-1,_o.x=Math.min(Math.max(0,_o.x),$),_o.y=Math.min(Math.max(0,_o.y),$),xa.x=Math.min(Math.max(0,xa.x),$),xa.y=Math.min(Math.max(0,xa.y),$));for(var ka=[],_l={},_f=_o.x;_f<=xa.x;_f++)for(var _a=_o.y;_a<=xa.y;_a++){var _g=c1.coord(Ry.wrapTile({x:_f,y:_a,z:_i},{x:!_n,y:!0}));_l[_g.key]||(_l[_g.key]=!0,ka.push(_g))}return ka}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return function(s,l,f){function g(ka){return Object.values(Ry.metersToExactTileCoords(ka,s.tile_level))}var _,k,q,$,_t,_n,_i,_o,xa;return Rx((_=function(s,l){return l<=0?s:Rx((f=jO(AP(!1,s).map(function(q){var $=g0(FO(q,xP),2),_t=$[0],_n=$[1],_o=[_n[0],_n[1]+l];return q.concat($0([_t[0],_t[1]-l],_t),$0(_n,_o))})),jO(AP(!0,f).map(function(q){var $=g0(FO(q,wP),2),_t=$[0],_n=$[1],_o=[_n[0]+l,_n[1]];return q.concat(TP([_t[0]-l,_t[1]],_t),TP(_n,_o))}))));var f}(($=g(s.tetragon[0]),_t=g(s.tetragon[1]),_n=g(s.tetragon[3]),_i=g(s.tetragon[2]),_o=VO(_t,$,_n),xa=VO(_n,_i,_t),Rx(_o.concat(xa))),l),k=s.tile_level,q=f,_.map(function(ka){var _l=g0(ka,2);return c1.coord(Ry.wrapTile({x:_l[0],y:_l[1],z:k},{x:!q,y:!0}))})))}(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var l=this.lookAtManipulator.getLookAtData();return 0===l.tilt&&180===l.heading?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(l,f){l.setupProgram(this.matrices,f),this.lookAtManipulator.setupMatrices(this.matrices,f)}},{key:"setupProgram",value:function(l){var f=this.lookAtManipulator.getLookAtData();l.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),l.uniform("3fv","u_map_position",[f.position[0],f.position[1],Math.trunc(1e5*f.zoom)/1e5]),l.uniform("1f","u_meters_per_pixel",Ry.metersPerPixel(f.zoom)),l.uniform("1f","u_device_pixel_ratio",R0.device_pixel_ratio),l.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),l.uniform("1i","u_view_panning",this.panning),l.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(l)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(l,f){var g=this.lookAtManipulator.screenToWorld([l,f]),_=g0(Ry.metersToLatLng(g),2);return{lat:_[1],lng:_[0]}}},{key:"geoToPixel",value:function(l){var f=Ry.latLngToMeters([l.lng,l.lat]);f.push(l.alt||0);var g=this.lookAtManipulator.worldToScreen(f);return{x:Math.floor(g[0]),y:Math.floor(g[1])}}},{key:"geoToMeters",value:function(l){var f=g0(Ry.latLngToMeters([l.lng,l.lat]),2);return{x:f[0],y:f[1],z:l.alt||0}}},{key:"metersToGeo",value:function(l){var f=g0(Ry.metersToLatLng([l.x,l.y]),2);return{lat:f[1],lng:f[0],alt:l.z||0}}},{key:"setZoomConstraints",value:function(l,f){this.lookAtManipulator.setZoomConstraints(l,f)}}],[{key:"_setLookAtDataForManipulator",value:function(l,f,g){var _=f.position,_t=f.bounds,_n={zoom:f.zoom,tilt:f.tilt,heading:f.heading};if(_&&"number"==typeof _.lng&&"number"==typeof _.lat&&(_n.position=Ry.latLngToMeters([_.lng,_.lat])),_t){var _i=_t.getExterior().getLatLngAltArray(),_o=_i.length/3,xa=Array(_o);if(_t.getBoundingBox().isCDB())for(var ka=_i[1],_l=0,_f=0;_f<_o;_f++){var _g=_i[3*_f+1];0<_f&&180<Math.abs(_g-ka)&&(_l+=ka<_g?-360:360),ka=_g,xa[_f]=Ry.latLngToMeters([_g+_l,_i[3*_f]])}else for(var ty=0;ty<_o;ty++)xa[ty]=Ry.latLngToMeters([_i[3*ty+1],_i[3*ty]]);_n.bounds=xa}l.setLookAtData(_n,g)}},{key:"_getLookAtDataFromManipulator",value:function(l,f){var g=1<arguments.length&&void 0!==f&&f,_=l.getLookAtData(),k=_.heading,q=_.incline,$=_.tilt,_t=_.zoom,_n=_.position,_i=_.bounds,_o=_.unpadded_bounds,xa=g0(Ry.metersToLatLng(_n),2),ka=xa[0],_l=xa[1],_f=new H.geo.LineString;return(g?_o:_i).forEach(function(_a){var _g=Ry.metersToLatLng(_a);_f.pushLatLngAlt(_g[1],_g[0],0)}),{heading:k,incline:q,tilt:$,zoom:_t,bounds:new H.geo.Polygon(_f),position:{lat:_l,lng:ka,alt:_n[2]}}}}]),s}(),gM=V1.PLACEMENT,SP=128/Math.PI,d8=16384/Math.PI,Rw=Object.create(r1);Object.assign(Rw,k4),Object.assign(Rw,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(s){var l=0<arguments.length&&void 0!==s?s:{};r1.init.call(this,l),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,dD.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),dD.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),dD.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(s,l,f){var g,_,k,q=f.tile,$={};if($.color=this.parseColor(l.color,f),$.texture=l.texture,$.label_texture=null,$.color||$.texture){if(this.hasSprites($)){if(!(g=this.parseSprite($,l,f)))return;$.texcoords=g.texcoords}if($.size=l.size,$.size){if($.size=wy.evalCachedPointSizeProperty(l.size,g,f),null==$.size)return void qy({level:"warn",once:!0},"Layer '".concat(l.layers[l.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(l.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof $.size&&($.size=[$.size,$.size])}else $.size=g&&g.css_size||[16,16];l.outline&&($.outline_width=wy.evalCachedProperty(l.outline.width,f)||wy.defaults.outline.width,$.outline_color=this.parseColor(l.outline.color,f)),$.outline_edge_pct=0,$.outline_width&&$.outline_color&&($.size[0]+=_=$.outline_width,$.size[1]+=_,$.outline_edge_pct=_/Math.min($.size[0],$.size[1])*2),$.size[0]=Math.min($.size[0],256),$.size[1]=Math.min($.size[1],256),$.placement=l.placement,$.placement_min_length_ratio=wy.evalCachedProperty(l.placement_min_length_ratio,f),$.placement===gM.SPACED&&l.placement_spacing&&($.placement_spacing=wy.evalCachedProperty(l.placement_spacing,f)),$.angle=wy.evalProperty(l.angle,f)||0,$.elevate_by_altitude=!!l.elevate_by_altitude,$.z=l.z?J_.clamp(wy.evalCachedDistanceProperty(l.z,f),0,32767):wy.defaults.z,$.flat=l.flat,$.tile_edges=l.tile_edges,this.computeLayout($,s,l,f,q),l.stick&&!$.flat&&(k=wy.parseNumber(wy.evalProperty(l.stick.height,f)),$.stick={color:this.parseColor(l.stick.color,f)||wy.defaults.color,height:k?Math.max(k,0):0});var _t=l.text&&!1!==wy.evalProperty(l.text.visible,f)&&this.parseTextFeature(s,l.text,f,q);Array.isArray(_t)&&qy({level:"warn",once:!(_t=null)},"Layer '".concat(l.layers[l.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(l.text.text_source))),_t&&(_t.layout.parent=$,_t.layout.priority=l.text.priority?Math.max(_t.layout.priority,$.priority+.5):$.priority+.5,_t.layout.move_into_tile=!1,ex.addStyle(this.collision_group_text,q.id)),this.queueFeature({feature:s,draw:l,context:f,style:$,text_feature:_t},q),ex.addStyle(this.collision_group_points,q.id)}},hasSprites:function(s){return s.texture&&this.textureManager.textures[s.texture]&&this.textureManager.textures[s.texture].sprites},getSpriteInfo:function(s,l){var f=this.textureManager.textures[s.texture].sprites[l]&&this.textureManager.getSpriteInfo(s.texture,l);return l&&!f?(this.texture_missing_sprites[s.texture]=this.texture_missing_sprites[s.texture]||{},this.texture_missing_sprites[s.texture][l]||(qy("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(l,"' for texture '").concat(s.texture,"'")),this.texture_missing_sprites[s.texture][l]=!0)):f&&(f.sprite=l),f},parseSprite:function(s,l,f){var g=wy.evalProperty(l.sprite,f);return this.getSpriteInfo(s,g)||this.getSpriteInfo(s,l.sprite_default)},queueFeature:function(s,l){this.tile_data[l.id]&&this.queues[l.id]||this.startData(l),this.queues[l.id]=this.queues[l.id]||[],this.queues[l.id].push(s)},endData:function(s){var l=this;if(s.canceled)return qy("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(s.key)),Promise.resolve();var f=this.queues[s.id];delete this.queues[s.id];var g=[],_=[];return f.forEach(function(k){for(var q=k.style,$=k.feature,_n=l.buildLabels(q.size,$.geometry,q),_i=0;_i<_n.length;_i++){var _o,xa=_n[_i],ka={feature:$,draw:k.draw,context:k.context,style:q,label:xa};_.push(ka),k.text_feature&&(g.push(_o={feature:$,draw:k.text_feature.draw,context:k.context,text:k.text_feature.text,text_settings_key:k.text_feature.text_settings_key,layout:k.text_feature.layout,point_label:xa,linked:ka}),k.draw.text.optional||(ka.linked=_o))}}),Promise.all([ex.collide(_,this.collision_group_points,s.id).then(function(k){k.forEach(function(q){l.feature_style=q.style,l.feature_style.label=q.label,l.feature_style.linked=q.linked,r1.addFeature.call(l,q.feature,q.draw,q.context)})}),this.collideAndRenderTextLabels(s,this.collision_group_text,g)]).then(function(k){var q=g0(k,2)[1],$=q.labels,_t=q.texts;return $&&_t&&$.forEach(function(_n){var _i=_n.text_settings_key,_o=_t[_i]&&_t[_i][_n.text],xa=l.feature_style;xa.label=_n.label,xa.linked=_n.linked,xa.size=_o.size.logical_size,xa.angle=0,_n.label.text_data={text_info:_o,text_settings_key:_i,text:_n.text},xa.label_texture=l.textureManager.default,r1.addFeature.call(l,_n.feature,_n.draw,_n.context)}),l.freeText(s),r1.endData.call(l,s)})},_preprocess:function(s){s.color=wy.createColorPropertyCache(s.color),s.texture=void 0!==s.texture?s.texture:this.texture,s.outline&&(s.outline.color=wy.createColorPropertyCache(s.outline.color),s.outline.width=wy.createPropertyCache(s.outline.width,wy.parsePositiveNumber)),s.z=wy.createPropertyCache(s.z,wy.parseUnits);try{s.size=wy.createPointSizePropertyCache(s.size)}catch(l){return qy({level:"warn",once:!0},"Layer '".concat(s.layers[s.layers.length-1],"': ")+"".concat(l," (").concat(JSON.stringify(s.size),"), skipping features in layer")),null}return s.offset=wy.createPropertyCache(s.offset,function(l){return Array.isArray(l)&&l.map(wy.parseNumber)}),s.buffer=wy.createPropertyCache(s.buffer,function(l){return(Array.isArray(l)?l:[l,l]).map(wy.parsePositiveNumber)}),s.repeat_distance=wy.createPropertyCache(s.repeat_distance,wy.parseNumber),null==s.repeat_group&&(s.repeat_group=s.layers.join("-")),s.placement=gM[s.placement&&s.placement.toUpperCase()],null==s.placement&&(s.placement=gM.VERTEX),s.placement_spacing=null!=s.placement_spacing?s.placement_spacing:80,s.placement_spacing=wy.createPropertyCache(s.placement_spacing,wy.parsePositiveNumber),s.placement_min_length_ratio=null!=s.placement_min_length_ratio?s.placement_min_length_ratio:1,s.placement_min_length_ratio=wy.createPropertyCache(s.placement_min_length_ratio,wy.parsePositiveNumber),s.angle="number"==typeof s.angle?s.angle*Math.PI/180:s.angle||0,s.text=this.preprocessText(s.text),s.text&&(s.text.variantKey=s.variantKey,s.text.group=s.group,s.text.layers=s.layers,s.text.order=s.order,s.text.repeat_group=s.text.repeat_group||s.repeat_group,s.text.anchor=s.text.anchor||this.default_anchor,s.text.optional="boolean"==typeof s.text.optional&&s.text.optional,s.text.interactive=s.text.interactive||s.interactive),s.stick&&(s.stick.color=wy.createColorPropertyCache(s.stick.color)),s},default_anchor:["bottom","top","right","left"],computeLayout:function(s,l,f,g,_){var k=s||{};k.id=l,k.units_per_pixel=_.units_per_pixel||1,k.collide=!1!==f.collide,k.anchor=f.anchor,k.offset=wy.evalCachedProperty(f.offset,g)||wy.zeroPair,k.buffer=wy.evalCachedProperty(f.buffer,g)||wy.zeroPair,k.repeat_distance=wy.evalCachedProperty(f.repeat_distance,g),k.repeat_distance&&(k.repeat_distance*=k.units_per_pixel,k.repeat_scale=1,k.repeat_group="function"==typeof f.repeat_group?f.repeat_group(g):f.repeat_group);var q=f.priority;return null!=q?"function"==typeof q&&(q=q(g)):q=-1>>>0,k.priority=q,k},buildTextLabels:function(s,l){for(var f=[],g=0;g<l.length;g++){var _=l[g];_.label=new V1(_.point_label.position,this.texts[s.id][_.text_settings_key][_.text].size.collision_size,_.point_label.isFlat(),_.layout),f.push(_)}return f},buildLabels:function(s,l,f){var g=!!f.flat,_=[];if("Point"===l.type)_.push(new V1(l.coordinates,s,g,f));else if("MultiPoint"===l.type)for(var k=l.coordinates,q=0;q<k.length;++q)_.push(new V1(k[q],s,g,f));else if("LineString"===l.type)for(var _t=wD(l.coordinates,s,g,f),_n=0;_n<_t.length;++_n)_.push(_t[_n]);else if("MultiLineString"===l.type)for(var _i=l.coordinates,_o=0;_o<_i.length;_o++)for(var xa=wD(_i[_o],s,g,f),ka=0;ka<xa.length;++ka)_.push(xa[ka]);else if("Polygon"===l.type)if(f.placement===gM.CENTROID){var _l=Ry.centroid(l.coordinates);_.push(new V1(_l,s,g,f))}else for(var _f=l.coordinates,_a=0;_a<_f.length;_a++)for(var _g=wD(_f[_a],s,g,f),ty=0;ty<_g.length;++ty)_.push(_g[ty]);else if("MultiPolygon"===l.type)if(f.placement===gM.CENTROID){var ny=Ry.multiCentroid(l.coordinates);_.push(new V1(ny,s,g,f))}else for(var uy=l.coordinates,ry=0;ry<uy.length;ry++)for(var ly=uy[ry],cy=0;cy<ly.length;cy++)for(var by=wD(ly[cy],s,g,f),Oy=0;Oy<by.length;++Oy)_.push(by[Oy]);return _},makeVertexTemplate:function(s,l){var g=s.color||wy.defaults.color,_=l.vertex_data.vertex_layout;return this.fillVertexTemplate(_,"a_position",0,{size:2}),this.fillVertexTemplate(_,"a_position",s.z||0,{size:1,offset:2}),this.fillVertexTemplate(_,"a_position",this.scaleOrder(s.order),{size:1,offset:3}),this.fillVertexTemplate(_,"a_shape",0,{size:4}),this.fillVertexTemplate(_,"a_shape",s.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(_,"a_texcoord",0,{size:2}),this.fillVertexTemplate(_,"a_offset",0,{size:2}),this.fillVertexTemplate(_,"a_color",r0.mult(g,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&l.variant.shader_point&&(this.fillVertexTemplate(_,"a_outline_color",r0.mult(s.outline_color||wy.defaults.outline.color,255),{size:4}),this.fillVertexTemplate(_,"a_outline_edge",s.outline_edge_pct||wy.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(_,"a_selection_color",r0.mult(s.selection_color,255),{size:4}),this.fillVertexTemplate(_,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&s.stick&&(this.fillVertexTemplate(_,"a_is_stick",0,{size:1}),this.fillVertexTemplate(_,"a_stick_height",s.stick.height,{size:1})),this.vertex_template},buildQuad:function(s,l,f,g,_,k,q,$,_t,_n,_i,_o,xa,ka,_l,_f,_a,_g,ty){return l[0]<=0||l[1]<=0?0:function(ny,uy,ry,ly){var cy,by,Oy,My,Sy,Vy,Ly,e0=ly.quad,Wy=ly.offset,E0=ly.offsets,q0=ly.offsets_alt,F0=ly.pre_angles,_0=ly.pre_angles_alt,o_=ly.angle,J0=ly.angles,b_=ly.angles_alt,z0=ly.is_flat,w_=ly.elevate_by_altitude,x1=ly.build_stick_points,u1=ly.color,i1=ly.stick_color,ix=ly.curve,c_=ly.texcoord_normalize,t1=ly.pre_angles_normalize,z1=ly.angles_normalize,O1=ly.offsets_normalize,R1=e0[0]/2*(Ly=(Ly=ly.quad_normalize)||1),N2=e0[1]/2*Ly,ox=[[-R1,-N2],[R1,-N2],[R1,N2],[-R1,N2]],sx=uy.vertex_elements,o1=uy.vertex_count,Pw=uy.vertex_layout.index,OE=Pw.a_texcoord,Zx=Pw.a_position,RE=Pw.a_shape,YD=Pw.a_offset,hC=Pw.a_offsets,P2=Pw.a_offsets_alt,yT=Pw.a_pre_angles,$_=Pw.a_pre_angles_alt,Nx=Pw.a_angles,Xx=Pw.a_angles_alt,yR=Pw.a_is_flat,W1=Pw.a_is_stick,d_=Pw.a_color;OE&&(c_=c_||1,Vy=[[by=(cy=g0(ly.texcoord_scale||eT,4))[0],Oy=cy[1]],[My=cy[2],Oy],[My,Sy=cy[3]],[by,Sy]]);for(var t2=0,o0=ny.length,fC=0;fC<o0;fC++){var e2=ny[fC];if(x1){for(var pC=.5*Ly,dC=+Ly,_A=[[-pC,0],[+pC,0],[+pC,dC],[-pC,dC]],NE=0;NE<4;NE++)OE&&(ry[OE+0]=Vy[NE][0]*c_,ry[OE+1]=Vy[NE][1]*c_),ry[Zx+0]=e2[0],ry[Zx+1]=e2[1],w_&&(ry[Zx+2]=J_.clamp(e2[2],0,32767)),ry[RE+0]=_A[NE][0],ry[RE+1]=_A[NE][1],ry[RE+2]=0,ry[d_+0]=i1[0],ry[d_+1]=i1[1],ry[d_+2]=i1[2],ry[d_+3]=i1[3],ry[W1+0]=255,uy.addVertex(ry);sx.push(o1+0),sx.push(o1+1),sx.push(o1+2),sx.push(o1+2),sx.push(o1+3),sx.push(o1+0),o1+=4,t2+=2}for(var bA=0;bA<4;bA++)OE&&(ry[OE+0]=Vy[bA][0]*c_,ry[OE+1]=Vy[bA][1]*c_),ry[Zx+0]=e2[0],ry[Zx+1]=e2[1],w_&&(ry[Zx+2]=J_.clamp(e2[2],0,32767)),ry[RE+0]=ox[bA][0],ry[RE+1]=ox[bA][1],ry[RE+2]=o_,ry[d_+0]=u1[0],ry[d_+1]=u1[1],ry[d_+2]=u1[2],ry[d_+3]=u1[3],ry[YD+0]=Wy[0],ry[YD+1]=Wy[1],ry[yR+0]=z0?255:0,x1&&(ry[W1+0]=0),ix&&(ry[yT+0]=t1*F0[0],ry[yT+1]=t1*F0[1],ry[yT+2]=t1*F0[2],ry[yT+3]=t1*F0[3],ry[Nx+0]=z1*J0[0],ry[Nx+1]=z1*J0[1],ry[Nx+2]=z1*J0[2],ry[Nx+3]=z1*J0[3],ry[hC+0]=O1*E0[0],ry[hC+1]=O1*E0[1],ry[hC+2]=O1*E0[2],ry[hC+3]=O1*E0[3],q0&&(ry[P2+0]=O1*q0[0],ry[P2+1]=O1*q0[1],ry[P2+2]=O1*q0[2],ry[P2+3]=O1*q0[3],ry[$_+0]=t1*_0[0],ry[$_+1]=t1*_0[1],ry[$_+2]=t1*_0[2],ry[$_+3]=t1*_0[3],ry[Xx+0]=z1*b_[0],ry[Xx+1]=z1*b_[1],ry[Xx+2]=z1*b_[2],ry[Xx+3]=z1*b_[3])),uy.addVertex(ry);sx.push(o1+0),sx.push(o1+1),sx.push(o1+2),sx.push(o1+2),sx.push(o1+3),sx.push(o1+0),o1+=4,t2+=2}return t2}(s,_l,_f,{quad:l,quad_normalize:256,offset:$,offsets:_t,offsets_alt:_n,pre_angles:k,pre_angles_alt:q,angle:4096*f,angles:g,angles_alt:_,is_flat:xa,elevate_by_altitude:ka,build_stick_points:_a,stick_color:_a&&r0.mult(_g,255),color:r0.mult(ty||wy.defaults.color,255),curve:_o,texcoord_scale:_i,texcoord_normalize:65535,pre_angles_normalize:SP,angles_normalize:d8,offsets_normalize:64})},build:function(s,l,f){var g=s.label;return"curved"===g.type?this.buildCurvedLabel(g,s,l,f):this.buildStraightLabel(g,s,l,f)},buildStraightLabel:function(s,l,f,g){var _,k=this.makeVertexTemplate(l,f),q=s.angle||l.angle,$="point"!==s.type?(_=l.size[s.type],eT):(_=l.size,l.texcoords||eT);f.uniforms=f.uniforms||{},l.label_texture?(f.uniforms.u_texture=l.label_texture,f.uniforms.u_point_type=2,f.uniforms.u_apply_color_blocks=!1):(l.texture?(f.uniforms.u_texture=l.texture,f.uniforms.u_point_type=1):(f.uniforms.u_texture=this.textureManager.default,f.uniforms.u_point_type=3),f.uniforms.u_apply_color_blocks=!0);var _n=this.defines.TANGRAM_POINT_DRAW_STICK&&!l.label_texture&&l.stick&&0<l.stick.height,_i=this.buildQuad([s.position],_,q,null,null,null,null,s.offset,null,null,$,!1,s.isFlat(),l.elevate_by_altitude,f.vertex_data,k,_n,_n&&l.stick.color,l.color);return this.trackLabel(s,l.linked&&l.linked.label.id,f,_i,g,_n),_i},buildCurvedLabel:function(s,l,f,g){for(var _=this.makeVertexTemplate(l,f),k=s.angle,q=0,$=0;$<2;$++)for(var _t=0;_t<s.num_segments;_t++){var _n=l.size[s.type][_t],_i=eT,_o=this.getTileMesh(g.tile,this.getMeshVariantTypeForDraw(l));_o.uniforms=_o.uniforms||{},_o.uniforms.u_texture=l.label_texture,_o.uniforms.u_point_type=2,_o.uniforms.u_apply_color_blocks=!1;var _g=s.num_segments-_t-1,ry=this.buildQuad([s.position],_n,k,s.angles[_t],s.alt_angles[_g],s.pre_angles[_t],s.alt_pre_angles[_g],s.offset||[0,0],s.offsets[_t],s.alt_offsets[_g],_i,!0,s.isFlat(),l.elevate_by_altitude,_o.vertex_data,_,!1,!1,l.color);q+=ry,this.trackLabel(s,l.linked&&l.linked.label.id,f,ry,g,!1)}return q},trackLabel:function(s,l,f,g,_,k){var q=5<arguments.length&&void 0!==k&&k;f.labels=f.labels||{},f.labels.collision=f.labels.collision||{},f.labels["non-collision"]=f.labels["non-collision"]||{};var $=s.layout.collide?f.labels.collision:f.labels["non-collision"];$[s.id]=$[s.id]||{container:{label:s.text_data?Object.assign(s.toJSON(),{text_data:s.text_data}):s.toJSON(),linked:l},ranges:[]};var _t=2*g,_n=f.vertex_data.offset-f.vertex_data.stride*_t;$[s.id].ranges.push([_n,_t,q])},buildLines:function(s,l,f,g){return this.build(l,f,g)},buildPoints:function(s,l,f,g){return this.build(l,f,g)},buildPolygons:function(s,l,f,g){return this.build(l,f,g)},vertexLayoutForMeshVariant:function(s){var l;return this.vertex_layout||(l=[{name:"a_position",size:4,type:d0.SHORT,normalized:!1},{name:"a_shape",size:4,type:d0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:d0.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:d0.SHORT,normalized:!1},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:d0.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:d0.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&l.push({name:"a_is_stick",size:1,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:d0.FLOAT,normalized:!1}),this.vertex_layout=new S2(l),(l=l.map(function(f){return Object.assign({},f)})).forEach(function(f){"a_outline_color"!==f.name&&"a_outline_edge"!==f.name||(f.static=null)}),this.vertex_layout_shader_point=new S2(l)),s.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(s){var l=s.label_texture||s.texture||this.default_mesh_variant.key;return{key:l,shader_point:l===this.default_mesh_variant.key,order:s.label_texture?1:0}},makeMesh:function(s,l,f){var g=2<arguments.length&&void 0!==f?f:{};return g=Object.assign({},g,{fade_in_time:this.fade_in_time}),r1.makeMesh.call(this,s,l,g)}});var sC=[0,.33,.66,.99],TD=function(s,l,f,g,_){for(var k=[{type:"straight",tolerance:_.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],q=0;q<k.length;q++){var $=k[q],_t=void 0;if("straight"===$.type?_t=new g8(l,f,g,_,$.tolerance):"curved"===$.type&&!_.no_curving&&2<f.length&&(_t=new R4(s,f,g,_)),_t&&!_t.throw_away)return _t}return!1},uT=function(){function s(l,f){A0(this,s),this.id=uM.nextLabelId(),this.layout=f,this.position=[],this.angle=0,this.offset=f.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=l,this._circles=void 0,this.placed=null}return L0(s,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:SO(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var l=this.getAABB(),_=l.right,k=l.bottom;return R0.pointInTile([l.left,l.top])&&R0.pointInTile([_,k])}},{key:"getAABBForSegment",value:function(l,f,g,_){var k,q=this.unit_scale,$=f/2,_t=g/2,_n=g0(l,2),_i=_n[0],_o=_n[1];0===this.offset[0]&&0===this.offset[1]||(_i+=(k=r0.rot(this.offset,this.angle))[0]*q,_o-=k[1]*q);var xa=[[Math.cos(_),-Math.sin(_)],[Math.sin(_),Math.cos(_)]],ka=r0.multMatrix(xa,[-$,-_t]),_l=r0.multMatrix(xa,[$,-_t]),_f=r0.multMatrix(xa,[$,_t]),_a=r0.multMatrix(xa,[-$,_t]);return{left:_i+Math.min(ka[0],_l[0],_f[0],_a[0]),top:_o+Math.max(ka[1],_l[1],_f[1],_a[1]),right:_i+Math.max(ka[0],_l[0],_f[0],_a[0]),bottom:_o+Math.min(ka[1],_l[1],_f[1],_a[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(l){for(var f=[l[0]],g=0,_=0,k=0,q=f,$=!1,_t=1;_t<l.length;_t++){var _n=l[_t],_i=l[_t-1],_o=r0.length(r0.sub(_n,_i));_n[0]>_i[0]?1===k?(f.push(_n),_<(g+=_o)&&(q=f,_=g,$=!1)):(f=[_i,_n],_<(g=_o)&&(q=f,_=g,$=!1),k=1):_n[0]<_i[0]?-1===k?(f.unshift(_n),_<(g+=_o)&&(q=f,_=g,$=!0)):(f=[_n,_i],_<(g=_o)&&(q=f,_=g,$=!0),k=-1):(-1===k?f.unshift(_n):(f.push(_n),k=1),_<(g+=_o)&&(q=f,_=g,$=-1===k))}return[q,$]}}]),s}(),g8=function(){M1(l,uT);var s=j1(l);function l(f,g,_,k,q){var $;return A0(this,l),($=s.call(this,_,k)).type="straight",$.size=f,$.throw_away=!$.fit(f,g,k,q),$}return L0(l,[{key:"fit",value:function(f,g,_,k){var q,$=this.unit_scale,_t=g0(uT.splitLineByOrientation(g),2);g=_t[0],q=_t[1],"number"==typeof _.orientation&&(this.offset[1]+=1.2*(f[1]-_.vertical_buffer),q&&(this.offset[1]*=-1),-1===_.orientation&&(this.offset[1]*=-1));for(var _n=N4(g),_i=f[0]*$,_o=0;_o<g.length-1;_o++)for(var xa=g[_o],ka=0,_l=0,_f=_o+1,_a=void 0;_f<g.length;){var ty=g[_f],ny=yM(g[_f-1],ty);if(_f!==_o+1&&(ka+=function(ry,ly){var cy,by;for(by=ly<ry?(cy=ly,ry):(cy=ry,ly);by-cy>Math.PI;)cy+=2*Math.PI;return Math.abs(by-cy)}(ny,_a)),.1<Math.abs(ka))break;if(_i/(_l+=_n[_f-1])<k){var uy=r0.mult(r0.add(xa,ty),.5);return this.angle=-ny,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof _.orientation&&(this.offset[1]*=-1)),this.position=uy,this.breach=!this.inTileBounds(),!0}_a=ny,_f++}return!1}},{key:"getBoundingCircles",value:function(){var f,g,_,k,q,$,_t,_n,_i,_o,xa,ka,_l;return this._circles||(q=-(_=(g=this.size[0]/2*(f=this.unit_scale))*Math.cos(this.angle)),$=-(k=g*Math.sin(this.angle)),_t=this.offset[0]*f,_n=this.offset[1]*f,_o=(_i=g0(this.position,2))[0],xa=_i[1],xa*=-1,_t&&(r0.normalize(ka=[_,k]),ka[0]*=_t,ka[1]*=_t,_o+=ka[0],xa+=ka[1]),_n&&(r0.normalize(_l=[k,-_]),_l[0]*=_n,_l[1]*=_n,_o-=_l[0],xa-=_l[1]),this._circles=lM(_+=_o,k+=xa,q+=_o,$+=xa,this.size[1]/2*f)),this._circles}},{key:"getAABB",value:function(){var f,g,_;return this._aabb||(this._aabb=this.getAABBForSegment(this.position,((g=this.size)[0]+2*(_=this.layout.buffer)[0])*(f=this.unit_scale),(g[1]+2*_[1])*f,this.angle)),this._aabb}}]),l}(),R4=function(){M1(l,uT);var s=j1(l);function l(f,g,_,k){var q;return A0(this,l),(q=s.call(this,_,k)).type="curved",q.positions=[],q.angles=[],q._aabbs=[],q.pre_angles=[],q.offsets=[],q.num_segments=f.length,q.sizes=f,q.alt_angles=[],q.alt_pre_angles=[],q.alt_offsets=[],q.throw_away=!q.fit(q.sizes,g,k),q}return L0(l,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:SO(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(f,g,_){var k,q=this.unit_scale,$=Math.max.apply(Math,l_(f.map(function(E1){return E1[1]}))),_t=$*q,_n=g0(uT.splitLineByOrientation(g),2);g=_n[0],k=_n[1],"number"==typeof _.orientation&&(this.offset[1]+=1.2*($-_.vertical_buffer),k&&(this.offset[1]*=-1),-1===_.orientation&&(this.offset[1]*=-1));var _i=N4(g),_o=f.map(function(E1){return E1[0]*q}),xa=_i.reduce(function(E1,c_){return E1+c_},0),ka=_o.reduce(function(E1,c_){return E1+c_},0);if(xa<ka)return!1;var _l=g.length-1;if(_l<2)return!1;var _f=l.curvaturePlacement(g,xa,_i,ka,0,_l);if(-1===_f||_l-_f<2)return!1;this.position=g[_f];for(var _g=0;_g<_o.length;_g++){this.positions[_g]=[],this.offsets[_g]=[],this.angles[_g]=[],this.pre_angles[_g]=[];for(var ty=0;ty<sC.length;ty++){var ny=sC[ty],uy=g0(l.scaleLine(ny,g),2),cy=l.placeAtIndex(_f,uy[0],uy[1],_o),by=cy.positions,My=cy.angles,Sy=cy.pre_angles,Vy=cy.offsets.map(function(c_){return Math.sqrt(c_[0]*c_[0]+c_[1]*c_[1])/q});if(0===ny){this.angle=1/My.length*My.reduce(function(c_,t1){return c_+t1});for(var e0=0;e0<by.length;e0++)this._aabbs.push(this.getAABBForSegment(by[e0],_o[e0],_t,Sy[e0]+My[e0]))}this.positions[_g].push(by[_g]),this.offsets[_g].push(Vy[_g]),this.angles[_g].push(My[_g]),this.pre_angles[_g].push(Sy[_g])}}_o=f.slice().reverse().map(function(c_){return c_[0]*q});for(var F0=0;F0<_o.length;F0++){this.alt_offsets[F0]=[],this.alt_angles[F0]=[],this.alt_pre_angles[F0]=[];for(var _0=0;_0<sC.length;_0++){var o_=sC[_0],J0=g0(l.scaleLine(o_,g),2),b_=J0[0],w_=l.placeAtIndex(_f,b_,J0[1],_o),u1=w_.angles,i1=w_.pre_angles,ix=w_.offsets.map(function(c_){return Math.sqrt(c_[0]*c_[0]+c_[1]*c_[1])/q});0===o_&&(this.alt_angle=1/u1.length*u1.reduce(function(c_,t1){return c_+t1})),this.alt_offsets[F0].push(ix[F0]),this.alt_angles[F0].push(u1[F0]),this.alt_pre_angles[F0].push(i1[F0])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var f=[],g=this.unit_scale,_=0;_<this.positions.length;_++){var k=this.sizes[_],q=this.angles[_][0],$=this.positions[_][0],_t=k[0]/2*g,_n=_t*Math.cos(q),_i=_t*Math.sin(q),_o=-_n,xa=-_i,ka=g0($,2),_l=ka[0],_f=ka[1],_a=lM(_n+=_l,_i+=_f*=-1,_o+=_l,xa+=_f,k[1]/2*g);Array.prototype.push.apply(f,_a)}this._circles=f}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var f=1/0,g=-1/0,_=-1/0,k=1/0,q=0;q<this._aabbs.length;q++){var $=this._aabbs[q];f=Math.min(f,$.left),g=Math.max(g,$.top),_=Math.max(_,$.right),k=Math.min(k,$.bottom)}this._aabb={left:f,top:g,right:_,bottom:k}}return this._aabb}}],[{key:"curvaturePlacement",value:function(f,g,_,k,q,$){$=$||f.length-1;for(var _t=[],_n=(q=q||0)+1;_n<$;_n++){var _o=f[_n],xa=f[_n+1],ka=r0.perp(_o,f[_n-1]),_l=r0.perp(xa,_o),_f=r0.angleBetween(ka,_l);1<_f&&(_f=1/0),_t.push(_f)}_t.push(1/0);for(var _a=[],_g=[],ty=q,ny=0,uy=0;uy<q;uy++)ny+=_[uy];for(;ny+k<g;){for(var ry=ny+k,ly=ny,cy=ty,by=0;cy<$&&ly+_[cy]<ry&&(by+=_t[cy])!==1/0;)ly+=_[cy],cy++;if(0===by)return ty;var Oy=by/(cy-ty);_a.push(by),_g.push(Oy),ny+=_[ty],ty++}if(0===_a.length)return-1;var My=Math.min.apply(null,_a),Sy=_g[_a.indexOf(My)];return My<1.3&&Sy<.4?_a.indexOf(My):-1}},{key:"scaleLine",value:function(f,g){var _=[g[0]],k=[];return g.forEach(function(q,$){var _t,_n;$!==g.length-1&&(_t=r0.sub(g[$+1],g[$]),_n=r0.mult(_t,1+f),_.push(r0.add(_[$],_n)),k.push(r0.length(_n)))}),[_,k]}},{key:"placeAtIndex",value:function(f,g,_,k){var q=g[f],$=g0(l.getIndicesAndOffsets(f,_,k),2),_t=$[0],_i=l.getPositionsFromIndicesAndOffsets(g,_t,$[1]),_o=g0(l.getAnglesFromIndicesAndOffsets(q,_t,g,_i),3);return{positions:_i,offsets:_o[0],angles:_o[1],pre_angles:_o[2]}}},{key:"getIndicesAndOffsets",value:function(f,g,_){for(var k=_.length,q=[],$=[],_t=0,_n=0,_i=0;_t<k;){for(var _o=_[_t];_t<k&&_n+.5*_o<=_i+g[f];)$.push(_n-_i+.5*_o),q.push(f),_n+=_o,_o=_[++_t];_i+=g[f],f++}return[q,$]}},{key:"getPositionsFromIndicesAndOffsets",value:function(f,g,_){for(var k=[],q=0;q<g.length;q++){var $=g[q],_t=_[q],_n=yM(f[$],f[$+1]),_i=r0.rot([_t,0],_n),_o=r0.add(f[$],_i);k.push(_o)}return k}},{key:"getAnglesFromIndicesAndOffsets",value:function(f,g,_,k){for(var _t=[],_n=[],_i=[],_o=0;_o<k.length;_o++){var xa,ka,_f=g[_o],_a=r0.sub(k[_o],f),_g=-r0.angle(_a),ty=-yM(_[_f],_[_f+1])-_g;0<_o&&(xa=_t[_o-1],ka=_n[_o-1],Math.abs(_g-xa)>Math.PI&&(_g+=xa<_g?-2*Math.PI:2*Math.PI),Math.abs(ka-ty)>Math.PI&&(ty+=ka<ty?-2*Math.PI:2*Math.PI)),_t.push(_g),_n.push(ty),_i.push(_a)}return[_i,_t,_n]}}]),l}();function yM(s,l){var f=r0.sub(l,s);return r0.angle(f)}function N4(s){for(var l=[],f=0;f<s.length-1;f++){var g=s[f],_=s[f+1],k=Math.hypot(g[0]-_[0],g[1]-_[1]);l.push(k)}return l}var HO=Object.create(Rw);Object.assign(HO,{name:"text",super:Rw,built_in:!0,init:function(s){var l=0<arguments.length&&void 0!==s?s:{};r1.init.call(this,l),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(s,l){this.super.makeVertexTemplate.apply(this,arguments);var f=l.vertex_data.vertex_layout;return this.fillVertexTemplate(f,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(f,"a_offsets",0,{size:4}),this.fillVertexTemplate(f,"a_angles",0,{size:4}),this.fillVertexTemplate(f,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(f,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(f,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(s,l,f){var g=this,_=f.tile,k=s.geometry.type;l.can_articulate="LineString"===k||"MultiLineString"===k,l.supersample_text="LineString"===k||"MultiLineString"===k;var q=this.parseTextFeature(s,l,f,_);q&&(q instanceof Array?q.forEach(function($){$.feature=s,$.context=f,$.layout.vertex=!1,g.queueFeature($,_)}):(q.feature=s,q.context=f,q.layout.vertex=!1,this.queueFeature(q,_)),ex.addStyle(this.name,_.id))},endData:function(s){var l=this,f=this.queues[s.id];return delete this.queues[s.id],this.collideAndRenderTextLabels(s,this.name,f).then(function(g){var _=g.labels,k=g.texts;return _&&k&&(l.texts[s.id]=k,_.forEach(function(q){var $=q.text_settings_key,_t=l.texts[s.id][$]&&l.texts[s.id][$][q.text],_n=l.feature_style;_n.label=q.label,q.label.text_data={text_info:_t,text_settings_key:$,text:q.text},_n.label_texture=l.textureManager.default,_t.text_settings.can_articulate?(_n.size={},"straight"===q.label.type?_n.size.straight=_t.size.logical_size:_n.size.curved=_t.segment_sizes.map(function(_i){return _i.logical_size})):_n.size=_t.size.logical_size,r1.addFeature.call(l,q.feature,q.draw,q.context)})),l.freeText(s),r1.endData.call(l,s).then(function(q){if(q){for(var $ in q.meshes)q.meshes[$].uniforms.u_apply_color_blocks=!0;s.mesh_data[l.name]=q}return q})})},_preprocess:function(s){return this.preprocessText(s)},buildTextLabels:function(s,l){for(var f=[],g=0;g<l.length;g++){var _,$,k=l[g],q=this.texts[s.id][k.text_settings_key][k.text];k.layout.vertical_buffer=q.vertical_buffer,$=q.text_settings.can_articulate?(_=q.segment_sizes.map(function(_i){return _i.collision_size}),k.layout.no_curving=q.no_curving,this.buildLabels(_,k.feature.geometry,k.layout,q.size.collision_size)):this.buildLabels(q.size.collision_size,k.feature.geometry,k.layout);for(var _t=0;_t<$.length;_t++){var _n=Object.create(k);_n.label=$[_t],f.push(_n)}}return f},buildLabels:function(s,l,f,g){var _,k,q="Point"!==l.type,$=[];if("LineString"===l.type)Array.prototype.push.apply($,this.buildLineLabels(l.coordinates,s,q,f,g));else if("MultiLineString"===l.type)for(var _t=l.coordinates,_n=0;_n<_t.length;++_n)Array.prototype.push.apply($,this.buildLineLabels(_t[_n],s,q,f,g));else if("Point"===l.type)$.push(new V1(l.coordinates,s,q,f));else if("MultiPoint"===l.type)for(var _i=l.coordinates,_o=0;_o<_i.length;++_o)$.push(new V1(_i[_o],s,q,f));else"Polygon"===l.type?(_=Ry.centroid(l.coordinates),$.push(new V1(_,s,q,f))):"MultiPolygon"===l.type&&(k=Ry.multiCentroid(l.coordinates),$.push(new V1(k,s,q,f)));return $},buildLineLabels:function(s,l,f,g,_){var k,q=[],$=Math.min(g.subdiv,s.length-1);if(1<$)for(var _t=(s.length-1)/$,_n=0;_n<$;_n++){var _i=Math.floor(_n*_t),_o=Math.floor((_n+1)*_t)+1,xa=s.slice(_i,_o),ka=TD(l,_,xa,f,g);ka&&q.push(ka)}return q.length<$&&(k=TD(l,_,s,f,g))&&q.push(k),q},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new S2([{name:"a_position",size:4,type:d0.SHORT,normalized:!1},{name:"a_shape",size:4,type:d0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:d0.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:d0.SHORT,normalized:!1},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:d0.SHORT,normalized:!1},{name:"a_offsets",size:4,type:d0.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:d0.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:d0.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:d0.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:d0.SHORT,normalized:!1}])),this.vertex_layout},getMeshVariantTypeForDraw:Rw.getMeshVariantTypeForDraw}),HO.texture_id=0;var P4=Object.create(rT);Object.assign(P4,{name:"raster",super:rT,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(s){return s.color=s.color||wy.defaults.color,this.super._preprocess.apply(this,arguments)}});var UO=Object.create(Rw);Object.assign(UO,{name:"custom_icons",collision:!1,init:function(s){var l=0<arguments.length&&void 0!==s?s:{};Rw.init.call(this,l)},loadTexture:function(s,l,f){var g,_=s.width,k=s.height,q=s.items,$=document.createElement("canvas"),_t=R0.device_pixel_ratio,_n=this.sources[l],_i={sprites:{}};if($.width=_*_t,$.height=k*_t,_n){var _o,xa=q.length,ka=$.getContext("2d");for(ka.scale(_t,_t);_o=q[--xa];){var _l,_f=_n.getIconBitmapByObjectId(_o.meta.objectId,_o.meta.id);_f&&((_l=nP(_f))?qy("error",_l):(ka.drawImage(_f,_o.x,_o.y,_o.width,_o.height),_i.sprites[_o.meta.id]=[_o.x,_o.y,_o.width,_o.height]))}}return _i.element=$,(g=this.textureManager.create(this.gl,f,_i)).retain(),g.loading.then(function(_a){return _a.name})},buildRasterTextures:function(s,l){return s0.postMessage(this.main_thread_target+".loadTexture",s.rasters,s.source,s.texture_name).then(function(f){return l.textures.push(f),l})},addFeature:function(s,l,f){var g=f.tile.rasters,_={};g.items.forEach(function($){_[$.meta.id]=[$.x,$.y,$.width,$.height]});var k="".concat(f.tile.source,"_dyn_").concat(f.tile.coords.key,"_").concat(this.generation,"_").concat(f.tile.id);l.texture=f.tile.texture_name=k;var q=Object.assign({},MP,{name:k,width:g.width,height:g.height,sprites:_,manager:this.textureManager});qC.prototype.calculateSprites.apply(q),this.textureManager.textures[k]=q,Rw.addFeature.apply(this,arguments),delete this.textureManager.textures[k]}});var MP={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},IP=Object.create(rT);Object.assign(IP,{name:"overlays",super:rT,init:function(s){var l=0<arguments.length&&void 0!==s?s:{};this.selection=l.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!n1.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var s=!1;for(var l in this.sources)if(this.sources[l]instanceof cO){s=!0;break}return!!s&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",QL,"Raster"),!0)},loadTextures:function(s,l){var f,g,_,k=this.sources[l],q=s.name;if(s.overlays_config.forEach(function(_n){var _i,_o=_n.texcoords,ka=k.getMapObjectById(_n.id),_l=ka.getBitmap();_l&&((_i=nP(_l=rP(_l,_l.width,_l.height)))?qy("error",_i):(f||((f=document.createElement("canvas")).width=s.width,f.height=s.height,g=f.getContext("2d")),g.save(),g.globalAlpha=ka.getOpacity(),_o.forEach(function(_f){return g.drawImage(_l,_f[0],_f[1],_f[2],_f[3])}),g.restore(),_=!0))}),_){s.element=f;var $={};return $[q]=s,this.super.loadTextures.call(this,$)}var _t=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:_t.name,width:_t.width,height:_t.height,loaded:_t.loaded}])},buildRasterTextures:function(s,l){var f=this.sources[s.source].tileTexture(s);return f?s0.postMessage(this.main_thread_target+".loadTextures",f,s.source).then(function(g){if(!g||g.length<1)return l;if(g.some(function(k){return!k.loaded}))return null;var _=g[0].name;return l.uniforms=l.uniforms||{},l.textures=l.textures||[],l.uniforms.u_raster=_,l.uniforms.u_raster_offset=[0,0,1],l.textures.push(_),l}):Promise.resolve(l)}});var mM=Object.create(r1),GO=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(mM,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){r1.init.apply(this,arguments),this.selection=!1},_preprocess:function(s){return s.color={top:wy.createColorPropertyCache(s.color.zenith),bottom:wy.createColorPropertyCache(s.color.horizon),fog:wy.createColorPropertyCache(s.color.fog)},s},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new S2([{name:"a_position",size:2,type:d0.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:d0.FLOAT,normalized:!0},{name:"a_color",size:4,type:d0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:d0.FLOAT,normalized:!0}])),this.vertex_layout},makeVertexTemplate:function(){var s=0;return this.vertex_template[s++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(s,l,f){var g=this.feature_style;return l.color&&l.color.top&&l.color.bottom&&(g.color_top=this.parseColor(l.color.top,f),g.color_bottom=this.parseColor(l.color.bottom,f),g.color_fog=this.parseColor(l.color.fog||"white",f),Array.isArray(g.color_fog)&&(g.color_fog=g.color_fog.slice(),g.color_fog[3]=0)),g},buildGeometry:function(s,l,f){for(var g=this.makeVertexTemplate(l),_=f.vertex_data,k=f.vertex_data.vertex_layout,q=_.vertex_layout.index.a_position,$={top:l.color_top,bottom:l.color_bottom},_t={top:l.color_bottom,bottom:l.color_fog},_n=0,_i=GO.length-1;_n<_i;_n+=2){g[q+0]=GO[_n],g[q+1]=GO[_n+1];var _o=_n<12,xa=0<GO[_n+1],ka=_o?$:_t;this.fillVertexTemplate(k,"a_is_sky",_o?1:0,{size:1}),this.fillVertexTemplate(k,"a_is_top",xa?1:0,{size:1}),this.fillVertexTemplate(k,"a_color",r0.mult(xa?ka.top:ka.bottom,255),{size:4}),_.addVertex(g)}return 4}});var L4=function(){function s(){A0(this,s),this.styles={},this.base_styles={},this.register(Object.create(rT)),this.register(Object.create(Ow)),this.register(Object.create(sT)),this.register(Object.create(Rw)),this.register(Object.create(HO)),this.register(Object.create(P4)),this.register(Object.create(UO)),this.register(Object.create(IP)),this.register(Object.create(mM))}return L0(s,[{key:"init",value:function(){u0.removeBlock("global"),u0.removeBlock("setup"),u0.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),u0.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),u0.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),u0.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),u0.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),u0.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),u0.defines.TANGRAM_EPSILON=1e-5,u0.defines.TANGRAM_LAYER_DELTA=1/16384,u0.defines.TANGRAM_TILE_SCALE="vec3(".concat(Ry.tile_scale,"., ").concat(Ry.tile_scale,"., u_meters_per_pixel * ").concat(Ry.tile_size,".)"),u0.defines.TANGRAM_HEIGHT_SCALE=Ry.height_scale,u0.defines.TANGRAM_ALPHA_TEST=.1,Ow.dash_textures={}}},{key:"destroy",value:function(l){var f=this;Object.keys(this.styles).forEach(function(g){var _=f.styles[g];_.gl===l&&(qy("trace","StyleManager.destroy: destroying render style ".concat(_.name)),_.base&&f.remove(_.name),_.destroy())})}},{key:"register",value:function(l){this.styles[l.name]=l,this.base_styles[l.name]=l}},{key:"remove",value:function(l){delete this.styles[l]}},{key:"mix",value:function(l,f){if(l.mixed)return l;l.mixed={};var g=[];l.mix&&(Array.isArray(l.mix)?g.push.apply(g,l_(l.mix)):g.push(l.mix),(g=g.map(function(k){return f[k]}).filter(function(k){return k&&k!==l})).forEach(function(k){return l.mixed[k.name]=!0})),g.push(l),l.animated=g.some(function(k){return k&&k.animated}),l.texcoords=g.some(function(k){return k&&k.texcoords}),l.base=g.map(function(k){return k.base}).filter(function(k){return k}).pop(),l.lighting=g.map(function(k){return k.lighting}).filter(function(k){return null!=k}).pop(),l.texture=g.map(function(k){return k.texture}).filter(function(k){return k}).pop(),l.raster=g.map(function(k){return k.raster}).filter(function(k){return null!=k}).pop(),l.dash=g.map(function(k){return k.dash}).filter(function(k){return null!=k}).pop(),l.dash_background_color=g.map(function(k){return k.dash_background_color}).filter(function(k){return null!=k}).pop(),g.some(function(k){return k.hasOwnProperty("blend")&&k.blend})&&(l.blend=g.map(function(k){return k.hasOwnProperty("blend")&&k.blend}).filter(function(k){return k}).pop()),l.blend_order=g.map(function(k){return k.blend_order}).filter(function(k){return null!=k}).pop(),l.defines=Object.assign.apply(Object,[{}].concat(l_(g.map(function(k){return k.defines}).filter(function(k){return k})))),l.material=Object.assign.apply(Object,[{}].concat(l_(g.map(function(k){return k.material}).filter(function(k){return k}))));var _=g.map(function(k){return k.draw}).filter(function(k){return k});return 0<_.length&&(l.draw=aA.apply(void 0,[{}].concat(l_(_)))),this.mixShaders(l,f,g),l}},{key:"mixShaders",value:function(l,f,g){var _={},k=g.map(function(_i){return _i.shaders}).filter(function(_i){return _i});if(_.defines=Object.assign.apply(Object,[{}].concat(l_(k.map(function(_i){return _i.defines}).filter(function(_i){return _i})))),_.uniforms={},_._uniforms=l.shaders&&l.shaders.uniforms||{},_._uniform_scopes={},g.filter(function(_i){return _i.shaders&&_i.shaders.uniforms}).forEach(function(_i){for(var _o in _i.shaders.uniforms)!function(xa){_._uniform_scopes[xa]=_i.name,Object.defineProperty(_.uniforms,xa,{enumerable:!0,configurable:!0,get:function(){return void 0!==_._uniforms[xa]?_._uniforms[xa]:f[_._uniform_scopes[xa]].shaders.uniforms!==_.uniforms?f[_._uniform_scopes[xa]].shaders.uniforms[xa]:void 0},set:function(ka){_._uniforms[xa]=ka}})}(_o)}),_.extensions=Object.keys(k.map(function(_i){return _i.extensions}).filter(function(_i){return _i}).reduce(function(_i,_o){return"string"==typeof _o?_i[_o]=!0:_o.forEach(function(xa){return _i[xa]=!0}),_i},{})||{}),l.shaders&&l.shaders.blocks)for(var q in l.shaders.block_scopes=l.shaders.block_scopes||{},l.shaders.blocks){var $,_t=l.shaders.blocks[q];l.shaders.block_scopes[q]=l.shaders.block_scopes[q]||[],Array.isArray(_t)?($=l.shaders.block_scopes[q]).push.apply($,l_(_t.map(function(){return l.name}))):l.shaders.block_scopes[q].push(l.name)}var _n={};return k.forEach(function(_i){if(_i.blocks){_.blocks=_.blocks||{},_.block_scopes=_.block_scopes||{};var _o={};for(var xa in _i.blocks){var ka=_i.blocks[xa],_l=_i.block_scopes[xa];_.blocks[xa]=_.blocks[xa]||[],_.block_scopes[xa]=_.block_scopes[xa]||[],ka=Array.isArray(ka)?ka:[ka],_l=Array.isArray(_l)?_l:[_l];for(var _f=0;_f<ka.length;_f++)_n[_l[_f]]||(_o[_l[_f]]=!0,_.blocks[xa].push(ka[_f]),_.block_scopes[xa].push(_l[_f]))}Object.assign(_n,_o)}}),Object.assign(l.mixed,_n),l.shaders=_,l}},{key:"create",value:function(l,f,g){var _=2<arguments.length&&void 0!==g?g:{},k=aA({},f);return k.name=l,(k=this.mix(k,_)).base&&this.base_styles[k.base]?this.styles[l]=k=Object.assign(Object.create(this.base_styles[k.base]),k):k.base=null,k}},{key:"build",value:function(l){var f=this,g=Object.keys(l).sort(function(q,$){return f.inheritanceDepth(q,l)-f.inheritanceDepth($,l)});for(var _ in this.styles)this.base_styles[_]?this.styles[_].reset():delete this.styles[_];var k={};return g.forEach(function(q){k[q]=f.create(q,l[q],k)}),this.styles}},{key:"initStyles",value:function(l){var f=0<arguments.length&&void 0!==l?l:{};for(var g in this.styles)this.styles[g].init(f)}},{key:"inheritanceDepth",value:function(l,f){for(var g=this,_=0;;){var k=f[l];if(!k||!k.mix)break;if(_++,Array.isArray(k.mix)){_+=Math.max.apply(Math,l_(k.mix.map(function(q){if(l!==q)return g.inheritanceDepth(q,f)})));break}if(l===k.mix)break;l=k.mix}return _}}]),s}();function F4(s){return null==s}var w1={isNothing:F4,isObject:function(s){return"object"==typeof s&&null!==s},toArray:function(s){return Array.isArray(s)?s:F4(s)?[]:[s]},repeat:function(s,l){for(var f="",g=0;g<l;g+=1)f+=s;return f},isNegativeZero:function(s){return 0===s&&Number.NEGATIVE_INFINITY===1/s},extend:function(s,l){var f,g,_,k;if(l)for(f=0,g=(k=Object.keys(l)).length;f<g;f+=1)s[_=k[f]]=l[_];return s}};function kP(s,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=s,this.mark=l,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((kP.prototype=Object.create(Error.prototype)).constructor=kP).prototype.toString=function(s){var l=this.name+": ";return l+=this.reason||"(unknown reason)",!s&&this.mark&&(l+=" "+this.mark.toString()),l};var cE=kP;function OP(s,l,f,g,_){this.name=s,this.buffer=l,this.position=f,this.line=g,this.column=_}OP.prototype.getSnippet=function(s,l){var f,g,_,k,q;if(!this.buffer)return null;for(s=s||4,l=l||75,f="",g=this.position;0<g&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(g-1));)if(--g,this.position-g>l/2-1){f=" ... ",g+=5;break}for(_="",k=this.position;k<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(k));)if((k+=1)-this.position>l/2-1){_=" ... ",k-=5;break}return q=this.buffer.slice(g,k),w1.repeat(" ",s)+f+q+_+"\n"+w1.repeat(" ",s+this.position-g+f.length)+"^"},OP.prototype.toString=function(s){var l,f="";return this.name&&(f+='in "'+this.name+'" '),f+="at line "+(this.line+1)+", column "+(this.column+1),s||(l=this.getSnippet())&&(f+=":\n"+l),f};var y8=OP,m8=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],v8=["scalar","sequence","mapping"],Nw=function(s,l){var f,g;if(l=l||{},Object.keys(l).forEach(function(_){if(-1===m8.indexOf(_))throw new cE('Unknown option "'+_+'" is met in definition of "'+s+'" YAML type.')}),this.tag=s,this.kind=l.kind||null,this.resolve=l.resolve||function(){return!0},this.construct=l.construct||function(_){return _},this.instanceOf=l.instanceOf||null,this.predicate=l.predicate||null,this.represent=l.represent||null,this.defaultStyle=l.defaultStyle||null,this.styleAliases=(g={},null!==(f=l.styleAliases||null)&&Object.keys(f).forEach(function(_){f[_].forEach(function(k){g[String(k)]=_})}),g),-1===v8.indexOf(this.kind))throw new cE('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')};function ZE(s,l,f){var g=[];return s.include.forEach(function(_){f=ZE(_,l,f)}),s[l].forEach(function(_){f.forEach(function(k,q){k.tag===_.tag&&g.push(q)}),f.push(_)}),f.filter(function(_,k){return-1===g.indexOf(k)})}function gA(s){this.include=s.include||[],this.implicit=s.implicit||[],this.explicit=s.explicit||[],this.implicit.forEach(function(l){if(l.loadKind&&"scalar"!==l.loadKind)throw new cE("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=ZE(this,"implicit",[]),this.compiledExplicit=ZE(this,"explicit",[]),this.compiledTypeMap=function(){var l,f,g={};function _(k){g[k.tag]=k}for(l=0,f=arguments.length;l<f;l+=1)arguments[l].forEach(_);return g}(this.compiledImplicit,this.compiledExplicit)}gA.DEFAULT=null,gA.create=function(s,l){var f,g;switch(arguments.length){case 1:f=gA.DEFAULT,g=s;break;case 2:f=s,g=l;break;default:throw new cE("Wrong number of arguments for Schema.create function")}if(f=w1.toArray(f),g=w1.toArray(g),!f.every(function(_){return _ instanceof gA}))throw new cE("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!g.every(function(_){return _ instanceof Nw}))throw new cE("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new gA({include:f,explicit:g})};var aC=gA,vM=new aC({explicit:[new Nw("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return null!==s?s:""}}),new Nw("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return null!==s?s:[]}}),new Nw("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return null!==s?s:{}}})]}),qO=new Nw("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(s){if(null===s)return!0;var l=s.length;return 1===l&&"~"===s||4===l&&("null"===s||"Null"===s||"NULL"===s)},construct:function(){return null},predicate:function(s){return null===s},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),RP=new Nw("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(s){if(null===s)return!1;var l=s.length;return 4===l&&("true"===s||"True"===s||"TRUE"===s)||5===l&&("false"===s||"False"===s||"FALSE"===s)},construct:function(s){return"true"===s||"True"===s||"TRUE"===s},predicate:function(s){return"[object Boolean]"===Object.prototype.toString.call(s)},represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"}),WO=new Nw("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(s){if(null===s)return!1;var l,f,g,_,k=s.length,q=0,$=!1;if(!k)return!1;if("-"!==(l=s[q])&&"+"!==l||(l=s[++q]),"0"===l){if(q+1===k)return!0;if("b"===(l=s[++q])){for(q++;q<k;q++)if("_"!==(l=s[q])){if("0"!==l&&"1"!==l)return!1;$=!0}return $}if("x"===l){for(q++;q<k;q++)if("_"!==(l=s[q])){if(!(48<=(g=s.charCodeAt(q))&&g<=57||65<=g&&g<=70||97<=g&&g<=102))return!1;$=!0}return $}for(;q<k;q++)if("_"!==(l=s[q])){if(!(48<=(f=s.charCodeAt(q))&&f<=55))return!1;$=!0}return $}for(;q<k;q++)if("_"!==(l=s[q])){if(":"===l)break;if(!(48<=(_=s.charCodeAt(q))&&_<=57))return!1;$=!0}return!!$&&(":"!==l||/^(:[0-5]?[0-9])+$/.test(s.slice(q)))},construct:function(s){var l,f,g=s,_=1,k=[];return-1!==g.indexOf("_")&&(g=g.replace(/_/g,"")),"-"!==(l=g[0])&&"+"!==l||("-"===l&&(_=-1),l=(g=g.slice(1))[0]),"0"===g?0:"0"===l?"b"===g[1]?_*parseInt(g.slice(2),2):"x"===g[1]?_*parseInt(g,16):_*parseInt(g,8):-1!==g.indexOf(":")?(g.split(":").forEach(function(q){k.unshift(parseInt(q,10))}),g=0,f=1,k.forEach(function(q){g+=q*f,f*=60}),_*g):_*parseInt(g,10)},predicate:function(s){return"[object Number]"===Object.prototype.toString.call(s)&&s%1==0&&!w1.isNegativeZero(s)},represent:{binary:function(s){return"0b"+s.toString(2)},octal:function(s){return"0"+s.toString(8)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return"0x"+s.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),j4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),yA=/^[-+]?[0-9]+e/,YO=new aC({include:[vM],implicit:[qO,RP,WO,new Nw("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(s){return null!==s&&!!j4.test(s)},construct:function(s){var l,f=s.replace(/_/g,"").toLowerCase(),g="-"===f[0]?-1:1,_=[];return 0<="+-".indexOf(f[0])&&(f=f.slice(1)),".inf"===f?1==g?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===f?NaN:0<=f.indexOf(":")?(f.split(":").forEach(function(k){_.unshift(parseFloat(k,10))}),f=0,l=1,_.forEach(function(k){f+=k*l,l*=60}),g*f):g*parseFloat(f,10)},predicate:function(s){return"[object Number]"===Object.prototype.toString.call(s)&&(s%1!=0||w1.isNegativeZero(s))},represent:function(s,l){var f;if(isNaN(s))switch(l){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(l){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(l){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(w1.isNegativeZero(s))return"-0.0";return f=s.toString(10),yA.test(f)?f.replace("e",".e"):f},defaultStyle:"lowercase"})]}),NP=new aC({include:[YO]}),V4=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),$O=new Nw("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(s){return null!==s&&null!==V4.exec(s)},construct:function(s){var l,f,g,_,k,q,$,_t=0,_n=null,_i=V4.exec(s);if(null===_i)throw new Error("Date resolve error");if(l=+_i[1],f=_i[2]-1,g=+_i[3],!_i[4])return new Date(Date.UTC(l,f,g));if(_=+_i[4],k=+_i[5],q=+_i[6],_i[7]){for(_t=_i[7].slice(0,3);_t.length<3;)_t+="0";_t=+_t}return _i[9]&&(_n=6e4*(60*+_i[10]+ +(_i[11]||0)),"-"===_i[9]&&(_n=-_n)),$=new Date(Date.UTC(l,f,g,_,k,q,_t)),_n&&$.setTime($.getTime()-_n),$},instanceOf:Date,represent:function(s){return s.toISOString()}}),B4=new Nw("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(s){return"<<"===s||null===s}}),DD=o4.Buffer,KO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",z4=new Nw("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(s){if(null===s)return!1;for(var l,f=0,g=s.length,_=KO,k=0;k<g;k++)if(!(64<(l=_.indexOf(s.charAt(k))))){if(l<0)return!1;f+=6}return f%8==0},construct:function(s){for(var l,f=s.replace(/[\r\n=]/g,""),g=f.length,_=KO,k=0,q=[],$=0;$<g;$++)$%4==0&&$&&(q.push(k>>16&255),q.push(k>>8&255),q.push(255&k)),k=k<<6|_.indexOf(f.charAt($));return 0==(l=g%4*6)?(q.push(k>>16&255),q.push(k>>8&255),q.push(255&k)):18==l?(q.push(k>>10&255),q.push(k>>2&255)):12==l&&q.push(k>>4&255),DD?new DD(q):q},predicate:function(s){return DD&&DD.isBuffer(s)},represent:function(s){for(var l,f="",g=0,_=s.length,k=KO,q=0;q<_;q++)q%3==0&&q&&(f+=k[g>>18&63],f+=k[g>>12&63],f+=k[g>>6&63],f+=k[63&g]),g=(g<<8)+s[q];return 0==(l=_%3)?(f+=k[g>>18&63],f+=k[g>>12&63],f+=k[g>>6&63],f+=k[63&g]):2==l?(f+=k[g>>10&63],f+=k[g>>4&63],f+=k[g<<2&63],f+=k[64]):1==l&&(f+=k[g>>2&63],f+=k[g<<4&63],f+=k[64],f+=k[64]),f}}),SD=Object.prototype.hasOwnProperty,lT=Object.prototype.toString,ZO=new Nw("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(s){if(null===s)return!0;for(var l,f,g,_=[],k=s,q=0,$=k.length;q<$;q+=1){if(g=!1,"[object Object]"!==lT.call(l=k[q]))return!1;for(f in l)if(SD.call(l,f)){if(g)return!1;g=!0}if(!g||-1!==_.indexOf(f))return!1;_.push(f)}return!0},construct:function(s){return null!==s?s:[]}}),cT=Object.prototype.toString,MD=new Nw("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(s){if(null===s)return!0;for(var l,f,g=s,_=new Array(g.length),k=0,q=g.length;k<q;k+=1){if("[object Object]"!==cT.call(l=g[k])||1!==(f=Object.keys(l)).length)return!1;_[k]=[f[0],l[f[0]]]}return!0},construct:function(s){if(null===s)return[];for(var l,f,g=s,_=new Array(g.length),k=0,q=g.length;k<q;k+=1)l=g[k],f=Object.keys(l),_[k]=[f[0],l[f[0]]];return _}}),hT=Object.prototype.hasOwnProperty,fT=new aC({include:[NP],implicit:[$O,B4],explicit:[z4,ZO,MD,new Nw("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(s){if(null===s)return!0;var l,f=s;for(l in f)if(hT.call(f,l)&&null!==f[l])return!1;return!0},construct:function(s){return null!==s?s:{}}})]}),PP=new Nw("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(s){return void 0===s},represent:function(){return""}}),LP=new Nw("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(s){if(null===s||0===s.length)return!1;var l=s,f=/\/([gim]*)$/.exec(s),g="";return!("/"===l[0]&&(f&&(g=f[1]),3<g.length||"/"!==l[l.length-g.length-1]))},construct:function(s){var l=s,f=/\/([gim]*)$/.exec(s),g="";return"/"===l[0]&&(f&&(g=f[1]),l=l.slice(1,l.length-g.length-1)),new RegExp(l,g)},predicate:function(s){return"[object RegExp]"===Object.prototype.toString.call(s)},represent:function(s){var l="/"+s.source+"/";return s.global&&(l+="g"),s.multiline&&(l+="m"),s.ignoreCase&&(l+="i"),l}});try{var ID=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(s){"undefined"!=typeof window&&(ID=window.esprima)}var XO=new Nw("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(s){if(null===s)return!1;try{var f=ID.parse("("+s+")",{range:!0});return!("Program"!==f.type||1!==f.body.length||"ExpressionStatement"!==f.body[0].type||"FunctionExpression"!==f.body[0].expression.type)}catch(g){return!1}},construct:function(s){var l,f="("+s+")",g=ID.parse(f,{range:!0}),_=[];if("Program"!==g.type||1!==g.body.length||"ExpressionStatement"!==g.body[0].type||"FunctionExpression"!==g.body[0].expression.type)throw new Error("Failed to resolve function");return g.body[0].expression.params.forEach(function(k){_.push(k.name)}),l=g.body[0].expression.body.range,new Function(_,f.slice(l[0]+1,l[1]-1))},predicate:function(s){return"[object Function]"===Object.prototype.toString.call(s)},represent:function(s){return s.toString()}}),kD=aC.DEFAULT=new aC({include:[fT],explicit:[PP,LP,XO]}),XE=Object.prototype.hasOwnProperty,G4=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,q4=/[\x85\u2028\u2029]/,Yx=/[,\[\]\{\}]/,FP=/^(?:!|!!|![a-z\-]+!)$/i,jP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function I2(s){return 10===s||13===s}function pT(s){return 9===s||32===s}function wx(s){return 9===s||32===s||10===s||13===s}function RD(s){return 44===s||91===s||93===s||123===s||125===s}function VP(s){return 48===s?"\0":97===s?"\x07":98===s?"\b":116===s||9===s?"\t":110===s?"\n":118===s?"\v":102===s?"\f":114===s?"\r":101===s?"\x1b":32===s?" ":34===s?'"':47===s?"/":92===s?"\\":78===s?"\x85":95===s?"\xa0":76===s?"\u2028":80===s?"\u2029":""}for(var wM=new Array(256),tR=new Array(256),dT=0;dT<256;dT++)wM[dT]=VP(dT)?1:0,tR[dT]=VP(dT);function W4(s,l){this.input=s,this.filename=l.filename||null,this.schema=l.schema||kD,this.onWarning=l.onWarning||null,this.legacy=l.legacy||!1,this.json=l.json||!1,this.listener=l.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function BP(s,l){return new cE(l,new y8(s.filename,s.input,s.position,s.line,s.position-s.lineStart))}function B0(s,l){throw BP(s,l)}function xM(s,l){s.onWarning&&s.onWarning.call(null,BP(s,l))}var eR={YAML:function(s,l,f){var g,_,k;null!==s.version&&B0(s,"duplication of %YAML directive"),1!==f.length&&B0(s,"YAML directive accepts exactly one argument"),null===(g=/^([0-9]+)\.([0-9]+)$/.exec(f[0]))&&B0(s,"ill-formed argument of the YAML directive"),_=parseInt(g[1],10),k=parseInt(g[2],10),1!==_&&B0(s,"unacceptable YAML version of the document"),s.version=f[0],s.checkLineBreaks=k<2,1!==k&&2!==k&&xM(s,"unsupported YAML version of the document")},TAG:function(s,l,f){var g,_;2!==f.length&&B0(s,"TAG directive accepts exactly two arguments"),_=f[1],FP.test(g=f[0])||B0(s,"ill-formed tag handle (first argument) of the TAG directive"),XE.call(s.tagMap,g)&&B0(s,'there is a previously declared suffix for "'+g+'" tag handle'),jP.test(_)||B0(s,"ill-formed tag prefix (second argument) of the TAG directive"),s.tagMap[g]=_}};function mA(s,l,f,g){var _,k,q,$;if(l<f){if($=s.input.slice(l,f),g)for(_=0,k=$.length;_<k;_+=1)9===(q=$.charCodeAt(_))||32<=q&&q<=1114111||B0(s,"expected valid JSON character");else G4.test($)&&B0(s,"the stream contains non-printable characters");s.result+=$}}function zP(s,l,f,g){var _,k,q,$;for(w1.isObject(f)||B0(s,"cannot merge mappings; the provided source object is unacceptable"),q=0,$=(_=Object.keys(f)).length;q<$;q+=1)XE.call(l,k=_[q])||(l[k]=f[k],g[k]=!0)}function uC(s,l,f,g,_,k){var q,$;if(_=String(_),null===l&&(l={}),"tag:yaml.org,2002:merge"===g)if(Array.isArray(k))for(q=0,$=k.length;q<$;q+=1)zP(s,l,k[q],f);else zP(s,l,k,f);else s.json||XE.call(f,_)||!XE.call(l,_)||B0(s,"duplicated mapping key"),l[_]=k,delete f[_];return l}function EM(s){var l=s.input.charCodeAt(s.position);10===l?s.position++:13===l?(s.position++,10===s.input.charCodeAt(s.position)&&s.position++):B0(s,"a line break is expected"),s.line+=1,s.lineStart=s.position}function k1(s,l,f){for(var g=0,_=s.input.charCodeAt(s.position);0!==_;){for(;pT(_);)_=s.input.charCodeAt(++s.position);if(l&&35===_)for(;10!==(_=s.input.charCodeAt(++s.position))&&13!==_&&0!==_;);if(!I2(_))break;for(EM(s),_=s.input.charCodeAt(s.position),g++,s.lineIndent=0;32===_;)s.lineIndent++,_=s.input.charCodeAt(++s.position)}return-1!==f&&0!==g&&s.lineIndent<f&&xM(s,"deficient indentation"),g}function $x(s){var l=s.position,f=s.input.charCodeAt(l);return 45!==f&&46!==f||f!==s.input.charCodeAt(l+1)||f!==s.input.charCodeAt(l+2)||0!==(f=s.input.charCodeAt(l+=3))&&!wx(f)?void 0:1}function ND(s,l){1===l?s.result+=" ":1<l&&(s.result+=w1.repeat("\n",l-1))}function HP(s,l){var f,g,_=s.tag,k=s.anchor,q=[],$=!1;for(null!==s.anchor&&(s.anchorMap[s.anchor]=q),g=s.input.charCodeAt(s.position);0!==g&&45===g&&wx(s.input.charCodeAt(s.position+1));)if($=!0,s.position++,k1(s,!0,-1)&&s.lineIndent<=l)q.push(null),g=s.input.charCodeAt(s.position);else if(f=s.line,PD(s,l,3,!1,!0),q.push(s.result),k1(s,!0,-1),g=s.input.charCodeAt(s.position),(s.line===f||s.lineIndent>l)&&0!==g)B0(s,"bad indentation of a sequence entry");else if(s.lineIndent<l)break;return!!$&&(s.tag=_,s.anchor=k,s.kind="sequence",s.result=q,!0)}function PD(s,l,f,g,_){var k,q,$,_t,_n,_i,_o,xa,ka=1,_l=!1,_f=!1;if(null!==s.listener&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,k=q=$=4===f||3===f,g&&k1(s,!0,-1)&&(_l=!0,s.lineIndent>l?ka=1:s.lineIndent===l?ka=0:s.lineIndent<l&&(ka=-1)),1===ka)for(;function(_a){var _g,ty,ny,uy=!1,ry=!1,ly=_a.input.charCodeAt(_a.position);if(33===ly){if(null!==_a.tag&&B0(_a,"duplication of a tag property"),60===(ly=_a.input.charCodeAt(++_a.position))?(uy=!0,ly=_a.input.charCodeAt(++_a.position)):33===ly?(ry=!0,ty="!!",ly=_a.input.charCodeAt(++_a.position)):ty="!",_g=_a.position,uy){for(;0!==(ly=_a.input.charCodeAt(++_a.position))&&62!==ly;);_a.position<_a.length?(ny=_a.input.slice(_g,_a.position),ly=_a.input.charCodeAt(++_a.position)):B0(_a,"unexpected end of the stream within a verbatim tag")}else{for(;0!==ly&&!wx(ly);)33===ly&&(ry?B0(_a,"tag suffix cannot contain exclamation marks"):(ty=_a.input.slice(_g-1,_a.position+1),FP.test(ty)||B0(_a,"named tag handle cannot contain such characters"),ry=!0,_g=_a.position+1)),ly=_a.input.charCodeAt(++_a.position);ny=_a.input.slice(_g,_a.position),Yx.test(ny)&&B0(_a,"tag suffix cannot contain flow indicator characters")}return ny&&!jP.test(ny)&&B0(_a,"tag name cannot contain such characters: "+ny),uy?_a.tag=ny:XE.call(_a.tagMap,ty)?_a.tag=_a.tagMap[ty]+ny:"!"===ty?_a.tag="!"+ny:"!!"===ty?_a.tag="tag:yaml.org,2002:"+ny:B0(_a,'undeclared tag handle "'+ty+'"'),1}}(s)||function(_a){var _g,ty=_a.input.charCodeAt(_a.position);if(38===ty){for(null!==_a.anchor&&B0(_a,"duplication of an anchor property"),ty=_a.input.charCodeAt(++_a.position),_g=_a.position;0!==ty&&!wx(ty)&&!RD(ty);)ty=_a.input.charCodeAt(++_a.position);return _a.position===_g&&B0(_a,"name of an anchor node must contain at least one character"),_a.anchor=_a.input.slice(_g,_a.position),1}}(s);)k1(s,!0,-1)?(_l=!0,$=k,s.lineIndent>l?ka=1:s.lineIndent===l?ka=0:s.lineIndent<l&&(ka=-1)):$=!1;if($=$&&(_l||_),1!==ka&&4!==f||(_o=1===f||2===f?l:l+1,xa=s.position-s.lineStart,1===ka?$&&(HP(s,xa)||function(_a,_g,ty){var ny,uy,ry,ly,cy=_a.tag,by=_a.anchor,Oy={},My={},Sy=null,Vy=null,e0=null,Ly=!1,Wy=!1;for(null!==_a.anchor&&(_a.anchorMap[_a.anchor]=Oy),ly=_a.input.charCodeAt(_a.position);0!==ly;){if(ny=_a.input.charCodeAt(_a.position+1),ry=_a.line,63!==ly&&58!==ly||!wx(ny)){if(!PD(_a,ty,2,!1,!0))break;if(_a.line===ry){for(ly=_a.input.charCodeAt(_a.position);pT(ly);)ly=_a.input.charCodeAt(++_a.position);if(58===ly)wx(ly=_a.input.charCodeAt(++_a.position))||B0(_a,"a whitespace character is expected after the key-value separator within a block mapping"),Ly&&(uC(_a,Oy,My,Sy,Vy,null),Sy=Vy=e0=null),uy=Ly=!(Wy=!0),Sy=_a.tag,Vy=_a.result;else{if(!Wy)return _a.tag=cy,_a.anchor=by,1;B0(_a,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Wy)return _a.tag=cy,_a.anchor=by,1;B0(_a,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===ly?(Ly&&(uC(_a,Oy,My,Sy,Vy,null),Sy=Vy=e0=null),uy=Ly=Wy=!0):Ly?uy=!(Ly=!1):B0(_a,"incomplete explicit mapping pair; a key node is missed"),_a.position+=1,ly=ny;if((_a.line===ry||_a.lineIndent>_g)&&(PD(_a,_g,4,!0,uy)&&(Ly?Vy=_a.result:e0=_a.result),Ly||(uC(_a,Oy,My,Sy,Vy,e0),Sy=Vy=e0=null),k1(_a,!0,-1),ly=_a.input.charCodeAt(_a.position)),_a.lineIndent>_g&&0!==ly)B0(_a,"bad indentation of a mapping entry");else if(_a.lineIndent<_g)break}return Ly&&uC(_a,Oy,My,Sy,Vy,null),Wy&&(_a.tag=cy,_a.anchor=by,_a.kind="mapping",_a.result=Oy),Wy}(s,xa,_o))||function(_a,_g){var ty,ny,uy,ry,ly,cy,by,Oy,My,Sy=!0,Vy=_a.tag,e0=_a.anchor,Ly={},Wy=_a.input.charCodeAt(_a.position);if(91===Wy)cy=!(uy=93),ny=[];else{if(123!==Wy)return;uy=125,cy=!0,ny={}}for(null!==_a.anchor&&(_a.anchorMap[_a.anchor]=ny),Wy=_a.input.charCodeAt(++_a.position);0!==Wy;){if(k1(_a,!0,_g),(Wy=_a.input.charCodeAt(_a.position))===uy)return _a.position++,_a.tag=Vy,_a.anchor=e0,_a.kind=cy?"mapping":"sequence",_a.result=ny,1;Sy||B0(_a,"missed comma between flow collection entries"),My=null,ry=ly=!1,63===Wy&&wx(_a.input.charCodeAt(_a.position+1))&&(ry=ly=!0,_a.position++,k1(_a,!0,_g)),ty=_a.line,PD(_a,_g,1,!1,!0),Oy=_a.tag,by=_a.result,k1(_a,!0,_g),Wy=_a.input.charCodeAt(_a.position),!ly&&_a.line!==ty||58!==Wy||(ry=!0,Wy=_a.input.charCodeAt(++_a.position),k1(_a,!0,_g),PD(_a,_g,1,!1,!0),My=_a.result),cy?uC(_a,ny,Ly,Oy,by,My):ny.push(ry?uC(_a,null,Ly,Oy,by,My):by),k1(_a,!0,_g),44===(Wy=_a.input.charCodeAt(_a.position))?(Sy=!0,Wy=_a.input.charCodeAt(++_a.position)):Sy=!1}B0(_a,"unexpected end of the stream within a flow collection")}(s,_o)?_f=!0:(q&&function(_a,_g){var ty,ny,uy,ry,ly=1,cy=!1,by=_g,Oy=0,My=!1,Sy=_a.input.charCodeAt(_a.position);if(124===Sy)ny=!1;else{if(62!==Sy)return;ny=!0}for(_a.kind="scalar",_a.result="";0!==Sy;)if(43===(Sy=_a.input.charCodeAt(++_a.position))||45===Sy)1===ly?ly=43===Sy?3:2:B0(_a,"repeat of a chomping mode identifier");else{if(!(0<=(uy=48<=(ry=Sy)&&ry<=57?ry-48:-1)))break;0==uy?B0(_a,"bad explicit indentation width of a block scalar; it cannot be less than one"):cy?B0(_a,"repeat of an indentation width identifier"):(by=_g+uy-1,cy=!0)}if(pT(Sy)){for(;pT(Sy=_a.input.charCodeAt(++_a.position)););if(35===Sy)for(;!I2(Sy=_a.input.charCodeAt(++_a.position))&&0!==Sy;);}for(;0!==Sy;){for(EM(_a),_a.lineIndent=0,Sy=_a.input.charCodeAt(_a.position);(!cy||_a.lineIndent<by)&&32===Sy;)_a.lineIndent++,Sy=_a.input.charCodeAt(++_a.position);if(!cy&&_a.lineIndent>by&&(by=_a.lineIndent),I2(Sy))Oy++;else{if(_a.lineIndent<by){3===ly?_a.result+=w1.repeat("\n",Oy):1===ly&&cy&&(_a.result+="\n");break}for(ny?pT(Sy)?(My=!0,_a.result+=w1.repeat("\n",Oy+1)):My?(My=!1,_a.result+=w1.repeat("\n",Oy+1)):0===Oy?cy&&(_a.result+=" "):_a.result+=w1.repeat("\n",Oy):_a.result+=w1.repeat("\n",cy?Oy+1:Oy),cy=!0,Oy=0,ty=_a.position;!I2(Sy)&&0!==Sy;)Sy=_a.input.charCodeAt(++_a.position);mA(_a,ty,_a.position,!1)}}return 1}(s,_o)||function(_a,_g){var ty,ny,uy=_a.input.charCodeAt(_a.position);if(39===uy){for(_a.kind="scalar",_a.result="",_a.position++,ty=ny=_a.position;0!==(uy=_a.input.charCodeAt(_a.position));)if(39===uy){if(mA(_a,ty,_a.position,!0),39!==(uy=_a.input.charCodeAt(++_a.position)))return 1;ty=ny=_a.position,_a.position++}else I2(uy)?(mA(_a,ty,ny,!0),ND(_a,k1(_a,!1,_g)),ty=ny=_a.position):_a.position===_a.lineStart&&$x(_a)?B0(_a,"unexpected end of the document within a single quoted scalar"):(_a.position++,ny=_a.position);B0(_a,"unexpected end of the stream within a single quoted scalar")}}(s,_o)||function(s,l){var f,g,_,k,q,$,_t,_n,_i,_o=s.input.charCodeAt(s.position);if(34===_o){for(s.kind="scalar",s.result="",s.position++,f=g=s.position;0!==(_o=s.input.charCodeAt(s.position));){if(34===_o)return mA(s,f,s.position,!0),s.position++,1;if(92===_o){if(mA(s,f,s.position,!0),I2(_o=s.input.charCodeAt(++s.position)))k1(s,!1,l);else if(_o<256&&wM[_o])s.result+=tR[_o],s.position++;else if(0<(q=120===(_i=_o)?2:117===_i?4:85===_i?8:0)){for(_=q,k=0;0<_;_--)_n=void 0,0<=(q=48<=(_t=_o=s.input.charCodeAt(++s.position))&&_t<=57?_t-48:97<=(_n=32|_t)&&_n<=102?_n-97+10:-1)?k=(k<<4)+q:B0(s,"expected hexadecimal character");s.result+=($=k)<=65535?String.fromCharCode($):String.fromCharCode(55296+($-65536>>10),56320+($-65536&1023)),s.position++}else B0(s,"unknown escape sequence");f=g=s.position}else I2(_o)?(mA(s,f,g,!0),ND(s,k1(s,!1,l)),f=g=s.position):s.position===s.lineStart&&$x(s)?B0(s,"unexpected end of the document within a double quoted scalar"):(s.position++,g=s.position)}B0(s,"unexpected end of the stream within a double quoted scalar")}}(s,_o)?_f=!0:function(_a){var _g,ty,ny=_a.input.charCodeAt(_a.position);if(42===ny){for(ny=_a.input.charCodeAt(++_a.position),_g=_a.position;0!==ny&&!wx(ny)&&!RD(ny);)ny=_a.input.charCodeAt(++_a.position);return _a.position===_g&&B0(_a,"name of an alias node must contain at least one character"),ty=_a.input.slice(_g,_a.position),_a.anchorMap.hasOwnProperty(ty)||B0(_a,'unidentified alias "'+ty+'"'),_a.result=_a.anchorMap[ty],k1(_a,!0,-1),1}}(s)?(_f=!0,null===s.tag&&null===s.anchor||B0(s,"alias node should not have any properties")):function(_a,_g,ty){var ny,uy,ry,ly,cy,by,Oy,My=_a.kind,Sy=_a.result,Vy=_a.input.charCodeAt(_a.position);if(!wx(Vy)&&!RD(Vy)&&35!==Vy&&38!==Vy&&42!==Vy&&33!==Vy&&124!==Vy&&62!==Vy&&39!==Vy&&34!==Vy&&37!==Vy&&64!==Vy&&96!==Vy&&(63!==Vy&&45!==Vy||!(wx(ny=_a.input.charCodeAt(_a.position+1))||ty&&RD(ny)))){for(_a.kind="scalar",_a.result="",uy=ry=_a.position,ly=!1;0!==Vy;){if(58===Vy){if(wx(ny=_a.input.charCodeAt(_a.position+1))||ty&&RD(ny))break}else if(35===Vy){if(wx(_a.input.charCodeAt(_a.position-1)))break}else{if(_a.position===_a.lineStart&&$x(_a)||ty&&RD(Vy))break;if(I2(Vy)){if(cy=_a.line,by=_a.lineStart,Oy=_a.lineIndent,k1(_a,!1,-1),_a.lineIndent>=_g){ly=!0,Vy=_a.input.charCodeAt(_a.position);continue}_a.position=ry,_a.line=cy,_a.lineStart=by,_a.lineIndent=Oy;break}}ly&&(mA(_a,uy,ry,!1),ND(_a,_a.line-cy),uy=ry=_a.position,ly=!1),pT(Vy)||(ry=_a.position+1),Vy=_a.input.charCodeAt(++_a.position)}if(mA(_a,uy,ry,!1),_a.result)return 1;_a.kind=My,_a.result=Sy}}(s,_o,1===f)&&(_f=!0,null===s.tag&&(s.tag="?")),null!==s.anchor&&(s.anchorMap[s.anchor]=s.result)):0===ka&&(_f=$&&HP(s,xa))),null!==s.tag&&"!"!==s.tag)if("?"===s.tag){for(_t=0,_n=s.implicitTypes.length;_t<_n;_t+=1)if((_i=s.implicitTypes[_t]).resolve(s.result)){s.result=_i.construct(s.result),s.tag=_i.tag,null!==s.anchor&&(s.anchorMap[s.anchor]=s.result);break}}else XE.call(s.typeMap,s.tag)?(_i=s.typeMap[s.tag],null!==s.result&&_i.kind!==s.kind&&B0(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+_i.kind+'", not "'+s.kind+'"'),_i.resolve(s.result)?(s.result=_i.construct(s.result),null!==s.anchor&&(s.anchorMap[s.anchor]=s.result)):B0(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")):B0(s,"unknown tag !<"+s.tag+">");return null!==s.listener&&s.listener("close",s),null!==s.tag||null!==s.anchor||_f}function nR(s,l){l=l||{},0!==(s=String(s)).length&&(10!==s.charCodeAt(s.length-1)&&13!==s.charCodeAt(s.length-1)&&(s+="\n"),65279===s.charCodeAt(0)&&(s=s.slice(1)));var f=new W4(s,l);for(f.input+="\0";32===f.input.charCodeAt(f.position);)f.lineIndent+=1,f.position+=1;for(;f.position<f.length-1;)!function(g){var _,k,q,$,_t=g.position,_n=!1;for(g.version=null,g.checkLineBreaks=g.legacy,g.tagMap={},g.anchorMap={};0!==($=g.input.charCodeAt(g.position))&&(k1(g,!0,-1),$=g.input.charCodeAt(g.position),!(0<g.lineIndent||37!==$));){for(_n=!0,$=g.input.charCodeAt(++g.position),_=g.position;0!==$&&!wx($);)$=g.input.charCodeAt(++g.position);for(q=[],(k=g.input.slice(_,g.position)).length<1&&B0(g,"directive name must not be less than one character in length");0!==$;){for(;pT($);)$=g.input.charCodeAt(++g.position);if(35===$){for(;0!==($=g.input.charCodeAt(++g.position))&&!I2($););break}if(I2($))break;for(_=g.position;0!==$&&!wx($);)$=g.input.charCodeAt(++g.position);q.push(g.input.slice(_,g.position))}0!==$&&EM(g),XE.call(eR,k)?eR[k](g,k,q):xM(g,'unknown document directive "'+k+'"')}k1(g,!0,-1),0===g.lineIndent&&45===g.input.charCodeAt(g.position)&&45===g.input.charCodeAt(g.position+1)&&45===g.input.charCodeAt(g.position+2)?(g.position+=3,k1(g,!0,-1)):_n&&B0(g,"directives end mark is expected"),PD(g,g.lineIndent-1,4,!1,!0),k1(g,!0,-1),g.checkLineBreaks&&q4.test(g.input.slice(_t,g.position))&&xM(g,"non-ASCII line breaks are interpreted as content"),g.documents.push(g.result),g.position===g.lineStart&&$x(g)?46===g.input.charCodeAt(g.position)&&(g.position+=3,k1(g,!0,-1)):g.position<g.length-1&&B0(g,"end of the stream or a document separator is expected")}(f);return f.documents}function UP(s,l,f){for(var g=nR(s,f),_=0,k=g.length;_<k;_+=1)l(g[_])}function GP(s,l){var f=nR(s,l);if(0!==f.length){if(1===f.length)return f[0];throw new cE("expected a single document in the stream, but found more")}}var AM={loadAll:UP,load:GP,safeLoadAll:function(s,l,f){UP(s,l,w1.extend({schema:fT},f))},safeLoad:function(s,l){return GP(s,w1.extend({schema:fT},l))}},CM=Object.prototype.toString,qP=Object.prototype.hasOwnProperty,DM={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},jD=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function VD(s){this.schema=s.schema||kD,this.indent=Math.max(1,s.indent||2),this.skipInvalid=s.skipInvalid||!1,this.flowLevel=w1.isNothing(s.flowLevel)?-1:s.flowLevel,this.styleMap=function(l,f){var g,_,k,q,$,_t,_n;if(null===f)return{};for(g={},k=0,q=(_=Object.keys(f)).length;k<q;k+=1)$=_[k],_t=String(f[$]),"!!"===$.slice(0,2)&&($="tag:yaml.org,2002:"+$.slice(2)),(_n=l.compiledTypeMap[$])&&qP.call(_n.styleAliases,_t)&&(_t=_n.styleAliases[_t]),g[$]=_t;return g}(this.schema,s.styles||null),this.sortKeys=s.sortKeys||!1,this.lineWidth=s.lineWidth||80,this.noRefs=s.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function QP(s,l){for(var f,g=w1.repeat(" ",l),_=0,k=-1,q="",$=s.length;_<$;)_=-1===(k=s.indexOf("\n",_))?(f=s.slice(_),$):(f=s.slice(_,k+1),k+1),f.length&&"\n"!==f&&(q+=g),q+=f;return q}function BD(s,l){return"\n"+w1.repeat(" ",s.indent*l)}function zD(s){this.source=s,this.result="",this.checkpoint=0}function sR(s,l){if(""===s)return s;for(var f,g,_=/[^\s] [^\s]/g,k="",q=0,$=0,_t=_.exec(s);_t;)l<(f=_t.index)-$&&(k&&(k+="\n"),k+=s.slice($,g=q!==$?q:f),$=g+1),q=f+1,_t=_.exec(s);return k&&(k+="\n"),k+($!==q&&s.length-$>l?s.slice($,q)+"\n"+s.slice(q+1):s.slice($))}function JP(s){return!(32<=s&&s<=126||133===s||160<=s&&s<=55295||57344<=s&&s<=65533||65536<=s&&s<=1114111)}function SM(s,l,f){for(var g,_,k,q=f?s.explicitTypes:s.implicitTypes,$=0,_t=q.length;$<_t;$+=1)if(((_=q[$]).instanceOf||_.predicate)&&(!_.instanceOf||"object"==typeof l&&l instanceof _.instanceOf)&&(!_.predicate||_.predicate(l))){if(s.tag=f?_.tag:"?",_.represent){if(k=s.styleMap[_.tag]||_.defaultStyle,"[object Function]"===CM.call(_.represent))g=_.represent(l,k);else{if(!qP.call(_.represent,k))throw new cE("!<"+_.tag+'> tag resolver accepts not "'+k+'" style');g=_.represent[k](l,k)}s.dump=g}return 1}}function lC(s,l,f,g,_,k){s.tag=null,s.dump=f,SM(s,f,!1)||SM(s,f,!0);var q=CM.call(s.dump);g=g&&(s.flowLevel<0||s.flowLevel>l);var $,_t,_n="[object Object]"===q||"[object Array]"===q;if(_n&&(_t=-1!==($=s.duplicates.indexOf(f))),(null!==s.tag&&"?"!==s.tag||_t||2!==s.indent&&0<l)&&(_=!1),_t&&s.usedDuplicates[$])s.dump="*ref_"+$;else{if(_n&&_t&&!s.usedDuplicates[$]&&(s.usedDuplicates[$]=!0),"[object Object]"===q)g&&0!==Object.keys(s.dump).length?(function(_i,_o,xa,ka){var _l,_f,_a,_g,ty,ny,uy="",ry=_i.tag,ly=Object.keys(xa);if(!0===_i.sortKeys)ly.sort();else if("function"==typeof _i.sortKeys)ly.sort(_i.sortKeys);else if(_i.sortKeys)throw new cE("sortKeys must be a boolean or a function");for(_l=0,_f=ly.length;_l<_f;_l+=1)ny="",ka&&0===_l||(ny+=BD(_i,_o)),_g=xa[_a=ly[_l]],lC(_i,_o+1,_a,!0,!0,!0)&&((ty=null!==_i.tag&&"?"!==_i.tag||_i.dump&&1024<_i.dump.length)&&(_i.dump&&10===_i.dump.charCodeAt(0)?ny+="?":ny+="? "),ny+=_i.dump,ty&&(ny+=BD(_i,_o)),lC(_i,_o+1,_g,!0,ty)&&(_i.dump&&10===_i.dump.charCodeAt(0)?ny+=":":ny+=": ",uy+=ny+=_i.dump));_i.tag=ry,_i.dump=uy||"{}"}(s,l,s.dump,_),_t&&(s.dump="&ref_"+$+s.dump)):(function(_i,_o,xa){for(var ka,_l,_f,_a="",_g=_i.tag,ty=Object.keys(xa),ny=0,uy=ty.length;ny<uy;ny+=1)_f="",0!==ny&&(_f+=", "),_l=xa[ka=ty[ny]],lC(_i,_o,ka,!1,!1)&&(1024<_i.dump.length&&(_f+="? "),_f+=_i.dump+": ",lC(_i,_o,_l,!1,!1)&&(_a+=_f+=_i.dump));_i.tag=_g,_i.dump="{"+_a+"}"}(s,l,s.dump),_t&&(s.dump="&ref_"+$+" "+s.dump));else if("[object Array]"===q)g&&0!==s.dump.length?(function(_i,_o,xa,ka){for(var _l="",_f=_i.tag,_a=0,_g=xa.length;_a<_g;_a+=1)lC(_i,_o+1,xa[_a],!0,!0)&&(ka&&0===_a||(_l+=BD(_i,_o)),_l+="- "+_i.dump);_i.tag=_f,_i.dump=_l||"[]"}(s,l,s.dump,_),_t&&(s.dump="&ref_"+$+s.dump)):(function(_i,_o,xa){for(var ka="",_l=_i.tag,_f=0,_a=xa.length;_f<_a;_f+=1)lC(_i,_o,xa[_f],!1,!1)&&(0!==_f&&(ka+=", "),ka+=_i.dump);_i.tag=_l,_i.dump="["+ka+"]"}(s,l,s.dump),_t&&(s.dump="&ref_"+$+" "+s.dump));else{if("[object String]"!==q){if(s.skipInvalid)return;throw new cE("unacceptable kind of an object to dump "+q)}"?"!==s.tag&&function(s,l,f,g){var _,k,q,$,_t,_n,_i,_o,xa,ka,_l,_f,_a,_g,ty,ny,uy,ry,ly,cy,by;if(0!==l.length)if(-1===jD.indexOf(l)){for(_=!0,45!==(k=l.length?l.charCodeAt(0):0)&&63!==k&&64!==k&&96!==k||(_=!1),_t=$=(q=32===k||32===l.charCodeAt(l.length-1))||-1<s.flowLevel&&s.flowLevel<=f?(q&&(_=!1),!1):!g,_n=!0,_i=new zD(l),_o=!1,ka=xa=0,-1===(_f=s.lineWidth)&&(_f=9007199254740991),(_l=s.indent*f)<40?_f-=_l:_f=40,_g=0;_g<l.length;_g++){if(_a=l.charCodeAt(_g),_){if(9!==(by=_a)&&10!==by&&13!==by&&44!==by&&91!==by&&93!==by&&123!==by&&125!==by&&35!==by&&38!==by&&42!==by&&33!==by&&124!==by&&62!==by&&39!==by&&34!==by&&37!==by&&58!==by&&!DM[by]&&!JP(by))continue;_=!1}_n&&39===_a&&(_n=!1),ty=DM[_a],ny=JP(_a),(ty||ny)&&(10!==_a&&34!==_a&&39!==_a?_t=$=!1:10===_a&&(_n=!(_o=!0),0<_g&&32===l.charCodeAt(_g-1)&&($=_t=!1),$&&(uy=_g-xa,xa=_g,ka<uy&&(ka=uy))),34!==_a&&(_n=!1),_i.takeUpTo(_g),_i.escapeChar())}if(_&&function(Oy,My){for(var Sy=0,Vy=Oy.implicitTypes.length;Sy<Vy;Sy+=1)if(Oy.implicitTypes[Sy].resolve(My))return 1}(s,l)&&(_=!1),ry="",($||_t)&&(ly=0,10===l.charCodeAt(l.length-1)&&(ly+=1,10===l.charCodeAt(l.length-2)&&(ly+=1)),0===ly?ry="-":2===ly&&(ry="+")),(_t&&ka<_f||null!==s.tag)&&($=!1),_o||(_t=!1),_)s.dump=l;else if(_n)s.dump="'"+l+"'";else if($)cy=function(Oy,My){var Sy,Vy="",e0=0,Ly=Oy.length,Wy=/\n+$/.exec(Oy);for(Wy&&(Ly=Wy.index+1);e0<Ly;)e0=Ly<(Sy=Oy.indexOf("\n",e0))||-1===Sy?(Vy&&(Vy+="\n\n"),Vy+=sR(Oy.slice(e0,Ly),My),Ly):(Vy&&(Vy+="\n\n"),Vy+=sR(Oy.slice(e0,Sy),My),Sy+1);return Wy&&"\n"!==Wy[0]&&(Vy+=Wy[0]),Vy}(l,_f),s.dump=">"+ry+"\n"+QP(cy,_l);else if(_t)ry||(l=l.replace(/\n$/,"")),s.dump="|"+ry+"\n"+QP(l,_l);else{if(!_i)throw new Error("Failed to dump scalar value");_i.finish(),s.dump='"'+_i.result+'"'}}else s.dump="'"+l+"'";else s.dump="''"}(s,s.dump,l,k)}null!==s.tag&&"?"!==s.tag&&(s.dump="!<"+s.tag+"> "+s.dump)}return 1}function aR(s,l){var f=new VD(l=l||{});return f.noRefs||function(s,l){var f,g,_=[],k=[];for(function q($,_t,_n){var _i,_o,xa;if(null!==$&&"object"==typeof $)if(-1!==(_o=_t.indexOf($)))-1===_n.indexOf(_o)&&_n.push(_o);else if(_t.push($),Array.isArray($))for(_o=0,xa=$.length;_o<xa;_o+=1)q($[_o],_t,_n);else for(_o=0,xa=(_i=Object.keys($)).length;_o<xa;_o+=1)q($[_i[_o]],_t,_n)}(s,_,k),f=0,g=k.length;f<g;f+=1)l.duplicates.push(_[k[f]]);l.usedDuplicates=new Array(g)}(s,f),lC(f,0,s,!0,!0)?f.dump+"\n":""}zD.prototype.takeUpTo=function(s){var l;if(s<this.checkpoint)throw(l=new Error("position should be > checkpoint")).position=s,l.checkpoint=this.checkpoint,l;return this.result+=this.source.slice(this.checkpoint,s),this.checkpoint=s,this},zD.prototype.escapeChar=function(){var s=this.source.charCodeAt(this.checkpoint),l=DM[s]||function(f){var g,_,k=f.toString(16).toUpperCase();if(f<=255)g="x",_=2;else if(f<=65535)g="u",_=4;else{if(!(f<=4294967295))throw new cE("code point within a string may not be greater than 0xFFFFFFFF");g="U",_=8}return"\\"+g+w1.repeat("0",_-k.length)+k}(s);return this.result+=l,this.checkpoint+=1,this},zD.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var cC={dump:aR,safeDump:function(s,l){return aR(s,w1.extend({schema:fT},l))}};function HD(s){return function(){throw new Error("Function "+s+" is deprecated and cannot be used.")}}var t3={Type:Nw,Schema:aC,FAILSAFE_SCHEMA:vM,JSON_SCHEMA:YO,CORE_SCHEMA:NP,DEFAULT_SAFE_SCHEMA:fT,DEFAULT_FULL_SCHEMA:kD,load:AM.load,loadAll:AM.loadAll,safeLoad:AM.safeLoad,safeLoadAll:AM.safeLoadAll,dump:cC.dump,safeDump:cC.safeDump,YAMLException:cE,MINIMAL_SCHEMA:vM,SAFE_SCHEMA:fT,DEFAULT_SCHEMA:kD,scan:HD("scan"),parse:HD("parse"),compose:HD("compose"),addConstructor:HD("addConstructor")},nF=function(){function s(l,f){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;A0(this,s),this.url=l,this.path=!f||qA(f)&&!qA(this.url)?BC(this.url):f,this.path_for_parent=f||this.path,this.parent=g,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return L0(s,[{key:"load",value:function(){return l=this.url,new Promise(function(f,g){"string"==typeof l?R0.io(l).then(function(_){try{var k=function(q){var $;try{$=t3.safeLoad(q,{json:!0})}catch(_t){throw _t}return $}(_);f(k)}catch(q){g(q)}},g):(l=Object.assign({},l),f(l))});var l}},{key:"resourceFor",value:function(l){return{url:this.urlFor(l),path:this.pathFor(l),type:this.typeFor(l)}}},{key:"urlFor",value:function(l){return vA(l)?l:qA(l)&&this.container?this.parent.urlFor(this.path_for_parent+l):function(f,g){if(!f||!qA(f))return f;var _,k="/"!==f[0];return g?(_=document.createElement("a")).href=g:_=window.location,k?BC(_.href)+f:(_.origin||_.protocol+"//"+_.host)+f}(l,this.path)}},{key:"pathFor",value:BC},{key:"typeFor",value:function(l){var f=(l=l.split("/").pop()).lastIndexOf(".");if(-1<f)return l.substring(f+1)}},{key:"isContainer",value:function(){return!1}}]),s}();function vA(s){return!(!s||"global."!==s.slice(0,7))}function rF(s){return null!=s}function JE(s){return"("+s+")"}function MM(s){return"$"===s[0]?"context['"+s.substring(1)+"']":"context.feature.properties['"+s+"']"}function e3(s,l){return JE(("string"==typeof(f=l)?'"'+f+'"':f)+" === "+MM(s));var f}function iF(s,l){return JE(s.filter(rF).map(function(f){return JE(f.join(" && "))}).join(" "+l+" "))}function uR(s,l,f){return l&&0<l.length?iF(l.map(function(g){return UD(g,f)}),"||"):"true"}function UD(s,l){var f=[];if("function"==typeof s)return[JE(s.toString()+"(context)")];if(Array.isArray(s))return[uR(0,s,l)];if(null==s)return["true"];for(var g,_,k,q,$,_t,_n,_i,_o=Object.keys(s),xa=0;xa<_o.length;xa++){var ka=_o[xa],_l=s[ka],_f=D_(_l);if("string"===_f||"number"===_f)f.push(e3(ka,_l));else if("boolean"===_f)f.push((_i=_l,JE(MM(ka)+(_i?" != ":" == ")+"null")));else if("not"===ka)f.push("!"+JE(UD(_l,l).join(" && ")));else if("any"===ka)f.push(uR(0,_l,l));else if("all"===ka)f.push(function(_a,_g){return _a&&0<_a.length?iF(_a.map(function(ty){return UD(ty,_g)}),"&&"):"true"}(_l,l));else if("none"===ka)f.push("!"+JE(uR(0,_l,l)));else if(Array.isArray(_l))f.push(function(_a,_g){return JE(_g.map(function(ty){return e3(_a,ty)}).join(" || "))}(ka,_l));else if("object"===_f&&null!=_l)(_l.max||_l.min)&&f.push((g=ka,_n=_t=$=q=void 0,_t=[],_n=(k=l)&&"function"==typeof k.rangeTransform&&k.rangeTransform,(_=_l).max&&(q=_n?_n(_.max):_.max,_t.push(MM(g)+" < "+q)),_.min&&($=_n?$=_n(_.min):_.min,_t.push(MM(g)+" >= "+$)),JE(_t.join(" && "))));else{if(null!=_l)throw new Error("Unknown Query syntax: "+_l);f.push(" true ")}}return 0===_o.length?["true"]:f}function j_(s,l){return null==s?function(){return!0}:new Function("context","return "+JE(UD(s,l).join(" && "))+";")}var lR=["filter","draw","visible","enabled","data"],Kx={},O2=["any","all","not","none"],GD=function(){function s(l){var f,g=l.layer,_=l.name,k=l.parent,q=l.draw,$=l.visible,_t=l.enabled,_n=l.filter,_i=l.styles;if(A0(this,s),this.id=s.id++,this.config_data=g.data,this.parent=k,this.name=_,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=q,this.filter=_n,this.styles=_i,this.is_built=!1,_t=void 0===_t?$:_t,this.enabled=(!this.parent||!1!==this.parent.visible)&&!1!==_t,this.draw)for(var _o in this.draw)this.draw[_o]=null==this.draw[_o]?{}:this.draw[_o],"object"!==D_(this.draw[_o])?(f="Draw group '".concat(_o,"' for layer ").concat(this.full_name," is invalid, must be an object, "),qy("warn",f+="but was set to `".concat(_o,": ").concat(this.draw[_o],"` instead")),delete this.draw[_o]):this.draw[_o].layer_name=this.full_name}return L0(s,[{key:"build",value:function(){qy("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){var f;this.draw=R0.stringsToFunctions(this.draw,wy.wrapFunction),this.calculatedDraw=(f=[],this.parent&&f.push.apply(f,l_(this.parent.calculatedDraw||[])),f.push(this.draw),f)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=R0.stringsToFunctions(this.filter,wy.wrapFunction);var l=D_(this.filter);if(null==this.filter||"object"===l||"function"===l)try{this.buildZooms(),this.buildPropMatches(),this.filter=null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?j_(this.filter,n3):null}catch(_){var f="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");qy("warn",f+="failed with error '".concat(_.message,"', stack trace: ").concat(_.stack))}else{var g="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");qy("warn",g+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var l=this.filter&&this.filter.$zoom,f=D_(l);if(null!=l&&"function"!==f){if(this.zooms={},"number"===f)this.zooms[l]=!0;else if(Array.isArray(l))for(var g=0;g<l.length;g++)this.zooms[l[g]]=!0;else if("object"===f&&(null!=l.min||null!=l.max))for(var k=l.max||25,q=l.min||0;q<k;q++)this.zooms[q]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var l=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach(function(f){if(-1===O2.indexOf(f)){var g=l.filter[f],_=D_(g),k=Array.isArray(g);if(!k&&"string"!==_&&"number"!==_)return;"$"===f[0]?(l.context_prop_matches=l.context_prop_matches||[],l.context_prop_matches.push([f.substring(1),k?g:[g]])):(l.feature_prop_matches=l.feature_prop_matches||[],l.feature_prop_matches.push([f,k?g:[g]])),delete l.filter[f]}})}},{key:"doPropMatches",value:function(l){if(this.feature_prop_matches)for(var f=0;f<this.feature_prop_matches.length;f++){var g=this.feature_prop_matches[f],_=l.feature.properties[g[0]];if(null==_||-1===g[1].indexOf(_))return!1}if(this.context_prop_matches)for(var k=0;k<this.context_prop_matches.length;k++){var q=this.context_prop_matches[k],$=l[q[0]];if(null==$||-1===q[1].indexOf($))return!1}return!0}},{key:"doesMatch",value:function(l){if(!this.enabled||(this.is_built||this.build(),null!=this.zooms&&!this.zooms[l.zoom])||!this.doPropMatches(l))return!1;var f;if(this.filter instanceof Function)try{f=this.filter(l)}catch(_){var g="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");qy("error",g+="failed with error '".concat(_.message,"', stack trace: ").concat(_.stack),l.feature)}else f=null==this.filter;return!!f&&(this.children_to_parse&&(function(_,k,q){for(var $ in k){var _t,_n=k[$];"object"!==D_(_n)||Array.isArray(_n)?(_t="Layer value must be an object: cannot create layer '".concat($,": ").concat(JSON.stringify(_n),"'"),_t+=", under parent layer '".concat(_.full_name,"'."),q[_.name]&&(_t+=" The parent name '".concat(_.name,"' is also the name of a style, did you mean to create a 'draw' group"),_.parent&&(_t+=" under '".concat(_.parent.name,"'")),_t+=" instead?"),qy("warn",_t)):hR($,_n,_,q)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),s}();GD.id=0;var IM,w8=function(){M1(l,GD);var s=j1(l);function l(f){var g;return A0(this,l),(g=s.call(this,f)).is_leaf=!0,g}return l}(),oF=function(){M1(l,GD);var s=j1(l);function l(f){var g;return A0(this,l),(g=s.call(this,f)).is_tree=!0,g.layers=f.layers||[],g}return L0(l,[{key:"addLayer",value:function(f){this.layers.push(f)}},{key:"buildDrawGroups",value:function(f){var g=[],_=[];if(function _l(_f,_a,_g,ty){var ny=!1;if(0!==_a.length){for(var uy=0;uy<_a.length;uy++){var ry=_a[uy];ry.is_leaf?ry.doesMatch(_f)&&(ny=!0,_g.push(ry),ty.push(ry.id)):ry.is_tree&&ry.doesMatch(_f)&&(ny=!0,_l(_f,ry.layers,_g,ty)||(_g.push(ry),ty.push(ry.id)))}return ny}}(f,[this],g,_),0<g.length){var k=function(_l){if(1<_l.length){for(var _f=_l[0],_a=1;_a<_l.length;_a++)_f+="/"+_l[_a];return _f}return _l[0]}(_);if(void 0===Kx[k]){for(var q=g.map(function(_l){return _l&&!1!==_l.visible&&_l.calculatedDraw}),$={},_t=0;_t<q.length;_t++){var _n=q[_t];if(_n)for(var _i=0;_i<_n.length;_i++){var _o=_n[_i];for(var xa in _o)$[xa]=!0}}for(var ka in $)Kx[k]=Kx[k]||{},Kx[k][ka]=function(_l,_f){for(var _a,_g=0,ty=0;ty<_l.length;ty++)_l[ty].length>_g&&(_g=_l[ty].length);if(0===_g)return null;for(var ny={visible:!0},uy=0;uy<_g;uy++)!function(ry){_a=[],_l.forEach(function(ly){ly[ry]&&ly[ry][_f]&&-1===_a.indexOf(ly[ry][_f])&&_a.push(ly[ry][_f])}),0!==_a.length&&(_a.sort(function(ly,cy){return(ly&&ly.layer_name)>(cy&&cy.layer_name)?1:-1}),aA.apply(void 0,[ny].concat(l_(_a))),delete ny.layer_name)}(uy);return!1===ny.visible?null:ny}(q,ka),Kx[k][ka]?(Kx[k][ka].key=k+"/"+ka,Kx[k][ka].layers=g.map(function(_l){return _l&&_l.full_name}),Kx[k][ka].group=ka):delete Kx[k][ka];Kx[k]&&0===Object.keys(Kx[k]).length&&(Kx[k]=null)}return Kx[k]}}}]),l}(),n3={rangeTransform:function(s){return"string"==typeof s&&"px2"===s.trim().slice(-3)?"".concat(parseFloat(s)," * context.meters_per_pixel_sq"):s}};function cR(s){return-1<lR.indexOf(s)}function hR(s,l,f,g){var k={name:s,layer:l=null==l?{}:l,parent:f,styles:g},q=g0(function(xa){var ka={},_l={};for(var _f in xa)cR(_f)?ka[_f]=xa[_f]:_l[_f]=xa[_f];return[ka,_l]}(l),2),$=q[0],_t=q[1],_n=0===Object.keys(_t).length,_o=new(_n&&null!=f?w8:oF)(Object.assign(k,$));return _o.enabled&&(f&&f.addLayer(_o),_o.children_to_parse=_n?null:_t),_o}var fR=/^global\.(.+)$/,R2=IM={loadScene:function(s,l){var f=this,g=1<arguments.length&&void 0!==l?l:{},_=g.path,k=g.type,q=[];return this.loadSceneRecursive({url:s,path:_,type:k},null,q).then(function($){return f.finalize($)}).then(function($){var _t=$.config,_n=$.bundle;return _t?(0<q.length&&q.forEach(function(_i){var _o="Failed to import scene: ".concat(_i.url);qy("error",_o,_i),f.trigger("error",{type:"scene_import",message:_o,error:_i,url:_i.url})}),{config:_t,bundle:_n}):Promise.reject(q[0])})},loadSceneRecursive:function(s,l,f){var g=this,_=s.url,k=s.path,q=2<arguments.length&&void 0!==f?f:[];if(!_)return Promise.resolve({});var $=new nF(_,k,l);return $.load().then(function(_t){if(null==_t.import)return g.normalize(_t,$),{config:_t,bundle:$};Array.isArray(_t.import)||(_t.import=[_t.import]);var _n=[];return _t.import.forEach(function(_i){"object"===D_(_i)&&(_i=MS(new Blob([JSON.stringify(_i)]))),_n.push($.resourceFor(_i))}),delete _t.import,Promise.all(_n.map(function(_i){return g.loadSceneRecursive(_i,$,q)})).then(function(_i){_i.forEach(function(xa){return g.normalize(xa.config,xa.bundle)});var _o=_i.map(function(xa){return xa.config});return _t=aA.apply(void 0,l_(_o).concat([_t])),g.normalize(_t,$),{config:_t,bundle:$}})}).catch(function(_t){return _t.url=_,q.push(_t),{}})},normalize:function(s,l){return this.normalizeDataSources(s,l),this.normalizeFonts(s,l),this.normalizeTextures(s,l),this.hoistTextures(s,l),{config:s,bundle:l}},normalizeDataSources:function(s,l){for(var f in s.sources=s.sources||{},s.sources)this.normalizeDataSource(s.sources[f],l);return s},normalizeDataSource:function(s,l){if(s.url&&(s.url=l.urlFor(s.url)),s.scripts)for(var f in Array.isArray(s.scripts)&&(s.scripts=s.scripts.reduce(function(g,_){return g[_]=_,g},{})),s.scripts)s.scripts[f]=l.urlFor(s.scripts[f]);return s},normalizeFonts:function(s,l){for(var f in s.fonts=s.fonts||{},s.fonts){var g;Array.isArray(s.fonts[f])?s.fonts[f].forEach(function(_){_.url=_.url&&l.urlFor(_.url)}):(g=s.fonts[f]).url=g.url&&l.urlFor(g.url)}return s},normalizeTextures:function(s,l){if(s.textures=s.textures||{},s.textures)for(var f in s.textures){var g=s.textures[f];g.url&&(g.url=l.urlFor(g.url))}},hoistTextures:function(s,l){var f=this;if(s.styles)for(var g in s.styles)!function(_o){var xa=s.styles[_o],ka=xa.texture;"string"!=typeof ka||s.textures[ka]||(xa.texture=f.hoistTexture(ka,s,l)),xa.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(_l){var _f=null!=xa.material[_l]&&xa.material[_l].texture;"string"!=typeof _f||s.textures[_f]||(xa.material[_l].texture=f.hoistTexture(_f,s,l))})}(g);if(this.hoistStyleShaderUniformTextures(s,l,{include_globals:!1}),s.layers)for(var _=[s.layers];0<_.length;){var k=_.pop();if("object"===D_(k)&&!Array.isArray(k))for(var q in k)if("draw"===q){var $,_t,_n=k[q];for(var _i in _n)_n[_i].texture&&("string"!=typeof($=_n[_i].texture)||s.textures[$]||(_n[_i].texture=this.hoistTexture($,s,l))),_n[_i].outline&&_n[_i].outline.texture&&("string"!=typeof(_t=_n[_i].outline.texture)||s.textures[_t]||(_n[_i].outline.texture=this.hoistTexture(_t,s,l)))}else{if(cR(q))continue;_.push(k[q])}}},hoistStyleShaderUniformTextures:function(s,l,f){var g=this,_=f.include_globals;if(s.styles)for(var k in s.styles){var q=s.styles[k];q.shaders&&q.shaders.uniforms&&px.parseUniforms(q.shaders.uniforms).forEach(function($){var _n=$.value,_i=$.key,_o=$.uniforms;"sampler2D"!==$.type||"string"!=typeof _n||s.textures[_n]||!_&&vA(_n)||(_o[_i]=g.hoistTexture(_n,s,l))})}},hoistTexture:function(s,l,f){var g=vA(s),_=g?s:f.urlFor(s),k=g?"texture-".concat(_):_;return l.textures[k]={url:_},k},applyGlobalProperties:function(s){if(!s.global||0===Object.keys(s.global).length)return s;var l=function f(g){var _=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,q=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var $ in k=k?k+_:"",g){var _t=k+$,_n=g[$];"object"!==D_(q[_t]=_n)||Array.isArray(_n)||f(_n,_,_t,q)}return q}(s.global);return function f(g){if("string"==typeof g){var _=function $(_t,_n,_i){var _o=2<arguments.length&&void 0!==_i?_i:[];if(-1<_o.indexOf(_t))qy({level:"warn",once:!0},"Global properties: cyclical reference detected",_o);else{_o.push(_t);var xa=fR.exec(_t);if(xa){var ka=xa[1];if(ka){var _l=_n[ka];if(void 0!==_l)return"string"==typeof _l&&fR.exec(_l)?$(_l,_n,_o):_l;qy({level:"warn",once:!0},"Global property not found: "+_t)}else qy({level:"warn",once:!0},"Invalid global property reference: "+_t)}}}(g,l);void 0!==_&&(g=_)}else if(Array.isArray(g))for(var k=0;k<g.length;k++)g[k]=f(g[k]);else if("object"===D_(g))for(var q in g)g[q]=f(g[q]);return g}(s)},finalize:function(s){var l=s.config,f=s.bundle;return l?(l.global=l.global||{},l.scene=l.scene||{},l.cameras=l.cameras||{},l.lights=l.lights||{},l.styles=l.styles||{},l.layers=l.layers||{},l.camera&&(l.cameras.default=l.camera),0===Object.keys(l.cameras).length&&(l.cameras.default={}),0!==Object.keys(l.lights).length&&!Object.keys(l.lights).every(function(g){return!1===l.lights[g].visible})||(l.lights.default_light={type:"directional"}),{config:l,bundle:f}):{}}};jS(IM);var sF=function(){function s(){A0(this,s),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return L0(s,[{key:"sourceTiles",value:function(l,f){return this.coords[l.key]&&this.coords[l.key].sources&&this.coords[l.key].sources[f.name]}},{key:"addTile",value:function(l){var f=l.coords.key,g=this.coords[f];(g=g||(this.coords[f]={descendants:0})).sources||(g.sources={}),g.sources[l.source.name]||(g.sources[l.source.name]={});for(var _=(g.sources[l.source.name][l.style_zoom]=l).coords.z-1;0<=_;_--){var k=c1.coordinateAtZoom(l.coords,_);this.coords[k.key]||(this.coords[k.key]={descendants:0}),this.coords[k.key].descendants++}}},{key:"removeTile",value:function(l){var f=this.sourceTiles(l.coords,l.source),g=l.coords.key;f&&(delete f[l.style_zoom],0===Object.keys(f).length&&(delete this.coords[g].sources[l.source.name],0===Object.keys(this.coords[g].sources).length&&(delete this.coords[g].sources,0===this.coords[g].descendants&&delete this.coords[g])));for(var _=l.coords.z-1;0<=_;_--){var k=c1.coordinateAtZoom(l.coords,_);this.coords[k.key]&&0<this.coords[k.key].descendants&&(this.coords[k.key].descendants--,0!==this.coords[k.key].descendants||this.coords[k.key].sources||delete this.coords[k.key])}}},{key:"getAncestor",value:function(l,f){var g=l.coords,_=l.style_zoom,k=l.source,q=1<arguments.length&&void 0!==f?f:1;if(!(q>this.max_proxy_ancestor_depth)){if(_>k.max_coord_zoom){var $=this.sourceTiles(g,k);if($)for(var _t=_-1;_t>=k.max_coord_zoom;_t--)if($[_t]&&$[_t].loaded)return $[_t];_=k.max_coord_zoom}_--;var _n=c1.coordinateAtZoom(g,g.z-1),_i=this.sourceTiles(_n,k);return _i&&_i[_]&&_i[_].loaded?_i[_]:0<_n.z?this.getAncestor({coords:_n,style_zoom:_,source:k},q+1):void 0}}},{key:"getDescendants",value:function(l,f){var g=l.coords,_=l.style_zoom,k=l.source,q=1<arguments.length&&void 0!==f?f:1,$=[];if(_>=k.max_coord_zoom){var _t=this.sourceTiles(g,k);if(_t)for(var _n=Math.max(Ry.default_view_max_zoom,_+this.max_proxy_descendant_depth),_i=_+1;_i<=_n;_i++)if(_t[_i]&&_t[_i].loaded)return $.push(_t[_i]),$;return $}if(this.coords[g.key]&&0<this.coords[g.key].descendants){_++;for(var _o=c1.childrenForCoordinate(g),xa=0;xa<_o.length;xa++){var ka=_o[xa],_l=this.sourceTiles(ka,k);_l&&_l[_]&&_l[_].loaded?$.push(_l[_]):q<=this.max_proxy_descendant_depth&&ka.z<=k.max_coord_zoom&&$.push.apply($,l_(this.getDescendants({coords:ka,source:k,style_zoom:_},q+1)))}}return $}}]),s}(),aF=function(){function s(l,f,g,_){A0(this,s),Object.assign(this,l),this.placed=null,this._tile=_;var k=Ry.unitsPerMeter(_.coords.z)*Math.pow(2,g-_.style_zoom);this.layout=Object.assign({},l.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=k,this.position=Ry.tileSpaceToMeters(this.position,_.coords.z,_.min),this._worldToScreen=f,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return L0(s,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var l,f,g;return this._screenSpaceBoundingBox||((l=this._worldToScreen(this.position,!0))[0]+=this.offset[0],l[1]+=this.offset[1],this._screenSpaceBoundingBox={left:l[0]-(f=this.size[0]/2+this.layout.buffer[0]),bottom:l[1]+(g=this.size[1]/2+this.layout.buffer[1]),right:l[0]+f,top:l[1]-g}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var l=this._tile.coords.z,f=this._tile.min,g=Ry.tileSpaceToMeters([this.sides[0],this.sides[1]],l,f),_=Ry.tileSpaceToMeters([this.sides[2],this.sides[3]],l,f),k=g0(this._worldToScreen(g,!0),2),q=k[0],$=k[1],_t=g0(this._worldToScreen(_,!0),2);return lM(q,$,_t[0],_t[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var l=[],f=this.circles,g=this._tile.coords.z,_=this._tile.min,k=0;k<f.length-2;k+=3){var q=Ry.tileSpaceToMeters([f[k],-f[k+1]],g,_),$=f[k+2]/Ry.unitsPerMeter(g),_t=[q[0]+$,q[1]],_n=this._worldToScreen(q,!0),_i=this._worldToScreen(_t,!0),_o=J_.getLineLength(_n[0],_n[1],_i[0],_i[1]);l.push(_n[0],_n[1],_o)}return l}}]),s}(),WD={},pR={},dR=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function gR(s,l,f,g,_){var k=s.container,$=k.linked,_t=s.ranges;return{label:new aF(k.label,f,g,_),linked:$,ranges:_t,mesh:l}}var r3=function(){function s(l){A0(this,s),this.textureManager=GE(l),this.tiles={},this.meshes=[],this.containers=[]}return L0(s,[{key:"insertLabel",value:function(l,f){var g=l.label.text_data,_=g.text_settings_key,k=g.text,q=g.text_info;this.containers.push(l);var $=this._ensureTextSection(f,_);$[k]?l.label.text_data.text_info=$[k]:$[k]=q}},{key:"trackMesh",value:function(l){-1===this.meshes.indexOf(l)&&this.meshes.push(l)}},{key:"updateMeshes",value:function(){var l=this;return this.containers.forEach(function(f){var g,_,k,q,$,_n,_i,_o;f.label.text_data&&(g=f.label.getTile(),(_=f.mesh).valid?(k=f.label.type,q=f.label.text_data.text_info,l.tiles[g.id]&&l.tiles[g.id].textures&&(_.uniforms.u_texture=$=l.tiles[g.id].textures[0],-1===_.textures.indexOf($)&&_.textures.push($),"point"===k||"straight"===k?l.setTexCoords(_,f,"point"===k?q.align[f.label.align].texcoords:q.texcoords[k].texcoord):"curved"===k&&(_n=q.segments.length,_i=q.texcoords_stroke,_o=q.texcoords.curved,l.setTexCoords(_,f,function(ka){return ka<_n?_i[ka]:_o[ka-_n].texcoord})))):l.tiles[g.id]&&l.tiles[g.id].textures&&l.textureManager.release(l.tiles[g.id].textures[0]))}),this.meshes}},{key:"setTexCoords",value:function(l,f,g){var _,k,q,$,_t,_n,_i=g instanceof Function;_i||(k=(_=g0(g,4))[0],_n=[[k,q=_[1]],[$=_[2],q],[$,_t=_[3]],[k,_t]]);var _o=l.vertex_layout.stride,xa=new DataView(l.vertex_data.buffer),ka=l.vertex_layout.offset.a_texcoord;f.ranges.forEach(function(_l,_f){var _a,_g,ty,ny,uy,ry=g0(_l,3),ly=ry[0],cy=ry[1],by=ry[2];_i&&(_g=(_a=g0(g(_f),4))[0],_n=[[_g,ty=_a[1]],[ny=_a[2],ty],[ny,uy=_a[3]],[_g,uy]]);for(var Oy=by?cy/2:0;Oy<cy;Oy++){var My=_n[Oy%4],Sy=ly+Oy*_o;xa.setUint16(Sy+ka,65535*My[0],dR),xa.setUint16(Sy+ka+2,65535*My[1],dR)}})}},{key:"createTextures",value:function(l){var f=this;return Promise.all(Object.values(this.tiles).map(function(g){var _=g.id;return f._createTexturesForTile(l,g.texts,"labels-".concat(g.key,"-").concat(_),_,f.textureManager).then(function($){$.length&&($.forEach(function(_t){f.textureManager.retain(_t),1<f.textureManager.getRetainCount(_t)&&f.textureManager.release(_t)}),f.tiles[_].textures=$)})}))}},{key:"_createTexturesForTile",value:function(l,f,g,_,k){var q=new bx,$=q.setTextureTextPositions(f);return q.rasterize(f,$,_,g,l,k)}},{key:"_ensureTile",value:function(l){var f=l.id;return this.tiles[f]||(this.tiles[f]={id:f,key:l.key,texts:{}}),this.tiles[f]}},{key:"_ensureTextSection",value:function(l,f){var g=this._ensureTile(l).texts;return g[f]||(g[f]={}),g[f]}}]),s}(),uF=function(){function s(l){var k,f=this,g=l.scene,_=l.view;A0(this,s),this._scene=g,this._view=_,this._visible_tiles={},this._pyramid=new sF,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=SS(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),s0.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache((k=.1,navigator&&navigator.deviceMemory?k=5*navigator.deviceMemory/100:window&&window.screen&&(k=window.screen.width/512*window.screen.height/512*.03*3,k=Math.min(k,1)),1024*k*1024*1024),function(k,q,$){f._visible_tiles[k]&&f._visible_tiles[k]===q||q.destroy()})}return L0(s,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function(l){return l.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(l){this._visible_tiles[l.key]=l,this._pyramid.addTile(l)}},{key:"hasTile",value:function(l){return void 0!==this._visible_tiles[l]}},{key:"_forgetTile",value:function(l){var f,g;this.hasTile(l)&&(this._pyramid.removeTile(f=this._visible_tiles[l]),delete this._visible_tiles[l],f.loaded?this._tile_cache.add(f.key,f,function(_){var k=0;for(var q in _.meshes)for(var $=_.meshes[q],_t=0;_t<$.length;_t++){var _n=$[_t];k+=_n.buffer_size;for(var _i=0;_i<_n.textures.length;_i++)k+=_.textureManager.getByteLength(_n.textures[_i])}return k}(f)):(g=this._tile_cache.get(f.key))?this._tile_cache.drop(g.key):f.destroy(),this._tileBuildStop(f))}},{key:"removeTile",value:function(l){this._forgetTile(l),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(l){for(var f in this._visible_tiles)l(this._visible_tiles[f])}},{key:"removeTiles",value:function(l){for(var f in this._visible_tiles)l(this._visible_tiles[f])&&this.removeTile(f)}},{key:"removeCachedTiles",value:function(l){var f=this;this._tile_cache.forEach(function(g,_){l(_)&&f._tile_cache.drop(g)})}},{key:"updateTilesForView",value:function(l){var f=0<arguments.length&&void 0!==l&&l;this._visible_coords={};for(var g=this._view.findVisibleTileCoordinates(),_=0;_<g.length;_++){var k=g[_];this._visible_coords[k.key]=k}this.updateTileStates(f)}},{key:"updateTileStates",value:function(l){var f=0<arguments.length&&void 0!==l&&l;for(var g in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(g,f);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(l){if(l.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[l.coords.key])return!1;for(var f in this._visible_coords)if(c1.isDescendant(l.coords,this._visible_coords[f]))return!1}return!l.isProxy()}},{key:"_updateLabels",value:function(){var f=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(bx.pruneTextCache(),function(s,l,f,g,_,k){pR=WD,WD={};var q={},$={},_t=[],_n=f.worldToScreen.bind(f),_i=new r3(k);for(var _o in s.forEach(function(_a){for(var _g in _a.meshes)_a.meshes[_g].forEach(function(ty){if(ty.labels){for(var ny in _i.trackMesh(ty),ty.labels["non-collision"]){var uy=gR(ty.labels["non-collision"][ny],ty,_n,l,_a);uy.label.text_data&&_i.insertLabel(uy,_a)}for(var ry in ty.labels.collision){var ly;q[ry]||(ly=gR(ty.labels.collision[ry],ty,_n,l,_a),q[ry]=ly.label,$[ry]=ly)}}})}),$){var xa=$[_o];xa.linked&&(xa.linked=$[xa.linked]),_t.push(xa)}var ka=f.getViewport();return ex.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new IN(ka.width,ka.height,30)}),ex.addStyle("main","main"),ex.collide(_t,"main","main").then(function(_a){return _a.forEach(function(_g){var ty,ny,uy,ry,ly,cy,by=_g.mesh,Oy=_g.label.getTile();by.valid&&(!(ty=0)!==_g.show||g&&_g.label.breach&&!pR[_g.label.id]||(ty=1),ty&&(WD[_g.label.id]=!0),_g.label.text_data&&_i.insertLabel(_g,Oy),ny=by.vertex_layout.offset.a_shape,uy=by.vertex_layout.stride,ly=(ry=by.vertex_layout.attribs.find(function(My){return"a_shape"===My.name})).byte_size/ry.size,ny+=3*ly,cy=!0,_g.ranges.forEach(function(My){if(cy){for(var Sy=0;Sy<My[1];Sy++){if(by.vertex_data[My[0]+Sy*uy+ny]===ty)return void(cy=!1);by.vertex_data[My[0]+Sy*uy+ny]=ty}_i.trackMesh(by)}}))}),_i.createTextures(_).then(function(){return _i.updateMeshes()})}).then(function(_a){_a.forEach(function(_g){return _g.valid&&_g.upload()}),s.forEach(function(_g){_g.labeled=!0}),_t=[],$={},q={}})}(this._renderable_tiles.sort(lF),function(g,_){var k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,q=Math.pow(10,k);return Math.round(Math.floor(g*_)/_*q)/q}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){f._is_labeled=!a1.hasPendingTasks(),f._scene.immediateRedraw(),f._update_labels_on_queue_check=!1}))}},{key:"_updateProxyTiles",value:function(){var l,f=this,g=this._view.lookAtManipulator.getZoomDirection();0!==g&&(l=!1,this.forEachVisibleTile(function(_){var k;if(_.setProxyFor(null),1===g)_.built||(k=f._pyramid.getAncestor(_))&&(k.setProxyFor(_),l=!0);else if(-1===g&&!_.built)for(var q=f._pyramid.getDescendants(_),$=0;$<q.length;$++)q[$].setProxyFor(_),l=!0}),l||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var l in this._renderable_tiles=[],this._visible_tiles){var f=this._visible_tiles[l],g=this._tile_cache.get(l);f.loaded?(this._renderable_tiles.push(f),g&&g!==f&&this._tile_cache.drop(l)):g&&(g.generation===this._scene.generation?this._renderable_tiles.push(g):this._tile_cache.drop(l))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(l,f){return f.has_volatile_data?this._scene.getWorkers(1)[0]:f.tiled?this._scene.getWorkers(0)[Math.abs(l.x+l.y+l.z)%this._scene.num_workers]:this._scene.getWorkers(0)[f.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var l=this._renderable_tiles,f={},g=0;g<l.length;g++)Object.keys(l[g].meshes).forEach(function(k){return f[k]=!0});return this._active_styles=Object.keys(f),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var l=!1;for(var f in this._visible_tiles)if(!this._visible_tiles[f].built){l=!0;break}return l}},{key:"updateTilesVisibilityCounters",value:function(){var l=this;Object.keys(this._visible_coords).forEach(function(_){_ in l._tile_visibility_counters||(l._tile_visibility_counters[_]=0)});var f=Object.keys(this._tile_visibility_counters),g=[];f.forEach(function(_){_ in l._visible_coords?(l._tile_visibility_counters[_]++,30<=l._tile_visibility_counters[_]&&g.push(l._visible_coords[_])):(l._tile_visibility_counters[_]--,l._tile_visibility_counters[_]<=0&&delete l._tile_visibility_counters[_])}),g.length&&this.loadCoordinates(g)}},{key:"loadCoordinates",value:function(l){var f=this;l.sort(function(g,_){var k=f._view.lookAtManipulator.getLookAtData().position,q=Ry.metersPerTile(g.z)/2,$=Ry.metersForTile(g);$.x+=q,$.y-=q;var _t=Ry.metersForTile(_);_t.x+=q,_t.y-=q;var _n=Math.abs(k[0]-$.x)+Math.abs(k[1]-$.y),_i=Math.abs(k[0]-_t.x)+Math.abs(k[1]-_t.y);return(g.center_dist=_n)<(_.center_dist=_i)?-1:_i===_n?0:1}),l.forEach(function(g){return f.loadCoordinate(g)})}},{key:"_keepCoordinate",value:function(l,f){var g=1<arguments.length&&void 0!==f&&f,_=this._visible_coords[l];if(_.z===this._view.center_tile.z)for(var k in this._scene.sources){var q,$,_t,_n=this._scene.sources[k];_n.builds_geometry_tiles&&_n.includesTile(_,this._view.lookAtManipulator.getLookAtData().tile_level)&&(q=c1.normalizedKey(_,_n,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(q)&&(($=g&&this._tile_cache.get(q))||(this._all_visible_tiles_are_cached=!1),_t=$||new c1({source:_n,coords:_,worker:this.getWorkerForTile(_,_n),style_zoom:R0.zoomToTileLevel(_.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===_n.config.type&&(_t.syncedAt=_n.getSyncedAt()),this.keepTile(_t))}}},{key:"loadCoordinate",value:function(l){if(l.z===this._view.center_tile.z)for(var f in this._scene.sources){var g,_=this._scene.sources[f];_.builds_geometry_tiles&&_.includesTile(l,this._view.lookAtManipulator.getLookAtData().tile_level)&&(g=c1.normalizedKey(l,_,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(g)&&this.buildTile(this._visible_tiles[g]))}}},{key:"buildTile",value:function(l,f){this._building_tiles&&this._building_tiles[l.key]||l.built&&l.generation===this._scene.generation||(this._tileBuildStart(l.key),l.build(this._scene.generation,f))}},{key:"buildTileStylesCompleted",value:function(l){var f=l.tile,g=l.progress;if(null==this._visible_tiles[f.key])c1.abortBuild(f,this._scene.id);else if(f.generation!==this._scene.generation)c1.abortBuild(f,this._scene.id);else{if(f.id<this._visible_tiles[f.key].id)return void c1.abortBuild(f,this._scene.id);f=this._visible_tiles[f.key].merge(f),g.done&&(f.built=!0),f.buildMeshes(this._scene.styles,g),this.updateTileStates(),this._scene.requestRedraw()}g.done&&this._tileBuildStop(f)}},{key:"buildTileError",value:function(l){this._forgetTile(l.key),c1.abortBuild(l,this._scene.id)}},{key:"_tileBuildStart",value:function(l){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[l]=!0}},{key:"_tileBuildStop",value:function(l){this._building_tiles&&(l.source&&l.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[l.key],a1.removeForTile(l.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!a1.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(l,f){var g=f.source;return!this._visible_tiles[l]&&(f.generation!==this._scene.generation||"ObjectSource"===g.config.type&&g.getSyncedAt()>f.syncedAt)}}]),s}();function lF(s,l){var f=s.coords,g=l.coords;return f.z-g.z||f.x-g.x||f.y-g.y}function i3(s){A0(this,i3),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=s.BACK,this.defaults.blending=!1,this.defaults.blending_src=s.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=s.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=s.ONE,this.defaults.blending_dst_alpha=s.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,s.depthFunc(s.LESS),this.culling=new kM({cull:this.defaults.culling,face:this.defaults.culling_face},function(l){l.cull?(s.enable(s.CULL_FACE),s.cullFace(l.face)):s.disable(s.CULL_FACE)}),this.blending=new kM({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(l){l.blend?(s.enable(s.BLEND),l.src_alpha&&l.dst_alpha?s.blendFuncSeparate(l.src,l.dst,l.src_alpha,l.dst_alpha):s.blendFunc(l.src,l.dst)):s.disable(s.BLEND)}),this.depth_write=new kM({depth_write:this.defaults.depth_write},function(l){s.depthMask(l.depth_write)}),this.depth_test=new kM({depth_test:this.defaults.depth_test},function(l){l.depth_test?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST)})}var kM=function(){function s(l,f){A0(this,s),f(l),this.value=l,this.setup=f}return L0(s,[{key:"get",value:function(){return this.value}},{key:"set",value:function(l){JSON.stringify(this.value)!==JSON.stringify(l)&&(this.setup(l),this.value=l)}}]),s}(),o3=function(){function s(){A0(this,s),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return L0(s,[{key:"setCanvas",value:function(l,f){this.canvas=l,this.gl=f}},{key:"screenshot",value:function(l){var f=this,g=(0<arguments.length&&void 0!==l?l:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:g},this.queue_screenshot.promise=new Promise(function(_,k){f.queue_screenshot.resolve=_,f.queue_screenshot.reject=k})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var l=this.canvas.width,f=this.canvas.height,g=new Uint8Array(l*f*4);this.gl.readPixels(0,0,l,f,this.gl.RGBA,this.gl.UNSIGNED_BYTE,g);for(var _=(_=this.queue_screenshot.background)&&"transparent"!==_?wy.parseColor(_).slice(0,3).map(function(ny){return 255*ny}):null,k=new Uint8ClampedArray(l*f*4),q=0;q<f;q++)for(var $=0;$<l;$++){var _t=4*((f-q-1)*l+$),_n=4*(q*l+$),_i=g[3+_t];k[0+_n]=255*g[0+_t]/_i,k[1+_n]=255*g[1+_t]/_i,k[2+_n]=255*g[2+_t]/_i,k[3+_n]=_i,_&&(k[0+_n]=k[0+_n]*(_i/=255)+_[0]*(1-_i),k[1+_n]=k[1+_n]*_i+_[1]*(1-_i),k[2+_n]=k[2+_n]*_i+_[2]*(1-_i),k[3+_n]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var _o=this.screenshot_canvas;_o.width=l,_o.height=f,this.screenshot_context=this.screenshot_context||_o.getContext("2d");var xa=this.screenshot_context,ka=new ImageData(k,l,f);xa.putImageData(ka,0,0);for(var _l=_o.toDataURL("image/png"),_f=atob(_l.slice(22)),_a=new Uint8Array(_f.length),_g=0;_g<_f.length;++_g)_a[_g]=_f.charCodeAt(_g);var ty=new Blob([_a],{type:"image/png"});this.queue_screenshot.resolve({url:_l,blob:ty,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var l=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return qy("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return qy("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var f=this.video_capture={};f.chunks=[],f.stream=this.canvas.captureStream(),f.options={mimeType:"video/webm"},f.media_recorder=new MediaRecorder(f.stream,f.options),f.media_recorder.ondataavailable=function(g){var _,k;0<g.data.size&&f.chunks.push(g.data),f.resolve&&(k=MS(_=new Blob(f.chunks,{type:f.options.mimeType})),f.stream&&(f.stream.getTracks()||[]).forEach(function(q){q.stop(),f.stream.removeTrack(q)}),f.stream=null,f.media_recorder=null,l.video_capture=null,f.resolve({url:k,blob:_,type:"webm"}))},f.media_recorder.start()}catch(g){return this.video_capture=null,qy("error","Scene video capture failed",g),!1}return!0}},{key:"stopVideoCapture",value:function(){var l=this;return this.video_capture?(this.video_capture.promise=new Promise(function(f,g){l.video_capture.resolve=f,l.video_capture.reject=g}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(qy("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),s}(),s3=function(){function s(){A0(this,s),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return L0(s,[{key:"init",value:function(l,f,g,_,k,q,$){return this.setMeshVariantMaxLife($),this.scene_id=l,this.textureManager=GE(l),this._worker_id=f,qy.setLevel(g),R0.device_pixel_ratio=_,nM.setElementIndexUint(k),AE.setPrefix(this._worker_id),this._style_manager=new L4,this._importExternalScripts(q),uM.id_prefix=f,this._isConfigured=!1,f}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(l){var f;0!==l.length&&(qy("debug","loading custom data source scripts in worker:",l),f=Object.getOwnPropertyNames(window),importScripts.apply(void 0,l_(l)),Object.getOwnPropertyNames(window).forEach(function(g){-1===f.indexOf(g)&&(self[g]=window[g])}))}},{key:"updateConfig",value:function(l,f){var _=l.config,k=l.generation,q=l.introspection;for(var $ in _=JSON.parse(_),Object.assign(oP,f),this._generation=k,this._isConfigured=!1,_.layers)_.layers[$]&&(_.layers[$].data=R0.stringsToFunctions(_.layers[$].data));this.global=R0.stringsToFunctions(_.global),this._createDataSources(_),_.styles=R0.stringsToFunctions(_.styles,wy.wrapFunction),this.styles=this._style_manager.build(_.styles),self.is_fake_worker=n1.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:q,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(_t,_n){Kx={};var _i={};for(var _o in _t){var xa=_t[_o];xa&&(_i[_o]=hR(_o,xa,null,_n))}return _i}(_.layers,this._style_manager.styles),this._configuring=this._syncTextures(_.textures)}},{key:"setMeshVariantMaxLife",value:function(l){this.meshVariantMaxLife=l}},{key:"_createDataSources",value:function(l){var f=this;this._last_config_sources=this._config_sources||{},this._config_sources=l.sources;var g=this.sources,_=[];for(var k in l.sources=R0.stringsToFunctions(l.sources),this.sources={},self.is_fake_worker=n1.is_main,l.sources)if(JSON.stringify(this._last_config_sources[k])!==JSON.stringify(l.sources[k])){var q=void 0;try{q=_b.create(Object.assign({},l.sources[k],{name:k}),this.sources)}catch($){qy("error","Error creating source.",$.message,l.sources[k]);continue}q&&(this.sources[k]=q,_.push(k))}else this.sources[k]=g[k];delete self.is_fake_worker,_.forEach(function($){for(var _t in f.tiles)f.tiles[_t].source===$&&delete f.tiles[_t]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(l){var f=this;if((this._isConfigured=!0)!==l.loaded)l.loading=!0,l.loaded=!1,l.error=null,this._loadTileSourceData(l).then(function(){if(f.getTile(l.id)){l.loading=!1,l.loaded=!0;try{c1.buildGeometry(l,f)}catch(g){l.error=g.toString(),s0.postMessage("TileManager_".concat(f.scene_id,".buildTileError"),c1.slice(l))}}else qy("trace","stop tile build after data source load because tile was removed. Key: ".concat(l.key,", id: ").concat(l.id))},function(g){l.loading=!1,l.loaded=!1,l.error=g.stack,qy("error","tile load error for tile with key ".concat(l.key," and id ").concat(l.id,": ").concat(l.error)),s0.postMessage("TileManager_".concat(f.scene_id,".buildTileError"),c1.slice(l))});else{qy("trace","used worker cache for tile with key ".concat(l.key," and id ").concat(l.id));try{c1.buildGeometry(l,this)}catch(g){l.error=g.toString(),s0.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),c1.slice(l))}}}},{key:"buildTile",value:function(l){var f,g=l.tile,_=this.getTile(g.id);_&&_.loading||(g=this.tiles[g.id]=Object.assign(_||{},g),this._isConfigured?this._onConfig(g):(f=this).awaitConfiguration().then(function(){return f._onConfig(g)}))}},{key:"_loadTileSourceData",value:function(l){return this.sources[l.source]?this.sources[l.source].load(l):(l.source_data={},Promise.resolve(l))}},{key:"getTile",value:function(l){return this.tiles[l]}},{key:"removeTile",value:function(l){var f=this.tiles[l];null!=f&&(!0===f.loading&&(qy("trace","cancel tile load for tile id ".concat(l)),f.loading=!1,c1.cancel(f)),delete this.tiles[l],qy("trace","remove tile from cache, tile id: ".concat(l)))}},{key:"queryFeatures",value:function(l){var f=this,g=l.filter,_=l.visible,k=l.geometry,$=[],_t=l.tile_ids.map(function(_n){return f.tiles[_n]}).filter(function(_n){return _n});return null!=g&&(g=-1<["{","["].indexOf(g[0])?JSON.parse(g):g,g=R0.stringsToFunctions(g,wy.wrapFunction)),g=j_(g,n3),_t.forEach(function(_n){for(var _i in _n.source_data.layers)!function(_o){_n.source_data.layers[_o].features.forEach(function(xa){var ka,_l;!0===_&&xa.generation!==f._generation||!1===_&&xa.generation===f._generation||((ka=wy.getFeatureParseContext(xa,_n,f.global)).source=_n.source,ka.layer=_o,g(ka)&&(_l={type:xa.type,properties:xa.properties},!0===k&&(_l.geometry=Ry.copyGeometry(xa.geometry),Ry.tileSpaceToLatlng(_l.geometry,_n.coords.z,_n.min)),$.push(_l)))})}(_i)}),$}},{key:"resetFeatureSelection",value:function(){AE.reset()}},{key:"_syncTextures",value:function(l){var f=[];return l&&f.push.apply(f,l_(Object.keys(l))),qy("trace","sync textures to worker:",f),0<f.length?this.textureManager.syncTexturesToWorker(f):Promise.resolve()}},{key:"profile",value:function(l){console.profile("worker ".concat(this._worker_id,": ").concat(l))}},{key:"profileEnd",value:function(l){console.profileEnd("worker ".concat(this._worker_id,": ").concat(l))}},{key:"terminate",value:function(){this.dispose()}}]),s}();(n1.is_worker||self.H&&self.H.DEBUG)&&s0.addTarget("self",new s3);var OM=function(){function s(l,f){A0(this,s),f=f||{},jS(this),this.id=s.id++,this.textureManager=GE(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new zO(this,f),this.tile_manager=new uF({scene:this,view:this.view}),this.num_workers=f.numWorkers||2,!0===f.disableVertexArrayObjects&&(sA.disabled=!0),R0.device_pixel_ratio=f.devicePixelRatio,this.config=null,this.config_source=l,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new L4,this.building=null,this.dirty=!0,f.preUpdate&&this.subscribe({pre_update:f.preUpdate}),f.postUpdate&&this.subscribe({post_update:f.postUpdate}),this.render_loop=!f.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new o3,this.selection=null,this.introspection=!0===f.introspection,this.viewport=f.viewport,this.adjustMeshVariantMaxLife(),this.container=f.container,this.canvas=null,this.contextOptions=f.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=s.generation,this.last_complete_generation=s.generation,this.log_level=f.logLevel||"warn",qy.setLevel(this.log_level),qy.reset()}return L0(s,[{key:"load",value:function(l,f){var g=this,_=0<arguments.length&&void 0!==l?l:null,k=1<arguments.length&&void 0!==f?f:{};return this.initializing||(qy.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(k="string"==typeof k?{base_path:k}:k).blocking=void 0===k.blocking||k.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(_,k).then(function(){return g.createWorkers()}).then(function(){g.resetFeatureSelection();var q="object"===D_(g.config_source)||g.hasSubscribersFor("load"),$=g.updateConfig({serialize_funcs:q,normalize:!1,load_event:!0,fade_in:!0});if(!0===k.blocking)return $}).then(function(){g.updating--,g.initializing=null,g.initialized=!0,g.last_valid_config_source=g.config_source,g.last_valid_options={base_path:k.base_path,file_type:k.file_type},g.requestRedraw()}).catch(function(q){var $,_t;if(g.initializing=null,g.updating=0,_t="YAMLException"===q.name?($="yaml","Error parsing scene YAML"):"Error initializing scene",g.trigger("error",{type:$,message:_t,error:q,url:g.config_source}),_t="Scene.load() failed to load ".concat(g.config_source,": ").concat(q.message),g.last_valid_config_source)return qy("warn",_t,q),qy("info","Scene.load() reverting to last valid configuration"),g.load(g.last_valid_config_source,g.last_valid_base_path);throw qy("error",_t,q),q})),this.initializing}},{key:"destroy",value:function(){var l;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},u0.reset(),(l=this.gl.getExtension("WEBGL_lose_context"))&&l.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),qy.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Sw.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:R0.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(l){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),sA.init(this.gl),this.render_states=new i3(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var l,f;if(void 0!==o&&(f="("+o+")()",v&&""!==d&&(f+="\n//# sourceMappingURL="+v.slice(0,v.lastIndexOf("/")+1)+d),l=MS(new Blob([f],{type:"application/javascript"}))),!l)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return l}},{key:"updateExternalScripts",value:function(){var l=l_(this.external_scripts||[]),f=[];if(this.config.scene.scripts)for(var g in this.config.scene.scripts)-1===f.indexOf(this.config.scene.scripts[g])&&f.push(this.config.scene.scripts[g]);for(var _ in this.config.sources){var k=this.config.sources[_];if(k.scripts)for(var q in k.scripts)-1===f.indexOf(k.scripts[q])&&f.push(k.scripts[q])}return this.external_scripts=f,!(this.external_scripts.length===l.length&&this.external_scripts.every(function($,_t){return $===l[_t]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(l){var f=this,g=!!this.gl.getExtension("OES_element_index_uint"),_=[];this._workers=[];for(var k=0;k<this.num_workers;k++)!function(){var $=new Worker(l);f._workers[k]=$,s0.addWorker($),qy("debug","Scene.makeWorkers: initializing worker ".concat(k));var _t=k;_.push(s0.postMessage($,"self.init",f.id,k,f.log_level,R0.device_pixel_ratio,g,f.external_scripts,f.meshVariantMaxLife).then(function(_n){return qy("debug","Scene.makeWorkers: initialized worker ".concat(_n)),_n},function(_n){return qy("error","Scene.makeWorkers: failed to initialize worker ".concat(_t,":"),_n),Promise.reject(_n)}))}();var q=new s3;return this._workers.push(q),_.push(q.init(this.id,k,this.log_level,R0.device_pixel_ratio,g,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(_).then(function(){var $;qy.setWorkers(f._workers.slice(0,f.num_workers)),$=l,void 0===VC&&"function"!=typeof(VC=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(VC=null,qy("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),VC&&VC($)})}},{key:"getWorkers",value:function(l){return this._workers.filter(function(f){switch(l){case 0:return f instanceof Worker;case 1:return f instanceof s3;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(qy.setWorkers(null),this._workers.forEach(function(l){l.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var l=this.viewport,f=l.width,g=l.height;0<f&&0<g&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Sw.resize(this.gl,f,g,R0.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var l=this.viewport,_=R0.device_pixel_ratio,q=Math.max(Math.ceil(l.width/_/256*(l.height/_/256)*2),8);if(this.meshVariantMaxLife!==q)return this.meshVariantMaxLife=q,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&s0.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),a1.setState({user_moving_view:this.view.user_input_active}),a1.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var l=this;this.render_loop_active||setTimeout(function(){l.renderLoop()},0)}},{key:"update",value:function(){var l=this.dirty,f=!!this.selection&&this.selection.hasPendingRequests(),g=!(!1===l&&!1===f||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",g),this.view.update(),g&&(this.dirty=!1,this.render({main:l,selection:f}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",g),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,qy("trace","Scene.render()"),!0)}},{key:"render",value:function(l){var f=this,g=l.main,_=l.selection,k=this.gl;if(Object.keys(this.lights).forEach(function(q){return f.lights[q].update()}),g&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),_){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,this.canvas.width,this.canvas.height),k.clearColor.apply(k,l_(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:_})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(l,f){var g=this,_=0<arguments.length&&void 0!==l?l:"program",q=this.gl,k=null==(k=(1<arguments.length&&void 0!==f?f:{}).allow_blend)||k;this.clearFrame();for(var $,_t=r1.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(_g){return g.styles[_g]}).filter(function(_g){return _g})),_n=0,_i=0,_o=0;_o<_t.length;_o++){var xa,ka,_l=_t[_o],_f=_i-(xa=parseInt(_l.name));(_l.clean_depth||_f)&&(this.render_states.depth_write.value.depth_write?q.clear(q.DEPTH_BUFFER_BIT):(q.depthMask(!0),q.clear(q.DEPTH_BUFFER_BIT),q.depthMask(!1)),_f&&(_i=xa)),_l.blend!==$&&(ka=Object.assign({},r1.render_states[_l.blend],{blend:k&&_l.blend}),this.setRenderState(ka));var _a="translucent"===_l.blend&&"program"===_;_a&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(_l.name,_),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),_n+=this.renderStyle(_l.name,_),_a&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),$=_l.blend}return _n}},{key:"renderStyle",value:function(l,f){for(var g,_=this,k=this.styles[l],q=!0,$=0,_t=this.tile_manager.getRenderableTiles(),_n=Math.max.apply(Math,l_(_t.map(function(xa){return xa.meshes[l]?Math.max.apply(Math,l_(xa.meshes[l].map(function(ka){return ka.variant.order}))):-1}))),_i=0;_i<_n+1;_i++){var _o=function(xa){for(var ka=0;ka<_t.length;ka++){var _l=_t[ka];if(null!=_l.meshes[l]&&_l.shouldProxyForStyle(l))for(var _f=_l.meshes[l].filter(function(ny){return ny.variant.order===xa}),_a=0,_g=_f.length;_a<_g;_a+=1){var ty=_f[_a];if(!0===q&&(q=!1,!(g=_.setupStyle(k,f))))return{v:0};_.view.setupTile(_l,g),_.selection.setupDiscards(g),k.render(ty)&&_.requestRedraw(),$+=ty.geometry_count}}}(_i);if("object"===D_(_o))return _o.v}return $}},{key:"setupStyle",value:function(l,f){var g;try{if(!(g=l.getProgram(f)))return}catch(k){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(l.name),style:l,shader_errors:l.program&&l.program.shader_errors})}for(var _ in g.use(),l.setup(),this.view.setupProgram(g),this.lights)this.lights[_].setupProgram(g);return g}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(l){var f,g,_=0<arguments.length&&void 0!==l?l:{},k=_.depth_test,q=_.depth_write,$=_.cull_face,_t=_.blend;this.initialized&&(f=this.render_states,q=!1!==q&&f.defaults.depth_write,$=!1!==$&&f.defaults.culling,_t=null!=_t?_t:f.defaults.blending,g=this.gl,f.depth_test.set({depth_test:k=!1!==k&&f.defaults.depth_test}),f.depth_write.set({depth_write:q}),f.culling.set({cull:$,face:f.defaults.culling_face}),_t&&"opaque"!==_t?"overlay"===_t||"inlay"===_t||"translucent"===_t?f.blending.set({blend:!0,src:g.SRC_ALPHA,dst:g.ONE_MINUS_SRC_ALPHA,src_alpha:g.ONE,dst_alpha:g.ONE_MINUS_SRC_ALPHA}):"add"===_t?f.blending.set({blend:!0,src:g.ONE,dst:g.ONE}):"multiply"===_t&&f.blending.set({blend:!0,src:g.ZERO,dst:g.SRC_COLOR}):f.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(l,f,g){var k=f.radius;this.initialized?this.selection.getFeatureAt({x:l.x/this.view.size.css.width,y:l.y/this.view.size.css.height},{radius:k=0<k?{x:k/this.view.size.css.width,y:k/this.view.size.css.height}:null,top_most_only:f.top_most_only},g):qy("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(l){var f=0<arguments.length&&void 0!==l?l:{},_=f.unique,k=void 0===_||_,q=f.group_by,$=void 0===q?null:q,_t=f.visible,_n=void 0===_t?null:_t,_i=f.geometry,_o=void 0!==_i&&_i,g=R0.serializeWithFunctions(g=f.filter),xa=this.tile_manager.getRenderableTiles().map(function(ka){return ka.id});return s0.postMessage(this._workers,"self.queryFeatures",{filter:g,visible:_n,geometry:_o,tile_ids:xa}).then(function(ka){var _l=[],_f={},_a={},_g=(k="string"==typeof k?[k]:k)&&function(ny){return JSON.stringify(Array.isArray(k)?fO(ny,k):ny)},ty=($=("string"==typeof $||Array.isArray($))&&$)&&function(ny){return Array.isArray($)?JSON.stringify(fO(ny,$)):ny[$]};return ka.forEach(function(ny){return ny.forEach(function(uy){if(_g){var ry=_g(uy);if(_f[ry])return;_f[ry]=!0}var ly;ty?(ly=ty(uy.properties),_a[ly]=_a[ly]||[],_a[ly].push(uy)):_l.push(uy)})}),ty?_a:_l})}},{key:"loadScene",value:function(l,f){var g=this,_=0<arguments.length&&void 0!==l?l:null,k=1<arguments.length&&void 0!==f?f:{},q=k.base_path,$=k.file_type;return this.config_source=_||this.config_source,this.base_path=BC("string"==typeof this.config_source?q||this.config_source:q),this.config_path=this.base_path,R2.loadScene(this.config_source,{path:this.base_path,type:$}).then(function(_t){var _i=_t.bundle;return g.config=_t.config,g.config_bundle=_i,g.config})}},{key:"createDataSources",value:function(){var l=this,f=[],g=Object.keys(this.sources),_=0;for(var k in this.config.sources){var q=this.config.sources[k],$=this.sources[k];try{var _t=Object.assign({},q,{name:k,id:_++});if(this.sources[k]=_b.create(_t,this.sources),!this.sources[k])throw{}}catch(xa){delete this.sources[k];var _n="Could not create data source: ".concat(xa.message);qy("warn","Scene: ".concat(_n),q),this.trigger("warning",{type:"sources",source:q,message:_n})}_b.sameConfig(this.sources[k],$)||f.push(k)}for(var _i in g.forEach(function(xa){l.config.sources[xa]||(delete l.sources[xa],f.push(xa))}),0<f.length&&this.tile_manager.removeTiles(function(xa){return-1<f.indexOf(xa.source.name)}),this.config.layers){var _o=this.config.layers[_i];!1!==_o.enabled&&_o.data&&this.sources[_o.data.source]&&(this.sources[_o.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var l=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return l.textureManager.createDefault(l.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var l in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[l].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var l in this.lights={},this.config.lights){var f;this.config.lights[l]&&"object"===D_(this.config.lights[l])&&((f=this.config.lights[l]).name=l.replace("-","_"),f.visible=!1!==f.visible,f.visible&&(this.lights[f.name]=nx.create(this.view,f)))}nx.inject(this.lights)}},{key:"setBackground",value:function(){var l,f=this.config.scene.background;this.background={},f&&f.color&&(this.background.color=wy.parseColor(f.color)),this.background.color||(this.background.color=[0,0,0,0]),this.canvas.style.backgroundColor=1===this.background.color[3]?"rgba(".concat(this.background.color.map(function(g){return Math.floor(255*g)}).join(", "),")"):"transparent",(l=this.gl).clearColor.apply(l,l_(this.background.color))}},{key:"setIntrospection",value:function(l){var f=this;return l!==this.introspection?(this.introspection=l||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return f.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(l){var f=0<arguments.length&&void 0!==l?l:{},g=f.load_event,_=void 0!==g&&g,k=f.serialize_funcs,q=f.normalize,$=void 0===q||q;this.generation=++s.generation,this.updating++,this.config=R2.applyGlobalProperties(this.config),$?R2.normalize(this.config,this.config_bundle):(R2.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),R2.normalizeTextures(this.config,this.config_bundle)),this.trigger(_?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),ED.loadFonts(this.config.fonts),this.updateStyles();var _t=this.syncConfigToWorker({serialize_funcs:k});return this.updating--,this.view.updateBounds(),this.requestRedraw(),_t}},{key:"syncConfigToWorker",value:function(l){var f=(0<arguments.length&&void 0!==l?l:{}).serialize_funcs,g=void 0===f||f?R0.serializeWithFunctions(this.config):JSON.stringify(this.config);return s0.postMessage(this._workers,"self.updateConfig",{config:g,generation:this.generation,introspection:this.introspection},dD)}},{key:"createListeners",value:function(){var l=this;this.listeners={},this.listeners.view={move:function(){return l.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return l.dirty=!0},warning:function(f){return l.trigger("warning",Object.assign({type:"textures"},f))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(f){return l.trigger("error",Object.assign({type:"scene"},f))}},R2.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),R2.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&s0.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new AE(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(l){var f=(0<arguments.length&&void 0!==l?l:{}).background,g=void 0===f?"white":f;return this.requestRedraw(),this.media_capture.screenshot({background:g})}},{key:"pixelRatio",value:function(){return R0.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(l){console.profile("main thread: ".concat(l)),s0.postMessage(this._workers,"self.profile",l)}},{key:"_profileEnd",value:function(l){console.profileEnd("main thread: ".concat(l)),s0.postMessage(this._workers,"self.profileEnd",l)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var l=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(f){return l.styles[f]&&l.styles[f].animated})}}],[{key:"create",value:function(l,f){return new s(l,1<arguments.length&&void 0!==f?f:{})}}]),s}();OM.id=0,OM.generation=0;var cF=function(){M1(l,qC);var s=j1(l);function l(f,g,_){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};A0(this,l);var q=Math.pow(2,k.coords.z),$=Math.abs(Math.floor(k.coords.x/q)),_t=Math.abs(q*$-Math.abs(k.coords.x)),_n=k.coords;return k.coords={x:_t,y:_n.y,z:_n.z},s.call(this,f,g,_,k)}return L0(l,[{key:"load",value:function(f){var g=this;if(!f||!f.uid)return S_(Q_(l.prototype),"load",this).call(this,f);var _=f.coords,k=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function(q,$){var _t=H.map.DataModel.invoke(f.uid,"requestTileAsPromise",[_.x,_.y,_.z])||null;_t?_t.then(function(_n){var _i=_n.data;g.loaded=!0,!_i||_i instanceof ArrayBuffer||"IMG"!==_i.tagName.toUpperCase()&&"CANVAS"!==_i.tagName.toUpperCase()?g.setData(1,1,k,{filtering:"nearest"}):g.setElement(_i,f)},function(){g.loaded=!1}).then(q,function(_n){return $(_n)}):$(new Error("Unable to invoke on target "+f.uid))}),this.loading}}]),l}();nD.register(cF,function(s){return s&&s.uid}),self.H=self.H||{},self.H.gl={DataSource:_b,Geo:Ry,MathUtils:J_,Scene:OM,Task:a1,Tile:c1,WorkerBroker:s0,log:qy,SceneLoader:R2,yaml:t3}}()};e()}(),this.H=this.H||{},this.H.venues=function(e){function o(_p,J){var Ve,_s;J=(J=void 0===J?{}:J).insertAt,_p&&"undefined"!=typeof document&&(Ve=document.head||document.getElementsByTagName("head")[0],(_s=document.createElement("style")).type="text/css","top"===J&&Ve.firstChild?Ve.insertBefore(_s,Ve.firstChild):Ve.appendChild(_s),_s.styleSheet?_s.styleSheet.cssText=_p:_s.appendChild(document.createTextNode(_p)))}function d(_p,J){var Ve,_s=Object.keys(_p);return Object.getOwnPropertySymbols&&(Ve=Object.getOwnPropertySymbols(_p),J&&(Ve=Ve.filter(function(_c){return Object.getOwnPropertyDescriptor(_p,_c).enumerable})),_s.push.apply(_s,Ve)),_s}function v(_p){for(var J=1;J<arguments.length;J++){var Ve=null!=arguments[J]?arguments[J]:{};J%2?d(Object(Ve),!0).forEach(function(_s){Ki(_p,_s,Ve[_s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_p,Object.getOwnPropertyDescriptors(Ve)):d(Object(Ve)).forEach(function(_s){Object.defineProperty(_p,_s,Object.getOwnPropertyDescriptor(Ve,_s))})}return _p}function w(_p){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(_p)}function j(_p,J){if(!(_p instanceof J))throw new TypeError("Cannot call a class as a function")}function Z(_p,J){for(var Ve=0;Ve<J.length;Ve++){var _s=J[Ve];_s.enumerable=_s.enumerable||!1,_s.configurable=!0,"value"in _s&&(_s.writable=!0),Object.defineProperty(_p,_s.key,_s)}}function _e(_p,J,Ve){return J&&Z(_p.prototype,J),Ve&&Z(_p,Ve),Object.defineProperty(_p,"prototype",{writable:!1}),_p}function Ki(_p,J,Ve){return J in _p?Object.defineProperty(_p,J,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):_p[J]=Ve,_p}function _u(_p,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");_p.prototype=Object.create(J&&J.prototype,{constructor:{value:_p,writable:!0,configurable:!0}}),Object.defineProperty(_p,"prototype",{writable:!1}),J&&iy(_p,J)}function fd(_p){return(fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(J){return J.__proto__||Object.getPrototypeOf(J)})(_p)}function iy(_p,J){return(iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ve,_s){return Ve.__proto__=_s,Ve})(_p,J)}function oy(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_p){return!1}}function dy(_p,J,Ve){return(dy=oy()?Reflect.construct.bind():function(_s,_c,_d){var sy=[null];return sy.push.apply(sy,_c),_c=new(Function.bind.apply(_s,sy)),_d&&iy(_c,_d.prototype),_c}).apply(null,arguments)}function Ay(_p){if(void 0===_p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _p}function ky(_p){var J=oy();return function(){var Ve,_s=fd(_p);if(Ve=J?(Ve=fd(this).constructor,Reflect.construct(_s,arguments,Ve)):_s.apply(this,arguments),_s=this,Ve&&("object"==typeof Ve||"function"==typeof Ve))return Ve;if(void 0!==Ve)throw new TypeError("Derived constructors may only return object or undefined");return Ay(_s)}}function Xy(){return(Xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(_p,J,Ve){var _s=function(_c,_d){for(;!Object.prototype.hasOwnProperty.call(_c,_d)&&null!==(_c=fd(_c)););return _c}(_p,J);if(_s)return(_s=Object.getOwnPropertyDescriptor(_s,J)).get?_s.get.call(arguments.length<3?_p:Ve):_s.value}).apply(this,arguments)}function zy(_p,J){return function(Ve){if(Array.isArray(Ve))return Ve}(_p)||function(Ve,_s){var _c=null==Ve?null:"undefined"!=typeof Symbol&&Ve[Symbol.iterator]||Ve["@@iterator"];if(null!=_c){var _d,sy,hy=[],my=!0,py=!1;try{for(_c=_c.call(Ve);!(my=(_d=_c.next()).done)&&(hy.push(_d.value),!_s||hy.length!==_s);my=!0);}catch(Ty){py=!0,sy=Ty}finally{try{my||null==_c.return||_c.return()}finally{if(py)throw sy}}return hy}}(_p,J)||Gy(_p,J)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h0(_p){return function(J){if(Array.isArray(J))return O0(J)}(_p)||function(J){if("undefined"!=typeof Symbol&&null!=J[Symbol.iterator]||null!=J["@@iterator"])return Array.from(J)}(_p)||Gy(_p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(_p,J){if(_p){if("string"==typeof _p)return O0(_p,J);var Ve=Object.prototype.toString.call(_p).slice(8,-1);return"Map"===(Ve="Object"===Ve&&_p.constructor?_p.constructor.name:Ve)||"Set"===Ve?Array.from(_p):"Arguments"===Ve||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ve)?O0(_p,J):void 0}}function O0(_p,J){(null==J||J>_p.length)&&(J=_p.length);for(var Ve=0,_s=new Array(J);Ve<J;Ve++)_s[Ve]=_p[Ve];return _s}o(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var N0=function(){_u(J,H.map.Feature);var _p=ky(J);function J(Ve){var _s;return j(this,J),(_s=_p.call(this)).id=Ve.id,_s.model=Ve,_s}return _e(J,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var _s=(Ve=zy(this.model.getCenter(),2))[0],Ve=Ve[1];return new H.geo.Point(Ve,_s)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),J}(),s1=function(){_u(J,H.map.Feature);var _p=ky(J);function J(Ve){var _s;return j(this,J),(_s=_p.call(this)).id=Ve.id,_s.model=Ve,_s}return _e(J,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return dy(H.geo.Rect,h0(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var _s=(Ve=zy(this.model.getCenter(),2))[0],Ve=Ve[1];return new H.geo.Point(Ve,_s)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(Ve){return this.getLevels().find(function(_s){return _s.getIdentifier()===Ve})}},{key:"getLevels",value:function(){var Ve=this.getData().getLevels().map(function(_s){return _s.getIdentifier()});return this.getVenue().getLevels().filter(function(_s){return-1!==Ve.indexOf(_s.id)})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),J}(),S0=function(){_u(J,H.map.Feature);var _p=ky(J);function J(Ve){var _s;return j(this,J),(_s=_p.call(this)).id=Ve.id,_s.model=Ve,_s}return _e(J,[{key:"getGeometry",value:function(Ve){return this.getGeometries().find(function(_s){return _s.getIdentifier()===Ve})}},{key:"getGeometries",value:function(){var Ve=this.getData().getGeometries().map(function(_s){return _s.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function(_s){return-1!==Ve.indexOf(_s.id)})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),J}();function D1(_p,J,Ve,_s){for(var _c,_d=_s,sy=Ve-J>>1,hy=Ve-J,my=_p[J],py=_p[J+1],Ty=_p[Ve],By=_p[Ve+1],Ey=J+3;Ey<Ve;Ey+=3){var Qy=(t0=_p[Ey],Jy=_p[Ey+1],n0=void 0,Cy=void 0,Ny=void 0,Ny=($y=By)-(Uy=py),0==(Cy=(Hy=Ty)-(Fy=my))&&0===Ny||(1<(n0=((t0-Fy)*Cy+(Jy-Uy)*Ny)/(Cy*Cy+Ny*Ny))?(Fy=Hy,Uy=$y):0<n0&&(Fy+=Cy*n0,Uy+=Ny*n0)),(Cy=t0-Fy)*Cy+(Ny=Jy-Uy)*Ny);_d<Qy?(_c=Ey,_d=Qy):Qy===_d&&(Qy=Math.abs(Ey-sy))<hy&&(_c=Ey,hy=Qy)}var t0,Jy,Fy,Uy,Hy,$y,n0,Cy,Ny;_s<_d&&(3<_c-J&&D1(_p,J,_c,_s),_p[_c+2]=_d,3<Ve-_c&&D1(_p,_c,Ve,_s))}function cx(_p,J,Ve,_s){var _c=_p={id:void 0===_p?null:_p,type:J,geometry:Ve,tags:_s,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},_d=_c.geometry;if("Point"===(J=_c.type)||"MultiPoint"===J||"LineString"===J)N_(_c,_d);else if("Polygon"===J||"MultiLineString"===J)for(var sy=0;sy<_d.length;sy++)N_(_c,_d[sy]);else if("MultiPolygon"===J)for(sy=0;sy<_d.length;sy++)for(var hy=0;hy<_d[sy].length;hy++)N_(_c,_d[sy][hy]);return _p}function N_(_p,J){for(var Ve=0;Ve<J.length;Ve+=3)_p.minX=Math.min(_p.minX,J[Ve]),_p.minY=Math.min(_p.minY,J[Ve+1]),_p.maxX=Math.max(_p.maxX,J[Ve]),_p.maxY=Math.max(_p.maxY,J[Ve+1])}function I_(_p,J,Ve,_s){if(J.geometry){var _c=J.geometry.coordinates,_d=J.geometry.type,sy=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),hy=[],my=J.id;if(Ve.promoteId?my=J.properties[Ve.promoteId]:Ve.generateId&&(my=_s||0),"Point"===_d)iE(_c,hy);else if("MultiPoint"===_d)for(var py=0;py<_c.length;py++)iE(_c[py],hy);else if("LineString"===_d)W_(_c,hy,sy,!1);else if("MultiLineString"===_d){if(Ve.lineMetrics){for(py=0;py<_c.length;py++)W_(_c[py],hy=[],sy,!1),_p.push(cx(my,"LineString",hy,J.properties));return}LE(_c,hy,sy,!1)}else if("Polygon"===_d)LE(_c,hy,sy,!0);else{if("MultiPolygon"!==_d){if("GeometryCollection"!==_d)throw new Error("Input data is not a valid GeoJSON object.");for(py=0;py<J.geometry.geometries.length;py++)I_(_p,{id:my,geometry:J.geometry.geometries[py],properties:J.properties},Ve,_s);return}for(py=0;py<_c.length;py++){var Ty=[];LE(_c[py],Ty,sy,!0),hy.push(Ty)}}_p.push(cx(my,_d,hy,J.properties))}}function iE(_p,J){J.push(Y2(_p[0])),J.push(k_(_p[1])),J.push(0)}function W_(_p,J,Ve,_s){for(var _c,_d,sy=0,hy=0;hy<_p.length;hy++){var my=Y2(_p[hy][0]),py=k_(_p[hy][1]);J.push(my),J.push(py),J.push(0),0<hy&&(sy+=_s?(_c*py-my*_d)/2:Math.sqrt(Math.pow(my-_c,2)+Math.pow(py-_d,2))),_c=my,_d=py}var Ty=J.length-3;J[2]=1,D1(J,0,Ty,Ve),J[2+Ty]=1,J.size=Math.abs(sy),J.start=0,J.end=J.size}function LE(_p,J,Ve,_s){for(var _c=0;_c<_p.length;_c++){var _d=[];W_(_p[_c],_d,Ve,_s),J.push(_d)}}function Y2(_p){return _p/360+.5}function k_(_p){return _p=Math.sin(_p*Math.PI/180),(_p=.5-.25*Math.log((1+_p)/(1-_p))/Math.PI)<0?0:1<_p?1:_p}function dE(_p,J,Ve,_s,_c,_d,sy,hy){if(_s/=J,(Ve/=J)<=_d&&sy<_s)return _p;if(sy<Ve||_s<=_d)return null;for(var my=[],py=0;py<_p.length;py++){var Ty=_p[py],By=Ty.geometry,Ey=Ty.type,Qy=0===_c?Ty.minX:Ty.minY,t0=0===_c?Ty.maxX:Ty.maxY;if(Ve<=Qy&&t0<_s)my.push(Ty);else if(!(t0<Ve||_s<=Qy)){var Jy=[];if("Point"===Ey||"MultiPoint"===Ey){n0=Ny=Uy=void 0;for(var Fy=By,Uy=Jy,Hy=Ve,$y=_s,Cy=_c,Ny=0;Ny<Fy.length;Ny+=3){var n0=Fy[Ny+Cy];Hy<=n0&&n0<=$y&&(Uy.push(Fy[Ny]),Uy.push(Fy[Ny+1]),Uy.push(Fy[Ny+2]))}}else if("LineString"===Ey)cS(By,Jy,Ve,_s,_c,!1,hy.lineMetrics);else if("MultiLineString"===Ey)hx(By,Jy,Ve,_s,_c,!1);else if("Polygon"===Ey)hx(By,Jy,Ve,_s,_c,!0);else if("MultiPolygon"===Ey)for(var y0=0;y0<By.length;y0++){var Z0=[];hx(By[y0],Z0,Ve,_s,_c,!0),Z0.length&&Jy.push(Z0)}if(Jy.length)if(hy.lineMetrics&&"LineString"===Ey)for(y0=0;y0<Jy.length;y0++)my.push(cx(Ty.id,Ey,Jy[y0],Ty.tags));else"LineString"!==Ey&&"MultiLineString"!==Ey||(1===Jy.length?(Ey="LineString",Jy=Jy[0]):Ey="MultiLineString"),"Point"!==Ey&&"MultiPoint"!==Ey||(Ey=3===Jy.length?"Point":"MultiPoint"),my.push(cx(Ty.id,Ey,Jy,Ty.tags))}}return my.length?my:null}function cS(_p,J,Ve,_s,_c,_d,sy){for(var hy,my,py=SA(_p),Ty=0===_c?oE:lI,By=_p.start,Ey=0;Ey<_p.length-3;Ey+=3){var $y=_p[Ey],Cy=_p[Ey+1],Ny=_p[Ey+2],Qy=_p[Ey+3],t0=_p[Ey+4],Jy=0===_c?$y:Cy,Fy=0===_c?Qy:t0,Uy=!1;sy&&(hy=Math.sqrt(Math.pow($y-Qy,2)+Math.pow(Cy-t0,2))),Jy<Ve?Ve<Fy&&(my=Ty(py,$y,Cy,Qy,t0,Ve),sy&&(py.start=By+hy*my)):_s<Jy?Fy<_s&&(my=Ty(py,$y,Cy,Qy,t0,_s),sy&&(py.start=By+hy*my)):MA(py,$y,Cy,Ny),Fy<Ve&&Ve<=Jy&&(my=Ty(py,$y,Cy,Qy,t0,Ve),Uy=!0),_s<Fy&&Jy<=_s&&(my=Ty(py,$y,Cy,Qy,t0,_s),Uy=!0),!_d&&Uy&&(sy&&(py.end=By+hy*my),J.push(py),py=SA(_p)),sy&&(By+=hy)}var Hy=_p.length-3;$y=_p[Hy],Cy=_p[1+Hy],Ny=_p[2+Hy],Ve<=(Jy=0===_c?$y:Cy)&&Jy<=_s&&MA(py,$y,Cy,Ny),Hy=py.length-3,_d&&3<=Hy&&(py[Hy]!==py[0]||py[1+Hy]!==py[1])&&MA(py,py[0],py[1],py[2]),py.length&&J.push(py)}function SA(_p){var J=[];return J.size=_p.size,J.start=_p.start,J.end=_p.end,J}function hx(_p,J,Ve,_s,_c,_d){for(var sy=0;sy<_p.length;sy++)cS(_p[sy],J,Ve,_s,_c,_d,!1)}function MA(_p,J,Ve,_s){_p.push(J),_p.push(Ve),_p.push(_s)}function oE(_p,J,Ve,_s,_c,_d){return _s=(_d-J)/(_s-J),_p.push(_d),_p.push(Ve+(_c-Ve)*_s),_p.push(1),_s}function lI(_p,J,Ve,_s,_c,_d){return _p.push(J+(_s-J)*(_c=(_d-Ve)/(_c-Ve))),_p.push(_d),_p.push(1),_c}function ST(_p,J){for(var Ve=[],_s=0;_s<_p.length;_s++){var _c=_p[_s],_d=_c.type;if("Point"===_d||"MultiPoint"===_d||"LineString"===_d)sy=EC(_c.geometry,J);else if("MultiLineString"===_d||"Polygon"===_d)for(var sy=[],hy=0;hy<_c.geometry.length;hy++)sy.push(EC(_c.geometry[hy],J));else if("MultiPolygon"===_d)for(sy=[],hy=0;hy<_c.geometry.length;hy++){for(var my=[],py=0;py<_c.geometry[hy].length;py++)my.push(EC(_c.geometry[hy][py],J));sy.push(my)}Ve.push(cx(_c.id,_d,sy,_c.tags))}return Ve}function EC(_p,J){var Ve=[];Ve.size=_p.size,void 0!==_p.start&&(Ve.start=_p.start,Ve.end=_p.end);for(var _s=0;_s<_p.length;_s+=3)Ve.push(_p[_s]+J,_p[_s+1],_p[_s+2]);return Ve}function $2(_p,J){if(!_p.transformed){for(var Ve,_s=1<<_p.z,_c=_p.x,_d=_p.y,sy=0;sy<_p.features.length;sy++){var hy=_p.features[sy],my=hy.geometry,py=hy.type;if(hy.geometry=[],1===py)for(Ve=0;Ve<my.length;Ve+=2)hy.geometry.push(l2(my[Ve],my[Ve+1],J,_s,_c,_d));else for(Ve=0;Ve<my.length;Ve++){for(var Ty=[],By=0;By<my[Ve].length;By+=2)Ty.push(l2(my[Ve][By],my[Ve][By+1],J,_s,_c,_d));hy.geometry.push(Ty)}}_p.transformed=!0}return _p}function l2(_p,J,Ve,_s,_c,_d){return[Math.round(Ve*(_p*_s-_c)),Math.round(Ve*(J*_s-_d))]}function IA(_p,J,Ve,_s,_c){for(var _d=J===_c.maxZoom?0:_c.tolerance/((1<<J)*_c.extent),sy={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:_s,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},hy=0;hy<_p.length;hy++){sy.numFeatures++,By=$y=Hy=Uy=Fy=Jy=t0=By=my=void 0;var my=sy,py=_p[hy],Ty=_d,By=_c,Ey=py.geometry,Qy=py.type,t0=[];if("Point"===Qy||"MultiPoint"===Qy)for(var Jy=0;Jy<Ey.length;Jy+=3)t0.push(Ey[Jy]),t0.push(Ey[Jy+1]),my.numPoints++,my.numSimplified++;else if("LineString"===Qy)FE(t0,Ey,my,Ty,!1,!1);else if("MultiLineString"===Qy||"Polygon"===Qy)for(Jy=0;Jy<Ey.length;Jy++)FE(t0,Ey[Jy],my,Ty,"Polygon"===Qy,0===Jy);else if("MultiPolygon"===Qy)for(var Fy=0;Fy<Ey.length;Fy++){var Uy=Ey[Fy];for(Jy=0;Jy<Uy.length;Jy++)FE(t0,Uy[Jy],my,Ty,!0,0===Jy)}if(t0.length){var Hy=py.tags||null;if("LineString"===Qy&&By.lineMetrics){for(var $y in Hy={},py.tags)Hy[$y]=py.tags[$y];Hy.mapbox_clip_start=Ey.start/Ey.size,Hy.mapbox_clip_end=Ey.end/Ey.size}By={geometry:t0,type:"Polygon"===Qy||"MultiPolygon"===Qy?3:"LineString"===Qy||"MultiLineString"===Qy?2:1,tags:Hy},null!==py.id&&(By.id=py.id),my.features.push(By)}var Cy=_p[hy].minY,Ny=_p[hy].maxX,n0=_p[hy].maxY;(By=_p[hy].minX)<sy.minX&&(sy.minX=By),Cy<sy.minY&&(sy.minY=Cy),Ny>sy.maxX&&(sy.maxX=Ny),n0>sy.maxY&&(sy.maxY=n0)}return sy}function FE(_p,J,Ve,_s,_c,_d){var sy=_s*_s;if(0<_s&&J.size<(_c?sy:_s))Ve.numPoints+=J.length/3;else{for(var hy=[],my=0;my<J.length;my+=3)(0===_s||J[my+2]>sy)&&(Ve.numSimplified++,hy.push(J[my]),hy.push(J[my+1])),Ve.numPoints++;if(_c){for(var py=hy,Ty=(_c=_d,0),By=0,Ey=py.length,Qy=Ey-2;By<Ey;Qy=By,By+=2)Ty+=(py[By]-py[Qy])*(py[By+1]+py[Qy+1]);if(0<Ty===_c)for(By=0,Ey=py.length;By<Ey/2;By+=2){var t0=py[By],Jy=py[By+1];py[By]=py[Ey-2-By],py[By+1]=py[Ey-1-By],py[Ey-2-By]=t0,py[Ey-1-By]=Jy}}_p.push(hy)}}function kA(_p,J){var _s,_c,_d,sy,hy,Ve=(J=this.options=function(my,py){for(var Ty in py)my[Ty]=py[Ty];return my}(Object.create(this.options),J)).debug;if(Ve&&console.time("preprocess data"),J.maxZoom<0||24<J.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(J.promoteId&&J.generateId)throw new Error("promoteId and generateId cannot be used together.");_p=function(my,py){var Ty=[];if("FeatureCollection"===my.type)for(var By=0;By<my.features.length;By++)I_(Ty,my.features[By],py,By);else I_(Ty,"Feature"===my.type?my:{geometry:my},py);return Ty}(_p,J),this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",J.indexMaxZoom,J.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),sy=dE(_d=_s=_p,1,-1-(_c=J.buffer/J.extent),_c,0,-1,2,J),hy=dE(_s,1,1-_c,2+_c,0,-1,2,J),(sy||hy)&&(_d=dE(_s,1,-_c,1+_c,0,-1,2,J)||[],sy&&(_d=ST(sy,1).concat(_d)),hy&&(_d=_d.concat(ST(hy,-1)))),(_p=_d).length&&this.splitTile(_p,0,0,0),Ve&&(_p.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function OA(_p,J,Ve){return 32*((1<<_p)*Ve+J)+_p}function MT(_p,J,Ve,_s,_c){var _d;return(_d=[])[0]=(_p[0]/_c+Ve)/(J=1<<J),_d[1]=(_p[1]/_c+_s)/J,_c=(_p=Ve={x:_d[0],y:_d[1]}).x,_p=_p.y,_c=360*(_c-.5),_s=Math.exp(Math.PI*(.5-_p)/.25)-1,_p=Math.exp(Math.PI*(.5-_p)/.25)+1,[_c,180*Math.asin(_s/_p)/Math.PI]}kA.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},kA.prototype.splitTile=function(_p,J,Ve,_s,_c,_d,sy){for(var hy=[_p,J,Ve,_s],my=this.options,py=my.debug;hy.length;){_s=hy.pop(),Ve=hy.pop(),J=hy.pop(),_p=hy.pop();var Ty,By,Ey,Qy,t0,Jy,Fy,Uy,Hy,$y=1<<J,Cy=OA(J,Ve,_s),Ny=this.tiles[Cy];if(Ny||(1<py&&console.time("creation"),Ny=this.tiles[Cy]=IA(_p,J,Ve,_s,my),this.tileCoords.push({z:J,x:Ve,y:_s}),py&&(1<py&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",J,Ve,_s,Ny.numFeatures,Ny.numPoints,Ny.numSimplified),console.timeEnd("creation")),this.stats[Cy="z"+J]=(this.stats[Cy]||0)+1,this.total++)),Ny.source=_p,_c){if(J===my.maxZoom||J===_c)continue;if(Cy=1<<_c-J,Ve!==Math.floor(_d/Cy)||_s!==Math.floor(sy/Cy))continue}else if(J===my.indexMaxZoom||Ny.numPoints<=my.indexMaxPoints)continue;Ny.source=null,0!==_p.length&&(1<py&&console.time("clipping"),Ty=.5-(Cy=.5*my.buffer/my.extent),Ey=1+Cy,Fy=Qy=t0=Jy=null,Uy=dE(_p,$y,Ve-Cy,Ve+(By=.5+Cy),0,Ny.minX,Ny.maxX,my),Hy=dE(_p,$y,Ve+Ty,Ve+Ey,0,Ny.minX,Ny.maxX,my),_p=null,Uy&&(Fy=dE(Uy,$y,_s-Cy,_s+By,1,Ny.minY,Ny.maxY,my),Qy=dE(Uy,$y,_s+Ty,_s+Ey,1,Ny.minY,Ny.maxY,my),Uy=null),Hy&&(t0=dE(Hy,$y,_s-Cy,_s+By,1,Ny.minY,Ny.maxY,my),Jy=dE(Hy,$y,_s+Ty,_s+Ey,1,Ny.minY,Ny.maxY,my),Hy=null),1<py&&console.timeEnd("clipping"),hy.push(Fy||[],J+1,2*Ve,2*_s),hy.push(Qy||[],J+1,2*Ve,2*_s+1),hy.push(t0||[],J+1,2*Ve+1,2*_s),hy.push(Jy||[],J+1,2*Ve+1,2*_s+1))}},kA.prototype.getTile=function(_p,J,Ve){var _c=(_s=this.options).extent,_s=_s.debug;if(_p<0||24<_p)return null;var _d=OA(_p,J=(J%(_d=1<<_p)+_d)%_d,Ve);if(this.tiles[_d])return $2(this.tiles[_d],_c);1<_s&&console.log("drilling down to z%d-%d-%d",_p,J,Ve);for(var sy,hy=_p,my=J,py=Ve;!sy&&0<hy;)hy--,my=Math.floor(my/2),py=Math.floor(py/2),sy=this.tiles[OA(hy,my,py)];return sy&&sy.source?(1<_s&&console.log("found parent tile z%d-%d-%d",hy,my,py),1<_s&&console.time("drilling down"),this.splitTile(sy.source,hy,my,py,_p,J,Ve),1<_s&&console.timeEnd("drilling down"),this.tiles[_d]?$2(this.tiles[_d],_c):null):null};var jx_POINT="Point",jx_POLYGON="Polygon",jx_MULTI_POINT="MultiPoint",jx_MULTI_LINESTRING="MultiLineString",jx_MULTI_POLYGON="MultiPolygon",hS={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},IT={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},V_={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},mE=function(_p){return 0<(_p=function(J){for(var Ve=0,_s=J.length,_c=0;_c<_s-1;_c+=1){var _d=J[_c],sy=J[_c+1];Ve+=_d[0]*sy[1]-sy[0]*_d[1]}return Ve+(J[_s-1][0]*J[0][1]-J[0][0]*J[_s-1][1])}(_p))?"CW":_p<0?"CCW":void 0};!function(_p){function J(_c){if(_s[_c])return _s[_c].exports;var _d=_s[_c]={i:_c,l:!1,exports:{}};return Ve[_c].call(_d.exports,_d,_d.exports,J),_d.l=!0,_d.exports}var Ve,_s;_p.exports=(Ve=[function(_c,_d,sy){function hy(By){return(hy="function"==typeof Symbol&&"symbol"==w(Symbol.iterator)?function(Ey){return w(Ey)}:function(Ey){return Ey&&"function"==typeof Symbol&&Ey.constructor===Symbol&&Ey!==Symbol.prototype?"symbol":w(Ey)})(By)}var my=sy(1),py=(sy=sy(7)).get,Ty=sy.isArray;sy=function(){function By(Fy,Uy){var Hy=void 0===(Hy=Uy.location)?0:Hy,$y=void 0===($y=Uy.distance)?100:$y,Cy=void 0===(Cy=Uy.threshold)?.6:Cy,Ny=void 0===(Ny=Uy.maxPatternLength)?32:Ny,n0=void 0!==(n0=Uy.caseSensitive)&&n0,y0=void 0===(y0=Uy.tokenSeparator)?/ +/g:y0,Z0=void 0!==(Z0=Uy.findAllMatches)&&Z0,b0=void 0===(b0=Uy.minMatchCharLength)?1:b0,i_=void 0===(i_=Uy.id)?null:i_,w0=void 0===(w0=Uy.keys)?[]:w0,X_=void 0===(X_=Uy.shouldSort)||X_,O_=void 0===(O_=Uy.getFn)?py:O_,p0=void 0===(p0=Uy.sortFn)?function(__,S1){return __.score-S1.score}:p0,B_=void 0!==(B_=Uy.tokenize)&&B_,T_=void 0!==(T_=Uy.matchAllTokens)&&T_,F1=void 0!==(F1=Uy.includeMatches)&&F1,L_=void 0!==(L_=Uy.includeScore)&&L_;if(Uy=void 0!==(Uy=Uy.verbose)&&Uy,!(this instanceof By))throw new TypeError("Cannot call a class as a function");this.options={location:Hy,distance:$y,threshold:Cy,maxPatternLength:Ny,isCaseSensitive:n0,tokenSeparator:y0,findAllMatches:Z0,minMatchCharLength:b0,id:i_,keys:w0,includeMatches:F1,includeScore:L_,shouldSort:X_,getFn:O_,sortFn:p0,verbose:Uy,tokenize:B_,matchAllTokens:T_},this.setCollection(Fy),this._processKeys(w0)}for(var Ey=By.prototype,Qy=[{key:"setCollection",value:function(Fy){return this.list=Fy}},{key:"_processKeys",value:function(Fy){if(this._keyWeights={},this._keyNames=[],Fy.length&&"string"==typeof Fy[0])for(var Uy=0,Hy=Fy.length;Uy<Hy;Uy+=1){var $y=Fy[Uy];this._keyWeights[$y]=1,this._keyNames.push($y)}else{for(var Cy=null,Ny=null,n0=0,y0=0,Z0=Fy.length;y0<Z0;y0+=1){var b0=Fy[y0];if(!b0.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var i_=b0.name;if(this._keyNames.push(i_),!b0.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((b0=b0.weight)<0||1<b0)throw new Error('"weight" property in key must bein the range of [0, 1)');Ny=null==Ny?b0:Math.max(Ny,b0),Cy=null==Cy?b0:Math.min(Cy,b0),n0+=this._keyWeights[i_]=b0}if(1<n0)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(Fy){var Uy=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},Hy=(this._log('---------\nSearch pattern: "'.concat(Fy,'"')),Fy=this._prepareSearchers(Fy),this._search(Hy=Fy.tokenSearchers,Fy=Fy.fullSearcher));return this._computeScore(Hy),this.options.shouldSort&&this._sort(Hy),Uy.limit&&"number"==typeof Uy.limit&&(Hy=Hy.slice(0,Uy.limit)),this._format(Hy)}},{key:"_prepareSearchers",value:function(){var Fy=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",Uy=[];if(this.options.tokenize)for(var Hy=Fy.split(this.options.tokenSeparator),$y=0,Cy=Hy.length;$y<Cy;$y+=1)Uy.push(new my(Hy[$y],this.options));return{tokenSearchers:Uy,fullSearcher:new my(Fy,this.options)}}},{key:"_search",value:function(){var Fy=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Uy=1<arguments.length?arguments[1]:void 0,Hy=this.list,$y={},Cy=[];if("string"==typeof Hy[0])for(var Ny=0,n0=Hy.length;Ny<n0;Ny+=1)this._analyze({key:"",value:Hy[Ny],record:Ny,index:Ny},{resultMap:$y,results:Cy,tokenSearchers:Fy,fullSearcher:Uy});else for(var y0=0,Z0=Hy.length;y0<Z0;y0+=1)for(var b0=Hy[y0],i_=0,w0=this._keyNames.length;i_<w0;i_+=1){var X_=this._keyNames[i_];this._analyze({key:X_,value:this.options.getFn(b0,X_),record:b0,index:y0},{resultMap:$y,results:Cy,tokenSearchers:Fy,fullSearcher:Uy})}return Cy}},{key:"_analyze",value:function(Fy,Uy){var y0,Hy=this,$y=Fy.key,Cy=Fy.arrayIndex,Z0=void 0===(y0=Uy.tokenSearchers)?[]:y0,b0=Uy.fullSearcher,i_=void 0===(y0=Uy.resultMap)?{}:y0,w0=void 0===(y0=Uy.results)?[]:y0;!function X_(O_,p0,B_,T_){if(null!=p0)if("string"==typeof p0){var F1=!1,L_=-1,__=0,S1=(Hy._log("\nKey: ".concat(""===$y?"--":$y)),b0.search(p0));if(Hy._log('Full text: "'.concat(p0,'", score: ').concat(S1.score)),Hy.options.tokenize){for(var Zw=p0.split(Hy.options.tokenSeparator),Xw=Zw.length,u_=[],m2=0,Q2=Z0.length;m2<Q2;m2+=1){var J2=Z0[m2];Hy._log('\nPattern: "'.concat(J2.pattern,'"'));for(var zA=!1,_E=0;_E<Xw;_E+=1){var bE=Zw[_E],Qw=J2.search(bE),e1={};Qw.isMatch?(e1[bE]=Qw.score,zA=F1=!0,u_.push(Qw.score)):(e1[bE]=1,Hy.options.matchAllTokens||u_.push(1)),Hy._log('Token: "'.concat(bE,'", score: ').concat(e1[bE]))}zA&&(__+=1)}L_=u_[0];for(var OC=u_.length,fx=1;fx<OC;fx+=1)L_+=u_[fx];Hy._log("Token score average:",L_/=OC)}var J1=S1.score,Hx=(Hy._log("Score average:",J1=-1<L_?(J1+L_)/2:J1),!Hy.options.tokenize||!Hy.options.matchAllTokens||__>=Z0.length);Hy._log("\nCheck Matches: ".concat(Hx)),(F1||S1.isMatch)&&Hx&&(Hx={key:$y,arrayIndex:O_,value:p0,score:J1},Hy.options.includeMatches&&(Hx.matchedIndices=S1.matchedIndices),(O_=i_[T_])?O_.output.push(Hx):(i_[T_]={item:B_,output:[Hx]},w0.push(i_[T_])))}else if(Ty(p0))for(var BE=0,HA=p0.length;BE<HA;BE+=1)X_(BE,p0[BE],B_,T_)}(void 0===Cy?-1:Cy,Fy.value,Fy.record,Fy=Fy.index)}},{key:"_computeScore",value:function(Fy){this._log("\n\nComputing score:\n");for(var Uy=this._keyWeights,Hy=!!Object.keys(Uy).length,$y=0,Cy=Fy.length;$y<Cy;$y+=1){for(var Ny=Fy[$y],n0=Ny.output,y0=n0.length,Z0=1,b0=0;b0<y0;b0+=1){var i_=n0[b0],w0=i_.key,X_=Hy?Uy[w0]:1;w0=0===i_.score&&Uy&&0<Uy[w0]?Number.EPSILON:i_.score,Z0*=Math.pow(w0,X_)}Ny.score=Z0,this._log(Ny)}}},{key:"_sort",value:function(Fy){this._log("\n\nSorting...."),Fy.sort(this.options.sortFn)}},{key:"_format",value:function(Fy){var Uy,Hy=[],$y=(this.options.verbose&&(Uy=[],this._log("\n\nOutput:\n\n",JSON.stringify(Fy,function(i_,w0){if("object"===hy(w0)&&null!==w0){if(-1!==Uy.indexOf(w0))return;Uy.push(w0)}return w0},2)),Uy=null),[]);this.options.includeMatches&&$y.push(function(i_,w0){var X_=i_.output;w0.matches=[];for(var O_=0,p0=X_.length;O_<p0;O_+=1){var B_,T_=X_[O_];0!==T_.matchedIndices.length&&(B_={indices:T_.matchedIndices,value:T_.value},T_.key&&(B_.key=T_.key),T_.hasOwnProperty("arrayIndex")&&-1<T_.arrayIndex&&(B_.arrayIndex=T_.arrayIndex),w0.matches.push(B_))}}),this.options.includeScore&&$y.push(function(i_,w0){w0.score=i_.score});for(var Cy=0,Ny=Fy.length;Cy<Ny;Cy+=1){var n0=Fy[Cy];if(this.options.id&&(n0.item=this.options.getFn(n0.item,this.options.id)[0]),$y.length){for(var y0={item:n0.item},Z0=0,b0=$y.length;Z0<b0;Z0+=1)$y[Z0](n0,y0);Hy.push(y0)}else Hy.push(n0.item)}return Hy}},{key:"_log",value:function(){var Fy;this.options.verbose&&(Fy=console).log.apply(Fy,arguments)}}],t0=0;t0<Qy.length;t0++){var Jy=Qy[t0];Jy.enumerable=Jy.enumerable||!1,Jy.configurable=!0,"value"in Jy&&(Jy.writable=!0),Object.defineProperty(Ey,Jy.key,Jy)}return By}(),_c.exports=sy},function(_c,_d,sy){var hy=sy(2),my=sy(3),py=sy(6);sy=function(){function Ty(Jy,Fy){var Uy=void 0===(Uy=Fy.location)?0:Uy,Hy=void 0===(Hy=Fy.distance)?100:Hy,$y=void 0===($y=Fy.threshold)?.6:$y,Cy=void 0===(Cy=Fy.maxPatternLength)?32:Cy,Ny=void 0!==(Ny=Fy.isCaseSensitive)&&Ny,n0=void 0===(n0=Fy.tokenSeparator)?/ +/g:n0,y0=void 0!==(y0=Fy.findAllMatches)&&y0,Z0=void 0===(Z0=Fy.minMatchCharLength)?1:Z0;if(Fy=void 0!==(Fy=Fy.includeMatches)&&Fy,!(this instanceof Ty))throw new TypeError("Cannot call a class as a function");this.options={location:Uy,distance:Hy,threshold:$y,maxPatternLength:Cy,isCaseSensitive:Ny,tokenSeparator:n0,findAllMatches:y0,includeMatches:Fy,minMatchCharLength:Z0},this.pattern=Ny?Jy:Jy.toLowerCase(),this.pattern.length<=Cy&&(this.patternAlphabet=py(this.pattern))}for(var By=Ty.prototype,Ey=[{key:"search",value:function(Jy){var Uy=(Fy=this.options).isCaseSensitive,Fy=Fy.includeMatches;if(Uy||(Jy=Jy.toLowerCase()),this.pattern===Jy)return Uy={isMatch:!0,score:0},Fy&&(Uy.matchedIndices=[[0,Jy.length-1]]),Uy;var Hy=(Uy=this.options).maxPatternLength;return Uy=Uy.tokenSeparator,this.pattern.length>Hy?hy(Jy,this.pattern,Uy):my(Jy,this.pattern,this.patternAlphabet,{location:Uy=(Hy=this.options).location,distance:Hy.distance,threshold:Hy.threshold,findAllMatches:Hy.findAllMatches,minMatchCharLength:Hy=Hy.minMatchCharLength,includeMatches:Fy})}}],Qy=0;Qy<Ey.length;Qy++){var t0=Ey[Qy];t0.enumerable=t0.enumerable||!1,t0.configurable=!0,"value"in t0&&(t0.writable=!0),Object.defineProperty(By,t0.key,t0)}return Ty}(),_c.exports=sy},function(_c,_d){var sy=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;_c.exports=function(hy,my){var py=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,Ty=(my=new RegExp(my.replace(sy,"\\$&").replace(py,"|")),hy.match(my)),By=[];if(py=!!Ty)for(var Ey=0,Qy=Ty.length;Ey<Qy;Ey+=1){var t0=Ty[Ey];By.push([hy.indexOf(t0),t0.length-1])}return{score:py?.5:1,isMatch:py,matchedIndices:By}}},function(_c,_d,sy){var hy=sy(4),my=sy(5);_c.exports=function(py,Ty,By,Ey){for(var Qy=Ey.location,Jy=void 0===(t0=Ey.distance)?100:t0,t0=Ey.threshold,Uy=void 0!==(Fy=Ey.findAllMatches)&&Fy,Fy=void 0===(Fy=Ey.minMatchCharLength)?1:Fy,Hy=(Ey=void 0!==(Ey=Ey.includeMatches)&&Ey,void 0===Qy?0:Qy),$y=py.length,Cy=void 0===t0?.6:t0,Ny=py.indexOf(Ty,Hy),n0=Ty.length,y0=[],Z0=0;Z0<$y;Z0+=1)y0[Z0]=0;-1!==Ny&&(Qy=hy(Ty,{errors:0,currentLocation:Ny,expectedLocation:Hy,distance:Jy}),Cy=Math.min(Qy,Cy),-1!==(Ny=py.lastIndexOf(Ty,Hy+n0))&&(t0=hy(Ty,{errors:0,currentLocation:Ny,expectedLocation:Hy,distance:Jy}),Cy=Math.min(t0,Cy))),Ny=-1;for(var b0=[],i_=1,w0=n0+$y,X_=1<<(n0<=31?n0-1:30),O_=0;O_<n0;O_+=1){for(var p0=0,B_=w0;p0<B_;)hy(Ty,{errors:O_,currentLocation:Hy+B_,expectedLocation:Hy,distance:Jy})<=Cy?p0=B_:w0=B_,B_=Math.floor((w0-p0)/2+p0);w0=B_;var T_=Math.max(1,Hy-B_+1),F1=Uy?$y:Math.min(Hy+B_,$y)+n0,L_=Array(F1+2);L_[F1+1]=(1<<O_)-1;for(var __=F1;T_<=__;--__){var S1=__-1,Zw=By[py.charAt(S1)];if(Zw&&(y0[S1]=1),L_[__]=(L_[__+1]<<1|1)&Zw,0!==O_&&(L_[__]|=(b0[__+1]|b0[__])<<1|1|b0[__+1]),L_[__]&X_&&(i_=hy(Ty,{errors:O_,currentLocation:S1,expectedLocation:Hy,distance:Jy}))<=Cy){if(Cy=i_,(Ny=S1)<=Hy)break;T_=Math.max(1,2*Hy-Ny)}}if(hy(Ty,{errors:O_+1,currentLocation:Hy,expectedLocation:Hy,distance:Jy})>Cy)break;b0=L_}return Qy={isMatch:0<=Ny,score:0===i_?.001:i_},Ey&&(Qy.matchedIndices=my(y0,Fy)),Qy}},function(_c,_d){_c.exports=function(sy,hy){var my=hy.errors,py=hy.currentLocation,Ty=hy.expectedLocation;return hy=void 0===(hy=hy.distance)?100:hy,my=(void 0===my?0:my)/sy.length,sy=Math.abs((void 0===Ty?0:Ty)-(void 0===py?0:py)),hy?my+sy/hy:sy?1:my}},function(_c,_d){_c.exports=function(){for(var sy=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],hy=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,my=[],py=-1,Ty=0,By=sy.length;Ty<By;Ty+=1){var Ey=sy[Ty];Ey&&-1===py?py=Ty:Ey||-1===py||((Ey=Ty-1)-py+1>=hy&&my.push([py,Ey]),py=-1)}return sy[Ty-1]&&hy<=Ty-py&&my.push([py,Ty-1]),my}},function(_c,_d){_c.exports=function(sy){for(var hy={},my=sy.length,py=0;py<my;py+=1)hy[sy.charAt(py)]=0;for(var Ty=0;Ty<my;Ty+=1)hy[sy.charAt(Ty)]|=1<<my-Ty-1;return hy}},function(_c,_d){function sy(Ty){return Array.isArray?Array.isArray(Ty):"[object Array]"===Object.prototype.toString.call(Ty)}function hy(Ty){if(null==Ty)return"";if("string"==typeof Ty)return Ty;var By=Ty+"";return"0"==By&&1/Ty==-1/0?"-0":By}function my(Ty){return"string"==typeof Ty}function py(Ty){return"number"==typeof Ty}_c.exports={get:function(Ty,By){var Ey=[];return function Qy(t0,Jy){if(Jy){var Fy=Jy.indexOf("."),Uy=Jy,Hy=null,$y=(-1!==Fy&&(Uy=Jy.slice(0,Fy),Hy=Jy.slice(Fy+1)),t0[Uy]);if(null!=$y)if(Hy||!my($y)&&!py($y))if(sy($y))for(var Cy=0,Ny=$y.length;Cy<Ny;Cy+=1)Qy($y[Cy],Hy);else Hy&&Qy($y,Hy);else Ey.push(hy($y))}else Ey.push(t0)}(Ty,By),Ey},isArray:sy,isString:my,isNum:py,toString:hy}}],_s={},J.m=Ve,J.c=_s,J.d=function(_c,_d,sy){J.o(_c,_d)||Object.defineProperty(_c,_d,{enumerable:!0,get:sy})},J.r=function(_c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(_c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_c,"__esModule",{value:!0})},J.t=function(_c,_d){if(1&_d&&(_c=J(_c)),8&_d||4&_d&&"object"==w(_c)&&_c&&_c.__esModule)return _c;var sy=Object.create(null);if(J.r(sy),Object.defineProperty(sy,"default",{enumerable:!0,value:_c}),2&_d&&"string"!=typeof _c)for(var hy in _c)J.d(sy,hy,function(my){return _c[my]}.bind(null,hy));return sy},J.n=function(_c){var _d=_c&&_c.__esModule?function(){return _c.default}:function(){return _c};return J.d(_d,"a",_d),_d},J.o=function(_c,_d){return Object.prototype.hasOwnProperty.call(_c,_d)},J.p="",J(J.s=0))}(m0={exports:{}});var jE=(Y0=m0=m0.exports)&&Y0.__esModule&&Object.prototype.hasOwnProperty.call(Y0,"default")?Y0.default:Y0,OT=_e(function _p(J){var Ve=void 0===(Ve=J.addressList)?[]:Ve,_s=void 0===(_s=J.geometries)?[]:_s,_c=void 0===(_c=J.entity)?null:_c,_d=void 0===(_d=J.name)?"":_d;J=void 0===(J=J.icon)?"":J,j(this,_p),this.addressList=Ve,this.geometries=_s,this.icon=J,this.entity=_c,this.name=_d}),fS={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},pS=function(){function _p(J){j(this,_p),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=J,this.init()}return _e(_p,[{key:"init",value:function(){var J=this.venueModel.getGeometries().reduce(function(Ve,_s){return Ve[_s.getId()]=_s,Ve},{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(J),this.levels_=this.venueModel.getLevels().map(function(Ve){return{levelId:Ve.getId(),levelName:Ve.getName(),drawingId:Ve.getDrawing().getId(),drawingName:Ve.getDrawing().getName()}}),J=[].concat(h0(this.searchListEntities_),h0(this.searchListIcons_)),this.searchList_=J.sort(function(Ve,_s){return Ve.name.localeCompare(_s.name)}),this.fuseSearch_=new jE(this.searchList_,fS)}},{key:"initEntityList",value:function(){var J=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(Ve){return Ve.spaceIds?new OT({geometries:Ve.space,addressList:Ve.spaceIds||[],name:Ve.properties.name||"",entity:Ve}):null}).filter(function(Ve){return null!==Ve});this.searchListEntities_=J}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter(function(J){return J.isIcon()}).map(function(J){var Ve=J.getIcon();return new OT({geometries:[J],icon:Ve,name:J.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var J=this.searchListIcons_.reduce(function(Ve,_s){return Ve[_s.name]=_s.name,Ve},{});return Object.keys(J)}},{key:"find",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===J?this.searchList_:this.fuseSearch_.search(J)}}]),_p}(),c2=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),TC="indoor.Site",dS="indoor.Occupant",gS="indoor.Space",RT="Address",DC="indoor.Level",E_="indoor.Entrance",v0="SPACE_TYPE_NAME",LT="SPACE_CATEGORY_NAME",FT="Point",vE="LineString",yS="Polygon",RA="MultiPoint",G0="MultiLineString",P1="MultiPolygon",NA=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),mS="9999999999999",Z1="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",Y0=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"});function Vx(){}function Y_(){Y_.init.call(this)}function Bx(_p){return void 0===_p._maxListeners?Y_.defaultMaxListeners:_p._maxListeners}function jT(_p,J,Ve,_s){var _c,_d;if("function"!=typeof Ve)throw new TypeError('"listener" argument must be a function');return(_c=_p._events)?(_c.newListener&&(_p.emit("newListener",J,Ve.listener||Ve),_c=_p._events),_d=_c[J]):(_c=_p._events=new Vx,_p._eventsCount=0),_d?("function"==typeof _d?_d=_c[J]=_s?[Ve,_d]:[_d,Ve]:_s?_d.unshift(Ve):_d.push(Ve),_d.warned||(_s=Bx(_p))&&0<_s&&_d.length>_s&&(_d.warned=!0,(_s=new Error("Possible EventEmitter memory leak detected. "+_d.length+" "+J+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",_s.emitter=_p,_s.type=J,_s.count=_d.length,"function"==typeof console.warn?console.warn(_s):console.log(_s))):(_d=_c[J]=Ve,++_p._eventsCount),_p}function VT(_p,J,Ve){var _s=!1;function _c(){_p.removeListener(J,_c),_s||(_s=!0,Ve.apply(_p,arguments))}return _c.listener=Ve,_c}function dI(_p){var J=this._events;if(J){if("function"==typeof(J=J[_p]))return 1;if(J)return J.length}return 0}function IC(_p,J){for(var Ve=new Array(J);J--;)Ve[J]=_p[J];return Ve}function vS(_p,J,Ve){return Ve===g2.ObjectType.SEGMENT_START_MARKER?0===_p?d2:null:Ve===g2.ObjectType.SEGMENT_FINISH_MARKER?1===J.length||_p===J.length-1?P_:null:"indoor"===J[_p].departure.place.type?jA:X2}Object.freeze((Ki(m0={},Y0.THEME,"themeUrls"),Ki(m0,Y0.THEME_MAP,"themeMapUrl"),Ki(m0,Y0.PRESETS,"presetsUrl"),Ki(m0,Y0.SDK_STRINGS,"stringsUrl"),m0)),Object.freeze((Ki(m0={},Y0.THEME,"themeOverrides"),Ki(m0,Y0.THEME_MAP,"themeMapOverrides"),Ki(m0,Y0.PRESETS,"presetOverrides"),Ki(m0,Y0.SDK_STRINGS,"stringsOverrides"),Ki(m0,Y0.INPUT_COLORS,"inputColorOverrides"),m0)),Object.freeze((Ki(m0={},Y0.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),Ki(m0,Y0.SDK_STRINGS,["Standard","SDK","sdk/standard"]),Ki(m0,Y0.V4_THEME_FAMILY,["modern","standard"]),Ki(m0,Y0.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),Ki(m0,Y0.NAV_THEME,["Factory","MapEditor"]),Ki(m0,Y0.ICON,["Multicolor","Standard","TheBase","Factory"]),m0)),Object.freeze((Ki(m0={},Y0.THEME,"Modern"),Ki(m0,Y0.THEME_MAP,"Standard"),Ki(m0,Y0.PRESETS,"Standard"),Ki(m0,Y0.SDK_STRINGS,"Standard"),Ki(m0,Y0.ICON_FILE,"Standard"),Ki(m0,Y0.INPUT_COLORS,"Standard"),Ki(m0,Y0.BASE_MAP_INFO,"Standard"),Ki(m0,Y0.CONFIG_PROFILE,"factory"),Ki(m0,Y0.NAV_THEME,"Factory"),Ki(m0,Y0.NAV_NAME_THEME,"FactoryName"),Ki(m0,Y0.NAV_PROP_MAP,"Standard"),Ki(m0,Y0.NAV_STRINGS,"Standard"),Ki(m0,Y0.NAV_THEME_MAP,"Standard"),Ki(m0,Y0.NAV_NAME_THEME_MAP,"StandardName"),Ki(m0,Y0.V4_THEME_FAMILY,"Standard"),Ki(m0,Y0.V4_MAPTYPE_THEME,"Standard"),Ki(m0,Y0.ICON,"Multicolor"),Ki(m0,Y0.MARKER,"Standard"),m0)),Y0=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),Object.freeze(Ki({},Y0.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Vx.prototype=Object.create(null),(Y_.EventEmitter=Y_).usingDomains=!1,Y_.prototype.domain=void 0,Y_.prototype._events=void 0,Y_.prototype._maxListeners=void 0,Y_.defaultMaxListeners=10,Y_.init=function(){this.domain=null,Y_.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Vx,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Y_.prototype.setMaxListeners=function(_p){if("number"!=typeof _p||_p<0||isNaN(_p))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=_p,this},Y_.prototype.getMaxListeners=function(){return Bx(this)},Y_.prototype.emit=function(_p){var J,Ve,_s,_c="error"===_p,_d=this._events;if(_d)_c=_c&&null==_d.error;else if(!_c)return!1;if(sy=this.domain,_c){var sy;if(_c=arguments[1],sy)return(_c=_c||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,_c.domain=sy,_c.domainThrown=!1,sy.emit("error",_c),!1;throw _c instanceof Error?_c:((sy=new Error('Uncaught, unspecified "error" event. ('+_c+")")).context=_c,sy)}if(!(J=_d[_p]))return!1;var hy,my="function"==typeof J;switch(hy=arguments.length){case 1:var py=J,By=this;if(Ty=my)py.call(By);else for(var Ey=py.length,Qy=IC(py,Ey),t0=0;t0<Ey;++t0)Qy[t0].call(By);break;case 2:var Ty=J,Jy=this,Fy=arguments[1];if(py=my)Ty.call(Jy,Fy);else for(var Uy=Ty.length,Hy=IC(Ty,Uy),$y=0;$y<Uy;++$y)Hy[$y].call(Jy,Fy);break;case 3:var Cy=J,n0=this,y0=arguments[1],Z0=arguments[2];if(Ny=my)Cy.call(n0,y0,Z0);else for(var b0=Cy.length,i_=IC(Cy,b0),w0=0;w0<b0;++w0)i_[w0].call(n0,y0,Z0);break;case 4:var Ny=J,X_=this,O_=arguments[1],p0=arguments[2],B_=arguments[3];if(Cy=my)Ny.call(X_,O_,p0,B_);else for(var T_=Ny.length,F1=IC(Ny,T_),L_=0;L_<T_;++L_)F1[L_].call(X_,O_,p0,B_);break;default:for(Ve=new Array(hy-1),_s=1;_s<hy;_s++)Ve[_s-1]=arguments[_s];var __=J,S1=my,Zw=this,Xw=Ve;if(S1)__.apply(Zw,Xw);else for(var u_=__.length,m2=IC(__,u_),Q2=0;Q2<u_;++Q2)m2[Q2].apply(Zw,Xw)}return!0},Y_.prototype.on=Y_.prototype.addListener=function(_p,J){return jT(this,_p,J,!1)},Y_.prototype.prependListener=function(_p,J){return jT(this,_p,J,!0)},Y_.prototype.once=function(_p,J){if("function"!=typeof J)throw new TypeError('"listener" argument must be a function');return this.on(_p,VT(this,_p,J)),this},Y_.prototype.prependOnceListener=function(_p,J){if("function"!=typeof J)throw new TypeError('"listener" argument must be a function');return this.prependListener(_p,VT(this,_p,J)),this},Y_.prototype.removeListener=function(_p,J){var Ve,_s,_c,_d,sy;if("function"!=typeof J)throw new TypeError('"listener" argument must be a function');if((_s=this._events)&&(Ve=_s[_p]))if(Ve===J||Ve.listener&&Ve.listener===J)0==--this._eventsCount?this._events=new Vx:(delete _s[_p],_s.removeListener&&this.emit("removeListener",_p,Ve.listener||J));else if("function"!=typeof Ve){for(_c=-1,_d=Ve.length;0<_d--;)if(Ve[_d]===J||Ve[_d].listener&&Ve[_d].listener===J){sy=Ve[_d].listener,_c=_d;break}if(_c<0)return this;if(1===Ve.length){if(Ve[0]=void 0,0==--this._eventsCount)return this._events=new Vx,this;delete _s[_p]}else{for(var hy=Ve,my=_c,py=my+1,Ty=hy.length;py<Ty;my+=1,py+=1)hy[my]=hy[py];hy.pop()}_s.removeListener&&this.emit("removeListener",_p,sy||J)}return this},Y_.prototype.removeAllListeners=function(_p){var J,Ve=this._events;if(Ve){if(!Ve.removeListener)return 0===arguments.length?(this._events=new Vx,this._eventsCount=0):Ve[_p]&&(0==--this._eventsCount?this._events=new Vx:delete Ve[_p]),this;if(0===arguments.length){for(var _s,_c=Object.keys(Ve),_d=0;_d<_c.length;++_d)"removeListener"!==(_s=_c[_d])&&this.removeAllListeners(_s);return this.removeAllListeners("removeListener"),this._events=new Vx,this._eventsCount=0,this}if("function"==typeof(J=Ve[_p]))this.removeListener(_p,J);else if(J)for(;this.removeListener(_p,J[J.length-1]),J[0];);}return this},Y_.prototype.listeners=function(_p){var J=this._events;return J&&(J=J[_p])?"function"==typeof J?[J.listener||J]:function(Ve){for(var _s=new Array(Ve.length),_c=0;_c<_s.length;++_c)_s[_c]=Ve[_c].listener||Ve[_c];return _s}(J):[]},Y_.listenerCount=function(_p,J){return"function"==typeof _p.listenerCount?_p.listenerCount(J):dI.call(_p,J)},Y_.prototype.listenerCount=dI,Y_.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var PA="venues-ui-button--active",Z2="venues-ui-button",BT="venues-ui__drawings",L1="data-drawing",U_=function(){function _p(J,Ve,_s){var _c=this,_d=(j(this,_p),this.clickHandler=_s,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",BT),document.createElement("div"));(_d.setAttribute("class","trigger ".concat(Z2)),_s=document.createElement("div")).setAttribute("class","arrow arrow--down"),_d.appendChild(_s),_d.addEventListener("click",function(){_d.classList.toggle(PA),_c.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(_d),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),Ve&&this.update(Ve),J.appendChild(this.containerDiv)}return _e(_p,[{key:"drawButton",value:function(J,Ve,_s){var _c=this,_d=document.createElement("div");_s=Number(_s)===Number(J),_d.setAttribute("class",_s?"".concat(Z2," ").concat(PA):Z2),_d.innerHTML=Ve,_d.setAttribute(L1,J),_d.addEventListener("click",function(){_c.switch(J),_c.clickHandler(J)}),this.containerButtons.appendChild(_d)}},{key:"switch",value:function(J){this.containerButtons.querySelectorAll(".".concat(BT," .").concat(PA)).forEach(function(Ve){return Ve.setAttribute("class",Z2)}),(J=this.containerButtons.querySelector("[".concat(L1,"='").concat(J,"']")))&&J.setAttribute("class","".concat(Z2," ").concat(PA))}},{key:"update",value:function(J){var _c,Ve=this,_s=(this.containerButtons.innerHTML="",_c=(_c=J).getDrawings(),new Map(_c.map(function(_d){var sy=_d.getDisplayName()||_d.getName();return[_d.getId(),sy]})));0<_s.size&&_s.forEach(function(_c,_d){return Ve.drawButton(_d,_c,J.getRootDrawing().getId())})}}]),_p}(),zT="venues-ui-button--active",VE="venues-ui-button",gI="data-level",K0="venues-ui__levels",gN=function(){function _p(J,Ve,_s,_c){var _d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;j(this,_p),this.clickHandler=_c,this.levelButtonCount=_d,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(K0)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),Ve&&this.update(Ve,_s),J.appendChild(this.containerUI)}return _e(_p,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(J,Ve){var _s=this,_c=document.createElement("div");_c.innerHTML=Ve,_c.style.fontSize="".concat(Math.max(Math.min(28.8/Ve.length,11.52),10),"px"),_c.style.display="block",_c.setAttribute("class",VE),_c.setAttribute(gI,J),_c.addEventListener("click",function(){_s.switch(J),_s.clickHandler(J)}),this.containerButtons.appendChild(_c)}},{key:"drawScrollButtons",value:function(){var Ve,J=this;((this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(VE," ").concat(VE,"--up")),Ve=document.createElement("div")).setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(Ve),this.buttonScrollUp.addEventListener("click",function(){return J.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(VE," ").concat(VE,"--down")),Ve=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(Ve),this.buttonScrollDown.addEventListener("click",function(){return J.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var J,Ve,_s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,_c=Array.from(this.containerButtons.querySelectorAll(".".concat(VE))).reverse(),_d=[];0<=_s?(this.currentScrollIndex=Math.min(this.currentScrollIndex+_s,_c.length-this.levelButtonCount),J=Math.min(this.currentScrollIndex,_c.length-this.levelButtonCount),Ve=Math.min(this.currentScrollIndex+this.levelButtonCount,_c.length),_d=_c.slice(J,Ve)):_s<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+_s,0),J=Math.max(0,this.currentScrollIndex),Ve=Math.min(_c.length,this.currentScrollIndex+this.levelButtonCount),_d=_c.slice(J,Ve)),_c.forEach(function(sy){sy.style.display=-1!==_d.indexOf(sy)?"block":"none"}),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===_c.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(J){var Ve;this.containerButtons.querySelectorAll(".".concat(zT)).forEach(function(_s){return _s.setAttribute("class",VE)}),(J=this.containerButtons.querySelector(".".concat(K0," [").concat(gI,"='").concat(J,"']")))&&(Ve=Array.from(this.containerButtons.querySelectorAll(".".concat(VE))).reverse(),J.setAttribute("class","".concat(VE," ").concat(zT)),((Ve=Ve.indexOf(J))<this.currentScrollIndex||Ve>=this.currentScrollIndex+4)&&this.scroll(Ve-this.currentScrollIndex))}},{key:"update",value:function(J,Ve){var _s,_c=this,_d=(Ve=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(sy){return[sy.getZIndex(),sy.getShortName()||sy.getDisplayName()||sy.getName()]}))}((_s=J,(Ve===NA.FLATTEN?(Ve=_s.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(Ve).map(function(sy){return sy[0]})):_s.getLevels()).sort(function(sy,hy){return hy.getZIndex()-sy.getZIndex()}))),J.getMainLevel().getZIndex());this.clear(),Ve.forEach(function(sy,hy){return _c.drawLevelButton(hy,sy)}),Ve.size>this.levelButtonCount&&(this.currentScrollIndex=Ve.size>this.levelButtonCount+1?Math.min(Array.from(Ve).reverse().findIndex(function(sy){return sy[0]===_d}),Ve.size-this.levelButtonCount):0,this.drawScrollButtons(),this.scroll(0)),this.switch(_d)}}]),_p}(),U1=function(){function _p(J,Ve){j(this,_p),this.baseTheme=J,this.metaInformation=Ve,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return _e(_p,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var J=0,Ve=Object.entries(this.baseTheme.spaceRules);J<Ve.length;J++){var _s,_c=(_s=zy(Ve[J],2))[0],_d=(_s=_s[1]).properties.behavioralAppearance.default.styleProperties,sy=_s.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[_c]=_d,this.labelStyleMap[_c]=sy,_s.spaceTypes)for(var hy=0,my=Object.entries(_s.spaceTypes);hy<my.length;hy++){var Ty=(py=zy(my[hy],2))[0],By=(py=py[1]).behavioralAppearance.default.styleProperties,py=py.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(_c,"_").concat(Ty)]=By&&0!==Object.keys(By)?By:_d,this.labelStyleMap["".concat(_c,"_").concat(Ty)]=py&&0!==Object.keys(py)?py:sy}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(J){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[J]:null}},{key:"getLabelStyle",value:function(J){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[J]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),_p}(),X1=function(){function _p(){j(this,_p),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return _e(_p,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(J){var Ve=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_s=this.getTheme(),_c=U1.getGeometryDefaultStyle(),_d=J.properties.spaceType,sy=J=J.properties.spaceCategory;return _d&&(sy="".concat(J,"_").concat(_d)),{m:(J=(J=_s.getGeometryStyle(sy))&&!Ve?J:_c).fill&&J.fill.toLowerCase()||"#fff",w:J.strokeWidth/10||.1,o:J.stroke&&J.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(J){this.getTheme();var Ve=U1.getLabelDefaultStyle();return{fill:Ve.stroke,zmin:Ve.zmin}}}]),_p}(),h2=Math.PI/180,_S=180/Math.PI,Q1=function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"toRadians",value:function(J){return J*h2}},{key:"toDegrees",value:function(J){return J*_S}},{key:"getBoundingBox",value:function(J,Ve){var _s=[];switch(J){case FT:_s=[Ve,Ve];break;case RA:case vE:_s=Ve;break;case G0:case yS:_s=Ve.reduce(function(_c,_d){return _c.concat(_d)},[]);break;case P1:_s=Ve.reduce(function(_c,_d){return _c.concat(_d)},[]).reduce(function(_c,_d){return _c.concat(_d)},[])}return _p.getBoundingBoxVertices(_s)}},{key:"getInverseTransform",value:function(J){var Ve;return(Ve=[J[3]/(Ve=J[0]*J[3]-J[1]*J[2]),-J[1]/Ve,-J[2]/Ve,J[0]/Ve,0,0])[4]=-(Ve[0]*J[4]+Ve[2]*J[5]),Ve[5]=-(Ve[1]*J[4]+Ve[3]*J[5]),Ve}},{key:"applyTransformToPoint",value:function(J,Ve){return[Ve[0]*J[0]+Ve[1]*J[2]+J[4],Ve[0]*J[1]+Ve[1]*J[3]+J[5]]}},{key:"transformProduct",value:function(J,Ve){var _s=[0,0,0,0,0,0];return _s[0]=Ve[0]*J[0]+Ve[2]*J[1],_s[1]=Ve[1]*J[0]+Ve[3]*J[1],_s[2]=Ve[0]*J[2]+Ve[2]*J[3],_s[3]=Ve[1]*J[2]+Ve[3]*J[3],_s[4]=Ve[0]*J[4]+Ve[2]*J[5]+Ve[4],_s[5]=Ve[1]*J[4]+Ve[3]*J[5]+Ve[5],_s}},{key:"convertLonLatToMerc",value:function(J){var Ve=J[0]*h2;return J=J[1]*h2,J=Math.sin(J),[.5+Ve/(2*Math.PI),.5-Math.log((1+J)/(1-J))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(J){var Ve=2*Math.PI*(J[0]-.5);return J=Math.atan(Math.sinh(2*Math.PI*(.5-J[1]))),[Ve/h2,J/h2]}},{key:"getTransformScale",value:function(J){return Math.sqrt(J[0]*J[3]-J[1]*J[2])}},{key:"getLonLatToMercTransform",value:function(J){var Ve=[1/360,0,0,-1/(360*Math.cos(J[1]*h2)),0,0],_s=_p.applyTransformToPoint(Ve,J);return J=_p.convertLonLatToMerc(J),Ve[4]=J[0]-_s[0],Ve[5]=J[1]-_s[1],Ve}},{key:"getNatToMercTransform",value:function(J){var Ve=_p.getLonLatToMercTransform(Ve=[J[4],J[5]]);return _p.transformProduct(J,Ve)}},{key:"convertMxMy2LonLat",value:function(J,Ve){return J.length&&Ve.length?_p.applyTransformToPoint(J,Ve):[]}},{key:"convertLonLat2MxMy",value:function(J,Ve){return J.length&&Ve.length?(J=_p.getInverseTransform(J),_p.applyTransformToPoint(J,Ve)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(J,Ve,_s){var _c=[],_d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;_d<1&&(_d=6);for(var sy=0;sy<=_d;sy+=1){var hy,my,py=2*(hy=sy/_d)*(1-hy),Ty=(my=(1-hy)*(1-hy))*J[0]+py*Ve[0]+(hy*=hy)*_s[0];_c.push([Ty,my=my*J[1]+py*Ve[1]+hy*_s[1]])}return _c}},{key:"getFlattenedCubicBezierCurve",value:function(J,Ve,_s,_c){var _d=[],sy=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;sy<1&&(sy=6);for(var hy=0;hy<=sy;hy+=1){var my,py,Ty=3*(my=hy/sy)*(1-my)*(1-my),By=3*my*my*(1-my),Ey=(py=(1-my)*(1-my)*(1-my))*J[0]+Ty*Ve[0]+By*_s[0]+(my*=my*my)*_c[0];_d.push([Ey,py=py*J[1]+Ty*Ve[1]+By*_s[1]+my*_c[1]])}return _d}},{key:"getRectangularCoordinatesOfLabelArea",value:function(J,Ve){var _s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_d=(_c=zy(J,6))[0],sy=_c[1],hy=_c[2],my=_c[3],_c=_c[5],py=_p.getDeltaLonLatForMeterAtGivenLonLat(_d,sy);return J=J[4],_s?(_c&&(J*=-1),null!=Ve&&(J=(J+=Ve<0?2*Math.PI+Ve:Ve)<0?2*Math.PI+J:J)):J=0,_p.getRectVerticesFromSignatureRectRepresentation([_d,sy],{xLength:hy,yLength:my},J,py)}},{key:"getRotatedPoint",value:function(J,Ve){var _s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],_d=Math.cos(Ve),sy=(Ve=Math.sin(Ve),J[0]-_c[0]),hy=(J=J[1]-_c[1],[]);return[(hy=_s?[sy*_d+J*Ve,J*_d-sy*Ve]:[sy*_d-J*Ve,J*_d+sy*Ve])[0]+_c[0],hy[1]+_c[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(J,Ve,_s,_c){var _d=Ve.xLength,sy=(Ve=Ve.yLength,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]),hy=(J=zy(J,2))[0],my=J[1],py=_d/2,Ty=Ve/2,By=(J=zy(_c,2))[0],Ey=J[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(Qy){return[Qy[0]*py,Qy[1]*Ty]}).map(function(Qy){return _p.getRotatedPoint(Qy,_s,sy)}).map(function(Qy){return[Qy[0]*By,Qy[1]*Ey]}).map(function(Qy){return[Qy[0]+hy,Qy[1]+my]})}},{key:"getScaleFactorForRectInSpace",value:function(J,Ve,_s,_c){return J/=_s,(_s=Ve/_c)<J?_s:J}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(J,Ve){return[1/6371e3*(180/Math.PI)/Math.cos(Ve*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Ve=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return J.reduce(function(_s,_c){return[[Math.min(_c[0],_s[0][0]),Math.min(_c[1],_s[0][1])],[Math.max(_c[0],_s[1][0]),Math.max(_c[1],_s[1][1])]]},Ve)}},{key:"isPointInBoundingBox",value:function(J,Ve){var _s,_c,_d,sy;if(J&&Ve)return _s=(J=zy(J,2))[0],J=J[1],Ve=zy(Ve,2),_c=(_d=zy(Ve[0],2))[0],_d=_d[1],sy=(Ve=zy(Ve[1],2))[0],Ve=Ve[1],_s<=sy&&_c<=_s&&J<=Ve&&_d<=J}},{key:"isPointOnLineSegment",value:function(J,Ve,_s){var _c=(J=zy(J,2))[0],_d=(J=J[1],(Ve=zy(Ve,2))[0]),sy=(Ve=Ve[1],(_s=zy(_s,2))[0]),hy=(Ve-J)*((_s=_s[1])-J)<=0;return _d===sy?_d===_c&&hy:J-_s==(_s-Ve)/(sy-_d)*(_c-sy)&&hy}},{key:"rayIntersectLineSegment",value:function(J,Ve,_s){var _c=(J=zy(J,2))[0],_d=(J=J[1],(Ve=zy(Ve,2))[0]),sy=(Ve=Ve[1],(_s=zy(_s,2))[0]);return _s=_s[1],_d!==sy&&0<=(_c=(_c-_d)/(sy-_d))&&_c<1&&J<(_s-Ve)*_c+Ve}},{key:"isPointInPolygon",value:function(J,Ve){var _s=(J=zy(J,2))[0],_c=J[1];if((J=Ve.length)<3)return!1;var _d=0,sy=Ve[J-1];return Ve.forEach(function(hy){_p.rayIntersectLineSegment([_s,_c],sy,hy)&&(_d+=1),sy=hy}),_d%2!=0}},{key:"isPointOnLineString",value:function(J,Ve){var _s=(J=zy(J,2))[0],_c=J[1],_d=Ve.length;if(!(_d<2))for(var sy=Ve[_d-1],hy=0;hy<_d;hy+=1){if(_p.isPointOnLineSegment([_s,_c],sy,Ve[hy]))return!0;sy=Ve[hy]}return!1}},{key:"getAreaOfPolygon",value:function(J){var Ve=J.length;if(Ve<3)return null;var _s=0,_c=J[Ve-1];return J.forEach(function(_d){var sy,hy,my;_s+=.5*(hy=_d,my=(sy=zy(sy=_c,2))[0],sy=sy[1],my*(hy=zy(hy,2))[1]-sy*hy[0]),_c=_d}),_s}},{key:"getDistanceBetweenPoints",value:function(J,Ve){var _s=(J=zy(J,2))[0];return J=J[1],_s-=(Ve=zy(Ve,2))[0],J-=Ve[1],Math.sqrt(_s*_s+J*J)}}]),_p}(),LA=function(){function _p(){j(this,_p),this.spaceRules={}}return _e(_p,null,[{key:"getDataEntriesOne",value:function(J,Ve){var _s;return J=[J,""],null!==Ve&&Array.isArray(Ve)?J[1]=Ve.toString():null!==Ve&&"object"===w(Ve)?0<(_s=Object.entries(Ve)).length&&(_s=this.getDataEntriesOne(_s[0][0],_s[0][1]),J[0]="".concat(J[0],".").concat(_s[0]),J[1]=_s[1]):J[1]=Ve,J}},{key:"getDataEntriesAll",value:function(J){for(var Ve=[],_s=0,_c=Object.entries(J);_s<_c.length;_s++){var _d=zy(_c[_s],2),sy=this.getDataEntriesOne(sy=_d[0],_d=_d[1]);Ve.push(sy)}return Ve}},{key:"doFindComboMatch",value:function(J,Ve){var _s="";if(J&&J.configuration&&J.configuration.combinations)for(var _c=this.getDataEntriesAll(Ve),_d=(Ve=Object.entries(J.configuration.combinations),0),sy=0,hy=Ve;sy<hy.length;sy++)!function(){var py=hy[sy],Ty=Object.keys(py[1]).filter(function(By){return _c.some(function(Ey){return By===Ey[0]&&py[1][By]===Ey[1]})});Ty.length===Object.keys(py[1]).length&&Ty.length>_d&&(_s=py[0],_d=Ty.length)}();return _s}},{key:"getIconFromCombinations",value:function(J,Ve){if(J&&J.configuration.combinations&&Ve&&0<Object.keys(Ve).length&&J.behavioralAppearance.combinations&&0<Object.keys(J.behavioralAppearance.combinations).length){if(""===(Ve=this.doFindComboMatch(J,Ve))||!J.behavioralAppearance.combinations[Ve].labelIcon)return"";if(J.behavioralAppearance.combinations&&J.behavioralAppearance.combinations[Ve]&&J.behavioralAppearance.combinations[Ve].labelIcon)return J.behavioralAppearance.combinations[Ve].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(J,Ve){if(Ve.spaceTypes&&Ve.spaceTypes[J])return Ve.spaceTypes[J]}},{key:"findCategory",value:function(J){if(this.spaceRules[J])return this.spaceRules[J]}},{key:"setSpaceRules",value:function(J){this.spaceRules=J}},{key:"getSpaceIcon",value:function(J,Ve,_s){var _c,_d="";return(Ve=this.findCategory(Ve))&&(J=this.findSpace(J,Ve))&&(_c="",(_c=_s?this.getIconFromCombinations(J,_s):_c)&&""!==_c?_d=_c:J.behavioralAppearance.default.labelIcon?_d=J.behavioralAppearance.default.labelIcon.referenceUri:Ve.properties.behavioralAppearance.default.labelIcon&&(_d=Ve.properties.behavioralAppearance.default.labelIcon.referenceUri)),_d}}]),_p}(),v1=function(){function _p(){j(this,_p),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return _e(_p,null,[{key:"getNumberFromAlphaNumeric",value:function(J){try{var Ve=J.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(Ve,10)}catch(_s){return null}}},{key:"extractNumFromSting",value:function(J){try{var Ve=J.replace(/[^0-9]/g,"");return parseInt(Ve,10)}catch(_s){return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(J)}}},{key:"getVenueId",value:function(J){var Ve;return"number"!=typeof J?(Ve=J.substr(J.length-6),parseInt(Ve,10)):J}},{key:"getStringFormatIdentifier",value:function(J){return"number"==typeof J||J.length<13?"indoormap-00000000-0000-4000-a000-".concat(J.toString().padStart(12,"0")):J}},{key:"setSite",value:function(J,Ve){var _s=this.getName(J);return(J={id:this.getStringFormatIdentifier(Ve),location:J.referencePoint,properties:J.properties,geometry:J.geometry,map_version:J.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(Ve),obj_type:"CommunityMap"}).properties.name=_s,J.properties.display_name=_s,J}},{key:"setEntrance",value:function(J){var Ve=this.themeRule.entranceRules.default.labelIcon.referenceUri,_s=this.extractNumFromSting(J.id),_c=this.getName(J),_d=J.properties;return _d.icon=!0,_d.svg=this.svgList[Ve.toLowerCase()],_d.name=_c||"entrance",_d.display_name=_c||"entrance",_d.level={id:J.properties.level.id},{id:J.id,levelId:J.properties.level.id,momType:E_,geometry:J.geometry,location:J.geometry,properties:_d,identifier:_s,label_area:[J.referencePoint.coordinates[0],J.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(J){var Ve=this.extractNumFromSting(J.id),_s=this.getName(J),_c=J.properties;return _c.is_root=0===J.properties.drawOrder,_c.display_name=_s,_c.map_type=J.properties.structureType,_c.name=_s,{id:J.id,obj_type:"Drawing",identifier:Ve,properties:_c}}},{key:"getNameByPriority",value:function(J,Ve){for(var _s,_d="",sy=0;sy<J.length;sy++){var hy=J[sy];if(("OFFICIAL"===(_s=hy).nameType&&_s.languageCode&&_s.languageCode===this.defaultLang||"OFFICIAL"===_s.nameType)&&(Ve&&Ve===hy.nameType||!Ve)){_d=hy.name;break}if("ABBREVIATION"===hy.nameType&&(Ve&&Ve===hy.nameType||!Ve)){_d=hy.name;break}if("UNCLASSIFIED"===hy.nameType&&(Ve&&Ve===hy.nameType||!Ve)){_d=hy.name;break}if(!hy.nameType&&hy.name){_d=hy.name;break}}return _d}},{key:"getName",value:function(J,Ve){return J.properties&&J.properties.names?this.getNameByPriority(J.properties.names,Ve):J.properties.placeProperties&&J.properties.placeProperties&&J.properties.placeProperties.names?this.getNameByPriority(J.properties.placeProperties.names,Ve):J.properties.locationDetails&&J.properties.locationDetails[0]&&J.properties.locationDetails[0].names?this.getNameByPriority(J.properties.locationDetails[0].names,Ve):""}},{key:"setLevel",value:function(J){var Ve=this.extractNumFromSting(J.id),_s=J.properties.names,_c=J.properties;return _c["short name"]=this.getNameByPriority(_s,_s&&1!==_s.length?"ABBREVIATION":""),_c.name=this.getNameByPriority(_s,_s&&1!==_s.length?"ABBREVIATION":""),{id:J.id,obj_type:"Level",identifier:Ve,properties:_c}}},{key:"setLevelConnector",value:function(J){var Ve=this.extractNumFromSting(J.id);return{id:J.id,obj_type:"LevelConnector",properties:J.properties,geometry:J.geometry,identifier:Ve,location:J.geometry}}},{key:"setOccupant",value:function(J){var Ve=this.getName(J),_s=this.extractNumFromSting(J.id),_c=J.properties;return _c.occupantName=Ve,_c.email=J.properties.placeProperties&&J.properties.placeProperties.contacts&&J.properties.placeProperties.contacts.find(function(_d){return"EMAIL"===_d.contactType})&&J.properties.placeProperties.contacts.find(function(_d){return"EMAIL"===_d.contactType}).value,_c.name=Ve,_c.tags=J.properties.attributes&&J.properties.attributes.tags,{geometry:J.geometry,id:J.id,obj_type:"Geometry",properties:_c,identifier:_s,spaceIds:J.properties.spaces||[],type:"Feature",momType:dS}}},{key:"getIcon",value:function(J){var Ve=!1,_s="";return this.svgList[J]&&(Ve=!0,_s=this.svgList[J]),{icon:Ve,svg:_s}}},{key:"setSpace",value:function(J){var Ve=LA.getSpaceIcon(J.properties.spaceType,J.properties.spaceCategory,J.properties.spaceTypeProperties),_s=this.getName(J),_c=(Ve=this.getIcon(Ve)).icon,_d=(Ve=Ve.svg,this.extractNumFromSting(J.id)),sy=(J.properties.level.id.includes("out"),J.properties.level.id),hy=J.properties;return hy.spaceName=_s,hy[J.properties.spaceCategory]=J.properties.spaceType,hy.spaceType=J.properties.spaceType,hy.spaceCategory=J.properties.spaceCategory,hy.icon=_c,hy.svg=Ve,_s={geometry:J.geometry,id:J.id,levelId:sy,label_area:[J.referencePoint.coordinates[0],J.referencePoint.coordinates[1],50,50,180],location:J.referencePoint,obj_type:"Geometry",identifier:_d,properties:hy,momType:gS,type:"Feature"},J.properties.spaceAddress&&J.properties.spaceAddress.id&&(_s.addressId=J.properties.spaceAddress.id),_s}},{key:"setSpaceGroups",value:function(J){var Ve=this.extractNumFromSting(J.id);return{id:J.id,obj_type:"SpaceGroups",properties:J.properties,geometry:J.geometry,location:J.referencePoint,identifier:Ve}}},{key:"setTopology",value:function(J){var Ve=this.extractNumFromSting(J.id);return{id:J.id,obj_type:"Topology",properties:J.properties,geometry:J.geometry,identifier:Ve}}},{key:"setAddress",value:function(J){var Ve=this.extractNumFromSting(J.id),_s=this.getName(J),_c=J.properties;return _c.addressName=_s,_c.name=_s,{id:J.id,properties:_c,obj_type:"Address",identifier:Ve}}},{key:"manageSvgDimensions",value:function(J){for(var Ve={},_s=0,_c=Object.entries(J);_s<_c.length;_s++){var _d,sy,hy,my=(hy=zy(_c[_s],2))[0];"string"==typeof(hy=hy[1])&&(_d=-1!==hy.indexOf("<g")&&hy.indexOf("<g")||hy.indexOf("<p"),sy=hy.indexOf("</s"),_d&&sy&&(hy=hy.substring(_d-1,sy-1),Ve[my]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(hy,"</svg>")))}return Ve}},{key:"getSiteBoundingBox",value:function(J){if(J){var Ve=(J=zy(Q1.getBoundingBox(J.geometry.type,J.geometry.coordinates),2))[0];if(J=J[1],Ve)return"".concat(Ve[0],",").concat(Ve[1],",").concat(J[0],",").concat(J[1])}return"null, null, null, null"}}]),_p}(),f2=function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"get",value:function(J){return fetch(J,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then(function(Ve){return Ve.ok?Ve.json():Promise.reject(new Error("Call failed for ".concat(J," : ").concat(Ve.status," ").concat(Ve.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(J){return"number"==typeof J?"indoormap-00000000-0000-4000-a000-".concat(J.toString().padStart(12,"0")):J.includes("indoormap")?J:"indoormap-00000000-0000-4000-a000-".concat(J.padStart(12,"0"))}},{key:"getConfigUrl",value:function(J,Ve,_s){var _c=_s.apiKey,_d=_s.url,sy=_s.token,hy=(_s=_s.hrn,{method:"GET",mode:"cors",cache:"default"});return _d="".concat(_d||Z1,"/").concat(_s),_s="",Ve===c2.SITE&&(_s="".concat(_d,"/layers/").concat(mS,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(J),"'")),Ve===c2.IMAGES&&(_s="".concat(_d,"/layers/").concat("icons","/features/svg")),Ve===c2.Theme&&(_s="".concat(_d,"/layers/").concat("config","/features/indoorMapRules")),sy?hy.headers={Authorization:"Bearer ".concat(sy)}:_s=_s.concat("".concat(Ve===c2.SITE?"&":"?","apiKey=").concat(_c)),this.get(_s,hy)}},{key:"getMomData",value:function(J,Ve){var _s=Ve.apiKey,_c=Ve.url,_d=Ve.token,sy=(Ve=Ve.hrn,{method:"GET",mode:"cors",cache:"default"});return _c="".concat(_c||Z1,"/").concat(Ve),Ve=J&&J.features&&J.features.find(function(hy){return hy.momType===TC}),J=v1.getSiteBoundingBox(Ve),_c="".concat(_c,"/layers/").concat(mS,"/bbox?bbox=").concat(J,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance"),_d?sy.headers={Authorization:"Bearer ".concat(_d)}:_c=_c.concat("&apiKey=".concat(_s)),{mom:this.get(_c,sy),site:Ve}}}]),_p}(),p2=function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"isPointOnGeoJSONLineString",value:function(J,Ve){var _s=!1;if(Ve&&1<Ve.length)for(var sy=1;sy<Ve.length;sy+=1)if(Q1.isPointOnLineSegment(J,Ve[sy-1],Ve[sy])){_s=!0;break}return _s}},{key:"isPointOnGeoJSONMultiLineString",value:function(J,Ve){for(var _s=!1,_c=0;_c<Ve.length;_c+=1)if(_p.isPointOnGeoJSONLineString(J,Ve[_c])){_s=!0;break}return _s}},{key:"isPointInsideGeoJSONPolygon",value:function(J,Ve){var _s=!1;if(_s=!!Q1.isPointInPolygon(J,Ve[0])||_s)for(var _c=1;_c<Ve.length;_c+=1)if(Q1.isPointInPolygon(J,Ve[_c])){_s=!1;break}return _s}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(J,Ve){for(var _s=Ve.length,_c=0;_c<_s;_c+=1)if(_p.isPointInsideGeoJSONPolygon(J,Ve[_c]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(J,Ve){for(var _s=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_c=[],_d=Ve.filter(function(my){return Q1.isPointInBoundingBox(J,my.getBoundingBox())}),sy=0;sy<_d.length;sy+=1){var hy=_d[sy];if(hy.isPointInsideGeometry(J,!0)&&(_c.push(hy),!_s))break}return _c.sort(function(my,py){return py.getZIndex()-my.getZIndex()})}}]),_p}(),bS=function(){function _p(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Ve=1<arguments.length?arguments[1]:void 0,_s=2<arguments.length?arguments[2]:void 0;j(this,_p),this.id=J.id,this.properties=J.properties||{},this.labelArea=J.label_area||[],this.geometry=J.geometry||{},this.location=J.location||{},this.address=J.address||{},this.level=Ve,this.zIndex=_s,this.spaceId=J.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=J}return _e(_p,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var J=this.getType(),Ve=this.getCoordinates(),_s=[];switch(J){case FT:_s=[Ve,Ve];break;case RA:case vE:_s=Ve;break;case G0:case yS:_s=Ve.reduce(function(_c,_d){return _c.concat(_d)},[]);break;case P1:_s=Ve.reduce(function(_c,_d){return _c.concat(_d)},[]).reduce(function(_c,_d){return _c.concat(_d)},[])}return Q1.getBoundingBoxVertices(_s)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(J){var Ve,_s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_c=!1;switch(this.getType()){case FT:Ve=this.getLabelArea()&&Q1.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),_c=Q1.isPointInPolygon(J,Ve);break;case RA:break;case vE:_c=_s&&p2.isPointOnGeoJSONLineString(J,this.getCoordinates());break;case G0:_c=_s&&p2.isPointOnGeoJSONMultiLineString(J,this.getCoordinates());break;case yS:_c=p2.isPointInsideGeoJSONPolygon(J,this.getCoordinates());break;case P1:_c=p2.isPointInsideGeoJSONMultiPolygon(J,this.getCoordinates())}return _c}},{key:"highlight",value:function(){var J=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],Ve=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=J,this.state_.highlightedStyle=J?Ve:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return v({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),_p}(),M0=function(){function _p(J,Ve){var _s=this;j(this,_p),this.id=J&&J.id,this.properties=J&&J.properties,this.zIndexCount=0,this.geometries=J&&J.features&&Object.values(J.features).reduce(function(_c,_d){return _c[[_d.id]]=new bS(_d,_s,_d.properties.drawOrder),_c},{}),this.drawing=Ve,this.levelData=J}return _e(_p,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(J){return J.toJSON()})}},{key:"getGeometryById",value:function(J){return this.geometries[J]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(J,Ve){return Ve.getZIndex()-J.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(J,Ve){return J.getZIndex()-Ve.getZIndex()})}},{key:"getGeometriesByAddress",value:function(J){return Object.values(this.geometries).filter(function(Ve){return Ve.address&&Ve.address.properties&&Ve.address.properties.name&&Ve.address.properties.name===J})}},{key:"isMain",value:function(){return Boolean(this.properties.isMain)}}]),_p}(),HT=function(){function _p(J){var Ve=this,_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],_d=3<arguments.length?arguments[3]:void 0;j(this,_p),this.venueModel=_d,this.levels=_c.map(function(sy){return new M0(sy,Ve)}),this.structure=J,this.id=J&&J.id,this.properties=_s}return _e(_p,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var Ve=(J=zy(Q1.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2))[0],J=J[1];if(Ve)return[J[1],Ve[0],Ve[1],J[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(J){return this.getGeometries().find(function(Ve){return Ve.getId()===J||Ve.getIdentifier()===J})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(J){return J.getGeometries()})}},{key:"getLevelById",value:function(J){return this.levels.find(function(Ve){return Ve.getId()===J||Ve.getIdentifier()===J})}},{key:"getLevelByZIndex",value:function(J){return this.levels.find(function(Ve){return Ve.getZIndex()===J})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(J){return J.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),_p}(),wS=NA.STANDARD,zx=function(){function _p(J){var Ve=this,_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new X1;j(this,_p),this.metaInformation_=_s,this.momStructure=J,this.id=J&&J.site&&J.site.id,this.location=J&&J.site&&J.site.location||{},this.properties=J&&J.site&&v({},J.site.properties),this.drawings=J&&J.structure&&Object.values(J.structure).map(function(_c){var _d=J.getStructureWiseGeometry(_c.id);return new HT(_c,_c.properties,Object.values(_d),Ve)})}return _e(_p,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||wS}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var Ve=(J=zy(Q1.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2))[0],J=J[1];if(Ve)return[J[1],Ve[0],Ve[1],J[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(J){return this.getGeometries().find(function(Ve){return Ve.getId()===J||Ve.getIdentifier()===J})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(J,Ve){return J.getZIndex()-Ve.getZIndex()}).flatMap(function(J){return J.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(J){var _s,Ve=this,_c=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0===(_s=(_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).map(function(_d){return Ve.getLevelById(_d)})).length&&(_s=this.drawings.filter(function(_d){return _d=_d.getBoundingBox(),Q1.isPointInBoundingBox(J,_d)}).flatMap(function(_d){return _d.getLevels()})),p2.getGeometriesByLonLat(J,_s.flatMap(function(_d){return _d.getGeometries(!0)}),_c)}},{key:"getDrawingById",value:function(J){return this.drawings.find(function(Ve){return Ve.getId()===J||Ve.getIdentifier()===J})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(J){return J.isRoot()})}},{key:"getLevelById",value:function(J){return this.getLevels().find(function(Ve){return Ve.getId()===J||Ve.getIdentifier()===J})}},{key:"getLevelsByZIndex",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter(function(Ve){return Number(Ve.getZIndex())===Number(J)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(J){return J.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(J,Ve){var _s=Ve.getZIndex();return J[_s]||(J[_s]=[]),J[_s].push(Ve),J},{})}},{key:"getOccupant",value:function(){return Object.values(this.momStructure.occupant)}}]),_p}(),kC=function(){function _p(J){j(this,_p),this.theme=J&&J.theme,this.level=J&&J.level,this.site=J&&J.site,this.spaces=J&&J.spaces,this.address=J&&J.address,this.levelConnector=J&&J.levelConnector,this.topology=J&&J.topology,this.entrance=J&&J.entrance,this.occupant=J&&J.occupant,this.structure=J&&J.structure,this.spaceGroups=J&&J.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=J&&J.levelStructureMapping,this.outdoorLevelMapping=J&&J.outdoorLevelMapping||{},this.labelTextPreference=J&&J.labelTextPreference||null}return _e(_p,[{key:"setSpaceWithLevel",value:function(){var J=this;this.spaces&&Object.values(this.spaces).forEach(function(Ve){var _s="",_c=((Ve.addressId&&(_s=J.address&&J.address[Ve.addressId]&&J.address[Ve.addressId].properties.addressName),_c=Ve.properties).addressName=_s,_s=J.getLabelAsPerPreference(v(v({},Ve),{},{properties:_c})),((_c=Ve.properties).name=_s,_c.display_name=_s,Ve.properties.icon&&(_c.name=Ve.id,_c.display_name=Ve.id),_s=Ve).properties=_c,_s.address=J.address[Ve.addressId],(J.spaces[Ve.id]=Ve).levelId);J.outdoorLevelMapping[_c]&&(_c=J.outdoorLevelMapping[_c]),J.levelWiseGeometry[_c]||(J.levelWiseGeometry[_c]={}),J.levelWiseGeometry[_c][_s.id]=_s})}},{key:"setOccupantWithLevel",value:function(){var J=this;this.occupant&&Object.values(this.occupant).forEach(function(Ve){var _s,_c;Ve.spaceIds&&Ve.properties.occupantName&&(_s=[],_c=[],Ve.spaceIds.forEach(function(_d){function sy(py){var Ty=!1,By=(J.labelTextPreference&&J.labelTextPreference.length&&(Ty=-1!==J.labelTextPreference.indexOf("OCCUPANT_NAMES")),Ty=null===J.labelTextPreference||Ty,py),Ey=py.properties;Ey.name=py.properties.icon||!Ty?py.properties.name:Ve.properties.occupantName,Ey.display_name=py.properties.icon||!Ty?py.properties.display_name:Ve.properties.occupantName,Ey.address=py.address,Ey.occupantName=Ve.properties.occupantName,J.outdoorLevelMapping[Ty=py.levelId]&&(Ty=J.outdoorLevelMapping[Ty]),J.levelWiseGeometry[Ty]||(J.levelWiseGeometry[Ty]={}),J.levelWiseGeometry[Ty][py.id]=By,_s.push(By),_c.push(py.id)}var hy=J.spaces[hy=_d.id],my=null;J.spaceGroups&&Object.values(J.spaceGroups).forEach(function(py){py.properties.spaceGroups&&py.properties.spaceGroups&&py.properties.spaceGroups.forEach(function(Ty){Ty.mainSpace&&Ty.mainSpace.id===_d.id&&(my=Ty.spaces.map(function(By){return By.id}))})}),my&&0<my.length&&my.forEach(function(py){sy(J.spaces[py])}),hy&&sy(hy)}),J.occupant[Ve.id]=Ve,J.occupant[Ve.id].space=_s,J.occupant[Ve.id].spaceIds=_c)})}},{key:"setEntrance",value:function(){var J=this;this.entrance&&Object.values(this.entrance).forEach(function(Ve){var _s=Ve.properties.level.id;J.levelWiseGeometry[_s]||(J.levelWiseGeometry[Ve.properties.level.id]={}),J.outdoorLevelMapping[_s]&&(_s=J.outdoorLevelMapping[_s]),J.levelWiseGeometry[_s][Ve.id]=Ve})}},{key:"setLevelWiseGeometry",value:function(){var J=this;this.level&&Object.keys(this.level).forEach(function(Ve){J.levelWiseGeometry[Ve]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(J){for(var Ve={},_s=0,_c=Object.entries(this.levelWiseGeometry);_s<_c.length;_s++){var sy=(_d=zy(_c[_s],2))[0],_d=_d[1];J===this.levelStructureMapping[sy]&&(Ve[sy]=this.level[sy],Ve[sy].features=_d)}return Ve}},{key:"getLabelAsPerPreference",value:function(J){var Ve=(J=J.properties).spaceType,_s=J.occupantName,_c=J.spaceName,_d=J.addressName,sy=(J=J.spaceCategory,Ki(my={},"OCCUPANT_NAMES",_s),Ki(my,"SPACE_NAME",_c),Ki(my,v0,Ve?Ve.charAt(0).toUpperCase()+Ve.slice(1).toLowerCase():""),Ki(my,LT,J?J.charAt(0).toUpperCase()+J.slice(1).toLowerCase():""),Ki(my,"INTERNAL_ADDRESS_SHORT",_d),Ki(my,"INTERNAL_ADDRESS",_d),Ki(my,"INTERNAL_ADDRESS_LONG",_d),my),hy=(_s=this.theme.spaceRules,"");if("NONE"===(_c=J&&Ve&&_s[J]&&_s[J].spaceTypes&&_s[J].spaceTypes[Ve].behavioralAppearance.default.labelType)){if(!this.labelTextPreference)return"";sy[v0]=""}if(("NONE"===(_d=J&&Ve&&_s[J]&&_s[J].properties&&_s[J].properties.behavioralAppearance&&_s[J].properties.behavioralAppearance.default&&_s[J].properties.behavioralAppearance.default.labelType)||void 0===_d)&&void 0===_c){if(!this.labelTextPreference)return"";sy[v0]="",sy[LT]=""}var my=J&&Ve&&_s[J]&&_s[J].properties&&_s[J].properties.behavioralAppearance&&_s[J].properties.behavioralAppearance.default&&_s[J].properties.behavioralAppearance.default.labelTextPreference,py=my&&this.labelTextPreference?this.labelTextPreference:my;if(py)for(var Ty=0;Ty<py.length;Ty++)if(sy[py[Ty]]){hy=sy[py[Ty]];break}return hy}}]),_p}(),xS={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},sE=function(){function _p(J){var Ve=J.apiKey,_s=J.baseUrl,_c=J.token;J=J.hrn,j(this,_p),this.hostOptions_={apiKey:Ve,url:_s,token:_c,hrn:J},this.momData=[],this.theme={},this.loadOptions={}}return _e(_p,[{key:"load",value:function(J){var Ve=this,_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=v(v(v({},xS),_s),{},{venueId:J}),this.hostOptions_.mapData=_s.mapData,this.hostOptions_.themeRule=_s.themeRule,this.hostOptions_.svgList=_s.svgList,this.hostOptions_.labelTextPreference=_s.labelTextPreferenceOverride,this.hostOptions_.hrn?Promise.resolve().then(function(){return Ve.loadOptions.isMetaEnabled?Ve.getMeta_(Ve.loadOptions.isIconsEnabled).catch(function(_c){return console.warn(_c),Promise.resolve()}):Promise.reject()}).then(function(_c){return Ve.getVenue_(_c)}).then(function(_c){return _c}).catch(function(_c){console.debug("Captured event VENUE_ERROR_STATE",_c)}):Promise.reject().catch(function(){return console.warn("Venue service version 1 is no longer supported and Hrn is mandatory parameter in Version 2"),Promise.resolve()})}},{key:"createMomStructure",value:function(){var J=this,Ve={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(_s){var _c="indoormap-00000000-0000-4000-a000-".concat(J.loadOptions.venueId.toString().padStart(12,"0")),_d=_s.id;_s.momType!==RT&&!J.hostOptions_.mapData&&_s.properties.indoorMapId!=J.loadOptions.venueId&&_s.properties.indoorMapId!==_c||(_s.momType===TC?Ve.site=v1.setSite(_s,J.loadOptions.venueId):"indoor.Structure"===_s.momType?Ve.structure[_d]=v1.setStructure(_s):_s.momType!==DC||_s.properties.isOutdoor&&(!_s.properties.isOutdoor||_s.properties.parentIndoorLevel)?_s.momType===DC&&_s.properties.isOutdoor&&_s.properties.parentIndoorLevel?Ve.outdoorLevelMapping[_s.id]=_s.properties.parentIndoorLevel.id:_s.momType===E_?Ve.entrance[_d]=v1.setEntrance(_s):_s.momType===dS?Ve.occupant[_d]=v1.setOccupant(_s):_s.momType===gS?Ve.spaces[_d]=v1.setSpace(_s):"indoor.SpaceGroups"===_s.momType?Ve.spaceGroups[_d]=v1.setSpaceGroups(_s):_s.momType===RT&&(Ve.address[_d]=v1.setAddress(_s)):(Ve.level[_d]=v1.setLevel(_s),Ve.levelStructureMapping[_d]=_s.properties.structure.id))}),Ve.theme=this.theme,Ve.labelTextPreference=this.hostOptions_.labelTextPreference,new kC(Ve)}},{key:"getVenue_",value:function(J){this.momData=J.getMomData();var Ve=this.createMomStructure();return Ve.setLevelWiseGeometry(),new zx(Ve,J)}},{key:"setConfigData",value:function(J){var Ve=J.themeRule,_s=J.svgList;J=J.defaultLang,LA.setSpaceRules(Ve.spaceRules),v1.svgList=_s,v1.themeRule=Ve,v1.defaultLang=J,this.theme=Ve}},{key:"getMeta_",value:function(){var J=this,Ve=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],_s=new X1,_c=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,c2.SITE),_d=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,c2.Theme),sy=[];return Ve&&(sy=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,c2.IMAGES)),new Promise(function(hy){Promise.all([_c,_d,sy]).then(function(my){var py=(my=zy(my,3))[0],Ty=my[1],By=my[2],Ey=J.hostOptions_.mapData?{mom:new Promise(function(Qy){return Qy(J.hostOptions_.mapData)}),site:J.hostOptions_.mapData.features.find(function(Qy){return Qy.momType===TC})}:f2.getMomData(py,J.hostOptions_);Ey.mom.then(function(Qy){var t0=Ty.properties;_s.imageCache=Ve?v1.manageSvgDimensions(By.properties):[],J.setConfigData({themeRule:t0,svgList:_s.imageCache,defaultLang:Ey&&Ey.site&&Ey.site.properties.defaultLanguageCode}),_s.releaseSettings_={displayOptions:{display:t0.entranceRules.default.displayName||NA.STANDARD},mom:Qy.features},_s.theme=new U1(t0,_s),hy(_s)})})})}},{key:"getMetaConfig_",value:function(J,Ve){return f2.getConfigUrl(J,Ve,this.hostOptions_)}}]),_p}(),Ax=["origin","destination"],yN=function(){function _p(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(j(this,_p),!J.apiKey&&!J.token)throw new Error("API key or Token is missing");this.config_=v({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},J)}return _e(_p,[{key:"calculateRoute",value:function(J){var Ve=void 0===(Ve=J.origin)?{}:Ve,_s=void 0===(_s=J.destination)?{}:_s;if(J=function(_p,J){if(null==_p)return{};var Ve,_s=function(sy,hy){if(null==sy)return{};for(var my,py={},Ty=Object.keys(sy),By=0;By<Ty.length;By++)0<=hy.indexOf(my=Ty[By])||(py[my]=sy[my]);return py}(_p,J);if(Object.getOwnPropertySymbols)for(var _c=Object.getOwnPropertySymbols(_p),_d=0;_d<_c.length;_d++)0<=J.indexOf(Ve=_c[_d])||Object.prototype.propertyIsEnumerable.call(_p,Ve)&&(_s[Ve]=_p[Ve]);return _s}(J,Ax),!Ve.coordinates||!_s.coordinates)throw new Error("Waypoint coordinates are missing");function _c(hy){var my=hy.coordinates,py=hy.venueId;return hy=hy.levelId,my=my.join(","),py&&hy?my.concat(";indoorMapId=",py,";levelId=",hy):my}var _d=new URL("".concat(this.config_.baseUrl,"/v1/routes")),sy=new URLSearchParams({origin:_c(Ve),destination:_c(_s),apiKey:this.config_.apiKey});return Object.entries(J).forEach(function(hy){hy=zy(hy,2),sy.append(hy[0],"object"===w(hy=hy[1])?JSON.stringify(hy):hy)}),_d.search=sy,fetch(_d,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(hy){return hy.json()})}}]),_p}(),$w={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},j0=((Object.freeze((Ki(m0={},$w.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),Ki(m0,$w.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),Ki(m0,$w.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),Ki(m0,$w.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),Ki(m0,$w.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),Ki(m0,$w.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),Ki(m0,$w.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),Ki(m0,$w.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),Ki(m0,$w.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),m0)),Y0=new Y_).EVENT_NAME=$w,Y0.on("newListener",function(_p){$w[_p]||console.warn("subscribing for un-registered/documented event")}),function(){_u(J,H.map.Feature);var _p=ky(J);function J(Ve){var _s;if(j(this,J),_s=_p.call(this),Ve instanceof zx)return _s.venueModel=Ve,_s.search_=new pS(Ve),_s.status_={activeDrawingId:Ve.getRootDrawing().getIdentifier(),activeLevelIndex:Ve.getRootDrawing().getMainLevel().getZIndex()},_s.mapObjectStore_=_s.getDefaultMapObjectsStore_(),_s.drawings=Ve.getDrawings().map(function(_c){return(_c=new s1(_c)).setParentEventTarget(Ay(_s)),_c}),_s.levels=Ve.getLevels().map(function(_c){var _d=new S0(_c);return _d.setParentEventTarget(_s.drawings.find(function(sy){return sy.getIdentifier()===_d.getData().getDrawing().getIdentifier()})),_d}),_s.geometries=Ve.getGeometries().map(function(_c){var _d=new N0(_c);return _d.setParentEventTarget(_s.levels.find(function(sy){return sy.getIdentifier()===_d.getData().getLevel().getIdentifier()})),_d}),_s;throw new Error("It is mandatory to provide valid instance of venueModel")}return _e(J,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return dy(H.geo.Rect,h0(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var _s=(Ve=zy(this.venueModel.getCenter(),2))[0],Ve=Ve[1];return new H.geo.Point(Ve,_s)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(Ve){return this.drawings.find(function(_s){return _s.getIdentifier()===Ve})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(Ve){return this.levels.find(function(_s){return _s.getIdentifier()===Ve})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(Ve){return this.geometries.find(function(_s){return _s.getIdentifier()===Ve})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var Ve=this;return this.getData().getDisplaySettings()===NA.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(_s){return Ve.getLevel(_s.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(_s){return Ve.getLevel(_s.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(Ve){if(this.status_.activeDrawingId!==Ve){var _s=this.venueModel.getDrawingById(Ve);if(!_s)throw new Error("Drawing ".concat(Ve," was not found"));var _c=this.status_.activeDrawingId;this.status_.activeDrawingId=_s.id,this.setActiveLevelIndex(_s.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(J.EVENTS.DRAWING_CHANGE,Ve,_c))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(Ve){var _s;this.venueModel.getLevelsByZIndex(Ve)&&(_s=this.status_.activeLevelIndex,this.status_.activeLevelIndex=Ve,this.dispatchEvent(new H.util.ChangeEvent(J.EVENTS.LEVEL_CHANGE,Ve,_s)))}},{key:"isActive",value:function(){var Ve=this.getParentEventTarget();return!!Ve&&this===Ve.activeVenue}},{key:"getHighlightedGeometries",value:function(){var Ve=this;return this.venueModel.getGeometries().filter(function(_s){return _s.isHighlighted()}).map(function(_s){return Ve.getGeometry(_s.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var Ve=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],_c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_d=(_c=v(v({},IT),_c)).fillColor,sy=_c.outlineColor,hy=_c.outlineWidth;_s.forEach(function(my){my.getData().highlight(Ve,{m:_d,o:sy,w:hy})}),this.dispatchEvent(J.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var Ve=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[Ve][_s.getIdentifier()]}},{key:"setMapObjects",value:function(){var Ve=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),_c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[_s]&&this.mapObjectStore_[_s][_c.getIdentifier()]&&(this.mapObjectStore_[_s][_c.getIdentifier()]=h0(Ve)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var Ve=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap(function(_s){return _s.geometries.map(function(_c){return Ve.getGeometry(_c.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(Ve){Object.values(Ve).forEach(function(_s){return _s.forEach(function(_c){return _c.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(Ve){return Ve.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var Ve=this,_s=this.getData().getDisplaySettings()===NA.FLATTEN;return this.venueModel.getLevels().reduce(function(_c,_d){var sy=_d.getZIndex();return(_c=v({},_c))[sy]||(_c[sy]={}),_c[sy][_d.getDrawing().getIdentifier()]=[],_s&&(_c[sy][Ve.venueModel.getRootDrawing().getIdentifier()]=[]),_c},{})}}]),J}()),FA=(j0.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(J){return J.getData().getGeometries()}).filter(function(J){return J.isIcon()&&J.getIcon()}).map(function(J){var _s=(Ve=zy(J.getLabelArea(),2))[0],Ve=Ve[1],_c=J.getLevel(),_d=J.getIcon(),sy=J.properties.spaceType||J.properties.spaceCategory||J.getDisplayName();return{type:"Feature",properties:{id:J.getIdentifier(),geometryId:J.getIdentifier(),levelId:_c.getIdentifier(),name:sy,venueId:_c.getDrawing().getVenueModel().getIdentifier(),url:_d?"data:image/svg+xml;utf8,".concat(encodeURIComponent(_d)):""},geometry:{type:jx_POINT,coordinates:[_s,Ve]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(J){return J.getData().getGeometries()}).filter(function(J){return J.getDisplayName()&&!J.isIcon()}).map(function(J){var _s=(Ve=zy(J.getLabelArea(),2))[0],Ve=Ve[1],_d=(_c=J.getLabelStyle()).fill,_c=_c.zmin,sy=J.getLevel();return{type:"Feature",properties:{id:J.getIdentifier(),geometryId:J.getIdentifier(),levelId:sy.getIdentifier(),venueId:sy.getDrawing().getVenueModel().getIdentifier(),name:J.getDisplayName(),minZoom:_c||15,textFillColor:_d.toLowerCase()},geometry:{type:jx_POINT,coordinates:[_s,Ve]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(J){return J.getData().getGeometries()}).filter(function(J){return J.getType()!==jx_POINT}).map(function(J){var _s=(Ve=J.getHighlightedStyle()||{}).m,_c=Ve.o,Ve=Ve.w,sy=(_d=v({},J.getStyle())).m,hy=_d.o,_d=_d.w,py=(my=hS).fillColor,Ty=my.outlineColor,my=my.outlineWidth,By=J.getLevel();return{type:"Feature",properties:{id:J.getIdentifier(),fillColor:(_s||sy||py).toLowerCase(),geometryId:J.getIdentifier(),levelId:By.getIdentifier(),venueId:By.getDrawing().getVenueModel().getIdentifier(),outlineColor:(_c||hy||Ty).toLowerCase(),outlineWidth:Number(((Ve||_d||my)/3).toFixed(2)),zIndex:J.getZIndex()},geometry:{type:J.getType(),coordinates:J.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(J){return{type:"FeatureCollection",features:J.flatMap(function(Ve){var _s=Ve.getData().getRootDrawing().getMainLevel().getIdentifier(),_c=Ve.getLevel(_s).getData().getGeometries().filter(function(_d){return _d.getType()===jx_POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:_s,venueId:Ve.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:_c.map(function(_d){return _d.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:_s,venueId:Ve.getIdentifier(),zIndex:2,venueName:Ve.getName()},geometry:{type:"Point",coordinates:Ve.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),_p}()),UT=function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"getStyle",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Ve={styles:[{layer:V_.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:V_.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:V_.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:V_.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:V_.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:V_.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:13,text:["get","name"],priority:60},{layer:V_.ICON,minZoomLevel:16,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return J.forEach(function(_s){var _c="texture"+_s.properties.name;Ve.images[_c]||(Ve.images[_c]={url:_s.properties.url,preload:!0},Ve.imageTextures.push({name:_c,image:_c}))}),new H.map.render.harp.Style(Ve)}}]),_p}(),GT=function(){function _p(){j(this,_p)}return _e(_p,null,[{key:"getIconsTextures",value:function(){var J={},Ve={},_s=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(_c,_d){var sy=_d.properties.name;return _c[sy]||(_c[sy]=[]),_c[sy].push(_d),_c},{});return Object.keys(_s).forEach(function(_c){var _d="texture".concat(_c),sy="sprite".concat(_c);J[_d]={url:_s[_c][0].properties.url,sprites:Ki({},sy,[0,0,50,50])},_s[_c].forEach(function(my){Ve["icon".concat((my=my.properties).name)]={filter:{name:my.name,$zoom:{min:16}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:_d,sprite:sy}}}})}),{textures:J,iconLayers:Ve}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:V_.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){return{data:{source:"venues",layer:V_.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}}}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:V_.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:13},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(J){return v({data:{source:"venues",layer:V_.ICON}},J)}},{key:"getStyle",value:function(){var Ve=(J=_p.getIconsTextures(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[])).textures,J=J.iconLayers;return J={venue_footprints:_p.getFootprintLayer(),venue_geometries:_p.getGeometryLayer(),venue_labels:_p.getTextLayer(),venue_icons:_p.getIconLayer(J)},J=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:J,textures:Ve}),new H.map.render.webgl.Style(J)}}]),_p}(),yI={type:"FeatureCollection",features:[]},n_={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},m0=function(){_u(J,H.map.provider.RemoteTileProvider);var _p=ky(J);function J(Ve){return j(this,J),(Ve=_p.call(this,Ve)).venues=[],Ve.activeVenue=null,Ve.dataLayers_={},Ve.tileIndexes_={},Ve.addEventListener(j0.EVENTS.ACTIVE_VENUE_CHANGE,Ve.activeVenueChangeHandler_,void 0,Ay(Ve)),Ve}return _e(J,[{key:"setStyle",value:function(Ve){return this.setStyleInternal(Ve)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(Ve,_s){var _c=Ve.properties;return this.activeVenue&&_c.venueId===this.activeVenue.getIdentifier()?_s!==V_.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(_d){return _d.id===_c.levelId}):!0===_c.isFootprint&&_s===V_.FOOTPRINT}},{key:"requestInternal",value:function(Ve,_s,_c,_d){function sy(py){for(var Ty=0;Ty<py.length;Ty+=1)py[Ty]=py[Ty].map(function(By){return MT(By,_c,Ve,_s,n_.extent)})}var hy=this,my={};return Object.keys(this.tileIndexes_).forEach(function(py){var Ty=hy.tileIndexes_[py].getTile(_c,Ve,_s);my[py]=Ty?function(_p){var J=[],Ve=_p&&_p.features;if(Ve)for(var _s=0,_c=Ve.length;_s<_c;_s+=1){var _d=Ve[_s],sy=_d.type,hy=void 0,my=!1;switch(sy){case 1:hy={type:jx_MULTI_POINT,coordinates:_d.geometry.map(function(py){return py.slice()})};break;case 2:case 3:hy={type:jx_MULTI_LINESTRING,coordinates:_d.geometry.map(function(py){return py.map(function(Ty){return Ty.slice()})})},3===sy&&null==(hy=function(py){for(var Ty,By=[],Ey=[],Qy=0,t0=py.coordinates.length;Qy<t0;Qy+=1){var Jy=py.coordinates[Qy],Fy=mE(Jy);null!==Fy&&(Fy===(Ty=Ty||Fy)&&Ey.length&&(By.push(Ey),Ey=[]),Ey.push(Jy))}return 0<Ey.length&&By.push(Ey),1===By.length?(py.type=jx_POLYGON,py.coordinates=By[0]):1<By.length?(py.type=jx_MULTI_POLYGON,py.coordinates=By):py=null,py}(hy))&&(my=!0);break;default:my=!0}my||J.push({geometry:hy,id:_d.id,properties:_d.tags,type:"Feature"})}return{type:"FeatureCollection",features:J}}(Ty):yI,my[py].features=my[py].features.filter(function(Fy){return hy.isFeatureVisible_(Fy,py)});for(var By=0;By<my[py].features.length;By+=1){var Ey=my[py].features[By],Qy=Ey.geometry.type;if(Qy===jx_POLYGON||Qy===jx_MULTI_LINESTRING)sy(Ey.geometry.coordinates);else if(Qy===jx_MULTI_POLYGON)Ey.geometry.coordinates.map(sy);else for(var t0=Ey.geometry.coordinates,Jy=0;Jy<t0.length;Jy+=1)t0[Jy]=MT(t0[Jy],_c,Ve,_s,n_.extent)}}),_d(my),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(Ve){return Ve?this.venues.find(function(_s){return _s.getIdentifier()===Ve}):this.activeVenue}},{key:"setActiveVenue",value:function(Ve){var _s=this.activeVenue;this.activeVenue=Ve,this.dispatchEvent(new H.util.ChangeEvent(j0.EVENTS.ACTIVE_VENUE_CHANGE,Ve,_s)),this.reload()}},{key:"addVenue",value:function(Ve){var _s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(Ve instanceof j0))throw new Error("Invalid argument");var _c=Ve.getIdentifier();if(this.getVenue(_c))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(_c," before adding new"));Ve.setParentEventTarget(this),this.venues.push(Ve),_s||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var Ve=this,_s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<_s.length&&(_s.forEach(function(_c){_c instanceof j0&&Ve.addVenue(_c,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(Ve){var _s;Ve instanceof j0&&-1<this.venues.indexOf(Ve)&&(_s=Ve.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===_s&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(Ve),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(Ve,_s,_c){var _d=Ve.geometryId;return Ve=this.getVenue(Ve=Ve.venueId),_d?_c(Ve.getGeometries().find(function(sy){return sy.id===_d})):Ve&&_c(Ve),!0}},{key:"addVenueEventListeners_",value:function(Ve){Ve&&(Ve.addEventListener(j0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),Ve.addEventListener(j0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),Ve.addEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(Ve){Ve&&(Ve.removeEventListener(j0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),Ve.removeEventListener(j0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),Ve.removeEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(Ve){var _s=Ve.oldValue;Ve=Ve.newValue,_s&&(this.removeVenueEventListeners_(_s),_s.updateMapObjectsVisibility_()),Ve&&(this.addVenueEventListeners_(Ve),Ve.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadData_([V_.VECTOR]),this.reload()}},{key:"createDataLayers_",value:function(){var Ve=this,_s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(V_),_c=V_.FOOTPRINT,_d=V_.ICON,sy=V_.TEXT,hy=V_.VECTOR;_s.forEach(function(my){switch(my){case hy:Ve.dataLayers_[hy]=FA.getGeometryLayer(Ve.venues);break;case _c:Ve.dataLayers_[_c]=FA.getFootprintLayer(Ve.venues);break;case _d:Ve.dataLayers_[_d]=FA.getIconLayer(Ve.venues);break;case sy:Ve.dataLayers_[sy]=FA.getLabelLayer(Ve.venues);break;default:throw new Error("Unsupported Layer ".concat(my))}})}},{key:"createTileIndexes_",value:function(){var Ve=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(V_)).forEach(function(_s){Ve.tileIndexes_[_s]=new kA(Ve.dataLayers_[_s],n_)})}},{key:"reloadData_",value:function(){var Ve=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(V_);this.createDataLayers_(Ve),this.createTileIndexes_(Ve)}},{key:"reloadStyle_",value:function(){var Ve=this.dataLayers_[V_.ICON]?this.dataLayers_[V_.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(GT.getStyle(Ve)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(UT.getStyle(Ve))}},{key:"providesGeoJSON",value:function(){return!0}}]),J}(),jA=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),X2=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),d2=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),P_=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),g2=function(){function _p(J,Ve){j(this,_p),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(J,Ve)}return _e(_p,[{key:"createRouteObjects_",value:function(J){for(var Ve=this,_s=void 0===(J=J.sections)?[]:J,_c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:vS,_d=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(my){var py,Fy,Ty=_s[my],Ey=(By=Ty.departure.place).id,By=By.type,Qy=H.util.flexiblePolyline.decode(Ty.polyline).polyline,t0=void 0,Jy=void 0,Uy=((Fy=_c(my,_s,_p.ObjectType.SEGMENT_START_MARKER))&&(t0=new H.map.Marker(Ty.departure.place.location,{icon:Fy})),(Fy=_c(my,_s,_p.ObjectType.SEGMENT_FINISH_MARKER))&&(Jy=new H.map.Marker(Ty.arrival.place.location,{icon:Fy})),_c(my,_s,_p.ObjectType.SEGMENT_POLYLINE));"indoor"===By?(Fy=function(){var Hy=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],$y=new Map,Cy=new H.geo.LineString,Ny=zy(Hy[0],3)[2];return $y.set(Ny,[Cy]),Hy.forEach(function(n0){n0[2]!==Ny&&(Ny=n0[2],Cy=new H.geo.LineString,$y.has(Ny)?$y.get(Ny).push(Cy):$y.set(Ny,[Cy])),Cy.pushLatLngAlt.apply(Cy,h0(n0))}),$y}(Qy),py=Array.from(Fy.keys()).reduce(function(Hy,$y){return Hy[$y]||(Hy[$y]=new H.map.Group),Hy},{}),Uy&&Fy.forEach(function(Hy,$y){Hy.forEach(function(Cy){1<Cy.getPointCount()&&(Cy=new H.map.Polyline(Cy,{style:Uy}),py[$y].addObject(Cy))})}),t0&&py[Ty.departure.place.location.lvl].addObject(t0),Jy&&py[Ty.arrival.place.location.lvl].addObject(Jy),Ve.indoorMapObjects_[Ey]=v(v({},Ve.indoorMapObjects_[Ey]||{}),py)):(Uy&&(my=new H.geo.LineString(Qy.flatMap(function(Hy){return[Hy[0],Hy[1],0]})),By=new H.map.Polyline(my,{style:Uy}),Ve.outdoorMapObjects_.addObject(By)),t0&&Ve.outdoorMapObjects_.addObject(t0),Jy&&Ve.outdoorMapObjects_.addObject(Jy))}),sy=0;sy<_s.length;sy++)_d(sy)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),_p}(),VA=(g2.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){_u(J,H.service.Service);var _p=ky(J);function J(Ve){j(this,J),_s=_p.call(this,J,v(v({},Ve),{},{baseUrl:void 0}));var _s,_c={apiKey:Ve.apikey,baseUrl:Ve.baseUrl,token:Ve.token},_d={apiKey:_c.apiKey,token:_c.token},sy=(_c.apiKey||(_c.apiKey=_s.getUrl().getQuery().apikey),Ve.useLegacy||!1);return _s.venueService_=new sE(_c,sy),_d.apiKey||(_d.apiKey=_s.getUrl().getQuery().apikey),Ve.routingBaseUrl&&(_d.baseUrl=Ve.routingBaseUrl),_s.routingService_=new yN(_d),_s}return _e(J,[{key:"loadVenue",value:function(Ve){return console.warn("Venue service version 1 is no longer supported hence "+Ve+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(Ve){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(Ve)}}]),J}()),y2=(VA.CONFIG_KEY="venues",function(){_u(J,H.service.Service);var _p=ky(J);function J(Ve){j(this,J),_s=_p.call(this,J,v(v({},Ve),{},{baseUrl:void 0}));var _s,_c={apiKey:Ve.apikey,baseUrl:Ve.baseUrl,token:Ve.token,hrn:Ve.hrn};return _c.apiKey||(_c.apiKey=_s.getUrl().getQuery().apikey),_s.venueService_=new sE(_c,Ve=Ve.useLegacy||!1),_s}return _e(J,[{key:"loadVenue",value:function(Ve){return this.venueService_.load(Ve,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then(function(_s){return new j0(_s)})}}]),J}()),BA=(y2.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(_p,J){var Ve=y2;return 1!==J&&J?_p.hrn||2!==J||console.warn("Hrn is mandatory parameter in Venue Service version 2"):(console.warn("Venue service version 1 is no longer supported"),Ve=VA),this.createService(Ve,_p)},y2.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},Y0=function(){_u(J,H.ui.Control);var _p=ky(J);function J(Ve){var _s,_c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return j(this,J),(_s=_p.call(this)).provider_=null,_s.levelSelectorUI_=null,_s.setAlignment(_c&&_c.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),_s.addClass("venues-ui"),Ve instanceof j0&&_s.setVenue(Ve),_s}return _e(J,[{key:"renderInternal",value:function(Ve,_s){Xy(fd(J.prototype),"renderInternal",this).call(this,Ve,_s),this.createLevelSelectorUI_(Ve),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(Ve){Ve instanceof j0&&(this.removeEventListeners_(),this.venue=Ve,this.provider_=Ve.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(Ve){var _s=this;Ve.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new gN(Ve,null,null,function(_c){return _s.venue.setActiveLevelIndex(_c)})}},{key:"update_",value:function(){var Ve,_s;this.levelSelectorUI_&&(Ve=this.venue.getActiveDrawing().getData(),_s=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(Ve,_s),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(j0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(j0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(j0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(j0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(Ve){this.setVenue(Ve.newValue)}}]),J}(),function(){_u(J,H.ui.Control);var _p=ky(J);function J(Ve){var _s,_c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return j(this,J),(_s=_p.call(this)).provider_=null,_s.drawingSelectorUI_=null,_s.addClass("venues-ui"),_s.setAlignment(_c&&_c.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),Ve instanceof j0&&_s.setVenue(Ve),_s}return _e(J,[{key:"renderInternal",value:function(Ve,_s){Xy(fd(J.prototype),"renderInternal",this).call(this,Ve,_s),this.createDrawingSelectorUI_(Ve),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(Ve){Ve instanceof j0&&(this.removeEventListeners_(),this.venue=Ve,this.provider_=Ve.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(Ve.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(Ve){var _s=this;Ve.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new U_(Ve,null,function(_c){return _s.venue.setActiveDrawing(_c)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(j0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(j0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(j0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(Ve){this.setVenue(Ve.newValue)}}]),J}());return BA=Object.freeze({__proto__:null,DrawingControl:BA,LevelControl:Y0}),o(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),e.Drawing=s1,e.Geometry=N0,e.Level=S0,e.Provider=m0,e.Route=g2,e.Service=VA,e.Service2=y2,e.Venue=j0,e.ui=BA,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}.call(self);const __WEBPACK_DEFAULT_EXPORT__=H},937:(e,o,d)=>{"use strict";function v(r){return"function"==typeof r}let w=!1;const j={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=r},get useDeprecatedSynchronousErrorHandling(){return w}};function Z(r){setTimeout(()=>{throw r},0)}const _e={closed:!0,next(r){},error(r){if(j.useDeprecatedSynchronousErrorHandling)throw r;Z(r)},complete(){}},Ki=Array.isArray||(r=>r&&"number"==typeof r.length);function _u(r){return null!==r&&"object"==typeof r}const iy=(()=>{function r(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,h)=>`${h+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return r.prototype=Object.create(Error.prototype),r})();class oy{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:i,_ctorUnsubscribe:h,_unsubscribe:m,_subscriptions:I}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof oy)i.remove(this);else if(null!==i)for(let z=0;z<i.length;++z)i[z].remove(this);if(v(m)){h&&(this._unsubscribe=void 0);try{m.call(this)}catch(z){n=z instanceof iy?dy(z.errors):[z]}}if(Ki(I)){let z=-1,X=I.length;for(;++z<X;){const _r=I[z];if(_u(_r))try{_r.unsubscribe()}catch(ga){n=n||[],ga instanceof iy?n=n.concat(dy(ga.errors)):n.push(ga)}}}if(n)throw new iy(n)}add(n){let i=n;if(!n)return oy.EMPTY;switch(typeof n){case"function":i=new oy(n);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof oy)){const I=i;i=new oy,i._subscriptions=[I]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:h}=i;if(null===h)i._parentOrParents=this;else if(h instanceof oy){if(h===this)return i;i._parentOrParents=[h,this]}else{if(-1!==h.indexOf(this))return i;h.push(this)}const m=this._subscriptions;return null===m?this._subscriptions=[i]:m.push(i),i}remove(n){const i=this._subscriptions;if(i){const h=i.indexOf(n);-1!==h&&i.splice(h,1)}}}var r;function dy(r){return r.reduce((n,i)=>n.concat(i instanceof iy?i.errors:i),[])}oy.EMPTY=((r=new oy).closed=!0,r);const _y="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class ky extends oy{constructor(n,i,h){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=_e;break;case 1:if(!n){this.destination=_e;break}if("object"==typeof n){n instanceof ky?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new Xy(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new Xy(this,n,i,h)}}[_y](){return this}static create(n,i,h){const m=new ky(n,i,h);return m.syncErrorThrowable=!1,m}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class Xy extends ky{constructor(n,i,h,m){super(),this._parentSubscriber=n;let I,z=this;v(i)?I=i:i&&(I=i.next,h=i.error,m=i.complete,i!==_e&&(z=Object.create(i),v(z.unsubscribe)&&this.add(z.unsubscribe.bind(z)),z.unsubscribe=this.unsubscribe.bind(this))),this._context=z,this._next=I,this._error=h,this._complete=m}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:i}=this;j.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?this.__tryOrSetError(i,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:i}=this,{useDeprecatedSynchronousErrorHandling:h}=j;if(this._error)h&&i.syncErrorThrowable?(this.__tryOrSetError(i,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(i.syncErrorThrowable)h?(i.syncErrorValue=n,i.syncErrorThrown=!0):Z(n),this.unsubscribe();else{if(this.unsubscribe(),h)throw n;Z(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const i=()=>this._complete.call(this._context);j.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,i){try{n.call(this._context,i)}catch(h){if(this.unsubscribe(),j.useDeprecatedSynchronousErrorHandling)throw h;Z(h)}}__tryOrSetError(n,i,h){if(!j.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this._context,h)}catch(m){return j.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=m,n.syncErrorThrown=!0,!0):(Z(m),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const Gy="function"==typeof Symbol&&Symbol.observable||"@@observable";function O0(r){return r}let S0=(()=>{class r{constructor(i){this._isScalar=!1,i&&(this._subscribe=i)}lift(i){const h=new r;return h.source=this,h.operator=i,h}subscribe(i,h,m){const{operator:I}=this,z=function(r,n,i){if(r){if(r instanceof ky)return r;if(r[_y])return r[_y]()}return r||n||i?new ky(r,n,i):new ky(_e)}(i,h,m);if(z.add(I?I.call(z,this.source):this.source||j.useDeprecatedSynchronousErrorHandling&&!z.syncErrorThrowable?this._subscribe(z):this._trySubscribe(z)),j.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable&&(z.syncErrorThrowable=!1,z.syncErrorThrown))throw z.syncErrorValue;return z}_trySubscribe(i){try{return this._subscribe(i)}catch(h){j.useDeprecatedSynchronousErrorHandling&&(i.syncErrorThrown=!0,i.syncErrorValue=h),function(r){for(;r;){const{closed:n,destination:i,isStopped:h}=r;if(n||h)return!1;r=i&&i instanceof ky?i:null}return!0}(i)?i.error(h):console.warn(h)}}forEach(i,h){return new(h=D1(h))((m,I)=>{let z;z=this.subscribe(X=>{try{i(X)}catch(_r){I(_r),z&&z.unsubscribe()}},I,m)})}_subscribe(i){const{source:h}=this;return h&&h.subscribe(i)}[Gy](){return this}pipe(...i){return 0===i.length?this:function(r){return 0===r.length?O0:1===r.length?r[0]:function(i){return r.reduce((h,m)=>m(h),i)}}(i)(this)}toPromise(i){return new(i=D1(i))((h,m)=>{let I;this.subscribe(z=>I=z,z=>m(z),()=>h(I))})}}return r.create=n=>new r(n),r})();function D1(r){if(r||(r=j.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const N_=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class I_ extends oy{constructor(n,i){super(),this.subject=n,this.subscriber=i,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,i=n.observers;if(this.subject=null,!i||0===i.length||n.isStopped||n.closed)return;const h=i.indexOf(this.subscriber);-1!==h&&i.splice(h,1)}}class iE extends ky{constructor(n){super(n),this.destination=n}}let W_=(()=>{class r extends S0{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_y](){return new iE(this)}lift(i){const h=new LE(this,this);return h.operator=i,h}next(i){if(this.closed)throw new N_;if(!this.isStopped){const{observers:h}=this,m=h.length,I=h.slice();for(let z=0;z<m;z++)I[z].next(i)}}error(i){if(this.closed)throw new N_;this.hasError=!0,this.thrownError=i,this.isStopped=!0;const{observers:h}=this,m=h.length,I=h.slice();for(let z=0;z<m;z++)I[z].error(i);this.observers.length=0}complete(){if(this.closed)throw new N_;this.isStopped=!0;const{observers:i}=this,h=i.length,m=i.slice();for(let I=0;I<h;I++)m[I].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(i){if(this.closed)throw new N_;return super._trySubscribe(i)}_subscribe(i){if(this.closed)throw new N_;return this.hasError?(i.error(this.thrownError),oy.EMPTY):this.isStopped?(i.complete(),oy.EMPTY):(this.observers.push(i),new I_(this,i))}asObservable(){const i=new S0;return i.source=this,i}}return r.create=(n,i)=>new LE(n,i),r})();class LE extends W_{constructor(n,i){super(),this.destination=n,this.source=i}next(n){const{destination:i}=this;i&&i.next&&i.next(n)}error(n){const{destination:i}=this;i&&i.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:i}=this;return i?this.source.subscribe(n):oy.EMPTY}}function Y2(r){return r&&"function"==typeof r.schedule}function k_(r,n){return function(h){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return h.lift(new dE(r,n))}}class dE{constructor(n,i){this.project=n,this.thisArg=i}call(n,i){return i.subscribe(new cS(n,this.project,this.thisArg))}}class cS extends ky{constructor(n,i,h){super(n),this.project=i,this.count=0,this.thisArg=h||this}_next(n){let i;try{i=this.project.call(this.thisArg,n,this.count++)}catch(h){return void this.destination.error(h)}this.destination.next(i)}}const SA=r=>n=>{for(let i=0,h=r.length;i<h&&!n.closed;i++)n.next(r[i]);n.complete()},oE="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",$2=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function l2(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const IA=r=>{if(r&&"function"==typeof r[Gy])return(r=>n=>{const i=r[Gy]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(n)})(r);if($2(r))return SA(r);if(l2(r))return(r=>n=>(r.then(i=>{n.closed||(n.next(i),n.complete())},i=>n.error(i)).then(null,Z),n))(r);if(r&&"function"==typeof r[oE])return(r=>n=>{const i=r[oE]();for(;;){let h;try{h=i.next()}catch(m){return n.error(m),n}if(h.done){n.complete();break}if(n.next(h.value),n.closed)break}return"function"==typeof i.return&&n.add(()=>{i.return&&i.return()}),n})(r);{const i=`You provided ${_u(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(i)}};function OA(r,n){return new S0(i=>{const h=new oy;let m=0;return h.add(n.schedule(function(){m!==r.length?(i.next(r[m++]),i.closed||h.add(this.schedule())):i.complete()})),h})}function f1(r,n){return n?function(r,n){if(null!=r){if(function(r){return r&&"function"==typeof r[Gy]}(r))return function(r,n){return new S0(i=>{const h=new oy;return h.add(n.schedule(()=>{const m=r[Gy]();h.add(m.subscribe({next(I){h.add(n.schedule(()=>i.next(I)))},error(I){h.add(n.schedule(()=>i.error(I)))},complete(){h.add(n.schedule(()=>i.complete()))}}))})),h})}(r,n);if(l2(r))return function(r,n){return new S0(i=>{const h=new oy;return h.add(n.schedule(()=>r.then(m=>{h.add(n.schedule(()=>{i.next(m),h.add(n.schedule(()=>i.complete()))}))},m=>{h.add(n.schedule(()=>i.error(m)))}))),h})}(r,n);if($2(r))return OA(r,n);if(function(r){return r&&"function"==typeof r[oE]}(r)||"string"==typeof r)return function(r,n){if(!r)throw new Error("Iterable cannot be null");return new S0(i=>{const h=new oy;let m;return h.add(()=>{m&&"function"==typeof m.return&&m.return()}),h.add(n.schedule(()=>{m=r[oE](),h.add(n.schedule(function(){if(i.closed)return;let I,z;try{const X=m.next();I=X.value,z=X.done}catch(X){return void i.error(X)}z?i.complete():(i.next(I),this.schedule())}))})),h})}(r,n)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,n):r instanceof S0?r:new S0(IA(r))}class IT extends ky{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class K2 extends ky{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function V_(r,n){if(n.closed)return;if(r instanceof S0)return r.subscribe(n);let i;try{i=IA(r)(n)}catch(h){n.error(h)}return i}function m1(r,n,i=Number.POSITIVE_INFINITY){return"function"==typeof n?h=>h.pipe(m1((m,I)=>f1(r(m,I)).pipe(k_((z,X)=>n(m,z,I,X))),i)):("number"==typeof n&&(i=n),h=>h.lift(new CC(r,i)))}class CC{constructor(n,i=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=i}call(n,i){return i.subscribe(new kT(n,this.project,this.concurrent))}}class kT extends K2{constructor(n,i,h=Number.POSITIVE_INFINITY){super(n),this.project=i,this.concurrent=h,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let i;const h=this.index++;try{i=this.project(n,h)}catch(m){return void this.destination.error(m)}this.active++,this._innerSub(i)}_innerSub(n){const i=new IT(this),h=this.destination;h.add(i);const m=V_(n,i);m!==i&&h.add(m)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function yE(r=Number.POSITIVE_INFINITY){return m1(O0,r)}function mE(r,n){return n?OA(r,n):new S0(SA(r))}function jE(){return function(n){return n.lift(new OT(n))}}class OT{constructor(n){this.connectable=n}call(n,i){const{connectable:h}=this;h._refCount++;const m=new fS(n,h),I=i.subscribe(m);return m.closed||(m.connection=h.connect()),I}}class fS extends ky{constructor(n,i){super(n),this.connectable=i}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const i=n._refCount;if(i<=0)return void(this.connection=null);if(n._refCount=i-1,i>1)return void(this.connection=null);const{connection:h}=this,m=n._connection;this.connection=null,m&&(!h||m===h)&&m.unsubscribe()}}class pS extends S0{constructor(n,i){super(),this.source=n,this.subjectFactory=i,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new oy,n.add(this.source.subscribe(new TC(this.getSubject(),this))),n.closed&&(this._connection=null,n=oy.EMPTY)),n}refCount(){return jE()(this)}}const c2=(()=>{const r=pS.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class TC extends iE{constructor(n,i){super(n),this.connectable=i}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const i=n._connection;n._refCount=0,n._subject=null,n._connection=null,i&&i.unsubscribe()}}}function RT(){return new W_}function E_(r){for(let n in r)if(r[n]===E_)return n;throw Error("Could not find renamed property on target object.")}function NT(r,n){for(const i in n)n.hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=n[i])}function e_(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(e_).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const n=r.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function PT(r,n){return null==r||""===r?null===n?"":n:null==n||""===n?r:r+" "+n}const SC=E_({__forward_ref__:E_});function H_(r){return r.__forward_ref__=H_,r.toString=function(){return e_(this())},r}function v0(r){return LT(r)?r():r}function LT(r){return"function"==typeof r&&r.hasOwnProperty(SC)&&r.__forward_ref__===H_}class vE extends Error{constructor(n,i){super(function(r,n){return`${r?`NG0${r}: `:""}${n}`}(n,i)),this.code=n}}function G0(r){return"string"==typeof r?r:null==r?"":String(r)}function P1(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():G0(r)}function MC(r,n){const i=n?` in ${n}`:"";throw new vE("201",`No provider for ${P1(r)} found${i}`)}function L1(r,n){null==r&&function(r,n,i,h){throw new Error(`ASSERTION ERROR: ${r}`+(null==h?"":` [Expected=> ${i} ${h} ${n} <=Actual]`))}(n,r,null,"!=")}function K0(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function U1(r){return{providers:r.providers||[],imports:r.imports||[]}}function X1(r){return h2(r,v1)||h2(r,p2)}function h2(r,n){return r.hasOwnProperty(n)?r[n]:null}function LA(r){return r&&(r.hasOwnProperty(f2)||r.hasOwnProperty(bS))?r[f2]:null}const v1=E_({\u0275prov:E_}),f2=E_({\u0275inj:E_}),p2=E_({ngInjectableDef:E_}),bS=E_({ngInjectorDef:E_});var M0=(()=>((M0=M0||{})[M0.Default=0]="Default",M0[M0.Host=1]="Host",M0[M0.Self=2]="Self",M0[M0.SkipSelf=4]="SkipSelf",M0[M0.Optional=8]="Optional",M0))();let HT;function zx(r){const n=HT;return HT=r,n}function kC(r,n,i){const h=X1(r);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:i&M0.Optional?null:void 0!==n?n:void MC(e_(r),"Injector")}function sE(r){return{toString:r}.toString()}var Ax=(()=>((Ax=Ax||{})[Ax.OnPush=0]="OnPush",Ax[Ax.Default=1]="Default",Ax))(),j0=(()=>((j0=j0||{})[j0.Emulated=0]="Emulated",j0[j0.None=2]="None",j0[j0.ShadowDom=3]="ShadowDom",j0))();const FA="undefined"!=typeof globalThis&&globalThis,UT="undefined"!=typeof window&&window,GT="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n_=FA||"undefined"!=typeof global&&global||UT||GT,d2={},P_=[],g2=E_({\u0275cmp:E_}),VA=E_({\u0275dir:E_}),y2=E_({\u0275pipe:E_}),BA=E_({\u0275mod:E_}),_p=E_({\u0275loc:E_}),J=E_({\u0275fac:E_}),Ve=E_({__NG_ELEMENT_ID__:E_});let _s=0;function _c(r){return sE(()=>{const i={},h={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Ax.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||P_,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||j0.Emulated,id:"c",styles:r.styles||P_,_:null,setInput:null,schemas:r.schemas||null,tView:null},m=r.directives,I=r.features,z=r.pipes;return h.id+=_s++,h.inputs=By(r.inputs,i),h.outputs=By(r.outputs),I&&I.forEach(X=>X(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(sy):null,h.pipeDefs=z?()=>("function"==typeof z?z():z).map(hy):null,h})}function sy(r){return t0(r)||function(r){return r[VA]||null}(r)}function hy(r){return function(r){return r[y2]||null}(r)}const my={};function py(r){return sE(()=>{const n={type:r.type,bootstrap:r.bootstrap||P_,declarations:r.declarations||P_,imports:r.imports||P_,exports:r.exports||P_,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(my[r.id]=r.type),n})}function By(r,n){if(null==r)return d2;const i={};for(const h in r)if(r.hasOwnProperty(h)){let m=r[h],I=m;Array.isArray(m)&&(I=m[1],m=m[0]),i[m]=h,n&&(n[m]=I)}return i}const Ey=_c;function t0(r){return r[g2]||null}function Uy(r,n){const i=r[BA]||null;if(!i&&!0===n)throw new Error(`Type ${e_(r)} does not have '\u0275mod' property.`);return i}function fx(r){return Array.isArray(r)&&"object"==typeof r[1]}function J1(r){return Array.isArray(r)&&!0===r[1]}function Hx(r){return 0!=(8&r.flags)}function BE(r){return 2==(2&r.flags)}function HA(r){return 1==(1&r.flags)}function Ux(r){return null!==r.template}function qT(r){return 0!=(512&r[2])}function tA(r,n){return r.hasOwnProperty(J)?r[J]:null}class bN{constructor(n,i,h){this.previousValue=n,this.currentValue=i,this.firstChange=h}isFirstChange(){return this.firstChange}}function G1(){return RC}function RC(r){return r.type.prototype.ngOnChanges&&(r.setInput=D_),wN}function wN(){const r=mI(this),n=null==r?void 0:r.current;if(n){const i=r.previous;if(i===d2)r.previous=n;else for(let h in n)i[h]=n[h];r.current=null,this.ngOnChanges(n)}}function D_(r,n,i,h){const m=mI(r)||function(r,n){return r[A0]=n}(r,{previous:d2,current:null}),I=m.current||(m.current={}),z=m.previous,X=this.declaredInputs[i],_r=z[X];I[X]=new bN(_r&&_r.currentValue,n,z===d2),r[h]=n}G1.ngInherit=!0;const A0="__ngSimpleChanges__";function mI(r){return r[A0]||null}let NC;function S_(r){return!!r.listen}const l_={createRenderer:(r,n)=>void 0!==NC?NC:"undefined"!=typeof document?document:void 0};function p1(r){for(;Array.isArray(r);)r=r[0];return r}function b2(r,n){return p1(n[r])}function Gx(r,n){return p1(n[r.index])}function bI(r,n){return r.data[n]}function Cx(r,n){const i=n[r];return fx(i)?i:i[0]}function EN(r){return 4==(4&r[2])}function wI(r){return 128==(128&r[2])}function eA(r,n){return null==n?null:r[n]}function xI(r){r[18]=0}function xE(r,n){r[5]+=n;let i=r,h=r[3];for(;null!==h&&(1===n&&1===i[5]||-1===n&&0===i[5]);)h[5]+=n,i=h,h=h[3]}const C0={lFrame:MS(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function TS(){return C0.bindingsEnabled}function Ky(){return C0.lFrame.lView}function g_(){return C0.lFrame.tView}function _1(){let r=TI();for(;null!==r&&64===r.type;)r=r.parent;return r}function TI(){return C0.lFrame.currentTNode}function s0(r,n){const i=C0.lFrame;i.currentTNode=r,i.isParent=n}function nA(){return C0.lFrame.isParent}function FC(){return C0.isInCheckNoChangesMode}function jC(r){C0.isInCheckNoChangesMode=r}function r_(){return C0.lFrame.bindingIndex++}function qy(r,n){const i=C0.lFrame;i.bindingIndex=i.bindingRootIndex=r,R0(n)}function R0(r){C0.lFrame.currentDirectiveIndex=r}function VC(){return C0.lFrame.currentQueryIndex}function II(r){C0.lFrame.currentQueryIndex=r}function HL(r){const n=r[1];return 2===n.type?n.declTNode:1===n.type?r[6]:null}function BC(r,n,i){if(i&M0.SkipSelf){let m=n,I=r;for(;!(m=m.parent,null!==m||i&M0.Host||(m=HL(I),null===m||(I=I[15],10&m.type))););if(null===m)return!1;n=m,r=I}const h=C0.lFrame=CN();return h.currentTNode=n,h.lView=r,!0}function qA(r){const n=CN(),i=r[1];C0.lFrame=n,n.currentTNode=i.firstChild,n.lView=r,n.tView=i,n.contextLView=r,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function CN(){const r=C0.lFrame,n=null===r?null:r.child;return null===n?MS(r):n}function MS(r){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=n),n}function _b(){const r=C0.lFrame;return C0.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const TN=_b;function IS(){const r=_b();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function tx(){return C0.lFrame.selectedIndex}function w2(r){C0.lFrame.selectedIndex=r}function d1(){const r=C0.lFrame;return bI(r.tView,r.selectedIndex)}function kS(r,n){for(let i=n.directiveStart,h=n.directiveEnd;i<h;i++){const I=r.data[i].type.prototype,{ngAfterContentInit:z,ngAfterContentChecked:X,ngAfterViewInit:_r,ngAfterViewChecked:ga,ngOnDestroy:_h}=I;z&&(r.contentHooks||(r.contentHooks=[])).push(-i,z),X&&((r.contentHooks||(r.contentHooks=[])).push(i,X),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(i,X)),_r&&(r.viewHooks||(r.viewHooks=[])).push(-i,_r),ga&&((r.viewHooks||(r.viewHooks=[])).push(i,ga),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(i,ga)),null!=_h&&(r.destroyHooks||(r.destroyHooks=[])).push(i,_h)}}function OS(r,n,i){MN(r,n,3,i)}function RS(r,n,i,h){(3&r[2])===i&&MN(r,n,i,h)}function OI(r,n){let i=r[2];(3&i)===n&&(i&=2047,i+=1,r[2]=i)}function MN(r,n,i,h){const I=null!=h?h:-1,z=n.length-1;let X=0;for(let _r=void 0!==h?65535&r[18]:0;_r<z;_r++)if("number"==typeof n[_r+1]){if(X=n[_r],null!=h&&X>=h)break}else n[_r]<0&&(r[18]+=65536),(X<I||-1==I)&&(GL(r,i,n,_r),r[18]=(4294901760&r[18])+_r+2),_r++}function GL(r,n,i,h){const m=i[h]<0,I=i[h+1],X=r[m?-i[h]:i[h]];if(m){if(r[2]>>11<r[18]>>16&&(3&r[2])===n){r[2]+=2048;try{I.call(X)}finally{}}}else try{I.call(X)}finally{}}class XT{constructor(n,i,h){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=h}}function FS(r,n,i){const h=S_(r);let m=0;for(;m<i.length;){const I=i[m];if("number"==typeof I){if(0!==I)break;m++;const z=i[m++],X=i[m++],_r=i[m++];h?r.setAttribute(n,X,_r,z):n.setAttributeNS(z,X,_r)}else{const z=I,X=i[++m];QT(z)?h&&r.setProperty(n,z,X):h?r.setAttribute(n,z,X):n.setAttribute(z,X),m++}}return m}function RI(r){return 3===r||4===r||6===r}function QT(r){return 64===r.charCodeAt(0)}function HC(r,n){if(null!==n&&0!==n.length)if(null===r||0===r.length)r=n.slice();else{let i=-1;for(let h=0;h<n.length;h++){const m=n[h];"number"==typeof m?i=m:0===i||WA(r,i,m,null,-1===i||2===i?n[++h]:null)}}return r}function WA(r,n,i,h,m){let I=0,z=r.length;if(-1===n)z=-1;else for(;I<r.length;){const X=r[I++];if("number"==typeof X){if(X===n){z=-1;break}if(X>n){z=I-1;break}}}for(;I<r.length;){const X=r[I];if("number"==typeof X)break;if(X===i){if(null===h)return void(null!==m&&(r[I+1]=m));if(h===r[I+1])return void(r[I+2]=m)}I++,null!==h&&I++,null!==m&&I++}-1!==z&&(r.splice(z,0,n),I=z+1),r.splice(I++,0,i),null!==h&&r.splice(I++,0,h),null!==m&&r.splice(I++,0,m)}function UC(r){return-1!==r}function YA(r){return 32767&r}function E2(r,n){let i=function(r){return r>>16}(r),h=n;for(;i>0;)h=h[15],i--;return h}let iA=!0;function GC(r){const n=iA;return iA=r,n}let IN=0;function tD(r,n){const i=a1(r,n);if(-1!==i)return i;const h=n[1];h.firstCreatePass&&(r.injectorIndex=n.length,ex(h.data,r),ex(n,null),ex(h.blueprint,null));const m=eD(r,n),I=r.injectorIndex;if(UC(m)){const z=YA(m),X=E2(m,n),_r=X[1].data;for(let ga=0;ga<8;ga++)n[I+ga]=X[z+ga]|_r[z+ga]}return n[I+8]=m,I}function ex(r,n){r.push(0,0,0,0,0,0,0,0,n)}function a1(r,n){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===n[r.injectorIndex+8]?-1:r.injectorIndex}function eD(r,n){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let i=0,h=null,m=n;for(;null!==m;){const I=m[1],z=I.type;if(h=2===z?I.declTNode:1===z?m[6]:null,null===h)return-1;if(i++,m=m[15],-1!==h.injectorIndex)return h.injectorIndex|i<<16}return-1}function qC(r,n,i){!function(r,n,i){let h;"string"==typeof i?h=i.charCodeAt(0)||0:i.hasOwnProperty(Ve)&&(h=i[Ve]),null==h&&(h=i[Ve]=IN++);const m=255&h;n.data[r+(m>>5)]|=1<<m}(r,n,i)}function nD(r,n,i){if(i&M0.Optional)return r;MC(n,"NodeInjector")}function VS(r,n,i,h){if(i&M0.Optional&&void 0===h&&(h=null),0==(i&(M0.Self|M0.Host))){const m=r[9],I=zx(void 0);try{return m?m.get(n,h,i&M0.Optional):kC(n,h,i&M0.Optional)}finally{zx(I)}}return nD(h,n,i)}function GE(r,n,i,h=M0.Default,m){if(null!==r){const I=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const n=r.hasOwnProperty(Ve)?r[Ve]:void 0;return"number"==typeof n?n>=0?255&n:oA:n}(i);if("function"==typeof I){if(!BC(n,r,h))return h&M0.Host?nD(m,i,h):VS(n,i,h,m);try{const z=I(h);if(null!=z||h&M0.Optional)return z;MC(i)}finally{TN()}}else if("number"==typeof I){let z=null,X=a1(r,n),_r=-1,ga=h&M0.Host?n[16][6]:null;for((-1===X||h&M0.SkipSelf)&&(_r=-1===X?eD(r,n):n[X+8],-1!==_r&&rD(h,!1)?(z=n[1],X=YA(_r),n=E2(_r,n)):X=-1);-1!==X;){const _h=n[1];if(px(I,X,_h.data)){const od=kN(X,n,i,z,h,ga);if(od!==PI)return od}_r=n[X+8],-1!==_r&&rD(h,n[1].data[X+8]===ga)&&px(I,X,n)?(z=_h,X=YA(_r),n=E2(_r,n)):X=-1}}}return VS(n,i,h,m)}const PI={};function oA(){return new qE(_1(),Ky())}function kN(r,n,i,h,m,I){const z=n[1],X=z.data[r+8],_h=q1(X,z,i,null==h?BE(X)&&iA:h!=z&&0!=(3&X.type),m&M0.Host&&I===X);return null!==_h?uE(n,z,_h,X):PI}function q1(r,n,i,h,m){const I=r.providerIndexes,z=n.data,X=1048575&I,_r=r.directiveStart,_h=I>>20,ey=m?X+_h:r.directiveEnd;for(let ay=h?X:X+_h;ay<ey;ay++){const vy=z[ay];if(ay<_r&&i===vy||ay>=_r&&vy.type===i)return ay}if(m){const ay=z[_r];if(ay&&Ux(ay)&&ay.type===i)return _r}return null}function uE(r,n,i,h){let m=r[i];const I=n.data;if(function(r){return r instanceof XT}(m)){const z=m;z.resolving&&function(r,n){throw new vE("200",`Circular dependency in DI detected for ${r}`)}(P1(I[i]));const X=GC(z.canSeeViewProviders);z.resolving=!0;const _r=z.injectImpl?zx(z.injectImpl):null;BC(r,h,M0.Default);try{m=r[i]=z.factory(void 0,I,r,h),n.firstCreatePass&&i>=h.directiveStart&&function(r,n,i){const{ngOnChanges:h,ngOnInit:m,ngDoCheck:I}=n.type.prototype;if(h){const z=RC(n);(i.preOrderHooks||(i.preOrderHooks=[])).push(r,z),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(r,z)}m&&(i.preOrderHooks||(i.preOrderHooks=[])).push(0-r,m),I&&((i.preOrderHooks||(i.preOrderHooks=[])).push(r,I),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(r,I))}(i,I[i],n)}finally{null!==_r&&zx(_r),GC(X),z.resolving=!1,TN()}}return m}function px(r,n,i){return!!(i[n+(r>>5)]&1<<r)}function rD(r,n){return!(r&M0.Self||r&M0.Host&&n)}class qE{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,h){return GE(this._tNode,this._lView,n,h,i)}}function dx(r){return sE(()=>{const n=r.prototype.constructor,i=n[J]||BS(n),h=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==h;){const I=m[J]||BS(m);if(I&&I!==i)return I;m=Object.getPrototypeOf(m)}return I=>new I})}function BS(r){return LT(r)?()=>{const n=BS(v0(r));return n&&n()}:tA(r)}const KA="__parameters__";function ZA(r,n,i){return sE(()=>{const h=function(r){return function(...i){if(r){const h=r(...i);for(const m in h)this[m]=h[m]}}}(n);function m(...I){if(this instanceof m)return h.apply(this,I),this;const z=new m(...I);return X.annotation=z,X;function X(_r,ga,_h){const od=_r.hasOwnProperty(KA)?_r[KA]:Object.defineProperty(_r,KA,{value:[]})[KA];for(;od.length<=_h;)od.push(null);return(od[_h]=od[_h]||[]).push(z),_r}}return i&&(m.prototype=Object.create(i.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}class p_{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=K0({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}toString(){return`InjectionToken ${this._desc}`}}const RN=new p_("AnalyzeForEntryComponents"),oD=Function;function Tx(r,n){void 0===n&&(n=r);for(let i=0;i<r.length;i++){let h=r[i];Array.isArray(h)?(n===r&&(n=r.slice(0,i)),Tx(h,n)):n!==r&&n.push(h)}return n}function CE(r,n){r.forEach(i=>Array.isArray(i)?CE(i,n):n(i))}function sD(r,n,i){n>=r.length?r.push(i):r.splice(n,0,i)}function Xb(r,n){return n>=r.length-1?r.pop():r.splice(n,1)[0]}function Dx(r,n,i){let h=uA(r,n);return h>=0?r[1|h]=i:(h=~h,function(r,n,i,h){let m=r.length;if(m==n)r.push(i,h);else if(1===m)r.push(h,r[0]),r[0]=i;else{for(m--,r.push(r[m-1],r[m]);m>n;)r[m]=r[m-2],m--;r[n]=i,r[n+1]=h}}(r,h,n,i)),h}function aD(r,n){const i=uA(r,n);if(i>=0)return r[1|i]}function uA(r,n){return function(r,n,i){let h=0,m=r.length>>i;for(;m!==h;){const I=h+(m-h>>1),z=r[I<<i];if(n===z)return I<<i;z>n?m=I:h=I+1}return~(m<<i)}(r,n,1)}const WC={},qI="__NG_DI_FLAG__",YC="ngTempTokenPath",US=/\n/gm,WI="__source",YI=E_({provide:String,useValue:E_});let lA;function Wx(r){const n=lA;return lA=r,n}function _m(r,n=M0.Default){if(void 0===lA)throw new Error("inject() must be called from an injection context");return null===lA?kC(r,void 0,n):lA.get(r,n&M0.Optional?null:void 0,n)}function l0(r,n=M0.Default){return(HT||_m)(v0(r),n)}function C2(r){const n=[];for(let i=0;i<r.length;i++){const h=v0(r[i]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let m,I=M0.Default;for(let z=0;z<h.length;z++){const X=h[z],_r=WE(X);"number"==typeof _r?-1===_r?m=X.token:I|=_r:m=X}n.push(l0(m,I))}else n.push(l0(h))}return n}function JA(r,n){return r[qI]=n,r.prototype[qI]=n,r}function WE(r){return r[qI]}function KI(r,n,i,h){const m=r[YC];throw n[WI]&&m.unshift(n[WI]),r.message=function(r,n,i,h=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let m=e_(n);if(Array.isArray(n))m=n.map(e_).join(" -> ");else if("object"==typeof n){let I=[];for(let z in n)if(n.hasOwnProperty(z)){let X=n[z];I.push(z+":"+("string"==typeof X?JSON.stringify(X):e_(X)))}m=`{${I.join(", ")}}`}return`${i}${h?"("+h+")":""}[${m}]: ${r.replace(US,"\n  ")}`}("\n"+r.message,m,i,h),r.ngTokenPath=m,r[YC]=null,r}const tC=JA(ZA("Inject",r=>({token:r})),-1),gx=JA(ZA("Optional"),8),cA=JA(ZA("SkipSelf"),4);class TE{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function yx(r){return r instanceof TE?r.changingThisBreaksApplicationSecurity:r}function DE(r,n){const i=function(r){return r instanceof TE&&r.getTypeName()||null}(r);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see https://g.co/ng/security#xss)`)}return i===n}const JN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tP=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var G_=(()=>((G_=G_||{})[G_.NONE=0]="NONE",G_[G_.HTML=1]="HTML",G_[G_.STYLE=2]="STYLE",G_[G_.SCRIPT=3]="SCRIPT",G_[G_.URL=4]="URL",G_[G_.RESOURCE_URL=5]="RESOURCE_URL",G_))();function tM(r){const n=function(){const r=Ky();return r&&r[12]}();return n?n.sanitize(G_.URL,r)||"":DE(r,"URL")?yx(r):function(r){return(r=String(r)).match(JN)||r.match(tP)?r:"unsafe:"+r}(G0(r))}const D2="__ngContext__";function Sw(r,n){r[D2]=n}function d0(r){const n=function(r){return r[D2]||null}(r);return n?Array.isArray(n)?n:n.lView:null}function fA(r){return r.ngOriginalError}function mO(r,...n){r.error(...n)}class KE{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n),h=this._findContext(n),m=function(r){return r&&r.ngErrorLogger||mO}(n);m(this._console,"ERROR",n),i&&m(this._console,"ORIGINAL ERROR",i),h&&m(this._console,"ERROR CONTEXT",h)}_findContext(n){return n?function(r){return r.ngDebugContext}(n)||this._findContext(fA(n)):null}_findOriginalError(n){let i=n&&fA(n);for(;i&&fA(i);)i=fA(i);return i||null}}const bO=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(n_))();function Ix(r){return r instanceof Function?r():r}var kx=(()=>((kx=kx||{})[kx.Important=1]="Important",kx[kx.DashCase=2]="DashCase",kx))();function _D(r,n){return undefined(r,n)}function ME(r){const n=r[3];return J1(n)?n[3]:n}function bD(r){return hP(r[13])}function aM(r){return hP(r[4])}function hP(r){for(;null!==r&&!J1(r);)r=r[4];return r}function Ow(r,n,i,h,m){if(null!=h){let I,z=!1;J1(h)?I=h:fx(h)&&(z=!0,h=h[0]);const X=p1(h);0===r&&null!==i?null==m?gP(n,i,X):iC(n,i,X,m||null,!0):1===r&&null!==i?iC(n,i,X,m||null,!0):2===r?function(r,n,i){const h=V1(r,n);h&&function(r,n,i,h){S_(r)?r.removeChild(n,i,h):n.removeChild(i)}(r,h,n,i)}(n,X,z):3===r&&n.destroyNode(X),null!=I&&function(r,n,i,h,m){const I=i[7];I!==p1(i)&&Ow(n,r,h,I,m);for(let X=10;X<i.length;X++){const _r=i[X];CD(_r[1],_r,r,n,h,I)}}(n,r,I,i,m)}}function Ox(r,n,i){return S_(r)?r.createElement(n,i):null===i?r.createElement(n):r.createElementNS(i,n)}function fP(r,n){const i=r[9],h=i.indexOf(n),m=n[3];1024&n[2]&&(n[2]&=-1025,xE(m,-1)),i.splice(h,1)}function CO(r,n){if(r.length<=10)return;const i=10+n,h=r[i];if(h){const m=h[17];null!==m&&m!==r&&fP(m,h),n>0&&(r[i-1][4]=h[4]);const I=Xb(r,10+n);!function(r,n){CD(r,n,n[11],2,null,null),n[0]=null,n[6]=null}(h[1],h);const z=I[19];null!==z&&z.detachView(I[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function TO(r,n){if(!(256&n[2])){const i=n[11];S_(i)&&i.destroyNode&&CD(r,n,i,3,null,null),function(r){let n=r[13];if(!n)return DO(r[1],r);for(;n;){let i=null;if(fx(n))i=n[13];else{const h=n[10];h&&(i=h)}if(!i){for(;n&&!n[4]&&n!==r;)fx(n)&&DO(n[1],n),n=n[3];null===n&&(n=r),fx(n)&&DO(n[1],n),i=n&&n[4]}n=i}}(n)}}function DO(r,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(r,n){let i;if(null!=r&&null!=(i=r.destroyHooks))for(let h=0;h<i.length;h+=2){const m=n[i[h]];if(!(m instanceof XT)){const I=i[h+1];if(Array.isArray(I))for(let z=0;z<I.length;z+=2){const X=m[I[z]],_r=I[z+1];try{_r.call(X)}finally{}}else try{I.call(m)}finally{}}}}(r,n),function(r,n){const i=r.cleanup,h=n[7];let m=-1;if(null!==i)for(let I=0;I<i.length-1;I+=2)if("string"==typeof i[I]){const z=i[I+1],X="function"==typeof z?z(n):p1(n[z]),_r=h[m=i[I+2]],ga=i[I+3];"boolean"==typeof ga?X.removeEventListener(i[I],_r,ga):ga>=0?h[m=ga]():h[m=-ga].unsubscribe(),I+=2}else{const z=h[m=i[I+1]];i[I].call(z)}if(null!==h){for(let I=m+1;I<h.length;I++)h[I]();n[7]=null}}(r,n),1===n[1].type&&S_(n[11])&&n[11].destroy();const i=n[17];if(null!==i&&J1(n[3])){i!==n[3]&&fP(i,n);const h=n[19];null!==h&&h.detachView(r)}}}function pP(r,n,i){return function(r,n,i){let h=n;for(;null!==h&&40&h.type;)h=(n=h).parent;if(null===h)return i[0];if(2&h.flags){const m=r.data[h.directiveStart].encapsulation;if(m===j0.None||m===j0.Emulated)return null}return Gx(h,i)}(r,n.parent,i)}function iC(r,n,i,h,m){S_(r)?r.insertBefore(n,i,h,m):n.insertBefore(i,h,m)}function gP(r,n,i){S_(r)?r.appendChild(n,i):n.appendChild(i)}function oC(r,n,i,h,m){null!==h?iC(r,n,i,h,m):gP(r,n,i)}function V1(r,n){return S_(r)?r.parentNode(n):n.parentNode}let xD=function(r,n,i){return 40&r.type?Gx(r,i):null};function hM(r,n,i,h){const m=pP(r,h,n),I=n[11],X=function(r,n,i){return xD(r,n,i)}(h.parent||n[6],h,n);if(null!=m)if(Array.isArray(i))for(let _r=0;_r<i.length;_r++)oC(I,m,i[_r],X,!1);else oC(I,m,i,X,!1)}function ED(r,n){if(null!==n){const i=n.type;if(3&i)return Gx(n,r);if(4&i)return IO(-1,r[n.index]);if(8&i){const h=n.child;if(null!==h)return ED(r,h);{const m=r[n.index];return J1(m)?IO(-1,m):p1(m)}}if(32&i)return _D(n,r)()||p1(r[n.index]);{const h=bx(r,n);return null!==h?Array.isArray(h)?h[0]:ED(ME(r[16]),h):ED(r,n.next)}}return null}function bx(r,n){return null!==n?r[16][6].projection[n.projection]:null}function IO(r,n){const i=10+r+1;if(i<n.length){const h=n[i],m=h[1].firstChild;if(null!==m)return ED(h,m)}return n[7]}function AD(r,n,i,h,m,I,z){for(;null!=i;){const X=h[i.index],_r=i.type;if(z&&0===n&&(X&&Sw(p1(X),h),i.flags|=4),64!=(64&i.flags))if(8&_r)AD(r,n,i.child,h,m,I,!1),Ow(n,r,m,X,I);else if(32&_r){const ga=_D(i,h);let _h;for(;_h=ga();)Ow(n,r,m,_h,I);Ow(n,r,m,X,I)}else 16&_r?vP(r,n,h,i,m,I):Ow(n,r,m,X,I);i=z?i.projectionNext:i.next}}function CD(r,n,i,h,m,I){AD(i,h,r.firstChild,n,m,I,!1)}function vP(r,n,i,h,m,I){const z=i[16],_r=z[6].projection[h.projection];if(Array.isArray(_r))for(let ga=0;ga<_r.length;ga++)Ow(n,r,m,_r[ga],I);else AD(r,n,_r,z[3],m,I,!0)}function OO(r,n,i){S_(r)?r.setAttribute(n,"style",i):n.style.cssText=i}function RO(r,n,i){S_(r)?""===i?r.removeAttribute(n,"class"):r.setAttribute(n,"class",i):n.className=i}function NO(r,n,i){let h=r.length;for(;;){const m=r.indexOf(n,i);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const I=n.length;if(m+I===h||r.charCodeAt(m+I)<=32)return m}i=m+1}}const _P="ng-template";function M4(r,n,i){let h=0;for(;h<r.length;){let m=r[h++];if(i&&"class"===m){if(m=r[h],-1!==NO(m.toLowerCase(),n,0))return!0}else if(1===m){for(;h<r.length&&"string"==typeof(m=r[h++]);)if(m.toLowerCase()===n)return!0;return!1}}return!1}function PO(r){return 4===r.type&&r.value!==_P}function I4(r,n,i){return n===(4!==r.type||i?r.value:_P)}function k4(r,n,i){let h=4;const m=r.attrs||[],I=function(r){for(let n=0;n<r.length;n++)if(RI(r[n]))return n;return r.length}(m);let z=!1;for(let X=0;X<n.length;X++){const _r=n[X];if("number"!=typeof _r){if(!z)if(4&h){if(h=2|1&h,""!==_r&&!I4(r,_r,i)||""===_r&&1===n.length){if(B1(h))return!1;z=!0}}else{const ga=8&h?_r:n[++X];if(8&h&&null!==r.attrs){if(!M4(r.attrs,ga,i)){if(B1(h))return!1;z=!0}continue}const od=O4(8&h?"class":_r,m,PO(r),i);if(-1===od){if(B1(h))return!1;z=!0;continue}if(""!==ga){let ey;ey=od>I?"":m[od+1].toLowerCase();const ay=8&h?ey:null;if(ay&&-1!==NO(ay,ga,0)||2&h&&ga!==ey){if(B1(h))return!1;z=!0}}}}else{if(!z&&!B1(h)&&!B1(_r))return!1;if(z&&B1(_r))continue;z=!1,h=_r|1&h}}return B1(h)||z}function B1(r){return 0==(1&r)}function O4(r,n,i,h){if(null===n)return-1;let m=0;if(h||!i){let I=!1;for(;m<n.length;){const z=n[m];if(z===r)return m;if(3===z||6===z)I=!0;else{if(1===z||2===z){let X=n[++m];for(;"string"==typeof X;)X=n[++m];continue}if(4===z)break;if(0===z){m+=4;continue}}m+=I?1:2}return-1}return function(r,n){let i=r.indexOf(4);if(i>-1)for(i++;i<r.length;){const h=r[i];if("number"==typeof h)return-1;if(h===n)return i;i++}return-1}(n,r)}function LO(r,n,i=!1){for(let h=0;h<n.length;h++)if(k4(r,n[h],i))return!0;return!1}function FO(r,n){return r?":not("+n.trim()+")":n}function AP(r){let n=r[0],i=1,h=2,m="",I=!1;for(;i<r.length;){let z=r[i];if("string"==typeof z)if(2&h){const X=r[++i];m+="["+z+(X.length>0?'="'+X+'"':"")+"]"}else 8&h?m+="."+z:4&h&&(m+=" "+z);else""!==m&&!B1(z)&&(n+=FO(I,m),m=""),h=z,I=I||!B1(h);i++}return""!==m&&(n+=FO(I,m)),n}const $0={};function Rx(r){jO(g_(),Ky(),tx()+r,FC())}function jO(r,n,i,h){if(!h)if(3==(3&n[2])){const I=r.preOrderCheckHooks;null!==I&&OS(n,I,i)}else{const I=r.preOrderHooks;null!==I&&RS(n,I,0,i)}w2(i)}function fM(r,n){return r<<17|n<<2}function IE(r){return r>>17&32767}function pM(r){return 2|r}function kE(r){return(131068&r)>>2}function dM(r,n){return-131069&r|n<<2}function zO(r){return 1|r}function DD(r,n){const i=r.contentQueries;if(null!==i)for(let h=0;h<i.length;h+=2){const m=i[h],I=i[h+1];if(-1!==I){const z=r.data[I];II(m),z.contentQueries(2,n[I],I)}}}function SD(r,n,i,h,m,I,z,X,_r,ga){const _h=n.blueprint.slice();return _h[0]=m,_h[2]=140|h,xI(_h),_h[3]=_h[15]=r,_h[8]=i,_h[10]=z||r&&r[10],_h[11]=X||r&&r[11],_h[12]=_r||r&&r[12]||null,_h[9]=ga||r&&r[9]||null,_h[6]=I,_h[16]=2==n.type?r[16]:_h,_h}function lT(r,n,i,h,m){let I=r.data[n];if(null===I)I=function(r,n,i,h,m){const I=TI(),z=nA(),_r=r.data[n]=function(r,n,i,h,m,I){return{type:i,index:h,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:I,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,z?I:I&&I.parent,i,n,h,m);return null===r.firstChild&&(r.firstChild=_r),null!==I&&(z?null==I.child&&null!==_r.parent&&(I.child=_r):null===I.next&&(I.next=_r)),_r}(r,n,i,h,m),C0.lFrame.inI18n&&(I.flags|=64);else if(64&I.type){I.type=i,I.value=h,I.attrs=m;const z=function(){const r=C0.lFrame,n=r.currentTNode;return r.isParent?n:n.parent}();I.injectorIndex=null===z?-1:z.injectorIndex}return s0(I,!0),I}function cT(r,n,i,h){if(0===i)return-1;const m=n.length;for(let I=0;I<i;I++)n.push(h),r.blueprint.push(h),r.data.push(null);return m}function MD(r,n,i){qA(n);try{const h=r.viewQuery;null!==h&&FD(1,h,i);const m=r.template;null!==m&&PP(r,n,m,1,i),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&DD(r,n),r.staticViewQueries&&FD(2,r.viewQuery,i);const I=r.components;null!==I&&function(r,n){for(let i=0;i<n.length;i++)qP(r,n[i])}(n,I)}catch(h){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),h}finally{n[2]&=-5,IS()}}function hT(r,n,i,h){const m=n[2];if(256==(256&m))return;qA(n);const I=FC();try{xI(n),function(r){C0.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==i&&PP(r,n,i,2,h);const z=3==(3&m);if(!I)if(z){const ga=r.preOrderCheckHooks;null!==ga&&OS(n,ga,null)}else{const ga=r.preOrderHooks;null!==ga&&RS(n,ga,0,null),OI(n,0)}if(function(r){for(let n=bD(r);null!==n;n=aM(n)){if(!n[2])continue;const i=n[9];for(let h=0;h<i.length;h++){const m=i[h],I=m[3];0==(1024&m[2])&&xE(I,1),m[2]|=1024}}}(n),function(r){for(let n=bD(r);null!==n;n=aM(n))for(let i=10;i<n.length;i++){const h=n[i],m=h[1];wI(h)&&hT(m,h,m.template,h[8])}}(n),null!==r.contentQueries&&DD(r,n),!I)if(z){const ga=r.contentCheckHooks;null!==ga&&OS(n,ga)}else{const ga=r.contentHooks;null!==ga&&RS(n,ga,1),OI(n,1)}!function(r,n){const i=r.hostBindingOpCodes;if(null!==i)try{for(let h=0;h<i.length;h++){const m=i[h];if(m<0)w2(~m);else{const I=m,z=i[++h],X=i[++h];qy(z,I),X(2,n[I])}}}finally{w2(-1)}}(r,n);const X=r.components;null!==X&&function(r,n){for(let i=0;i<n.length;i++)AM(r,n[i])}(n,X);const _r=r.viewQuery;if(null!==_r&&FD(2,_r,h),!I)if(z){const ga=r.viewCheckHooks;null!==ga&&OS(n,ga)}else{const ga=r.viewHooks;null!==ga&&RS(n,ga,2),OI(n,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),I||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,xE(n[3],-1))}finally{IS()}}function fT(r,n,i,h){const m=n[10],I=!FC(),z=EN(n);try{I&&!z&&m.begin&&m.begin(),z&&MD(r,n,h),hT(r,n,i,h)}finally{I&&!z&&m.end&&m.end()}}function PP(r,n,i,h,m){const I=tx(),z=2&h;try{w2(-1),z&&n.length>20&&jO(r,n,20,FC()),i(h,m)}finally{w2(I)}}function ID(r,n,i){!TS()||(function(r,n,i,h){const m=i.directiveStart,I=i.directiveEnd;r.firstCreatePass||tD(i,n),Sw(h,n);const z=i.initialInputs;for(let X=m;X<I;X++){const _r=r.data[X],ga=Ux(_r);ga&&k1(n,i,_r);const _h=uE(n,r,X,i);Sw(_h,n),null!==z&&Y4(0,X-m,_h,_r,0,z),ga&&(Cx(i.index,n)[8]=_h)}}(r,n,i,Gx(i,n)),128==(128&i.flags)&&function(r,n,i){const h=i.directiveStart,m=i.directiveEnd,z=i.index,X=C0.lFrame.currentDirectiveIndex;try{w2(z);for(let _r=h;_r<m;_r++){const ga=r.data[_r],_h=n[_r];R0(_r),(null!==ga.hostBindings||0!==ga.hostVars||null!==ga.hostAttrs)&&B0(ga,_h)}}finally{w2(-1),R0(X)}}(r,n,i))}function XO(r,n,i=Gx){const h=n.localNames;if(null!==h){let m=n.index+1;for(let I=0;I<h.length;I+=2){const z=h[I+1],X=-1===z?i(n,r):r[z];r[m++]=X}}}function kD(r){const n=r.tView;return null===n||n.incompleteFirstPass?r.tView=XE(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):n}function XE(r,n,i,h,m,I,z,X,_r,ga){const _h=20+h,od=_h+m,ey=function(r,n){const i=[];for(let h=0;h<n;h++)i.push(h<r?null:$0);return i}(_h,od),ay="function"==typeof ga?ga():ga;return ey[1]={type:r,blueprint:ey,template:i,queries:null,viewQuery:X,declTNode:n,data:ey.slice().fill(null,_h),bindingStartIndex:_h,expandoStartIndex:od,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof I?I():I,pipeRegistry:"function"==typeof z?z():z,firstChild:null,schemas:_r,consts:ay,incompleteFirstPass:!1}}function bM(r,n,i,h){const m=YP(n);null===i?m.push(h):(m.push(i),r.firstCreatePass&&$P(r).push(h,m.length-1))}function JO(r,n,i){for(let h in r)if(r.hasOwnProperty(h)){const m=r[h];(i=null===i?{}:i).hasOwnProperty(h)?i[h].push(n,m):i[h]=[n,m]}return i}function Yx(r,n,i,h,m,I,z,X){const _r=Gx(n,i);let _h,ga=n.inputs;!X&&null!=ga&&(_h=ga[h])?(XP(r,i,_h,h,m),BE(n)&&function(r,n){const i=Cx(n,r);16&i[2]||(i[2]|=64)}(i,n.index)):3&n.type&&(h=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(h),m=null!=z?z(m,n.value||"",h):m,S_(I)?I.setProperty(_r,h,m):QT(h)||(_r.setProperty?_r.setProperty(h,m):_r[h]=m))}function wM(r,n,i,h){let m=!1;if(TS()){const I=function(r,n,i){const h=r.directiveRegistry;let m=null;if(h)for(let I=0;I<h.length;I++){const z=h[I];LO(i,z.selectors,!1)&&(m||(m=[]),qC(tD(i,n),r,z.type),Ux(z)?(eR(r,i),m.unshift(z)):m.push(z))}return m}(r,n,i),z=null===h?null:{"":-1};if(null!==I){m=!0,uC(i,r.data.length,I.length);for(let _h=0;_h<I.length;_h++){const od=I[_h];od.providersResolver&&od.providersResolver(od)}let X=!1,_r=!1,ga=cT(r,n,I.length,null);for(let _h=0;_h<I.length;_h++){const od=I[_h];i.mergedAttrs=HC(i.mergedAttrs,od.hostAttrs),EM(r,i,n,ga,od),zP(ga,od,z),null!==od.contentQueries&&(i.flags|=8),(null!==od.hostBindings||null!==od.hostAttrs||0!==od.hostVars)&&(i.flags|=128);const ey=od.type.prototype;!X&&(ey.ngOnChanges||ey.ngOnInit||ey.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(i.index),X=!0),!_r&&(ey.ngOnChanges||ey.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(i.index),_r=!0),ga++}!function(r,n){const h=n.directiveEnd,m=r.data,I=n.attrs,z=[];let X=null,_r=null;for(let ga=n.directiveStart;ga<h;ga++){const _h=m[ga],od=_h.inputs,ey=null===I||PO(n)?null:HP(od,I);z.push(ey),X=JO(od,ga,X),_r=JO(_h.outputs,ga,_r)}null!==X&&(X.hasOwnProperty("class")&&(n.flags|=16),X.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=z,n.inputs=X,n.outputs=_r}(r,i)}z&&function(r,n,i){if(n){const h=r.localNames=[];for(let m=0;m<n.length;m+=2){const I=i[n[m+1]];if(null==I)throw new vE("301",`Export of name '${n[m+1]}' not found!`);h.push(n[m],I)}}}(i,h,z)}return i.mergedAttrs=HC(i.mergedAttrs,i.attrs),m}function tR(r,n,i,h,m,I){const z=I.hostBindings;if(z){let X=r.hostBindingOpCodes;null===X&&(X=r.hostBindingOpCodes=[]);const _r=~n.index;(function(r){let n=r.length;for(;n>0;){const i=r[--n];if("number"==typeof i&&i<0)return i}return 0})(X)!=_r&&X.push(_r),X.push(h,m,z)}}function B0(r,n){null!==r.hostBindings&&r.hostBindings(1,n)}function eR(r,n){n.flags|=2,(r.components||(r.components=[])).push(n.index)}function zP(r,n,i){if(i){if(n.exportAs)for(let h=0;h<n.exportAs.length;h++)i[n.exportAs[h]]=r;Ux(n)&&(i[""]=r)}}function uC(r,n,i){r.flags|=1,r.directiveStart=n,r.directiveEnd=n+i,r.providerIndexes=n}function EM(r,n,i,h,m){r.data[h]=m;const I=m.factory||(m.factory=tA(m.type)),z=new XT(I,Ux(m),null);r.blueprint[h]=z,i[h]=z,tR(r,n,0,h,cT(r,i,m.hostVars,$0),m)}function k1(r,n,i){const h=Gx(n,r),m=kD(i),I=r[10],z=QE(r,SD(r,m,null,i.onPush?64:16,h,n,I,I.createRenderer(h,i),null,null));r[n.index]=z}function $x(r,n,i,h,m,I){const z=Gx(r,n);!function(r,n,i,h,m,I,z){if(null==I)S_(r)?r.removeAttribute(n,m,i):n.removeAttribute(m);else{const X=null==z?G0(I):z(I,h||"",m);S_(r)?r.setAttribute(n,m,X,i):i?n.setAttributeNS(i,m,X):n.setAttribute(m,X)}}(n[11],z,I,r.value,i,h,m)}function Y4(r,n,i,h,m,I){const z=I[n];if(null!==z){const X=h.setInput;for(let _r=0;_r<z.length;){const ga=z[_r++],_h=z[_r++],od=z[_r++];null!==X?h.setInput(i,od,ga,_h):i[_h]=od}}}function HP(r,n){let i=null,h=0;for(;h<n.length;){const m=n[h];if(0!==m)if(5!==m){if("number"==typeof m)break;r.hasOwnProperty(m)&&(null===i&&(i=[]),i.push(m,r[m],n[h+1])),h+=2}else h+=2;else h+=4}return i}function nR(r,n,i,h){return new Array(r,!0,!1,n,null,0,h,i,null,null)}function AM(r,n){const i=Cx(n,r);if(wI(i)){const h=i[1];80&i[2]?hT(h,i,h.template,i[8]):i[5]>0&&CM(i)}}function CM(r){for(let h=bD(r);null!==h;h=aM(h))for(let m=10;m<h.length;m++){const I=h[m];if(1024&I[2]){const z=I[1];hT(z,I,z.template,I[8])}else I[5]>0&&CM(I)}const i=r[1].components;if(null!==i)for(let h=0;h<i.length;h++){const m=Cx(i[h],r);wI(m)&&m[5]>0&&CM(m)}}function qP(r,n){const i=Cx(n,r),h=i[1];(function(r,n){for(let i=n.length;i<r.blueprint.length;i++)n.push(r.blueprint[i])})(h,i),MD(h,i,i[8])}function QE(r,n){return r[13]?r[14][4]=n:r[13]=n,r[14]=n,n}function rR(r){for(;r;){r[2]|=64;const n=ME(r);if(qT(r)&&!n)return r;r=n}return null}function LD(r,n,i){const h=n[10];h.begin&&h.begin();try{hT(r,n,r.template,i)}catch(m){throw ZP(n,m),m}finally{h.end&&h.end()}}function WP(r){!function(r){for(let n=0;n<r.components.length;n++){const i=r.components[n],h=d0(i),m=h[1];fT(m,h,m.template,i)}}(r[8])}function FD(r,n,i){II(0),n(r,i)}const X4=(()=>Promise.resolve(null))();function YP(r){return r[7]||(r[7]=[])}function $P(r){return r.cleanup||(r.cleanup=[])}function ZP(r,n){const i=r[9],h=i?i.get(KE,null):null;h&&h.handleError(n)}function XP(r,n,i,h,m){for(let I=0;I<i.length;){const z=i[I++],X=i[I++],_r=n[z],ga=r.data[z];null!==ga.setInput?ga.setInput(_r,m,h,X):_r[X]=m}}function k2(r,n,i){const h=b2(n,r);!function(r,n,i){S_(r)?r.setValue(n,i):n.textContent=i}(r[11],h,i)}function TM(r,n,i){let h=i?r.styles:null,m=i?r.classes:null,I=0;if(null!==n)for(let z=0;z<n.length;z++){const X=n[z];"number"==typeof X?I=X:1==I?m=PT(m,X):2==I&&(h=PT(h,X+": "+n[++z]+";"))}i?r.styles=h:r.stylesWithoutHost=h,i?r.classes=m:r.classesWithoutHost=m}const gT=new p_("INJECTOR",-1);class DM{get(n,i=WC){if(i===WC){const h=new Error(`NullInjectorError: No provider for ${e_(n)}!`);throw h.name="NullInjectorError",h}return i}}const jD=new p_("Set Injector scope."),VD={},QP={};let BD;function zD(){return void 0===BD&&(BD=new DM),BD}function sR(r,n=null,i=null,h){return new JP(r,i,n||zD(),h)}class JP{constructor(n,i,h,m=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const I=[];i&&CE(i,X=>this.processProvider(X,n,i)),CE([n],X=>this.processInjectorType(X,[],I)),this.records.set(gT,cC(void 0,this));const z=this.records.get(jD);this.scope=null!=z?z.value:null,this.source=m||("object"==typeof n?null:e_(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,i=WC,h=M0.Default){this.assertNotDestroyed();const m=Wx(this),I=zx(void 0);try{if(!(h&M0.SkipSelf)){let X=this.records.get(n);if(void 0===X){const _r=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof p_}(n)&&X1(n);X=_r&&this.injectableDefInScope(_r)?cC(SM(n),VD):null,this.records.set(n,X)}if(null!=X)return this.hydrate(n,X)}return(h&M0.Self?zD():this.parent).get(n,i=h&M0.Optional&&i===WC?null:i)}catch(z){if("NullInjectorError"===z.name){if((z[YC]=z[YC]||[]).unshift(e_(n)),m)throw z;return KI(z,n,"R3InjectorError",this.source)}throw z}finally{zx(I),Wx(m)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((h,m)=>n.push(e_(m))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,i,h){if(!(n=v0(n)))return!1;let m=LA(n);const I=null==m&&n.ngModule||void 0,z=void 0===I?n:I,X=-1!==h.indexOf(z);if(void 0!==I&&(m=LA(I)),null==m)return!1;if(null!=m.imports&&!X){let _h;h.push(z);try{CE(m.imports,od=>{this.processInjectorType(od,i,h)&&(void 0===_h&&(_h=[]),_h.push(od))})}finally{}if(void 0!==_h)for(let od=0;od<_h.length;od++){const{ngModule:ey,providers:ay}=_h[od];CE(ay,vy=>this.processProvider(vy,ey,ay||P_))}}this.injectorDefTypes.add(z);const _r=tA(z)||(()=>new z);this.records.set(z,cC(_r,VD));const ga=m.providers;if(null!=ga&&!X){const _h=n;CE(ga,od=>this.processProvider(od,_h,ga))}return void 0!==I&&void 0!==n.providers}processProvider(n,i,h){let m=vA(n=v0(n))?n:v0(n&&n.provide);const I=function(r,n,i){return HD(r)?cC(void 0,r.useValue):cC(aR(r),VD)}(n);if(vA(n)||!0!==n.multi)this.records.get(m);else{let z=this.records.get(m);z||(z=cC(void 0,VD,!0),z.factory=()=>C2(z.multi),this.records.set(m,z)),m=n,z.multi.push(n)}this.records.set(m,I)}hydrate(n,i){return i.value===VD&&(i.value=QP,i.value=i.factory()),"object"==typeof i.value&&i.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(i.value)&&this.onDestroy.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=v0(n.providedIn);return"string"==typeof i?"any"===i||i===this.scope:this.injectorDefTypes.has(i)}}function SM(r){const n=X1(r),i=null!==n?n.factory:tA(r);if(null!==i)return i;if(r instanceof p_)throw new Error(`Token ${e_(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const n=r.length;if(n>0){const h=function(r,n){const i=[];for(let h=0;h<r;h++)i.push(n);return i}(n,"?");throw new Error(`Can't resolve all parameters for ${e_(r)}: (${h.join(", ")}).`)}const i=function(r){const n=r&&(r[v1]||r[p2]);if(n){const i=function(r){if(r.hasOwnProperty("name"))return r.name;const n=(""+r).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${i}" class.`),n}return null}(r);return null!==i?()=>i.factory(r):()=>new r}(r);throw new Error("unreachable")}function aR(r,n,i){let h;if(vA(r)){const m=v0(r);return tA(m)||SM(m)}if(HD(r))h=()=>v0(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))h=()=>r.useFactory(...C2(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))h=()=>l0(v0(r.useExisting));else{const m=v0(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return tA(m)||SM(m);h=()=>new m(...C2(r.deps))}return h}function cC(r,n,i=!1){return{factory:r,value:n,multi:i?[]:void 0}}function HD(r){return null!==r&&"object"==typeof r&&YI in r}function vA(r){return"function"==typeof r}const UD=function(r,n,i){return function(r,n=null,i=null,h){const m=sR(r,n,i,h);return m._resolveInjectorDefTypes(),m}({name:i},n,r,i)};let j_=(()=>{class r{static create(i,h){return Array.isArray(i)?UD(i,h,""):UD(i.providers,i.parent,i.name||"")}}return r.THROW_IF_NOT_FOUND=WC,r.NULL=new DM,r.\u0275prov=K0({token:r,providedIn:"any",factory:()=>l0(gT)}),r.__NG_ELEMENT_ID__=-1,r})();function _f(r,n){kS(d0(r)[1],_1())}function ty(r){let n=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),i=!0;const h=[r];for(;n;){let m;if(Ux(r))m=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");m=n.\u0275dir}if(m){if(i){h.push(m);const z=r;z.inputs=uy(r.inputs),z.declaredInputs=uy(r.declaredInputs),z.outputs=uy(r.outputs);const X=m.hostBindings;X&&cy(r,X);const _r=m.viewQuery,ga=m.contentQueries;if(_r&&ry(r,_r),ga&&ly(r,ga),NT(r.inputs,m.inputs),NT(r.declaredInputs,m.declaredInputs),NT(r.outputs,m.outputs),Ux(m)&&m.data.animation){const _h=r.data;_h.animation=(_h.animation||[]).concat(m.data.animation)}}const I=m.features;if(I)for(let z=0;z<I.length;z++){const X=I[z];X&&X.ngInherit&&X(r),X===ty&&(i=!1)}}n=Object.getPrototypeOf(n)}!function(r){let n=0,i=null;for(let h=r.length-1;h>=0;h--){const m=r[h];m.hostVars=n+=m.hostVars,m.hostAttrs=HC(m.hostAttrs,i=HC(i,m.hostAttrs))}}(h)}function uy(r){return r===d2?{}:r===P_?[]:r}function ry(r,n){const i=r.viewQuery;r.viewQuery=i?(h,m)=>{n(h,m),i(h,m)}:n}function ly(r,n){const i=r.contentQueries;r.contentQueries=i?(h,m,I)=>{n(h,m,I),i(h,m,I)}:n}function cy(r,n){const i=r.hostBindings;r.hostBindings=i?(h,m)=>{n(h,m),i(h,m)}:n}let Sy=null;function Vy(){if(!Sy){const r=n_.Symbol;if(r&&r.iterator)Sy=r.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<n.length;++i){const h=n[i];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Sy=h)}}}return Sy}function Wy(r){return!!F0(r)&&(Array.isArray(r)||!(r instanceof Map)&&Vy()in r)}function F0(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function J0(r,n,i){return!Object.is(r[n],i)&&(r[n]=i,!0)}function x1(r,n,i,h){const m=Ky();return J0(m,r_(),n)&&(g_(),$x(d1(),m,r,n,i,h)),x1}function i1(r,n,i,h){return J0(r,r_(),i)?n+G0(i)+h:$0}function P2(r,n,i,h,m,I,z,X){const _r=Ky(),ga=g_(),_h=r+20,od=ga.firstCreatePass?function(r,n,i,h,m,I,z,X,_r){const ga=n.consts,_h=lT(n,r,4,z||null,eA(ga,X));wM(n,i,_h,eA(ga,_r)),kS(n,_h);const od=_h.tViews=XE(2,_h,h,m,I,n.directiveRegistry,n.pipeRegistry,null,n.schemas,ga);return null!==n.queries&&(n.queries.template(n,_h),od.queries=n.queries.embeddedTView(_h)),_h}(_h,ga,_r,n,i,h,m,I,z):ga.data[_h];s0(od,!1);const ey=_r[11].createComment("");hM(ga,_r,ey,od),Sw(ey,_r),QE(_r,_r[_h]=nR(ey,_r,ey,od)),HA(od)&&ID(ga,_r,od),null!=z&&XO(_r,od,X)}function jy(r,n=M0.Default){const i=Ky();return null===i?l0(r,n):GE(_1(),i,v0(r),n)}function M_(r,n,i){const h=Ky();return J0(h,r_(),n)&&Yx(g_(),d1(),h,r,n,h[11],i,!1),M_}function R_(r,n,i,h,m){const z=m?"class":"style";XP(r,i,n.inputs[z],z,h)}function X0(r,n,i,h){const m=Ky(),I=g_(),z=20+r,X=m[11],_r=m[z]=Ox(X,n,C0.lFrame.currentNamespace),ga=I.firstCreatePass?function(r,n,i,h,m,I,z){const X=n.consts,ga=lT(n,r,2,m,eA(X,I));return wM(n,i,ga,eA(X,z)),null!==ga.attrs&&TM(ga,ga.attrs,!1),null!==ga.mergedAttrs&&TM(ga,ga.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,ga),ga}(z,I,m,0,n,i,h):I.data[z];s0(ga,!0);const _h=ga.mergedAttrs;null!==_h&&FS(X,_r,_h);const od=ga.classes;null!==od&&RO(X,_r,od);const ey=ga.styles;null!==ey&&OO(X,_r,ey),64!=(64&ga.flags)&&hM(I,m,_r,ga),0===C0.lFrame.elementDepthCount&&Sw(_r,m),C0.lFrame.elementDepthCount++,HA(ga)&&(ID(I,m,ga),function(r,n,i){if(Hx(n)){const m=n.directiveEnd;for(let I=n.directiveStart;I<m;I++){const z=r.data[I];z.contentQueries&&z.contentQueries(1,i[I],I)}}}(I,ga,m)),null!==h&&XO(m,ga)}function P0(){let r=_1();nA()?C0.lFrame.isParent=!1:(r=r.parent,s0(r,!1));const n=r;C0.lFrame.elementDepthCount--;const i=g_();i.firstCreatePass&&(kS(i,r),Hx(r)&&i.queries.elementEnd(r)),null!=n.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(n)&&R_(i,n,Ky(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(n)&&R_(i,n,Ky(),n.stylesWithoutHost,!1)}function h1(r,n,i,h){X0(r,n,i,h),P0()}function bR(r){return!!r&&"function"==typeof r.then}const f3=function(r){return!!r&&"function"==typeof r.subscribe};function Qx(r,n,i,h){const m=Ky(),I=g_(),z=_1();return function(r,n,i,h,m,I,z,X){const _r=HA(h),_h=r.firstCreatePass&&$P(r),od=n[8],ey=YP(n);let ay=!0;if(3&h.type||X){const xy=Gx(h,n),Zy=X?X(xy):xy,Py=ey.length,f0=X?D0=>X(p1(D0[h.index])):h.index;if(S_(i)){let D0=null;if(!X&&_r&&(D0=function(r,n,i,h){const m=r.cleanup;if(null!=m)for(let I=0;I<m.length-1;I+=2){const z=m[I];if(z===i&&m[I+1]===h){const X=n[7],_r=m[I+2];return X.length>_r?X[_r]:null}"string"==typeof z&&(I+=2)}return null}(r,n,m,h.index)),null!==D0)(D0.__ngLastListenerFn__||D0).__ngNextListenerFn__=I,D0.__ngLastListenerFn__=I,ay=!1;else{I=mF(h,n,od,I,!1);const f_=i.listen(Zy,m,I);ey.push(I,f_),_h&&_h.push(m,f0,Py,Py+1)}}else I=mF(h,n,od,I,!0),Zy.addEventListener(m,I,z),ey.push(I),_h&&_h.push(m,f0,Py,z)}else I=mF(h,n,od,I,!1);const vy=h.outputs;let Iy;if(ay&&null!==vy&&(Iy=vy[m])){const xy=Iy.length;if(xy)for(let Zy=0;Zy<xy;Zy+=2){const Yw=n[Iy[Zy]][Iy[Zy+1]].subscribe(I),u2=ey.length;ey.push(I,Yw),_h&&_h.push(m,h.index,u2,-(u2+1))}}}(I,m,m[11],z,r,n,!!i,h),Qx}function D8(r,n,i,h){try{return!1!==i(h)}catch(m){return ZP(r,m),!1}}function mF(r,n,i,h,m){return function I(z){if(z===Function)return h;const X=2&r.flags?Cx(r.index,n):n;0==(32&n[2])&&rR(X);let _r=D8(n,0,h,z),ga=I.__ngNextListenerFn__;for(;ga;)_r=D8(n,0,ga,z)&&_r,ga=ga.__ngNextListenerFn__;return m&&!1===_r&&(z.preventDefault(),z.returnValue=!1),_r}}function vF(r,n,i){return _F(r,"",n,"",i),vF}function _F(r,n,i,h,m){const I=Ky(),z=i1(I,n,i,h);return z!==$0&&Yx(g_(),d1(),I,r,z,I[11],m,!1),_F}function L8(r,n,i,h,m){const I=r[i+1],z=null===n;let X=h?IE(I):kE(I),_r=!1;for(;0!==X&&(!1===_r||z);){const _h=r[X+1];VU(r[X],n)&&(_r=!0,r[X+1]=h?zO(_h):pM(_h)),X=h?IE(_h):kE(_h)}_r&&(r[i+1]=h?pM(I):zO(I))}function VU(r,n){return null===r||null==n||(Array.isArray(r)?r[1]:r)===n||!(!Array.isArray(r)||"string"!=typeof n)&&uA(r,n)>=0}function p3(r,n){return function(r,n,i,h){const m=Ky(),I=g_(),z=function(r){const n=C0.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+r,i}(2);I.firstUpdatePass&&function(r,n,i,h){const m=r.data;if(null===m[i+1]){const I=m[tx()],z=function(r,n){return n>=r.expandoStartIndex}(r,i);(function(r,n){return 0!=(r.flags&(n?16:32))})(I,h)&&null===n&&!z&&(n=!1),n=function(r,n,i,h){const m=function(r){const n=C0.lFrame.currentDirectiveIndex;return-1===n?null:r[n]}(r);let I=h?n.residualClasses:n.residualStyles;if(null===m)0===(h?n.classBindings:n.styleBindings)&&(i=wR(i=bF(null,r,n,i,h),n.attrs,h),I=null);else{const z=n.directiveStylingLast;if(-1===z||r[z]!==m)if(i=bF(m,r,n,i,h),null===I){let _r=function(r,n,i){const h=i?n.classBindings:n.styleBindings;if(0!==kE(h))return r[IE(h)]}(r,n,h);void 0!==_r&&Array.isArray(_r)&&(_r=bF(null,r,n,_r[1],h),_r=wR(_r,n.attrs,h),function(r,n,i,h){r[IE(i?n.classBindings:n.styleBindings)]=h}(r,n,h,_r))}else I=function(r,n,i){let h;const m=n.directiveEnd;for(let I=1+n.directiveStylingLast;I<m;I++)h=wR(h,r[I].hostAttrs,i);return wR(h,n.attrs,i)}(r,n,h)}return void 0!==I&&(h?n.residualClasses=I:n.residualStyles=I),i}(m,I,n,h),function(r,n,i,h,m,I){let z=I?n.classBindings:n.styleBindings,X=IE(z),_r=kE(z);r[h]=i;let _h,ga=!1;if(Array.isArray(i)){const od=i;_h=od[1],(null===_h||uA(od,_h)>0)&&(ga=!0)}else _h=i;if(m)if(0!==_r){const ey=IE(r[X+1]);r[h+1]=fM(ey,X),0!==ey&&(r[ey+1]=dM(r[ey+1],h)),r[X+1]=function(r,n){return 131071&r|n<<17}(r[X+1],h)}else r[h+1]=fM(X,0),0!==X&&(r[X+1]=dM(r[X+1],h)),X=h;else r[h+1]=fM(_r,0),0===X?X=h:r[_r+1]=dM(r[_r+1],h),_r=h;ga&&(r[h+1]=pM(r[h+1])),L8(r,_h,h,!0),L8(r,_h,h,!1),function(r,n,i,h,m){const I=m?r.residualClasses:r.residualStyles;null!=I&&"string"==typeof n&&uA(I,n)>=0&&(i[h+1]=zO(i[h+1]))}(n,_h,r,h,I),z=fM(X,_r),I?n.classBindings=z:n.styleBindings=z}(m,I,n,i,z,h)}}(I,r,z,h),n!==$0&&J0(m,z,n)&&function(r,n,i,h,m,I,z,X){if(!(3&n.type))return;const _r=r.data,ga=_r[X+1];d3(function(r){return 1==(1&r)}(ga)?$8(_r,n,i,m,kE(ga),z):void 0)||(d3(I)||function(r){return 2==(2&r)}(ga)&&(I=$8(_r,null,i,m,X,z)),function(r,n,i,h,m){const I=S_(r);if(n)m?I?r.addClass(i,h):i.classList.add(h):I?r.removeClass(i,h):i.classList.remove(h);else{let z=-1===h.indexOf("-")?void 0:kx.DashCase;if(null==m)I?r.removeStyle(i,h,z):i.style.removeProperty(h);else{const X="string"==typeof m&&m.endsWith("!important");X&&(m=m.slice(0,-10),z|=kx.Important),I?r.setStyle(i,h,m,z):i.style.setProperty(h,m,X?"important":"")}}}(h,z,b2(tx(),i),m,I))}(I,I.data[tx()],m,m[11],r,m[z+1]=function(r,n){return null==r||("string"==typeof n?r+=n:"object"==typeof r&&(r=e_(yx(r)))),r}(n,i),h,z)}(r,n,null,!0),p3}function bF(r,n,i,h,m){let I=null;const z=i.directiveEnd;let X=i.directiveStylingLast;for(-1===X?X=i.directiveStart:X++;X<z&&(I=n[X],h=wR(h,I.hostAttrs,m),I!==r);)X++;return null!==r&&(i.directiveStylingLast=X),h}function wR(r,n,i){const h=i?1:2;let m=-1;if(null!==n)for(let I=0;I<n.length;I++){const z=n[I];"number"==typeof z?m=z:m===h&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Dx(r,z,!!i||n[++I]))}return void 0===r?null:r}function $8(r,n,i,h,m,I){const z=null===n;let X;for(;m>0;){const _r=r[m],ga=Array.isArray(_r),_h=ga?_r[1]:_r,od=null===_h;let ey=i[m+1];ey===$0&&(ey=od?P_:void 0);let ay=od?aD(ey,h):_h===h?ey:void 0;if(ga&&!d3(ay)&&(ay=aD(_r,h)),d3(ay)&&(X=ay,z))return X;const vy=r[m+1];m=z?IE(vy):kE(vy)}if(null!==n){let _r=I?n.residualClasses:n.residualStyles;null!=_r&&(X=aD(_r,h))}return X}function d3(r){return void 0!==r}function fE(r,n=""){const i=Ky(),h=g_(),m=r+20,I=h.firstCreatePass?lT(h,m,1,n,null):h.data[m],z=i[m]=function(r,n){return S_(r)?r.createText(n):r.createTextNode(n)}(i[11],n);hM(h,i,z,I),s0(I,!1)}function g3(r){return y3("",r,""),g3}function y3(r,n,i){const h=Ky(),m=i1(h,r,n,i);return m!==$0&&k2(h,tx(),m),y3}function wF(r,n,i){const h=Ky();return J0(h,r_(),n)&&Yx(g_(),d1(),h,r,n,h[11],i,!0),wF}const $D=void 0;var b9=["en",[["a","p"],["AM","PM"],$D],[["AM","PM"],$D,$D],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$D,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$D,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$D,"{1} 'at' {0}",$D],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const n=Math.floor(Math.abs(r)),i=r.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let LM={};function gV(r){return r in LM||(LM[r]=n_.ng&&n_.ng.common&&n_.ng.common.locales&&n_.ng.common.locales[r]),LM[r]}var c0=(()=>((c0=c0||{})[c0.LocaleId=0]="LocaleId",c0[c0.DayPeriodsFormat=1]="DayPeriodsFormat",c0[c0.DayPeriodsStandalone=2]="DayPeriodsStandalone",c0[c0.DaysFormat=3]="DaysFormat",c0[c0.DaysStandalone=4]="DaysStandalone",c0[c0.MonthsFormat=5]="MonthsFormat",c0[c0.MonthsStandalone=6]="MonthsStandalone",c0[c0.Eras=7]="Eras",c0[c0.FirstDayOfWeek=8]="FirstDayOfWeek",c0[c0.WeekendRange=9]="WeekendRange",c0[c0.DateFormat=10]="DateFormat",c0[c0.TimeFormat=11]="TimeFormat",c0[c0.DateTimeFormat=12]="DateTimeFormat",c0[c0.NumberSymbols=13]="NumberSymbols",c0[c0.NumberFormats=14]="NumberFormats",c0[c0.CurrencyCode=15]="CurrencyCode",c0[c0.CurrencySymbol=16]="CurrencySymbol",c0[c0.CurrencyName=17]="CurrencyName",c0[c0.Currencies=18]="Currencies",c0[c0.Directionality=19]="Directionality",c0[c0.PluralCase=20]="PluralCase",c0[c0.ExtraData=21]="ExtraData",c0))();const m3="en-US";let yV=m3;function xF(r){L1(r,"Expected localeId to be defined"),"string"==typeof r&&(yV=r.toLowerCase().replace(/_/g,"-"))}function CF(r,n,i,h,m){if(r=v0(r),Array.isArray(r))for(let I=0;I<r.length;I++)CF(r[I],n,i,h,m);else{const I=g_(),z=Ky();let X=vA(r)?r:v0(r.provide),_r=aR(r);const ga=_1(),_h=1048575&ga.providerIndexes,od=ga.directiveStart,ey=ga.providerIndexes>>20;if(vA(r)||!r.multi){const ay=new XT(_r,m,jy),vy=DF(X,n,m?_h:_h+ey,od);-1===vy?(qC(tD(ga,z),I,X),TF(I,r,n.length),n.push(X),ga.directiveStart++,ga.directiveEnd++,m&&(ga.providerIndexes+=1048576),i.push(ay),z.push(ay)):(i[vy]=ay,z[vy]=ay)}else{const ay=DF(X,n,_h+ey,od),vy=DF(X,n,_h,_h+ey),Iy=ay>=0&&i[ay],xy=vy>=0&&i[vy];if(m&&!xy||!m&&!Iy){qC(tD(ga,z),I,X);const Zy=function(r,n,i,h,m){const I=new XT(r,i,jy);return I.multi=[],I.index=n,I.componentProviders=0,BV(I,m,h&&!i),I}(m?mG:yG,i.length,m,h,_r);!m&&xy&&(i[vy].providerFactory=Zy),TF(I,r,n.length,0),n.push(X),ga.directiveStart++,ga.directiveEnd++,m&&(ga.providerIndexes+=1048576),i.push(Zy),z.push(Zy)}else TF(I,r,ay>-1?ay:vy,BV(i[m?vy:ay],_r,!m&&h));!m&&h&&xy&&i[vy].componentProviders++}}}function TF(r,n,i,h){const m=vA(n);if(m||function(r){return!!r.useClass}(n)){const z=(n.useClass||n).prototype.ngOnDestroy;if(z){const X=r.destroyHooks||(r.destroyHooks=[]);if(!m&&n.multi){const _r=X.indexOf(i);-1===_r?X.push(i,[h,z]):X[_r+1].push(h,z)}else X.push(i,z)}}}function BV(r,n,i){return i&&r.componentProviders++,r.multi.push(n)-1}function DF(r,n,i,h){for(let m=i;m<h;m++)if(n[m]===r)return m;return-1}function yG(r,n,i,h){return SF(this.multi,[])}function mG(r,n,i,h){const m=this.multi;let I;if(this.providerFactory){const z=this.providerFactory.componentProviders,X=uE(i,i[1],this.providerFactory.index,h);I=X.slice(0,z),SF(m,I);for(let _r=z;_r<X.length;_r++)I.push(X[_r])}else I=[],SF(m,I);return I}function SF(r,n){for(let i=0;i<r.length;i++)n.push((0,r[i])());return n}function y1(r,n=[]){return i=>{i.providersResolver=(h,m)=>function(r,n,i){const h=g_();if(h.firstCreatePass){const m=Ux(r);CF(i,h.data,h.blueprint,m,!0),CF(n,h.data,h.blueprint,m,!1)}}(h,m?m(r):r,n)}}class zV{}const UV="ngComponent";class bG{resolveComponentFactory(n){throw function(r){const n=Error(`No component factory found for ${e_(r)}. Did you add it to @NgModule.entryComponents?`);return n[UV]=r,n}(n)}}let KD=(()=>{class r{}return r.NULL=new bG,r})();function x3(...r){}function jM(r,n){return new ax(Gx(r,n))}const EG=function(){return jM(_1(),Ky())};let ax=(()=>{class r{constructor(i){this.nativeElement=i}}return r.__NG_ELEMENT_ID__=EG,r})();function GV(r){return r instanceof ax?r.nativeElement:r}class E3{}let yC=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>CG(),r})();const CG=function(){const r=Ky(),i=Cx(_1().index,r);return function(r){return r[11]}(fx(i)?i:r)};let IF=(()=>{class r{}return r.\u0275prov=K0({token:r,providedIn:"root",factory:()=>null}),r})();class TR{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const qV=new TR("12.2.16");class WV{constructor(){}supports(n){return Wy(n)}create(n){return new MG(n)}}const SG=(r,n)=>n;class MG{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||SG}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,h=this._removalsHead,m=0,I=null;for(;i||h;){const z=!h||i&&i.currentIndex<$V(h,m,I)?i:h,X=$V(z,m,I),_r=z.currentIndex;if(z===h)m--,h=h._nextRemoved;else if(i=i._next,null==z.previousIndex)m++;else{I||(I=[]);const ga=X-m,_h=_r-m;if(ga!=_h){for(let ey=0;ey<ga;ey++){const ay=ey<I.length?I[ey]:I[ey]=0,vy=ay+ey;_h<=vy&&vy<ga&&(I[ey]=ay+1)}I[z.previousIndex]=_h-ga}}X!==_r&&n(z,X,_r)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!Wy(n))throw new Error(`Error trying to diff '${e_(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let m,I,z,i=this._itHead,h=!1;if(Array.isArray(n)){this.length=n.length;for(let X=0;X<this.length;X++)I=n[X],z=this._trackByFn(X,I),null!==i&&Object.is(i.trackById,z)?(h&&(i=this._verifyReinsertion(i,I,z,X)),Object.is(i.item,I)||this._addIdentityChange(i,I)):(i=this._mismatch(i,I,z,X),h=!0),i=i._next}else m=0,function(r,n){if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i]);else{const i=r[Vy()]();let h;for(;!(h=i.next()).done;)n(h.value)}}(n,X=>{z=this._trackByFn(m,X),null!==i&&Object.is(i.trackById,z)?(h&&(i=this._verifyReinsertion(i,X,z,m)),Object.is(i.item,X)||this._addIdentityChange(i,X)):(i=this._mismatch(i,X,z,m),h=!0),i=i._next,m++}),this.length=m;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,h,m){let I;return null===n?I=this._itTail:(I=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,I,m)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(h,m))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,I,m)):n=this._addAfter(new IG(i,h),I,m),n}_verifyReinsertion(n,i,h,m){let I=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==I?n=this._reinsertAfter(I,n._prev,m):n.currentIndex!=m&&(n.currentIndex=m,this._addToMoves(n,m)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const m=n._prevRemoved,I=n._nextRemoved;return null===m?this._removalsHead=I:m._nextRemoved=I,null===I?this._removalsTail=m:I._prevRemoved=m,this._insertAfter(n,i,h),this._addToMoves(n,h),n}_moveAfter(n,i,h){return this._unlink(n),this._insertAfter(n,i,h),this._addToMoves(n,h),n}_addAfter(n,i,h){return this._insertAfter(n,i,h),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,h){const m=null===i?this._itHead:i._next;return n._next=m,n._prev=i,null===m?this._itTail=n:m._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new YV),this._linkedRecords.put(n),n.currentIndex=h,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,h=n._next;return null===i?this._itHead=h:i._next=h,null===h?this._itTail=i:h._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YV),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class IG{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kG{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===i||i<=h.currentIndex)&&Object.is(h.trackById,n))return h;return null}remove(n){const i=n._prevDup,h=n._nextDup;return null===i?this._head=h:i._nextDup=h,null===h?this._tail=i:h._prevDup=i,null===this._head}}class YV{constructor(){this.map=new Map}put(n){const i=n.trackById;let h=this.map.get(i);h||(h=new kG,this.map.set(i,h)),h.add(n)}get(n,i){const m=this.map.get(n);return m?m.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $V(r,n,i){const h=r.previousIndex;if(null===h)return h;let m=0;return i&&h<i.length&&(m=i[h]),h+n+m}class KV{constructor(){}supports(n){return n instanceof Map||F0(n)}create(){return new OG}}class OG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||F0(n)))throw new Error(`Error trying to diff '${e_(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(h,m)=>{if(i&&i.key===m)this._maybeAddToChanges(i,h),this._appendAfter=i,i=i._next;else{const I=this._getOrCreateRecordForKey(m,h);i=this._insertBeforeOrAppend(i,I)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let h=i;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const h=n._prev;return i._next=n,i._prev=h,n._prev=i,h&&(h._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const m=this._records.get(n);this._maybeAddToChanges(m,i);const I=m._prev,z=m._next;return I&&(I._next=z),z&&(z._prev=I),m._next=null,m._prev=null,m}const h=new RG(n);return this._records.set(n,h),h.currentValue=i,this._addToAdditions(h),h}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(h=>i(n[h],h))}}class RG{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ZV(){return new DR([new WV])}let DR=(()=>{class r{constructor(i){this.factories=i}static create(i,h){if(null!=h){const m=h.factories.slice();i=i.concat(m)}return new r(i)}static extend(i){return{provide:r,useFactory:h=>r.create(i,h||ZV()),deps:[[r,new cA,new gx]]}}find(i){const h=this.factories.find(m=>m.supports(i));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(r){return r.name||typeof r}(i)}'`)}}return r.\u0275prov=K0({token:r,providedIn:"root",factory:ZV}),r})();function XV(){return new VM([new KV])}let VM=(()=>{class r{constructor(i){this.factories=i}static create(i,h){if(h){const m=h.factories.slice();i=i.concat(m)}return new r(i)}static extend(i){return{provide:r,useFactory:h=>r.create(i,h||XV()),deps:[[r,new cA,new gx]]}}find(i){const h=this.factories.find(m=>m.supports(i));if(h)return h;throw new Error(`Cannot find a differ supporting object '${i}'`)}}return r.\u0275prov=K0({token:r,providedIn:"root",factory:XV}),r})();function A3(r,n,i,h,m=!1){for(;null!==i;){const I=n[i.index];if(null!==I&&h.push(p1(I)),J1(I))for(let X=10;X<I.length;X++){const _r=I[X],ga=_r[1].firstChild;null!==ga&&A3(_r[1],_r,ga,h)}const z=i.type;if(8&z)A3(r,n,i.child,h);else if(32&z){const X=_D(i,n);let _r;for(;_r=X();)h.push(_r)}else if(16&z){const X=bx(n,i);if(Array.isArray(X))h.push(...X);else{const _r=ME(n[16]);A3(_r[1],_r,X,h,!0)}}i=m?i.projectionNext:i.next}return h}class SR{constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,i=n[1];return A3(i,n,i.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(J1(n)){const i=n[8],h=i?i.indexOf(this):-1;h>-1&&(CO(n,h),Xb(i,h))}this._attachedToViewContainer=!1}TO(this._lView[1],this._lView)}onDestroy(n){bM(this._lView[1],this._lView,null,n)}markForCheck(){rR(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){LD(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,n,i){jC(!0);try{LD(r,n,i)}finally{jC(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,n){CD(r,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class PG extends SR{constructor(n){super(n),this._view=n}detectChanges(){WP(this._view)}checkNoChanges(){!function(r){jC(!0);try{WP(r)}finally{jC(!1)}}(this._view)}get context(){return null}}const FG=function(r){return function(r,n,i){if(BE(r)&&!i){const h=Cx(r.index,n);return new SR(h,h)}return 47&r.type?new SR(n[16],n):null}(_1(),Ky(),16==(16&r))};let kF=(()=>{class r{}return r.__NG_ELEMENT_ID__=FG,r})();const BG=[new KV],HG=new DR([new WV]),UG=new VM(BG),qG=function(){return C3(_1(),Ky())};let mC=(()=>{class r{}return r.__NG_ELEMENT_ID__=qG,r})();const WG=mC,YG=class extends WG{constructor(n,i,h){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=h}createEmbeddedView(n){const i=this._declarationTContainer.tViews,h=SD(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[19];return null!==I&&(h[19]=I.createEmbeddedView(i)),MD(i,h,n),new SR(h)}};function C3(r,n){return 4&r.type?new YG(n,r,jM(r,n)):null}class EA{}class QV{}const ZG=function(){return eB(_1(),Ky())};let j2=(()=>{class r{}return r.__NG_ELEMENT_ID__=ZG,r})();const QG=j2,JV=class extends QG{constructor(n,i,h){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=h}get element(){return jM(this._hostTNode,this._hostLView)}get injector(){return new qE(this._hostTNode,this._hostLView)}get parentInjector(){const n=eD(this._hostTNode,this._hostLView);if(UC(n)){const i=E2(n,this._hostLView),h=YA(n);return new qE(i[1].data[h+8],i)}return new qE(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=tB(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,i,h){const m=n.createEmbeddedView(i||{});return this.insert(m,h),m}createComponent(n,i,h,m,I){const z=h||this.parentInjector;if(!I&&null==n.ngModule&&z){const _r=z.get(EA,null);_r&&(I=_r)}const X=n.create(z,m,void 0,I);return this.insert(X.hostView,i),X}insert(n,i){const h=n._lView,m=h[1];if(function(r){return J1(r[3])}(h)){const _h=this.indexOf(n);if(-1!==_h)this.detach(_h);else{const od=h[3],ey=new JV(od,od[6],od[3]);ey.detach(ey.indexOf(n))}}const I=this._adjustIndex(i),z=this._lContainer;!function(r,n,i,h){const m=10+h,I=i.length;h>0&&(i[m-1][4]=n),h<I-10?(n[4]=i[m],sD(i,10+h,n)):(i.push(n),n[4]=null),n[3]=i;const z=n[17];null!==z&&i!==z&&function(r,n){const i=r[9];n[16]!==n[3][3][16]&&(r[2]=!0),null===i?r[9]=[n]:i.push(n)}(z,n);const X=n[19];null!==X&&X.insertView(r),n[2]|=128}(m,h,z,I);const X=IO(I,z),_r=h[11],ga=V1(_r,z[7]);return null!==ga&&function(r,n,i,h,m,I){h[0]=m,h[6]=n,CD(r,h,i,1,m,I)}(m,z[6],_r,h,ga,X),n.attachToViewContainerRef(),sD(OF(z),I,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=tB(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),h=CO(this._lContainer,i);h&&(Xb(OF(this._lContainer),i),TO(h[1],h))}detach(n){const i=this._adjustIndex(n,-1),h=CO(this._lContainer,i);return h&&null!=Xb(OF(this._lContainer),i)?new SR(h):null}_adjustIndex(n,i=0){return null==n?this.length+i:n}};function tB(r){return r[8]}function OF(r){return r[8]||(r[8]=[])}function eB(r,n){let i;const h=n[r.index];if(J1(h))i=h;else{let m;if(8&r.type)m=p1(h);else{const I=n[11];m=I.createComment("");const z=Gx(r,n);iC(I,V1(I,z),m,function(r,n){return S_(r)?r.nextSibling(n):n.nextSibling}(I,z),!1)}n[r.index]=i=nR(h,n,m,r),QE(n,i)}return new JV(i,r,n)}const UM={};class wB extends KD{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=t0(n);return new EB(i,this.ngModule)}}function xB(r){const n=[];for(let i in r)r.hasOwnProperty(i)&&n.push({propName:r[i],templateName:i});return n}const WW=new p_("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bO});class EB extends zV{constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function(r){return r.map(AP).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}get inputs(){return xB(this.componentDef.inputs)}get outputs(){return xB(this.componentDef.outputs)}create(n,i,h,m){const I=(m=m||this.ngModule)?function(r,n){return{get:(i,h,m)=>{const I=r.get(i,UM,m);return I!==UM||h===UM?I:n.get(i,h,m)}}}(n,m.injector):n,z=I.get(E3,l_),X=I.get(IF,null),_r=z.createRenderer(null,this.componentDef),ga=this.componentDef.selectors[0][0]||"div",_h=h?function(r,n,i){if(S_(r))return r.selectRootElement(n,i===j0.ShadowDom);let h="string"==typeof n?r.querySelector(n):n;return h.textContent="",h}(_r,h,this.componentDef.encapsulation):Ox(z.createRenderer(null,this.componentDef),ga,function(r){const n=r.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(ga)),od=this.componentDef.onPush?576:528,ey=function(r,n){return{components:[],scheduler:r||bO,clean:X4,playerHandler:n||null,flags:0}}(),ay=XE(0,null,null,1,0,null,null,null,null,null),vy=SD(null,ay,ey,od,null,null,z,_r,X,I);let Iy,xy;qA(vy);try{const Zy=function(r,n,i,h,m,I){const z=i[1];i[20]=r;const _r=lT(z,20,2,"#host",null),ga=_r.mergedAttrs=n.hostAttrs;null!==ga&&(TM(_r,ga,!0),null!==r&&(FS(m,r,ga),null!==_r.classes&&RO(m,r,_r.classes),null!==_r.styles&&OO(m,r,_r.styles)));const _h=h.createRenderer(r,n),od=SD(i,kD(n),null,n.onPush?64:16,i[20],_r,h,_h,I||null,null);return z.firstCreatePass&&(qC(tD(_r,i),z,n.type),eR(z,_r),uC(_r,i.length,1)),QE(i,od),i[20]=od}(_h,this.componentDef,vy,z,_r);if(_h)if(h)FS(_r,_h,["ng-version",qV.full]);else{const{attrs:Py,classes:f0}=function(r){const n=[],i=[];let h=1,m=2;for(;h<r.length;){let I=r[h];if("string"==typeof I)2===m?""!==I&&n.push(I,r[++h]):8===m&&i.push(I);else{if(!B1(m))break;m=I}h++}return{attrs:n,classes:i}}(this.componentDef.selectors[0]);Py&&FS(_r,_h,Py),f0&&f0.length>0&&RO(_r,_h,f0.join(" "))}if(xy=bI(ay,20),void 0!==i){const Py=xy.projection=[];for(let f0=0;f0<this.ngContentSelectors.length;f0++){const D0=i[f0];Py.push(null!=D0?Array.from(D0):null)}}Iy=function(r,n,i,h,m){const I=i[1],z=function(r,n,i){const h=_1();r.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),EM(r,h,n,cT(r,n,1,null),i));const m=uE(n,r,h.directiveStart,h);Sw(m,n);const I=Gx(h,n);return I&&Sw(I,n),m}(I,i,n);if(h.components.push(z),r[8]=z,m&&m.forEach(_r=>_r(z,n)),n.contentQueries){const _r=_1();n.contentQueries(1,z,_r.directiveStart)}const X=_1();return!I.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(w2(X.index),tR(i[1],X,0,X.directiveStart,X.directiveEnd,n),B0(n,z)),z}(Zy,this.componentDef,vy,ey,[_f]),MD(ay,vy,null)}finally{IS()}return new KW(this.componentType,Iy,jM(xy,vy),vy,xy)}}class KW extends class{}{constructor(n,i,h,m,I){super(),this.location=h,this._rootLView=m,this._tNode=I,this.instance=i,this.hostView=this.changeDetectorRef=new PG(m),this.componentType=n}get injector(){return new qE(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const GM=new Map;class QW extends EA{constructor(n,i){super(),this._parent=i,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wB(this);const h=Uy(n),m=function(r){return r[_p]||null}(n);m&&xF(m),this._bootstrapComponents=Ix(h.bootstrap),this._r3Injector=sR(n,i,[{provide:EA,useValue:this},{provide:KD,useValue:this.componentFactoryResolver}],e_(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,i=j_.THROW_IF_NOT_FOUND,h=M0.Default){return n===j_||n===EA||n===gT?this:this._r3Injector.get(n,i,h)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class qF extends QV{constructor(n){super(),this.moduleType=n,null!==Uy(n)&&function(r){const n=new Set;!function i(h){const m=Uy(h,!0),I=m.id;null!==I&&(function(r,n,i){if(n&&n!==i)throw new Error(`Duplicate module registered for ${r} - ${e_(n)} vs ${e_(n.name)}`)}(I,GM.get(I),h),GM.set(I,h));const z=Ix(m.imports);for(const X of z)n.has(X)||(n.add(X),i(X))}(r)}(n)}create(n){return new QW(this.moduleType,n)}}function WF(r){return n=>{setTimeout(r,void 0,n)}}const Uw=class extends W_{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,h){var m,I,z;let X=n,_r=i||(()=>null),ga=h;if(n&&"object"==typeof n){const od=n;X=null===(m=od.next)||void 0===m?void 0:m.bind(od),_r=null===(I=od.error)||void 0===I?void 0:I.bind(od),ga=null===(z=od.complete)||void 0===z?void 0:z.bind(od)}this.__isAsync&&(_r=WF(_r),X&&(X=WF(X)),ga&&(ga=WF(ga)));const _h=super.subscribe({next:X,error:_r,complete:ga});return n instanceof oy&&n.add(_h),_h}};function mY(){return this._results[Vy()]()}class I3{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Vy(),h=I3.prototype;h[i]||(h[i]=mY)}get changes(){return this._changes||(this._changes=new Uw)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const h=this;h.dirty=!1;const m=Tx(n);(this._changesDetected=!function(r,n,i){if(r.length!==n.length)return!1;for(let h=0;h<r.length;h++){let m=r[h],I=n[h];if(i&&(m=i(m),I=i(I)),I!==m)return!1}return!0}(h._results,m,i))&&(h._results=m,h.length=m.length,h.last=m[this.length-1],h.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class YF{constructor(n){this.queryList=n,this.matches=null}clone(){return new YF(this.queryList)}setDirty(){this.queryList.setDirty()}}class $F{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const h=null!==n.contentQueries?n.contentQueries[0]:i.length,m=[];for(let I=0;I<h;I++){const z=i.getByIndex(I);m.push(this.queries[z.indexInDeclarationView].clone())}return new $F(m)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==LB(n,i).matches&&this.queries[i].setDirty()}}class kB{constructor(n,i,h=null){this.predicate=n,this.flags=i,this.read=h}}class KF{constructor(n=[]){this.queries=n}elementStart(n,i){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let h=0;h<this.length;h++){const m=null!==i?i.length:0,I=this.getByIndex(h).embeddedTView(n,m);I&&(I.indexInDeclarationView=h,null!==i?i.push(I):i=[I])}return null!==i?new KF(i):null}template(n,i){for(let h=0;h<this.queries.length;h++)this.queries[h].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class ZF{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new ZF(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let h=n.parent;for(;null!==h&&8&h.type&&h.index!==i;)h=h.parent;return i===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const h=this.metadata.predicate;if(Array.isArray(h))for(let m=0;m<h.length;m++){const I=h[m];this.matchTNodeWithReadOption(n,i,bY(i,I)),this.matchTNodeWithReadOption(n,i,q1(i,n,I,!1,!1))}else h===mC?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,q1(i,n,h,!1,!1))}matchTNodeWithReadOption(n,i,h){if(null!==h){const m=this.metadata.read;if(null!==m)if(m===ax||m===j2||m===mC&&4&i.type)this.addMatch(i.index,-2);else{const I=q1(i,n,m,!1,!1);null!==I&&this.addMatch(i.index,I)}else this.addMatch(i.index,h)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function bY(r,n){const i=r.localNames;if(null!==i)for(let h=0;h<i.length;h+=2)if(i[h]===n)return i[h+1];return null}function xY(r,n,i,h){return-1===i?function(r,n){return 11&r.type?jM(r,n):4&r.type?C3(r,n):null}(n,r):-2===i?function(r,n,i){return i===ax?jM(n,r):i===mC?C3(n,r):i===j2?eB(n,r):void 0}(r,n,h):uE(r,r[1],i,n)}function OB(r,n,i,h){const m=n[19].queries[h];if(null===m.matches){const I=r.data,z=i.matches,X=[];for(let _r=0;_r<z.length;_r+=2){const ga=z[_r];X.push(ga<0?null:xY(n,I[ga],z[_r+1],i.metadata.read))}m.matches=X}return m.matches}function XF(r,n,i,h){const m=r.queries.getByIndex(i),I=m.matches;if(null!==I){const z=OB(r,n,m,i);for(let X=0;X<I.length;X+=2){const _r=I[X];if(_r>0)h.push(z[X/2]);else{const ga=I[X+1],_h=n[-_r];for(let od=10;od<_h.length;od++){const ey=_h[od];ey[17]===ey[3]&&XF(ey[1],ey,ga,h)}if(null!==_h[9]){const od=_h[9];for(let ey=0;ey<od.length;ey++){const ay=od[ey];XF(ay[1],ay,ga,h)}}}}}return h}function k3(r){const n=Ky(),i=g_(),h=VC();II(h+1);const m=LB(i,h);if(r.dirty&&EN(n)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const I=m.crossesNgTemplate?XF(i,n,h,[]):OB(i,n,m,h);r.reset(I,GV),r.notifyOnChanges()}return!0}return!1}function RB(r,n,i){const h=g_();h.firstCreatePass&&(function(r,n,i){null===r.queries&&(r.queries=new KF),r.queries.track(new ZF(n,i))}(h,new kB(r,n,i),-1),2==(2&n)&&(h.staticViewQueries=!0)),function(r,n,i){const h=new I3(4==(4&i));bM(r,n,h,h.destroy),null===n[19]&&(n[19]=new $F),n[19].queries.push(new YF(h))}(h,Ky(),n)}function LB(r,n){return r.queries.getByIndex(n)}const WM=new p_("Application Initializer");let YM=(()=>{class r{constructor(i){this.appInits=i,this.resolve=x3,this.reject=x3,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,m)=>{this.resolve=h,this.reject=m})}runInitializers(){if(this.initialized)return;const i=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const I=this.appInits[m]();if(bR(I))i.push(I);else if(f3(I)){const z=new Promise((X,_r)=>{I.subscribe({complete:X,error:_r})});i.push(z)}}Promise.all(i).then(()=>{h()}).catch(m=>{this.reject(m)}),0===i.length&&h(),this.initialized=!0}}return r.\u0275fac=function(i){return new(i||r)(l0(WM,8))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const BR=new p_("AppId"),JY={provide:BR,useFactory:function(){return`${i5()}${i5()}${i5()}`},deps:[]};function i5(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tz=new p_("Platform Initializer"),o5=new p_("Platform ID"),ez=new p_("appBootstrapListener");let P3=(()=>{class r{log(i){console.log(i)}warn(i){console.warn(i)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const vT=new p_("LocaleId"),nz=new p_("DefaultCurrencyCode");class e${constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}const s5=function(r){return new qF(r)},n$=s5,r$=function(r){return Promise.resolve(s5(r))},rz=function(r){const n=s5(r),h=Ix(Uy(r).declarations).reduce((m,I)=>{const z=t0(I);return z&&m.push(new EB(z)),m},[]);return new e$(n,h)},i$=rz,o$=function(r){return Promise.resolve(rz(r))};let QD=(()=>{class r{constructor(){this.compileModuleSync=n$,this.compileModuleAsync=r$,this.compileModuleAndAllComponentsSync=i$,this.compileModuleAndAllComponentsAsync=o$}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const u$=(()=>Promise.resolve(0))();function a5(r){"undefined"==typeof Zone?u$.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Y1{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uw(!1),this.onMicrotaskEmpty=new Uw(!1),this.onStable=new Uw(!1),this.onError=new Uw(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!h&&i,m.shouldCoalesceRunChangeDetection=h,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function(){let r=n_.requestAnimationFrame,n=n_.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&n){const i=r[Zone.__symbol__("OriginalDelegate")];i&&(r=i);const h=n[Zone.__symbol__("OriginalDelegate")];h&&(n=h)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(r){const n=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(n_,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,l5(r),r.isCheckStableRunning=!0,u5(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),l5(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,h,m,I,z,X)=>{try{return iz(r),i.invokeTask(m,I,z,X)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===I.type||r.shouldCoalesceRunChangeDetection)&&n(),oz(r)}},onInvoke:(i,h,m,I,z,X,_r)=>{try{return iz(r),i.invoke(m,I,z,X,_r)}finally{r.shouldCoalesceRunChangeDetection&&n(),oz(r)}},onHasTask:(i,h,m,I)=>{i.hasTask(m,I),h===m&&("microTask"==I.change?(r._hasPendingMicrotasks=I.microTask,l5(r),u5(r)):"macroTask"==I.change&&(r.hasPendingMacrotasks=I.macroTask))},onHandleError:(i,h,m,I)=>(i.handleError(m,I),r.runOutsideAngular(()=>r.onError.emit(I)),!1)})}(m)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Y1.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Y1.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,i,h){return this._inner.run(n,i,h)}runTask(n,i,h,m){const I=this._inner,z=I.scheduleEventTask("NgZoneEvent: "+m,n,c$,x3,x3);try{return I.runTask(z,i,h)}finally{I.cancelTask(z)}}runGuarded(n,i,h){return this._inner.runGuarded(n,i,h)}runOutsideAngular(n){return this._outer.run(n)}}const c$={};function u5(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function l5(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function iz(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function oz(r){r._nesting--,u5(r)}class p${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uw,this.onMicrotaskEmpty=new Uw,this.onStable=new Uw,this.onError=new Uw}run(n,i,h){return n.apply(i,h)}runGuarded(n,i,h){return n.apply(i,h)}runOutsideAngular(n){return n()}runTask(n,i,h,m){return n.apply(i,h)}}let c5=(()=>{class r{constructor(i){this._ngZone=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Y1.assertNotInAngularZone(),a5(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())a5(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(i)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,h,m){let I=-1;h&&h>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(z=>z.timeoutId!==I),i(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:i,timeoutId:I,updateCb:m})}whenStable(i,h,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,h,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(i,h,m){return[]}}return r.\u0275fac=function(i){return new(i||r)(l0(Y1))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})(),sz=(()=>{class r{constructor(){this._applications=new Map,h5.addToWindow(this)}registerApplication(i,h){this._applications.set(i,h)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,h=!0){return h5.findTestabilityInTree(this,i,h)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();class d${addToWindow(n){}findTestabilityInTree(n,i,h){return null}}let h5=new d$,az=!0,uz=!1;let z2;const cz=new p_("AllowMultipleToken");class f5{constructor(n,i){this.name=n,this.token=i}}function hz(r,n,i=[]){const h=`Platform: ${n}`,m=new p_(h);return(I=[])=>{let z=fz();if(!z||z.injector.get(cz,!1))if(r)r(i.concat(I).concat({provide:m,useValue:!0}));else{const X=i.concat(I).concat({provide:m,useValue:!0},{provide:jD,useValue:"platform"});!function(r){if(z2&&!z2.destroyed&&!z2.injector.get(cz,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");z2=r.get(pz);const n=r.get(tz,null);n&&n.forEach(i=>i())}(j_.create({providers:X,name:h}))}return function(r){const n=fz();if(!n)throw new Error("No platform exists!");if(!n.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(m)}}function fz(){return z2&&!z2.destroyed?z2:null}let pz=(()=>{class r{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,h){const X=function(r,n){let i;return i="noop"===r?new p$:("zone.js"===r?void 0:r)||new Y1({enableLongStackTrace:(uz=!0,az),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),i}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),_r=[{provide:Y1,useValue:X}];return X.run(()=>{const ga=j_.create({providers:_r,parent:this.injector,name:i.moduleType.name}),_h=i.create(ga),od=_h.injector.get(KE,null);if(!od)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return X.runOutsideAngular(()=>{const ey=X.onError.subscribe({next:ay=>{od.handleError(ay)}});_h.onDestroy(()=>{p5(this._modules,_h),ey.unsubscribe()})}),function(r,n,i){try{const h=i();return bR(h)?h.catch(m=>{throw n.runOutsideAngular(()=>r.handleError(m)),m}):h}catch(h){throw n.runOutsideAngular(()=>r.handleError(h)),h}}(od,X,()=>{const ey=_h.injector.get(YM);return ey.runInitializers(),ey.donePromise.then(()=>(xF(_h.injector.get(vT,m3)||m3),this._moduleDoBootstrap(_h),_h))})})}bootstrapModule(i,h=[]){const m=dz({},h);return function(r,n,i){const h=new qF(i);return Promise.resolve(h)}(0,0,i).then(I=>this.bootstrapModuleFactory(I,m))}_moduleDoBootstrap(i){const h=i.injector.get($M);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(m=>h.bootstrap(m));else{if(!i.instance.ngDoBootstrap)throw new Error(`The module ${e_(i.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);i.instance.ngDoBootstrap(h)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(i){return new(i||r)(l0(j_))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function dz(r,n){return Array.isArray(n)?n.reduce(dz,r):Object.assign(Object.assign({},r),n)}let $M=(()=>{class r{constructor(i,h,m,I,z){this._zone=i,this._injector=h,this._exceptionHandler=m,this._componentFactoryResolver=I,this._initStatus=z,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const X=new S0(ga=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ga.next(this._stable),ga.complete()})}),_r=new S0(ga=>{let _h;this._zone.runOutsideAngular(()=>{_h=this._zone.onStable.subscribe(()=>{Y1.assertNotInAngularZone(),a5(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ga.next(!0))})})});const od=this._zone.onUnstable.subscribe(()=>{Y1.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ga.next(!1)}))});return()=>{_h.unsubscribe(),od.unsubscribe()}});this.isStable=function(...r){let n=Number.POSITIVE_INFINITY,i=null,h=r[r.length-1];return Y2(h)?(i=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(n=r.pop())):"number"==typeof h&&(n=r.pop()),null===i&&1===r.length&&r[0]instanceof S0?r[0]:yE(n)(mE(r,i))}(X,_r.pipe(r=>jE()(function(r,n){return function(h){let m;m="function"==typeof r?r:function(){return r};const I=Object.create(h,c2);return I.source=h,I.subjectFactory=m,I}}(RT)(r))))}bootstrap(i,h){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let m;m=i instanceof zV?i:this._componentFactoryResolver.resolveComponentFactory(i),this.componentTypes.push(m.componentType);const I=function(r){return r.isBoundToModule}(m)?void 0:this._injector.get(EA),X=m.create(j_.NULL,[],h||m.selector,I),_r=X.location.nativeElement,ga=X.injector.get(c5,null),_h=ga&&X.injector.get(sz);return ga&&_h&&_h.registerApplication(_r,ga),X.onDestroy(()=>{this.detachView(X.hostView),p5(this.components,X),_h&&_h.unregisterApplication(_r)}),this._loadComponent(X),X}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(i))}finally{this._runningTick=!1}}attachView(i){const h=i;this._views.push(h),h.attachToAppRef(this)}detachView(i){const h=i;p5(this._views,h),h.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(ez,[]).concat(this._bootstrapListeners).forEach(m=>m(i))}ngOnDestroy(){this._views.slice().forEach(i=>i.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(i){return new(i||r)(l0(Y1),l0(j_),l0(KE),l0(KD),l0(YM))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function p5(r,n){const i=r.indexOf(n);i>-1&&r.splice(i,1)}class F3{}class M${}const I$={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let k$=(()=>{class r{constructor(i,h){this._compiler=i,this._config=h||I$}load(i){return this.loadAndCompile(i)}loadAndCompile(i){let[h,m]=i.split("#");return void 0===m&&(m="default"),d(255)(h).then(I=>I[m]).then(I=>vz(I,h,m)).then(I=>this._compiler.compileModuleAsync(I))}loadFactory(i){let[h,m]=i.split("#"),I="NgFactory";return void 0===m&&(m="default",I=""),d(255)(this._config.factoryPathPrefix+h+this._config.factoryPathSuffix).then(z=>z[m+I]).then(z=>vz(z,h,m))}}return r.\u0275fac=function(i){return new(i||r)(l0(QD),l0(M$,8))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function vz(r,n,i){if(!r)throw new Error(`Cannot find '${i}' in '${n}'`);return r}const z$=hz(null,"core",[{provide:o5,useValue:"unknown"},{provide:pz,deps:[j_]},{provide:sz,deps:[]},{provide:P3,deps:[]}]),W$=[{provide:$M,useClass:$M,deps:[Y1,j_,KE,KD,YM]},{provide:WW,deps:[Y1],useFactory:function(r){let n=[];return r.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(i){n.push(i)}}},{provide:YM,useClass:YM,deps:[[new gx,WM]]},{provide:QD,useClass:QD,deps:[]},JY,{provide:DR,useFactory:function(){return HG},deps:[]},{provide:VM,useFactory:function(){return UG},deps:[]},{provide:vT,useFactory:function(r){return xF(r=r||"undefined"!=typeof $localize&&$localize.locale||m3),r},deps:[[new tC(vT),new gx,new cA]]},{provide:nz,useValue:"USD"}];let $$=(()=>{class r{constructor(i){}}return r.\u0275fac=function(i){return new(i||r)(l0($M))},r.\u0275mod=py({type:r}),r.\u0275inj=U1({providers:W$}),r})(),Y3=null;function AA(){return Y3}const xx=new p_("DocumentToken");let eS=(()=>{class r{historyGo(i){throw new Error("Not implemented")}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({factory:YK,token:r,providedIn:"platform"}),r})();function YK(){return l0(Hz)}const $K=new p_("Location Initialized");let Hz=(()=>{class r extends eS{constructor(i){super(),this._doc=i,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return AA().getBaseHref(this._doc)}onPopState(i){const h=AA().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",i,!1),()=>h.removeEventListener("popstate",i)}onHashChange(i){const h=AA().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",i,!1),()=>h.removeEventListener("hashchange",i)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(i){this.location.pathname=i}pushState(i,h,m){Uz()?this._history.pushState(i,h,m):this.location.hash=m}replaceState(i,h,m){Uz()?this._history.replaceState(i,h,m):this.location.hash=m}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return r.\u0275fac=function(i){return new(i||r)(l0(xx))},r.\u0275prov=K0({factory:KK,token:r,providedIn:"platform"}),r})();function Uz(){return!!window.history.pushState}function KK(){return new Hz(l0(xx))}function S5(r,n){if(0==r.length)return n;if(0==n.length)return r;let i=0;return r.endsWith("/")&&i++,n.startsWith("/")&&i++,2==i?r+n.substring(1):1==i?r+n:r+"/"+n}function Gz(r){const n=r.match(/#|\?|$/),i=n&&n.index||r.length;return r.slice(0,i-("/"===r[i-1]?1:0))+r.slice(i)}function _C(r){return r&&"?"!==r[0]?"?"+r:r}let XM=(()=>{class r{historyGo(i){throw new Error("Not implemented")}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({factory:ZK,token:r,providedIn:"root"}),r})();function ZK(r){const n=l0(xx).location;return new qz(l0(eS),n&&n.origin||"")}const M5=new p_("appBaseHref");let qz=(()=>{class r extends XM{constructor(i,h){if(super(),this._platformLocation=i,this._removeListenerFns=[],null==h&&(h=this._platformLocation.getBaseHrefFromDOM()),null==h)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=h}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return S5(this._baseHref,i)}path(i=!1){const h=this._platformLocation.pathname+_C(this._platformLocation.search),m=this._platformLocation.hash;return m&&i?`${h}${m}`:h}pushState(i,h,m,I){const z=this.prepareExternalUrl(m+_C(I));this._platformLocation.pushState(i,h,z)}replaceState(i,h,m,I){const z=this.prepareExternalUrl(m+_C(I));this._platformLocation.replaceState(i,h,z)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var h,m;null===(m=(h=this._platformLocation).historyGo)||void 0===m||m.call(h,i)}}return r.\u0275fac=function(i){return new(i||r)(l0(eS),l0(M5,8))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})(),XK=(()=>{class r extends XM{constructor(i,h){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(i){const h=S5(this._baseHref,i);return h.length>0?"#"+h:h}pushState(i,h,m,I){let z=this.prepareExternalUrl(m+_C(I));0==z.length&&(z=this._platformLocation.pathname),this._platformLocation.pushState(i,h,z)}replaceState(i,h,m,I){let z=this.prepareExternalUrl(m+_C(I));0==z.length&&(z=this._platformLocation.pathname),this._platformLocation.replaceState(i,h,z)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var h,m;null===(m=(h=this._platformLocation).historyGo)||void 0===m||m.call(h,i)}}return r.\u0275fac=function(i){return new(i||r)(l0(eS),l0(M5,8))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})(),qR=(()=>{class r{constructor(i,h){this._subject=new Uw,this._urlChangeListeners=[],this._platformStrategy=i;const m=this._platformStrategy.getBaseHref();this._platformLocation=h,this._baseHref=Gz(Wz(m)),this._platformStrategy.onPopState(I=>{this._subject.emit({url:this.path(!0),pop:!0,state:I.state,type:I.type})})}path(i=!1){return this.normalize(this._platformStrategy.path(i))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(i,h=""){return this.path()==this.normalize(i+_C(h))}normalize(i){return r.stripTrailingSlash(function(r,n){return r&&n.startsWith(r)?n.substring(r.length):n}(this._baseHref,Wz(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._platformStrategy.prepareExternalUrl(i)}go(i,h="",m=null){this._platformStrategy.pushState(m,"",i,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+_C(h)),m)}replaceState(i,h="",m=null){this._platformStrategy.replaceState(m,"",i,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+_C(h)),m)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(i=0){var h,m;null===(m=(h=this._platformStrategy).historyGo)||void 0===m||m.call(h,i)}onUrlChange(i){this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)}))}_notifyUrlChangeListeners(i="",h){this._urlChangeListeners.forEach(m=>m(i,h))}subscribe(i,h,m){return this._subject.subscribe({next:i,error:h,complete:m})}}return r.\u0275fac=function(i){return new(i||r)(l0(XM),l0(eS))},r.normalizeQueryParams=_C,r.joinWithSlash=S5,r.stripTrailingSlash=Gz,r.\u0275prov=K0({factory:QK,token:r,providedIn:"root"}),r})();function QK(){return new qR(l0(XM),l0(eS))}function Wz(r){return r.replace(/\/index.html$/,"")}var $1=(()=>(($1=$1||{})[$1.Zero=0]="Zero",$1[$1.One=1]="One",$1[$1.Two=2]="Two",$1[$1.Few=3]="Few",$1[$1.Many=4]="Many",$1[$1.Other=5]="Other",$1))();const sZ=function(r){return function(r){const n=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let i=gV(n);if(i)return i;const h=n.split("-")[0];if(i=gV(h),i)return i;if("en"===h)return b9;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[c0.PluralCase]};class rL{}let PZ=(()=>{class r extends rL{constructor(i){super(),this.locale=i}getPluralCategory(i,h){switch(sZ(h||this.locale)(i)){case $1.Zero:return"zero";case $1.One:return"one";case $1.Two:return"two";case $1.Few:return"few";case $1.Many:return"many";default:return"other"}}}return r.\u0275fac=function(i){return new(i||r)(l0(vT))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();class VZ{constructor(n,i,h,m){this.$implicit=n,this.ngForOf=i,this.index=h,this.count=m}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let e7=(()=>{class r{constructor(i,h,m){this._viewContainer=i,this._template=h,this._differs=m,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;if(!this._differ&&i)try{this._differ=this._differs.find(i).create(this.ngForTrackBy)}catch(h){throw new Error(`Cannot find a differ supporting object '${i}' of type '${function(r){return r.name||typeof r}(i)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const h=[];i.forEachOperation((m,I,z)=>{if(null==m.previousIndex){const X=this._viewContainer.createEmbeddedView(this._template,new VZ(null,this._ngForOf,-1,-1),null===z?void 0:z),_r=new n7(m,X);h.push(_r)}else if(null==z)this._viewContainer.remove(null===I?void 0:I);else if(null!==I){const X=this._viewContainer.get(I);this._viewContainer.move(X,z);const _r=new n7(m,X);h.push(_r)}});for(let m=0;m<h.length;m++)this._perViewChange(h[m].view,h[m].record);for(let m=0,I=this._viewContainer.length;m<I;m++){const z=this._viewContainer.get(m);z.context.index=m,z.context.count=I,z.context.ngForOf=this._ngForOf}i.forEachIdentityChange(m=>{this._viewContainer.get(m.currentIndex).context.$implicit=m.item})}_perViewChange(i,h){i.context.$implicit=h.item}static ngTemplateContextGuard(i,h){return!0}}return r.\u0275fac=function(i){return new(i||r)(jy(j2),jy(mC),jy(DR))},r.\u0275dir=Ey({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class n7{constructor(n,i){this.record=n,this.view=i}}let r7=(()=>{class r{constructor(i,h){this._viewContainer=i,this._context=new zZ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){i7("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){i7("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,h){return!0}}return r.\u0275fac=function(i){return new(i||r)(jy(j2),jy(mC))},r.\u0275dir=Ey({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class zZ{constructor(){this.$implicit=null,this.ngIf=null}}function i7(r,n){if(n&&!n.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${e_(n)}'.`)}let pX=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r}),r.\u0275inj=U1({providers:[{provide:rL,useClass:PZ}]}),r})();let u7=(()=>{class r{}return r.\u0275prov=K0({token:r,providedIn:"root",factory:()=>new mX(l0(xx),window)}),r})();class mX{constructor(n,i){this.document=n,this.window=i,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const i=function(r,n){const i=r.getElementById(n)||r.getElementsByName(n)[0];if(i)return i;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const h=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let m=h.currentNode;for(;m;){const I=m.shadowRoot;if(I){const z=I.getElementById(n)||I.querySelector(`[name="${n}"]`);if(z)return z}m=h.nextNode()}}return null}(this.document,n);i&&(this.scrollToElement(i),this.attemptFocus(i))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const i=this.window.history;i&&i.scrollRestoration&&(i.scrollRestoration=n)}}scrollToElement(n){const i=n.getBoundingClientRect(),h=i.left+this.window.pageXOffset,m=i.top+this.window.pageYOffset,I=this.offset();this.window.scrollTo(h-I[0],m-I[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=l7(this.window.history)||l7(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function l7(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class H5 extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){Y3||(Y3=r)}(new H5)}onAndCancel(n,i,h){return n.addEventListener(i,h,!1),()=>{n.removeEventListener(i,h,!1)}}dispatchEvent(n,i){n.dispatchEvent(i)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,i){return(i=i||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,i){return"window"===i?window:"document"===i?n:"body"===i?n.body:null}getBaseHref(n){const i=($R=$R||document.querySelector("base"),$R?$R.getAttribute("href"):null);return null==i?null:function(r){iL=iL||document.createElement("a"),iL.setAttribute("href",r);const n=iL.pathname;return"/"===n.charAt(0)?n:`/${n}`}(i)}resetBaseElement(){$R=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(r,n){n=encodeURIComponent(n);for(const i of r.split(";")){const h=i.indexOf("="),[m,I]=-1==h?[i,""]:[i.slice(0,h),i.slice(h+1)];if(m.trim()===n)return decodeURIComponent(I)}return null}(document.cookie,n)}}let iL,$R=null;const c7=new p_("TRANSITION_ID"),AX=[{provide:WM,useFactory:function(r,n,i){return()=>{i.get(YM).donePromise.then(()=>{const h=AA(),m=n.querySelectorAll(`style[ng-transition="${r}"]`);for(let I=0;I<m.length;I++)h.remove(m[I])})}},deps:[c7,xx,j_],multi:!0}];class U5{static init(){!function(r){h5=r}(new U5)}addToWindow(n){n_.getAngularTestability=(h,m=!0)=>{const I=n.findTestabilityInTree(h,m);if(null==I)throw new Error("Could not find testability for element.");return I},n_.getAllAngularTestabilities=()=>n.getAllTestabilities(),n_.getAllAngularRootElements=()=>n.getAllRootElements(),n_.frameworkStabilizers||(n_.frameworkStabilizers=[]),n_.frameworkStabilizers.push(h=>{const m=n_.getAllAngularTestabilities();let I=m.length,z=!1;const X=function(_r){z=z||_r,I--,0==I&&h(z)};m.forEach(function(_r){_r.whenStable(X)})})}findTestabilityInTree(n,i,h){if(null==i)return null;const m=n.getTestability(i);return null!=m?m:h?AA().isShadowRoot(i)?this.findTestabilityInTree(n,i.host,!0):this.findTestabilityInTree(n,i.parentElement,!0):null}}let CX=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const KR=new p_("EventManagerPlugins");let sL=(()=>{class r{constructor(i,h){this._zone=h,this._eventNameToPlugin=new Map,i.forEach(m=>m.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,h,m){return this._findPluginFor(h).addEventListener(i,h,m)}addGlobalEventListener(i,h,m){return this._findPluginFor(h).addGlobalEventListener(i,h,m)}getZone(){return this._zone}_findPluginFor(i){const h=this._eventNameToPlugin.get(i);if(h)return h;const m=this._plugins;for(let I=0;I<m.length;I++){const z=m[I];if(z.supports(i))return this._eventNameToPlugin.set(i,z),z}throw new Error(`No event manager plugin found for event ${i}`)}}return r.\u0275fac=function(i){return new(i||r)(l0(KR),l0(Y1))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();class G5{constructor(n){this._doc=n}addGlobalEventListener(n,i,h){const m=AA().getGlobalEventTarget(this._doc,n);if(!m)throw new Error(`Unsupported event target ${m} for event ${i}`);return this.addEventListener(m,i,h)}}let f7=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(i){const h=new Set;i.forEach(m=>{this._stylesSet.has(m)||(this._stylesSet.add(m),h.add(m))}),this.onStylesAdded(h)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})(),ZR=(()=>{class r extends f7{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,h,m){i.forEach(I=>{const z=this._doc.createElement("style");z.textContent=I,m.push(h.appendChild(z))})}addHost(i){const h=[];this._addStylesToHost(this._stylesSet,i,h),this._hostNodes.set(i,h)}removeHost(i){const h=this._hostNodes.get(i);h&&h.forEach(p7),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((h,m)=>{this._addStylesToHost(i,m,h)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(p7))}}return r.\u0275fac=function(i){return new(i||r)(l0(xx))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function p7(r){AA().remove(r)}const q5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},W5=/%COMP%/g;function aL(r,n,i){for(let h=0;h<n.length;h++){let m=n[h];Array.isArray(m)?aL(r,m,i):(m=m.replace(W5,r),i.push(m))}return i}function y7(r){return n=>{if("__ngUnwrap__"===n)return r;!1===r(n)&&(n.preventDefault(),n.returnValue=!1)}}let Y5=(()=>{class r{constructor(i,h,m){this.eventManager=i,this.sharedStylesHost=h,this.appId=m,this.rendererByCompId=new Map,this.defaultRenderer=new $5(i)}createRenderer(i,h){if(!i||!h)return this.defaultRenderer;switch(h.encapsulation){case j0.Emulated:{let m=this.rendererByCompId.get(h.id);return m||(m=new BX(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,m)),m.applyToHost(i),m}case 1:case j0.ShadowDom:return new zX(this.eventManager,this.sharedStylesHost,i,h);default:if(!this.rendererByCompId.has(h.id)){const m=aL(h.id,h.styles,[]);this.sharedStylesHost.addStyles(m),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(i){return new(i||r)(l0(sL),l0(ZR),l0(BR))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();class $5{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,i){return i?document.createElementNS(q5[i]||i,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,i){n.appendChild(i)}insertBefore(n,i,h){n&&n.insertBefore(i,h)}removeChild(n,i){n&&n.removeChild(i)}selectRootElement(n,i){let h="string"==typeof n?document.querySelector(n):n;if(!h)throw new Error(`The selector "${n}" did not match any elements`);return i||(h.textContent=""),h}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,i,h,m){if(m){i=m+":"+i;const I=q5[m];I?n.setAttributeNS(I,i,h):n.setAttribute(i,h)}else n.setAttribute(i,h)}removeAttribute(n,i,h){if(h){const m=q5[h];m?n.removeAttributeNS(m,i):n.removeAttribute(`${h}:${i}`)}else n.removeAttribute(i)}addClass(n,i){n.classList.add(i)}removeClass(n,i){n.classList.remove(i)}setStyle(n,i,h,m){m&(kx.DashCase|kx.Important)?n.style.setProperty(i,h,m&kx.Important?"important":""):n.style[i]=h}removeStyle(n,i,h){h&kx.DashCase?n.style.removeProperty(i):n.style[i]=""}setProperty(n,i,h){n[i]=h}setValue(n,i){n.nodeValue=i}listen(n,i,h){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,i,y7(h)):this.eventManager.addEventListener(n,i,y7(h))}}class BX extends $5{constructor(n,i,h,m){super(n),this.component=h;const I=aL(m+"-"+h.id,h.styles,[]);i.addStyles(I),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(W5,r)}(m+"-"+h.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(W5,r)}(m+"-"+h.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,i){const h=super.createElement(n,i);return super.setAttribute(h,this.contentAttr,""),h}}class zX extends $5{constructor(n,i,h,m){super(n),this.sharedStylesHost=i,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const I=aL(m.id,m.styles,[]);for(let z=0;z<I.length;z++){const X=document.createElement("style");X.textContent=I[z],this.shadowRoot.appendChild(X)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,i){return super.appendChild(this.nodeOrShadowRoot(n),i)}insertBefore(n,i,h){return super.insertBefore(this.nodeOrShadowRoot(n),i,h)}removeChild(n,i){return super.removeChild(this.nodeOrShadowRoot(n),i)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let HX=(()=>{class r extends G5{constructor(i){super(i)}supports(i){return!0}addEventListener(i,h,m){return i.addEventListener(h,m,!1),()=>this.removeEventListener(i,h,m)}removeEventListener(i,h,m){return i.removeEventListener(h,m)}}return r.\u0275fac=function(i){return new(i||r)(l0(xx))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const _7=["alt","control","meta","shift"],KX={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b7={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ZX={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let XX=(()=>{class r extends G5{constructor(i){super(i)}supports(i){return null!=r.parseEventName(i)}addEventListener(i,h,m){const I=r.parseEventName(h),z=r.eventCallback(I.fullKey,m,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>AA().onAndCancel(i,I.domEventName,z))}static parseEventName(i){const h=i.toLowerCase().split("."),m=h.shift();if(0===h.length||"keydown"!==m&&"keyup"!==m)return null;const I=r._normalizeKey(h.pop());let z="";if(_7.forEach(_r=>{const ga=h.indexOf(_r);ga>-1&&(h.splice(ga,1),z+=_r+".")}),z+=I,0!=h.length||0===I.length)return null;const X={};return X.domEventName=m,X.fullKey=z,X}static getEventFullKey(i){let h="",m=function(r){let n=r.key;if(null==n){if(n=r.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===r.location&&b7.hasOwnProperty(n)&&(n=b7[n]))}return KX[n]||n}(i);return m=m.toLowerCase()," "===m?m="space":"."===m&&(m="dot"),_7.forEach(I=>{I!=m&&ZX[I](i)&&(h+=I+".")}),h+=m,h}static eventCallback(i,h,m){return I=>{r.getEventFullKey(I)===i&&m.runGuarded(()=>h(I))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return r.\u0275fac=function(i){return new(i||r)(l0(xx))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const rQ=[{provide:o5,useValue:"browser"},{provide:tz,useValue:function(){H5.makeCurrent(),U5.init()},multi:!0},{provide:xx,useFactory:function(){return function(r){NC=r}(document),document},deps:[]}],oQ=hz(z$,"browser",rQ),sQ=[[],{provide:jD,useValue:"root"},{provide:KE,useFactory:function(){return new KE},deps:[]},{provide:KR,useClass:HX,multi:!0,deps:[xx,Y1,o5]},{provide:KR,useClass:XX,multi:!0,deps:[xx]},[],{provide:Y5,useClass:Y5,deps:[sL,ZR,BR]},{provide:E3,useExisting:Y5},{provide:f7,useExisting:ZR},{provide:ZR,useClass:ZR,deps:[xx]},{provide:c5,useClass:c5,deps:[Y1]},{provide:sL,useClass:sL,deps:[KR,Y1]},{provide:class{},useClass:CX,deps:[]},[]];let aQ=(()=>{class r{constructor(i){if(i)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(i){return{ngModule:r,providers:[{provide:BR,useValue:i.appId},{provide:c7,useExisting:BR},AX]}}}return r.\u0275fac=function(i){return new(i||r)(l0(r,12))},r.\u0275mod=py({type:r}),r.\u0275inj=U1({providers:sQ,imports:[pX,$$]}),r})();function uL(r,n){return new S0(i=>{const h=r.length;if(0===h)return void i.complete();const m=new Array(h);let I=0,z=0;for(let X=0;X<h;X++){const _r=f1(r[X]);let ga=!1;i.add(_r.subscribe({next:_h=>{ga||(ga=!0,z++),m[X]=_h},error:_h=>i.error(_h),complete:()=>{I++,(I===h||!ga)&&(z===h&&i.next(n?n.reduce((_h,od,ey)=>(_h[od]=m[ey],_h),{}):m),i.complete())}}))}})}"undefined"!=typeof window&&window;let x7=(()=>{class r{constructor(i,h){this._renderer=i,this._elementRef=h,this.onChange=m=>{},this.onTouched=()=>{}}setProperty(i,h){this._renderer.setProperty(this._elementRef.nativeElement,i,h)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return r.\u0275fac=function(i){return new(i||r)(jy(yC),jy(ax))},r.\u0275dir=Ey({type:r}),r})(),nS=(()=>{class r extends x7{}return r.\u0275fac=function(){let n;return function(h){return(n||(n=dx(r)))(h||r)}}(),r.\u0275dir=Ey({type:r,features:[ty]}),r})();const CA=new p_("NgValueAccessor"),mQ={provide:CA,useExisting:H_(()=>lL),multi:!0},_Q=new p_("CompositionEventMode");let lL=(()=>{class r extends x7{constructor(i,h,m){super(i,h),this._compositionMode=m,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=AA()?AA().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(i){this.setProperty("value",null==i?"":i)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return r.\u0275fac=function(i){return new(i||r)(jy(yC),jy(ax),jy(_Q,8))},r.\u0275dir=Ey({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,h){1&i&&Qx("input",function(I){return h._handleInput(I.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(I){return h._compositionEnd(I.target.value)})},features:[y1([mQ]),ty]}),r})();const Fx=new p_("NgValidators"),xT=new p_("NgAsyncValidators");function R7(r){return null!=r}function N7(r){const n=bR(r)?f1(r):r;return f3(n),n}function P7(r){let n={};return r.forEach(i=>{n=null!=i?Object.assign(Object.assign({},n),i):n}),0===Object.keys(n).length?null:n}function L7(r,n){return n.map(i=>i(r))}function F7(r){return r.map(n=>function(r){return!r.validate}(n)?n:i=>n.validate(i))}function J5(r){return null!=r?function(r){if(!r)return null;const n=r.filter(R7);return 0==n.length?null:function(i){return P7(L7(i,n))}}(F7(r)):null}function _j(r){return null!=r?function(r){if(!r)return null;const n=r.filter(R7);return 0==n.length?null:function(i){return function(...r){if(1===r.length){const n=r[0];if(Ki(n))return uL(n,null);if(_u(n)&&Object.getPrototypeOf(n)===Object.prototype){const i=Object.keys(n);return uL(i.map(h=>n[h]),i)}}if("function"==typeof r[r.length-1]){const n=r.pop();return uL(r=1===r.length&&Ki(r[0])?r[0]:r,null).pipe(k_(i=>n(...i)))}return uL(r,null)}(L7(i,n).map(N7)).pipe(k_(P7))}}(F7(r)):null}function B7(r,n){return null===r?[n]:Array.isArray(r)?[...r,n]:[r,n]}function z7(r){return r._rawValidators}function H7(r){return r._rawAsyncValidators}function $j(r){return r?Array.isArray(r)?r:[r]:[]}function cL(r,n){return Array.isArray(r)?r.includes(n):r===n}function U7(r,n){const i=$j(n);return $j(r).forEach(m=>{cL(i,m)||i.push(m)}),i}function G7(r,n){return $j(n).filter(i=>!cL(r,i))}let q7=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=J5(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=_j(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,h){return!!this.control&&this.control.hasError(i,h)}getError(i,h){return this.control?this.control.getError(i,h):null}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Ey({type:r}),r})(),nE=(()=>{class r extends q7{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let n;return function(h){return(n||(n=dx(r)))(h||r)}}(),r.\u0275dir=Ey({type:r,features:[ty]}),r})();class AT extends q7{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class W7{constructor(n){this._cd=n}is(n){var i,h,m;return"submitted"===n?!!(null===(i=this._cd)||void 0===i?void 0:i.submitted):!!(null===(m=null===(h=this._cd)||void 0===h?void 0:h.control)||void 0===m?void 0:m[n])}}let Y7=(()=>{class r extends W7{constructor(i){super(i)}}return r.\u0275fac=function(i){return new(i||r)(jy(AT,2))},r.\u0275dir=Ey({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,h){2&i&&p3("ng-untouched",h.is("untouched"))("ng-touched",h.is("touched"))("ng-pristine",h.is("pristine"))("ng-dirty",h.is("dirty"))("ng-valid",h.is("valid"))("ng-invalid",h.is("invalid"))("ng-pending",h.is("pending"))},features:[ty]}),r})(),$7=(()=>{class r extends W7{constructor(i){super(i)}}return r.\u0275fac=function(i){return new(i||r)(jy(nE,10))},r.\u0275dir=Ey({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,h){2&i&&p3("ng-untouched",h.is("untouched"))("ng-touched",h.is("touched"))("ng-pristine",h.is("pristine"))("ng-dirty",h.is("dirty"))("ng-valid",h.is("valid"))("ng-invalid",h.is("invalid"))("ng-pending",h.is("pending"))("ng-submitted",h.is("submitted"))},features:[ty]}),r})();function XR(r,n){n6(r,n),n.valueAccessor.writeValue(r.value),function(r,n){n.valueAccessor.registerOnChange(i=>{r._pendingValue=i,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&K7(r,n)})}(r,n),function(r,n){const i=(h,m)=>{n.valueAccessor.writeValue(h),m&&n.viewToModelUpdate(h)};r.registerOnChange(i),n._registerOnDestroy(()=>{r._unregisterOnChange(i)})}(r,n),function(r,n){n.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&K7(r,n),"submit"!==r.updateOn&&r.markAsTouched()})}(r,n),function(r,n){if(n.valueAccessor.setDisabledState){const i=h=>{n.valueAccessor.setDisabledState(h)};r.registerOnDisabledChange(i),n._registerOnDestroy(()=>{r._unregisterOnDisabledChange(i)})}}(r,n)}function pL(r,n,i=!0){const h=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(h),n.valueAccessor.registerOnTouched(h)),gL(r,n),r&&(n._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function dL(r,n){r.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(n)})}function n6(r,n){const i=z7(r);null!==n.validator?r.setValidators(B7(i,n.validator)):"function"==typeof i&&r.setValidators([i]);const h=H7(r);null!==n.asyncValidator?r.setAsyncValidators(B7(h,n.asyncValidator)):"function"==typeof h&&r.setAsyncValidators([h]);const m=()=>r.updateValueAndValidity();dL(n._rawValidators,m),dL(n._rawAsyncValidators,m)}function gL(r,n){let i=!1;if(null!==r){if(null!==n.validator){const m=z7(r);if(Array.isArray(m)&&m.length>0){const I=m.filter(z=>z!==n.validator);I.length!==m.length&&(i=!0,r.setValidators(I))}}if(null!==n.asyncValidator){const m=H7(r);if(Array.isArray(m)&&m.length>0){const I=m.filter(z=>z!==n.asyncValidator);I.length!==m.length&&(i=!0,r.setAsyncValidators(I))}}}const h=()=>{};return dL(n._rawValidators,h),dL(n._rawAsyncValidators,h),i}function K7(r,n){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function yL(r,n){const i=r.indexOf(n);i>-1&&r.splice(i,1)}const QR="VALID",mL="INVALID",QM="PENDING",JR="DISABLED";function o6(r){return(a6(r)?r.validators:r)||null}function Q7(r){return Array.isArray(r)?J5(r):r||null}function s6(r,n){return(a6(n)?n.asyncValidators:r)||null}function J7(r){return Array.isArray(r)?_j(r):r||null}function a6(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class u6{constructor(n,i){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=i,this._composedValidatorFn=Q7(this._rawValidators),this._composedAsyncValidatorFn=J7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===QR}get invalid(){return this.status===mL}get pending(){return this.status==QM}get disabled(){return this.status===JR}get enabled(){return this.status!==JR}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=Q7(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=J7(n)}addValidators(n){this.setValidators(U7(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(U7(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(G7(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(G7(n,this._rawAsyncValidators))}hasValidator(n){return cL(this._rawValidators,n)}hasAsyncValidator(n){return cL(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=QM,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const i=this._parentMarkedDirty(n.onlySelf);this.status=JR,this.errors=null,this._forEachChild(h=>{h.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:i})),this._onDisabledChange.forEach(h=>h(!0))}enable(n={}){const i=this._parentMarkedDirty(n.onlySelf);this.status=QR,this._forEachChild(h=>{h.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:i})),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===QR||this.status===QM)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?JR:QR}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=QM,this._hasOwnPendingAsyncValidator=!0;const i=N7(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,i={}){this.errors=n,this._updateControlsErrors(!1!==i.emitEvent)}get(n){return function(r,n,i){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let h=r;return n.forEach(m=>{h=h instanceof tN?h.controls.hasOwnProperty(m)?h.controls[m]:null:h instanceof l6&&h.at(m)||null}),h}(this,n)}getError(n,i){const h=i?this.get(i):this;return h&&h.errors?h.errors[n]:null}hasError(n,i){return!!this.getError(n,i)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Uw,this.statusChanges=new Uw}_calculateStatus(){return this._allControlsDisabled()?JR:this.errors?mL:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(QM)?QM:this._anyControlsHaveStatus(mL)?mL:QR}_anyControlsHaveStatus(n){return this._anyControls(i=>i.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){a6(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class JM extends u6{constructor(n=null,i,h){super(o6(i),s6(h,i)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,i={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==i.emitViewToModelChange)),this.updateValueAndValidity(i)}patchValue(n,i={}){this.setValue(n,i)}reset(n=null,i={}){this._applyFormState(n),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){yL(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){yL(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class tN extends u6{constructor(n,i,h){super(o6(i),s6(h,i)),this.controls=n,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,i){return this.controls[n]?this.controls[n]:(this.controls[n]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(n,i,h={}){this.registerControl(n,i),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(n,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(n,i,h={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],i&&this.registerControl(n,i),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,i={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(h=>{this._throwIfControlMissing(h),this.controls[h].setValue(n[h],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(n,i={}){null!=n&&(Object.keys(n).forEach(h=>{this.controls[h]&&this.controls[h].patchValue(n[h],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(n={},i={}){this._forEachChild((h,m)=>{h.reset(n[m],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(n,i,h)=>(n[h]=i instanceof JM?i.value:i.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(i,h)=>!!h._syncPendingControls()||i);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(i=>{const h=this.controls[i];h&&n(h,i)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const i of Object.keys(this.controls)){const h=this.controls[i];if(this.contains(i)&&n(h))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,i,h)=>((i.enabled||this.disabled)&&(n[h]=i.value),n))}_reduceChildren(n,i){let h=n;return this._forEachChild((m,I)=>{h=i(h,m,I)}),h}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((i,h)=>{if(void 0===n[h])throw new Error(`Must supply a value for form control with name: '${h}'.`)})}}class l6 extends u6{constructor(n,i,h){super(o6(i),s6(h,i)),this.controls=n,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,i={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(n,i,h={}){this.controls.splice(n,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:h.emitEvent})}removeAt(n,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(n,i,h={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),i&&(this.controls.splice(n,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,i={}){this._checkAllValuesPresent(n),n.forEach((h,m)=>{this._throwIfControlMissing(m),this.at(m).setValue(h,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(n,i={}){null!=n&&(n.forEach((h,m)=>{this.at(m)&&this.at(m).patchValue(h,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(n=[],i={}){this._forEachChild((h,m)=>{h.reset(n[m],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(n=>n instanceof JM?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((i,h)=>!!h._syncPendingControls()||i,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((i,h)=>{n(i,h)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(i=>i.enabled&&n(i))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((i,h)=>{if(void 0===n[h])throw new Error(`Must supply a value for form control at index: ${h}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}let iH=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275dir=Ey({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})();const LQ={provide:CA,useExisting:H_(()=>h6),multi:!0};let h6=(()=>{class r extends nS{writeValue(i){this.setProperty("value",null==i?"":i)}registerOnChange(i){this.onChange=h=>{i(""==h?null:parseFloat(h))}}}return r.\u0275fac=function(){let n;return function(h){return(n||(n=dx(r)))(h||r)}}(),r.\u0275dir=Ey({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,h){1&i&&Qx("input",function(I){return h.onChange(I.target.value)})("blur",function(){return h.onTouched()})},features:[y1([LQ]),ty]}),r})(),oH=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r}),r.\u0275inj=U1({}),r})();const f6=new p_("NgModelWithFormControlWarning"),zQ={provide:nE,useExisting:H_(()=>vL)};let vL=(()=>{class r extends nE{constructor(i,h){super(),this.validators=i,this.asyncValidators=h,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Uw,this._setValidators(i),this._setAsyncValidators(h)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gL(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){const h=this.form.get(i.path);return XR(h,i),h.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),h}getControl(i){return this.form.get(i.path)}removeControl(i){pL(i.control||null,i,!1),yL(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,h){this.form.get(i.path).setValue(h)}onSubmit(i){return this.submitted=!0,function(r,n){r._syncPendingControls(),n.forEach(i=>{const h=i.control;"submit"===h.updateOn&&h._pendingChange&&(i.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(i),!1}onReset(){this.resetForm()}resetForm(i){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{const h=i.control,m=this.form.get(i.path);h!==m&&(pL(h||null,i),m instanceof JM&&(XR(m,i),i.control=m))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){const h=this.form.get(i.path);(function(r,n){n6(r,n)})(h,i),h.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){const h=this.form.get(i.path);h&&function(r,n){return gL(r,n)}(h,i)&&h.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){n6(this.form,this),this._oldForm&&gL(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(i){return new(i||r)(jy(Fx,10),jy(xT,10))},r.\u0275dir=Ey({type:r,selectors:[["","formGroup",""]],hostBindings:function(i,h){1&i&&Qx("submit",function(I){return h.onSubmit(I)})("reset",function(){return h.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y1([zQ]),ty,G1]}),r})();const GQ={provide:AT,useExisting:H_(()=>g6)};let g6=(()=>{class r extends AT{constructor(i,h,m,I,z){super(),this._ngModelWarningConfig=z,this._added=!1,this.update=new Uw,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(h),this._setAsyncValidators(m),this.valueAccessor=function(r,n){if(!n)return null;let i,h,m;return Array.isArray(n),n.forEach(I=>{I.constructor===lL?i=I:function(r){return Object.getPrototypeOf(r.constructor)===nS}(I)?h=I:m=I}),m||h||i||null}(0,I)}set isDisabled(i){}ngOnChanges(i){this._added||this._setUpControl(),function(r,n){if(!r.hasOwnProperty("model"))return!1;const i=r.model;return!!i.isFirstChange()||!Object.is(n,i.currentValue)}(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return function(r,n){return[...n.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return r.\u0275fac=function(i){return new(i||r)(jy(nE,13),jy(Fx,10),jy(xT,10),jy(CA,10),jy(f6,8))},r.\u0275dir=Ey({type:r,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y1([GQ]),ty,G1]}),r._ngModelWarningSentOnce=!1,r})(),wH=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r}),r.\u0275inj=U1({imports:[[oH]]}),r})(),xH=(()=>{class r{static withConfig(i){return{ngModule:r,providers:[{provide:f6,useValue:i.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r}),r.\u0275inj=U1({imports:[wH]}),r})(),sJ=(()=>{class r{group(i,h=null){const m=this._reduceControls(i);let X,I=null,z=null;return null!=h&&(function(r){return void 0!==r.asyncValidators||void 0!==r.validators||void 0!==r.updateOn}(h)?(I=null!=h.validators?h.validators:null,z=null!=h.asyncValidators?h.asyncValidators:null,X=null!=h.updateOn?h.updateOn:void 0):(I=null!=h.validator?h.validator:null,z=null!=h.asyncValidator?h.asyncValidator:null)),new tN(m,{asyncValidators:z,updateOn:X,validators:I})}control(i,h,m){return new JM(i,h,m)}array(i,h,m){const I=i.map(z=>this._createControl(z));return new l6(I,h,m)}_reduceControls(i){const h={};return Object.keys(i).forEach(m=>{h[m]=this._createControl(i[m])}),h}_createControl(i){return i instanceof JM||i instanceof tN||i instanceof l6?i:Array.isArray(i)?this.control(i[0],i.length>1?i[1]:null,i.length>2?i[2]:null):this.control(i)}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=K0({factory:function(){return new r},token:r,providedIn:xH}),r})();function s_(...r){let n=r[r.length-1];return Y2(n)?(r.pop(),OA(r,n)):mE(r)}class W2 extends W_{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const i=super._subscribe(n);return i&&!i.closed&&n.next(this._value),i}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new N_;return this._value}next(n){super.next(this._value=n)}}class aJ extends ky{notifyNext(n,i,h,m,I){this.destination.next(i)}notifyError(n,i){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class uJ extends ky{constructor(n,i,h){super(),this.parent=n,this.outerValue=i,this.outerIndex=h,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function lJ(r,n,i,h,m=new uJ(r,i,h)){if(!m.closed)return n instanceof S0?n.subscribe(m):IA(n)(m)}const EH={};class hJ{constructor(n){this.resultSelector=n}call(n,i){return i.subscribe(new fJ(n,this.resultSelector))}}class fJ extends aJ{constructor(n,i){super(n),this.resultSelector=i,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(EH),this.observables.push(n)}_complete(){const n=this.observables,i=n.length;if(0===i)this.destination.complete();else{this.active=i,this.toRespond=i;for(let h=0;h<i;h++)this.add(lJ(this,n[h],void 0,h))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,i,h){const m=this.values,z=this.toRespond?m[h]===EH?--this.toRespond:this.toRespond:0;m[h]=i,0===z&&(this.resultSelector?this._tryResultSelector(m):this.destination.next(m.slice()))}_tryResultSelector(n){let i;try{i=this.resultSelector.apply(this,n)}catch(h){return void this.destination.error(h)}this.destination.next(i)}}const _L=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function _6(...r){return yE(1)(s_(...r))}const tI=new S0(r=>r.complete());function b6(r){return r?function(r){return new S0(n=>r.schedule(()=>n.complete()))}(r):tI}function AH(r){return new S0(n=>{let i;try{i=r()}catch(m){return void n.error(m)}return(i?f1(i):b6()).subscribe(n)})}function CT(r,n){return"function"==typeof n?i=>i.pipe(CT((h,m)=>f1(r(h,m)).pipe(k_((I,z)=>n(h,I,m,z))))):i=>i.lift(new gJ(r))}class gJ{constructor(n){this.project=n}call(n,i){return i.subscribe(new yJ(n,this.project))}}class yJ extends K2{constructor(n,i){super(n),this.project=i,this.index=0}_next(n){let i;const h=this.index++;try{i=this.project(n,h)}catch(m){return void this.destination.error(m)}this._innerSub(i)}_innerSub(n){const i=this.innerSubscription;i&&i.unsubscribe();const h=new IT(this),m=this.destination;m.add(h),this.innerSubscription=V_(n,h),this.innerSubscription!==h&&m.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}const CH=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function w6(r){return n=>0===r?b6():n.lift(new mJ(r))}class mJ{constructor(n){if(this.total=n,this.total<0)throw new CH}call(n,i){return i.subscribe(new vJ(n,this.total))}}class vJ extends ky{constructor(n,i){super(n),this.total=i,this.count=0}_next(n){const i=this.total,h=++this.count;h<=i&&(this.destination.next(n),h===i&&(this.destination.complete(),this.unsubscribe()))}}function TH(r,n){let i=!1;return arguments.length>=2&&(i=!0),function(m){return m.lift(new bJ(r,n,i))}}class bJ{constructor(n,i,h=!1){this.accumulator=n,this.seed=i,this.hasSeed=h}call(n,i){return i.subscribe(new wJ(n,this.accumulator,this.seed,this.hasSeed))}}class wJ extends ky{constructor(n,i,h,m){super(n),this.accumulator=i,this._seed=h,this.hasSeed=m,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const i=this.index++;let h;try{h=this.accumulator(this.seed,n,i)}catch(m){this.destination.error(m)}this.seed=h,this.destination.next(h)}}function eI(r,n){return function(h){return h.lift(new xJ(r,n))}}class xJ{constructor(n,i){this.predicate=n,this.thisArg=i}call(n,i){return i.subscribe(new EJ(n,this.predicate,this.thisArg))}}class EJ extends ky{constructor(n,i,h){super(n),this.predicate=i,this.thisArg=h,this.count=0}_next(n){let i;try{i=this.predicate.call(this.thisArg,n,this.count++)}catch(h){return void this.destination.error(h)}i&&this.destination.next(n)}}function rS(r){return function(i){const h=new AJ(r),m=i.lift(h);return h.caught=m}}class AJ{constructor(n){this.selector=n}call(n,i){return i.subscribe(new CJ(n,this.selector,this.caught))}}class CJ extends K2{constructor(n,i,h){super(n),this.selector=i,this.caught=h}error(n){if(!this.isStopped){let i;try{i=this.selector(n,this.caught)}catch(I){return void super.error(I)}this._unsubscribeAndRecycle();const h=new IT(this);this.add(h);const m=V_(i,h);m!==h&&this.add(m)}}}function nN(r,n){return m1(r,n,1)}function x6(r){return function(i){return 0===r?b6():i.lift(new TJ(r))}}class TJ{constructor(n){if(this.total=n,this.total<0)throw new CH}call(n,i){return i.subscribe(new DJ(n,this.total))}}class DJ extends ky{constructor(n,i){super(n),this.total=i,this.ring=new Array,this.count=0}_next(n){const i=this.ring,h=this.total,m=this.count++;i.length<h?i.push(n):i[m%h]=n}_complete(){const n=this.destination;let i=this.count;if(i>0){const h=this.count>=this.total?this.total:this.count,m=this.ring;for(let I=0;I<h;I++){const z=i++%h;n.next(m[z])}}n.complete()}}function DH(r=IJ){return n=>n.lift(new SJ(r))}class SJ{constructor(n){this.errorFactory=n}call(n,i){return i.subscribe(new MJ(n,this.errorFactory))}}class MJ extends ky{constructor(n,i){super(n),this.errorFactory=i,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(i){n=i}this.destination.error(n)}}}function IJ(){return new _L}function SH(r=null){return n=>n.lift(new kJ(r))}class kJ{constructor(n){this.defaultValue=n}call(n,i){return i.subscribe(new OJ(n,this.defaultValue))}}class OJ extends ky{constructor(n,i){super(n),this.defaultValue=i,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function nI(r,n){const i=arguments.length>=2;return h=>h.pipe(r?eI((m,I)=>r(m,I,h)):O0,w6(1),i?SH(n):DH(()=>new _L))}function TT(){}function PE(r,n,i){return function(m){return m.lift(new NJ(r,n,i))}}class NJ{constructor(n,i,h){this.nextOrObserver=n,this.error=i,this.complete=h}call(n,i){return i.subscribe(new PJ(n,this.nextOrObserver,this.error,this.complete))}}class PJ extends ky{constructor(n,i,h,m){super(n),this._tapNext=TT,this._tapError=TT,this._tapComplete=TT,this._tapError=h||TT,this._tapComplete=m||TT,v(i)?(this._context=this,this._tapNext=i):i&&(this._context=i,this._tapNext=i.next||TT,this._tapError=i.error||TT,this._tapComplete=i.complete||TT)}_next(n){try{this._tapNext.call(this._context,n)}catch(i){return void this.destination.error(i)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(i){return void this.destination.error(i)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}class FJ{constructor(n){this.callback=n}call(n,i){return i.subscribe(new jJ(n,this.callback))}}class jJ extends ky{constructor(n,i){super(n),this.add(new oy(i))}}class wC{constructor(n,i){this.id=n,this.url=i}}class E6 extends wC{constructor(n,i,h="imperative",m=null){super(n,i),this.navigationTrigger=h,this.restoredState=m}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rN extends wC{constructor(n,i,h){super(n,i),this.urlAfterRedirects=h}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class MH extends wC{constructor(n,i,h){super(n,i),this.reason=h}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VJ extends wC{constructor(n,i,h){super(n,i),this.error=h}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class BJ extends wC{constructor(n,i,h,m){super(n,i),this.urlAfterRedirects=h,this.state=m}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zJ extends wC{constructor(n,i,h,m){super(n,i),this.urlAfterRedirects=h,this.state=m}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HJ extends wC{constructor(n,i,h,m,I){super(n,i),this.urlAfterRedirects=h,this.state=m,this.shouldActivate=I}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class UJ extends wC{constructor(n,i,h,m){super(n,i),this.urlAfterRedirects=h,this.state=m}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GJ extends wC{constructor(n,i,h,m){super(n,i),this.urlAfterRedirects=h,this.state=m}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IH{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kH{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qJ{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WJ{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YJ{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $J{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OH{constructor(n,i,h){this.routerEvent=n,this.position=i,this.anchor=h}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const v_="primary";class KJ{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const i=this.params[n];return Array.isArray(i)?i[0]:i}return null}getAll(n){if(this.has(n)){const i=this.params[n];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}}function rI(r){return new KJ(r)}const RH="ngNavigationCancelingError";function A6(r){const n=Error("NavigationCancelingError: "+r);return n[RH]=!0,n}function XJ(r,n,i){const h=i.path.split("/");if(h.length>r.length||"full"===i.pathMatch&&(n.hasChildren()||h.length<r.length))return null;const m={};for(let I=0;I<h.length;I++){const z=h[I],X=r[I];if(z.startsWith(":"))m[z.substring(1)]=X;else if(z!==X.path)return null}return{consumed:r.slice(0,h.length),posParams:m}}function TA(r,n){const i=r?Object.keys(r):void 0,h=n?Object.keys(n):void 0;if(!i||!h||i.length!=h.length)return!1;let m;for(let I=0;I<i.length;I++)if(m=i[I],!NH(r[m],n[m]))return!1;return!0}function NH(r,n){if(Array.isArray(r)&&Array.isArray(n)){if(r.length!==n.length)return!1;const i=[...r].sort(),h=[...n].sort();return i.every((m,I)=>h[I]===m)}return r===n}function PH(r){return Array.prototype.concat.apply([],r)}function LH(r){return r.length>0?r[r.length-1]:null}function Ex(r,n){for(const i in r)r.hasOwnProperty(i)&&n(r[i],i)}function DA(r){return f3(r)?r:bR(r)?f1(Promise.resolve(r)):s_(r)}const ttt={exact:function VH(r,n,i){if(!oS(r.segments,n.segments)||!bL(r.segments,n.segments,i)||r.numberOfChildren!==n.numberOfChildren)return!1;for(const h in n.children)if(!r.children[h]||!VH(r.children[h],n.children[h],i))return!1;return!0},subset:BH},FH={exact:function(r,n){return TA(r,n)},subset:function(r,n){return Object.keys(n).length<=Object.keys(r).length&&Object.keys(n).every(i=>NH(r[i],n[i]))},ignored:()=>!0};function jH(r,n,i){return ttt[i.paths](r.root,n.root,i.matrixParams)&&FH[i.queryParams](r.queryParams,n.queryParams)&&!("exact"===i.fragment&&r.fragment!==n.fragment)}function BH(r,n,i){return zH(r,n,n.segments,i)}function zH(r,n,i,h){if(r.segments.length>i.length){const m=r.segments.slice(0,i.length);return!(!oS(m,i)||n.hasChildren()||!bL(m,i,h))}if(r.segments.length===i.length){if(!oS(r.segments,i)||!bL(r.segments,i,h))return!1;for(const m in n.children)if(!r.children[m]||!BH(r.children[m],n.children[m],h))return!1;return!0}{const m=i.slice(0,r.segments.length),I=i.slice(r.segments.length);return!!(oS(r.segments,m)&&bL(r.segments,m,h)&&r.children[v_])&&zH(r.children[v_],n,I,h)}}function bL(r,n,i){return n.every((h,m)=>FH[i](r[m].parameters,h.parameters))}class iS{constructor(n,i,h){this.root=n,this.queryParams=i,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rI(this.queryParams)),this._queryParamMap}toString(){return ott.serialize(this)}}class C_{constructor(n,i){this.segments=n,this.children=i,this.parent=null,Ex(i,(h,m)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wL(this)}}class iN{constructor(n,i){this.path=n,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=rI(this.parameters)),this._parameterMap}toString(){return qH(this)}}function oS(r,n){return r.length===n.length&&r.every((i,h)=>i.path===n[h].path)}class C6{}class HH{parse(n){const i=new dtt(n);return new iS(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(n){const i=`/${oN(n.root,!0)}`,h=function(r){const n=Object.keys(r).map(i=>{const h=r[i];return Array.isArray(h)?h.map(m=>`${xL(i)}=${xL(m)}`).join("&"):`${xL(i)}=${xL(h)}`}).filter(i=>!!i);return n.length?`?${n.join("&")}`:""}(n.queryParams),m="string"==typeof n.fragment?`#${function(r){return encodeURI(r)}(n.fragment)}`:"";return`${i}${h}${m}`}}const ott=new HH;function wL(r){return r.segments.map(n=>qH(n)).join("/")}function oN(r,n){if(!r.hasChildren())return wL(r);if(n){const i=r.children[v_]?oN(r.children[v_],!1):"",h=[];return Ex(r.children,(m,I)=>{I!==v_&&h.push(`${I}:${oN(m,!1)}`)}),h.length>0?`${i}(${h.join("//")})`:i}{const i=function(r,n){let i=[];return Ex(r.children,(h,m)=>{m===v_&&(i=i.concat(n(h,m)))}),Ex(r.children,(h,m)=>{m!==v_&&(i=i.concat(n(h,m)))}),i}(r,(h,m)=>m===v_?[oN(r.children[v_],!1)]:[`${m}:${oN(h,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[v_]?`${wL(r)}/${i[0]}`:`${wL(r)}/(${i.join("//")})`}}function UH(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xL(r){return UH(r).replace(/%3B/gi,";")}function T6(r){return UH(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function EL(r){return decodeURIComponent(r)}function GH(r){return EL(r.replace(/\+/g,"%20"))}function qH(r){return`${T6(r.path)}${function(r){return Object.keys(r).map(n=>`;${T6(n)}=${T6(r[n])}`).join("")}(r.parameters)}`}const ltt=/^[^\/()?;=#]+/;function AL(r){const n=r.match(ltt);return n?n[0]:""}const ctt=/^[^=?&#]+/,ftt=/^[^?&#]+/;class dtt{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new C_([],{}):new C_([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(n.length>0||Object.keys(i).length>0)&&(h[v_]=new C_(n,i)),h}parseSegment(){const n=AL(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new iN(EL(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const i=AL(this.remaining);if(!i)return;this.capture(i);let h="";if(this.consumeOptional("=")){const m=AL(this.remaining);m&&(h=m,this.capture(h))}n[EL(i)]=EL(h)}parseQueryParam(n){const i=function(r){const n=r.match(ctt);return n?n[0]:""}(this.remaining);if(!i)return;this.capture(i);let h="";if(this.consumeOptional("=")){const z=function(r){const n=r.match(ftt);return n?n[0]:""}(this.remaining);z&&(h=z,this.capture(h))}const m=GH(i),I=GH(h);if(n.hasOwnProperty(m)){let z=n[m];Array.isArray(z)||(z=[z],n[m]=z),z.push(I)}else n[m]=I}parseParens(n){const i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=AL(this.remaining),m=this.remaining[h.length];if("/"!==m&&")"!==m&&";"!==m)throw new Error(`Cannot parse url '${this.url}'`);let I;h.indexOf(":")>-1?(I=h.substr(0,h.indexOf(":")),this.capture(I),this.capture(":")):n&&(I=v_);const z=this.parseChildren();i[I]=1===Object.keys(z).length?z[v_]:new C_([],z),this.consumeOptional("//")}return i}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class WH{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const i=this.pathFromRoot(n);return i.length>1?i[i.length-2]:null}children(n){const i=D6(n,this._root);return i?i.children.map(h=>h.value):[]}firstChild(n){const i=D6(n,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(n){const i=S6(n,this._root);return i.length<2?[]:i[i.length-2].children.map(m=>m.value).filter(m=>m!==n)}pathFromRoot(n){return S6(n,this._root).map(i=>i.value)}}function D6(r,n){if(r===n.value)return n;for(const i of n.children){const h=D6(r,i);if(h)return h}return null}function S6(r,n){if(r===n.value)return[n];for(const i of n.children){const h=S6(r,i);if(h.length)return h.unshift(n),h}return[]}class xC{constructor(n,i){this.value=n,this.children=i}toString(){return`TreeNode(${this.value})`}}function sN(r){const n={};return r&&r.children.forEach(i=>n[i.value.outlet]=i),n}class YH extends WH{constructor(n,i){super(n),this.snapshot=i,M6(this,n)}toString(){return this.snapshot.toString()}}function $H(r,n){const i=function(r,n){const z=new CL([],{},{},"",{},v_,n,null,r.root,-1,{});return new ZH("",new xC(z,[]))}(r,n),h=new W2([new iN("",{})]),m=new W2({}),I=new W2({}),z=new W2({}),X=new W2(""),_r=new sS(h,m,z,X,I,v_,n,i.root);return _r.snapshot=i.root,new YH(new xC(_r,[]),i)}class sS{constructor(n,i,h,m,I,z,X,_r){this.url=n,this.params=i,this.queryParams=h,this.fragment=m,this.data=I,this.outlet=z,this.component=X,this._futureSnapshot=_r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(k_(n=>rI(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(k_(n=>rI(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KH(r,n="emptyOnly"){const i=r.pathFromRoot;let h=0;if("always"!==n)for(h=i.length-1;h>=1;){const m=i[h],I=i[h-1];if(m.routeConfig&&""===m.routeConfig.path)h--;else{if(I.component)break;h--}}return function(r){return r.reduce((n,i)=>({params:Object.assign(Object.assign({},n.params),i.params),data:Object.assign(Object.assign({},n.data),i.data),resolve:Object.assign(Object.assign({},n.resolve),i._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(h))}class CL{constructor(n,i,h,m,I,z,X,_r,ga,_h,od){this.url=n,this.params=i,this.queryParams=h,this.fragment=m,this.data=I,this.outlet=z,this.component=X,this.routeConfig=_r,this._urlSegment=ga,this._lastPathIndex=_h,this._resolve=od}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rI(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rI(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZH extends WH{constructor(n,i){super(i),this.url=n,M6(this,i)}toString(){return XH(this._root)}}function M6(r,n){n.value._routerState=r,n.children.forEach(i=>M6(r,i))}function XH(r){const n=r.children.length>0?` { ${r.children.map(XH).join(", ")} } `:"";return`${r.value}${n}`}function I6(r){if(r.snapshot){const n=r.snapshot,i=r._futureSnapshot;r.snapshot=i,TA(n.queryParams,i.queryParams)||r.queryParams.next(i.queryParams),n.fragment!==i.fragment&&r.fragment.next(i.fragment),TA(n.params,i.params)||r.params.next(i.params),function(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;++i)if(!TA(r[i],n[i]))return!1;return!0}(n.url,i.url)||r.url.next(i.url),TA(n.data,i.data)||r.data.next(i.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function k6(r,n){const i=TA(r.params,n.params)&&function(r,n){return oS(r,n)&&r.every((i,h)=>TA(i.parameters,n[h].parameters))}(r.url,n.url);return i&&!(!r.parent!=!n.parent)&&(!r.parent||k6(r.parent,n.parent))}function TL(r,n,i){if(i&&r.shouldReuseRoute(n.value,i.value.snapshot)){const h=i.value;h._futureSnapshot=n.value;const m=function(r,n,i){return n.children.map(h=>{for(const m of i.children)if(r.shouldReuseRoute(h.value,m.value.snapshot))return TL(r,h,m);return TL(r,h)})}(r,n,i);return new xC(h,m)}{if(r.shouldAttach(n.value)){const I=r.retrieve(n.value);if(null!==I){const z=I.route;return QH(n,z),z}}const h=function(r){return new sS(new W2(r.url),new W2(r.params),new W2(r.queryParams),new W2(r.fragment),new W2(r.data),r.outlet,r.component,r)}(n.value),m=n.children.map(I=>TL(r,I));return new xC(h,m)}}function QH(r,n){if(r.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=r.value;for(let i=0;i<r.children.length;++i)QH(r.children[i],n.children[i])}function DL(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function aN(r){return"object"==typeof r&&null!=r&&r.outlets}function O6(r,n,i,h,m){let I={};return h&&Ex(h,(z,X)=>{I[X]=Array.isArray(z)?z.map(_r=>`${_r}`):`${z}`}),new iS(i.root===r?n:JH(i.root,r,n),I,m)}function JH(r,n,i){const h={};return Ex(r.children,(m,I)=>{h[I]=m===n?i:JH(m,n,i)}),new C_(r.segments,h)}class tU{constructor(n,i,h){if(this.isAbsolute=n,this.numberOfDoubleDots=i,this.commands=h,n&&h.length>0&&DL(h[0]))throw new Error("Root segment cannot have matrix parameters");const m=h.find(aN);if(m&&m!==LH(h))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R6{constructor(n,i,h){this.segmentGroup=n,this.processChildren=i,this.index=h}}function eU(r,n,i){if(r||(r=new C_([],{})),0===r.segments.length&&r.hasChildren())return SL(r,n,i);const h=function(r,n,i){let h=0,m=n;const I={match:!1,pathIndex:0,commandIndex:0};for(;m<r.segments.length;){if(h>=i.length)return I;const z=r.segments[m],X=i[h];if(aN(X))break;const _r=`${X}`,ga=h<i.length-1?i[h+1]:null;if(m>0&&void 0===_r)break;if(_r&&ga&&"object"==typeof ga&&void 0===ga.outlets){if(!rU(_r,ga,z))return I;h+=2}else{if(!rU(_r,{},z))return I;h++}m++}return{match:!0,pathIndex:m,commandIndex:h}}(r,n,i),m=i.slice(h.commandIndex);if(h.match&&h.pathIndex<r.segments.length){const I=new C_(r.segments.slice(0,h.pathIndex),{});return I.children[v_]=new C_(r.segments.slice(h.pathIndex),r.children),SL(I,0,m)}return h.match&&0===m.length?new C_(r.segments,{}):h.match&&!r.hasChildren()?N6(r,n,i):h.match?SL(r,0,m):N6(r,n,i)}function SL(r,n,i){if(0===i.length)return new C_(r.segments,{});{const h=function(r){return aN(r[0])?r[0].outlets:{[v_]:r}}(i),m={};return Ex(h,(I,z)=>{"string"==typeof I&&(I=[I]),null!==I&&(m[z]=eU(r.children[z],n,I))}),Ex(r.children,(I,z)=>{void 0===h[z]&&(m[z]=I)}),new C_(r.segments,m)}}function N6(r,n,i){const h=r.segments.slice(0,n);let m=0;for(;m<i.length;){const I=i[m];if(aN(I)){const _r=Ttt(I.outlets);return new C_(h,_r)}if(0===m&&DL(i[0])){h.push(new iN(r.segments[n].path,nU(i[0]))),m++;continue}const z=aN(I)?I.outlets[v_]:`${I}`,X=m<i.length-1?i[m+1]:null;z&&X&&DL(X)?(h.push(new iN(z,nU(X))),m+=2):(h.push(new iN(z,{})),m++)}return new C_(h,{})}function Ttt(r){const n={};return Ex(r,(i,h)=>{"string"==typeof i&&(i=[i]),null!==i&&(n[h]=N6(new C_([],{}),0,i))}),n}function nU(r){const n={};return Ex(r,(i,h)=>n[h]=`${i}`),n}function rU(r,n,i){return r==i.path&&TA(n,i.parameters)}class Stt{constructor(n,i,h,m){this.routeReuseStrategy=n,this.futureState=i,this.currState=h,this.forwardEvent=m}activate(n){const i=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,h,n),I6(this.futureState.root),this.activateChildRoutes(i,h,n)}deactivateChildRoutes(n,i,h){const m=sN(i);n.children.forEach(I=>{const z=I.value.outlet;this.deactivateRoutes(I,m[z],h),delete m[z]}),Ex(m,(I,z)=>{this.deactivateRouteAndItsChildren(I,h)})}deactivateRoutes(n,i,h){const m=n.value,I=i?i.value:null;if(m===I)if(m.component){const z=h.getContext(m.outlet);z&&this.deactivateChildRoutes(n,i,z.children)}else this.deactivateChildRoutes(n,i,h);else I&&this.deactivateRouteAndItsChildren(i,h)}deactivateRouteAndItsChildren(n,i){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,i):this.deactivateRouteAndOutlet(n,i)}detachAndStoreRouteSubtree(n,i){const h=i.getContext(n.value.outlet);if(h&&h.outlet){const m=h.outlet.detach(),I=h.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:m,route:n,contexts:I})}}deactivateRouteAndOutlet(n,i){const h=i.getContext(n.value.outlet),m=h&&n.value.component?h.children:i,I=sN(n);for(const z of Object.keys(I))this.deactivateRouteAndItsChildren(I[z],m);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(n,i,h){const m=sN(i);n.children.forEach(I=>{this.activateRoutes(I,m[I.value.outlet],h),this.forwardEvent(new $J(I.value.snapshot))}),n.children.length&&this.forwardEvent(new WJ(n.value.snapshot))}activateRoutes(n,i,h){const m=n.value,I=i?i.value:null;if(I6(m),m===I)if(m.component){const z=h.getOrCreateContext(m.outlet);this.activateChildRoutes(n,i,z.children)}else this.activateChildRoutes(n,i,h);else if(m.component){const z=h.getOrCreateContext(m.outlet);if(this.routeReuseStrategy.shouldAttach(m.snapshot)){const X=this.routeReuseStrategy.retrieve(m.snapshot);this.routeReuseStrategy.store(m.snapshot,null),z.children.onOutletReAttached(X.contexts),z.attachRef=X.componentRef,z.route=X.route.value,z.outlet&&z.outlet.attach(X.componentRef,X.route.value),iU(X.route)}else{const X=function(r){for(let n=r.parent;n;n=n.parent){const i=n.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig;if(i&&i.component)return null}return null}(m.snapshot),_r=X?X.module.componentFactoryResolver:null;z.attachRef=null,z.route=m,z.resolver=_r,z.outlet&&z.outlet.activateWith(m,_r),this.activateChildRoutes(n,null,z.children)}}else this.activateChildRoutes(n,null,h)}}function iU(r){I6(r.value),r.children.forEach(iU)}class P6{constructor(n,i){this.routes=n,this.module=i}}function DT(r){return"function"==typeof r}function aS(r){return r instanceof iS}const uN=Symbol("INITIAL_VALUE");function lN(){return CT(r=>function(...r){let n,i;return Y2(r[r.length-1])&&(i=r.pop()),"function"==typeof r[r.length-1]&&(n=r.pop()),1===r.length&&Ki(r[0])&&(r=r[0]),mE(r,i).lift(new hJ(n))}(r.map(n=>n.pipe(w6(1),function(...r){const n=r[r.length-1];return Y2(n)?(r.pop(),i=>_6(r,i,n)):i=>_6(r,i)}(uN)))).pipe(TH((n,i)=>{let h=!1;return i.reduce((m,I,z)=>m!==uN?m:(I===uN&&(h=!0),h||!1!==I&&z!==i.length-1&&!aS(I)?m:I),n)},uN),eI(n=>n!==uN),k_(n=>aS(n)?n:!0===n),w6(1)))}let oU=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_c({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,h){1&i&&h1(0,"router-outlet")},directives:function(){return[z6]},encapsulation:2}),r})();function sU(r,n=""){for(let i=0;i<r.length;i++){const h=r[i];Ptt(h,Ltt(n,h))}}function Ptt(r,n){r.children&&sU(r.children,n)}function Ltt(r,n){return n?r||n.path?r&&!n.path?`${r}/`:!r&&n.path?n.path:`${r}/${n.path}`:"":r}function L6(r){const n=r.children&&r.children.map(L6),i=n?Object.assign(Object.assign({},r),{children:n}):Object.assign({},r);return!i.component&&(n||i.loadChildren)&&i.outlet&&i.outlet!==v_&&(i.component=oU),i}function a2(r){return r.outlet||v_}function aU(r,n){const i=r.filter(h=>a2(h)===n);return i.push(...r.filter(h=>a2(h)!==n)),i}const uU={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ML(r,n,i){var h;if(""===n.path)return"full"===n.pathMatch&&(r.hasChildren()||i.length>0)?Object.assign({},uU):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const I=(n.matcher||XJ)(i,r,n);if(!I)return Object.assign({},uU);const z={};Ex(I.posParams,(_r,ga)=>{z[ga]=_r.path});const X=I.consumed.length>0?Object.assign(Object.assign({},z),I.consumed[I.consumed.length-1].parameters):z;return{matched:!0,consumedSegments:I.consumed,lastChild:I.consumed.length,parameters:X,positionalParamSegments:null!==(h=I.posParams)&&void 0!==h?h:{}}}function IL(r,n,i,h,m="corrected"){if(i.length>0&&function(r,n,i){return i.some(h=>kL(r,n,h)&&a2(h)!==v_)}(r,i,h)){const z=new C_(n,function(r,n,i,h){const m={};m[v_]=h,h._sourceSegment=r,h._segmentIndexShift=n.length;for(const I of i)if(""===I.path&&a2(I)!==v_){const z=new C_([],{});z._sourceSegment=r,z._segmentIndexShift=n.length,m[a2(I)]=z}return m}(r,n,h,new C_(i,r.children)));return z._sourceSegment=r,z._segmentIndexShift=n.length,{segmentGroup:z,slicedSegments:[]}}if(0===i.length&&function(r,n,i){return i.some(h=>kL(r,n,h))}(r,i,h)){const z=new C_(r.segments,function(r,n,i,h,m,I){const z={};for(const X of h)if(kL(r,i,X)&&!m[a2(X)]){const _r=new C_([],{});_r._sourceSegment=r,_r._segmentIndexShift="legacy"===I?r.segments.length:n.length,z[a2(X)]=_r}return Object.assign(Object.assign({},m),z)}(r,n,i,h,r.children,m));return z._sourceSegment=r,z._segmentIndexShift=n.length,{segmentGroup:z,slicedSegments:i}}const I=new C_(r.segments,r.children);return I._sourceSegment=r,I._segmentIndexShift=n.length,{segmentGroup:I,slicedSegments:i}}function kL(r,n,i){return(!(r.hasChildren()||n.length>0)||"full"!==i.pathMatch)&&""===i.path}function lU(r,n,i,h){return!!(a2(r)===h||h!==v_&&kL(n,i,r))&&("**"===r.path||ML(n,r,i).matched)}function cU(r,n,i){return 0===n.length&&!r.children[i]}class cN{constructor(n){this.segmentGroup=n||null}}class hU{constructor(n){this.urlTree=n}}function OL(r){return new S0(n=>n.error(new cN(r)))}function fU(r){return new S0(n=>n.error(new hU(r)))}function ztt(r){return new S0(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class Gtt{constructor(n,i,h,m,I){this.configLoader=i,this.urlSerializer=h,this.urlTree=m,this.config=I,this.allowRedirects=!0,this.ngModule=n.get(EA)}apply(){const n=IL(this.urlTree.root,[],[],this.config).segmentGroup,i=new C_(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,i,v_).pipe(k_(I=>this.createUrlTree(F6(I),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rS(I=>{if(I instanceof hU)return this.allowRedirects=!1,this.match(I.urlTree);throw I instanceof cN?this.noMatchError(I):I}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,v_).pipe(k_(m=>this.createUrlTree(F6(m),n.queryParams,n.fragment))).pipe(rS(m=>{throw m instanceof cN?this.noMatchError(m):m}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,i,h){const m=n.segments.length>0?new C_([],{[v_]:n}):n;return new iS(m,i,h)}expandSegmentGroup(n,i,h,m){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(n,i,h).pipe(k_(I=>new C_([],I))):this.expandSegment(n,h,i,h.segments,m,!0)}expandChildren(n,i,h){const m=[];for(const I of Object.keys(h.children))"primary"===I?m.unshift(I):m.push(I);return f1(m).pipe(nN(I=>{const z=h.children[I],X=aU(i,I);return this.expandSegmentGroup(n,X,z,I).pipe(k_(_r=>({segment:_r,outlet:I})))}),TH((I,z)=>(I[z.outlet]=z.segment,I),{}),function(r,n){const i=arguments.length>=2;return h=>h.pipe(r?eI((m,I)=>r(m,I,h)):O0,x6(1),i?SH(n):DH(()=>new _L))}())}expandSegment(n,i,h,m,I,z){return f1(h).pipe(nN(X=>this.expandSegmentAgainstRoute(n,i,h,X,m,I,z).pipe(rS(ga=>{if(ga instanceof cN)return s_(null);throw ga}))),nI(X=>!!X),rS((X,_r)=>{if(X instanceof _L||"EmptyError"===X.name){if(cU(i,m,I))return s_(new C_([],{}));throw new cN(i)}throw X}))}expandSegmentAgainstRoute(n,i,h,m,I,z,X){return lU(m,i,I,z)?void 0===m.redirectTo?this.matchSegmentAgainstRoute(n,i,m,I,z):X&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,i,h,m,I,z):OL(i):OL(i)}expandSegmentAgainstRouteUsingRedirect(n,i,h,m,I,z){return"**"===m.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,h,m,z):this.expandRegularSegmentAgainstRouteUsingRedirect(n,i,h,m,I,z)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,h,m){const I=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?fU(I):this.lineralizeSegments(h,I).pipe(m1(z=>{const X=new C_(z,{});return this.expandSegment(n,X,i,z,m,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,i,h,m,I,z){const{matched:X,consumedSegments:_r,lastChild:ga,positionalParamSegments:_h}=ML(i,m,I);if(!X)return OL(i);const od=this.applyRedirectCommands(_r,m.redirectTo,_h);return m.redirectTo.startsWith("/")?fU(od):this.lineralizeSegments(m,od).pipe(m1(ey=>this.expandSegment(n,i,h,ey.concat(I.slice(ga)),z,!1)))}matchSegmentAgainstRoute(n,i,h,m,I){if("**"===h.path)return h.loadChildren?(h._loadedConfig?s_(h._loadedConfig):this.configLoader.load(n.injector,h)).pipe(k_(ey=>(h._loadedConfig=ey,new C_(m,{})))):s_(new C_(m,{}));const{matched:z,consumedSegments:X,lastChild:_r}=ML(i,h,m);if(!z)return OL(i);const ga=m.slice(_r);return this.getChildConfig(n,h,m).pipe(m1(od=>{const ey=od.module,ay=od.routes,{segmentGroup:vy,slicedSegments:Iy}=IL(i,X,ga,ay),xy=new C_(vy.segments,vy.children);if(0===Iy.length&&xy.hasChildren())return this.expandChildren(ey,ay,xy).pipe(k_(D0=>new C_(X,D0)));if(0===ay.length&&0===Iy.length)return s_(new C_(X,{}));const Zy=a2(h)===I;return this.expandSegment(ey,xy,ay,Iy,Zy?v_:I,!0).pipe(k_(f0=>new C_(X.concat(f0.segments),f0.children)))}))}getChildConfig(n,i,h){return i.children?s_(new P6(i.children,n)):i.loadChildren?void 0!==i._loadedConfig?s_(i._loadedConfig):this.runCanLoadGuards(n.injector,i,h).pipe(m1(m=>m?this.configLoader.load(n.injector,i).pipe(k_(I=>(i._loadedConfig=I,I))):function(r){return new S0(n=>n.error(A6(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(i))):s_(new P6([],n))}runCanLoadGuards(n,i,h){const m=i.canLoad;if(!m||0===m.length)return s_(!0);const I=m.map(z=>{const X=n.get(z);let _r;if(function(r){return r&&DT(r.canLoad)}(X))_r=X.canLoad(i,h);else{if(!DT(X))throw new Error("Invalid CanLoad guard");_r=X(i,h)}return DA(_r)});return s_(I).pipe(lN(),PE(z=>{if(!aS(z))return;const X=A6(`Redirecting to "${this.urlSerializer.serialize(z)}"`);throw X.url=z,X}),k_(z=>!0===z))}lineralizeSegments(n,i){let h=[],m=i.root;for(;;){if(h=h.concat(m.segments),0===m.numberOfChildren)return s_(h);if(m.numberOfChildren>1||!m.children[v_])return ztt(n.redirectTo);m=m.children[v_]}}applyRedirectCommands(n,i,h){return this.applyRedirectCreatreUrlTree(i,this.urlSerializer.parse(i),n,h)}applyRedirectCreatreUrlTree(n,i,h,m){const I=this.createSegmentGroup(n,i.root,h,m);return new iS(I,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(n,i){const h={};return Ex(n,(m,I)=>{if("string"==typeof m&&m.startsWith(":")){const X=m.substring(1);h[I]=i[X]}else h[I]=m}),h}createSegmentGroup(n,i,h,m){const I=this.createSegments(n,i.segments,h,m);let z={};return Ex(i.children,(X,_r)=>{z[_r]=this.createSegmentGroup(n,X,h,m)}),new C_(I,z)}createSegments(n,i,h,m){return i.map(I=>I.path.startsWith(":")?this.findPosParam(n,I,m):this.findOrReturn(I,h))}findPosParam(n,i,h){const m=h[i.path.substring(1)];if(!m)throw new Error(`Cannot redirect to '${n}'. Cannot find '${i.path}'.`);return m}findOrReturn(n,i){let h=0;for(const m of i){if(m.path===n.path)return i.splice(h),m;h++}return n}}function F6(r){const n={};for(const h of Object.keys(r.children)){const I=F6(r.children[h]);(I.segments.length>0||I.hasChildren())&&(n[h]=I)}return function(r){if(1===r.numberOfChildren&&r.children[v_]){const n=r.children[v_];return new C_(r.segments.concat(n.segments),n.children)}return r}(new C_(r.segments,n))}class pU{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class RL{constructor(n,i){this.component=n,this.route=i}}function Ytt(r,n,i){const h=r._root;return hN(h,n?n._root:null,i,[h.value])}function NL(r,n,i){const h=function(r){if(!r)return null;for(let n=r.parent;n;n=n.parent){const i=n.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig}return null}(n);return(h?h.module.injector:i).get(r)}function hN(r,n,i,h,m={canDeactivateChecks:[],canActivateChecks:[]}){const I=sN(n);return r.children.forEach(z=>{(function(r,n,i,h,m={canDeactivateChecks:[],canActivateChecks:[]}){const I=r.value,z=n?n.value:null,X=i?i.getContext(r.value.outlet):null;if(z&&I.routeConfig===z.routeConfig){const _r=function(r,n,i){if("function"==typeof i)return i(r,n);switch(i){case"pathParamsChange":return!oS(r.url,n.url);case"pathParamsOrQueryParamsChange":return!oS(r.url,n.url)||!TA(r.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!k6(r,n)||!TA(r.queryParams,n.queryParams);default:return!k6(r,n)}}(z,I,I.routeConfig.runGuardsAndResolvers);_r?m.canActivateChecks.push(new pU(h)):(I.data=z.data,I._resolvedData=z._resolvedData),hN(r,n,I.component?X?X.children:null:i,h,m),_r&&X&&X.outlet&&X.outlet.isActivated&&m.canDeactivateChecks.push(new RL(X.outlet.component,z))}else z&&fN(n,X,m),m.canActivateChecks.push(new pU(h)),hN(r,null,I.component?X?X.children:null:i,h,m)})(z,I[z.value.outlet],i,h.concat([z.value]),m),delete I[z.value.outlet]}),Ex(I,(z,X)=>fN(z,i.getContext(X),m)),m}function fN(r,n,i){const h=sN(r),m=r.value;Ex(h,(I,z)=>{fN(I,m.component?n?n.children.getContext(z):null:n,i)}),i.canDeactivateChecks.push(new RL(m.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,m))}class set{}function dU(r){return new S0(n=>n.error(r))}class uet{constructor(n,i,h,m,I,z){this.rootComponentType=n,this.config=i,this.urlTree=h,this.url=m,this.paramsInheritanceStrategy=I,this.relativeLinkResolution=z}recognize(){const n=IL(this.urlTree.root,[],[],this.config.filter(z=>void 0===z.redirectTo),this.relativeLinkResolution).segmentGroup,i=this.processSegmentGroup(this.config,n,v_);if(null===i)return null;const h=new CL([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},v_,this.rootComponentType,null,this.urlTree.root,-1,{}),m=new xC(h,i),I=new ZH(this.url,m);return this.inheritParamsAndData(I._root),I}inheritParamsAndData(n){const i=n.value,h=KH(i,this.paramsInheritanceStrategy);i.params=Object.freeze(h.params),i.data=Object.freeze(h.data),n.children.forEach(m=>this.inheritParamsAndData(m))}processSegmentGroup(n,i,h){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,i):this.processSegment(n,i,i.segments,h)}processChildren(n,i){const h=[];for(const I of Object.keys(i.children)){const z=i.children[I],X=aU(n,I),_r=this.processSegmentGroup(X,z,I);if(null===_r)return null;h.push(..._r)}const m=gU(h);return function(r){r.sort((n,i)=>n.value.outlet===v_?-1:i.value.outlet===v_?1:n.value.outlet.localeCompare(i.value.outlet))}(m),m}processSegment(n,i,h,m){for(const I of n){const z=this.processSegmentAgainstRoute(I,i,h,m);if(null!==z)return z}return cU(i,h,m)?[]:null}processSegmentAgainstRoute(n,i,h,m){if(n.redirectTo||!lU(n,i,h,m))return null;let I,z=[],X=[];if("**"===n.path){const ay=h.length>0?LH(h).parameters:{};I=new CL(h,ay,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vU(n),a2(n),n.component,n,yU(i),mU(i)+h.length,_U(n))}else{const ay=ML(i,n,h);if(!ay.matched)return null;z=ay.consumedSegments,X=h.slice(ay.lastChild),I=new CL(z,ay.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,vU(n),a2(n),n.component,n,yU(i),mU(i)+z.length,_U(n))}const _r=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(n),{segmentGroup:ga,slicedSegments:_h}=IL(i,z,X,_r.filter(ay=>void 0===ay.redirectTo),this.relativeLinkResolution);if(0===_h.length&&ga.hasChildren()){const ay=this.processChildren(_r,ga);return null===ay?null:[new xC(I,ay)]}if(0===_r.length&&0===_h.length)return[new xC(I,[])];const od=a2(n)===m,ey=this.processSegment(_r,ga,_h,od?v_:m);return null===ey?null:[new xC(I,ey)]}}function fet(r){const n=r.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function gU(r){const n=[],i=new Set;for(const h of r){if(!fet(h)){n.push(h);continue}const m=n.find(I=>h.value.routeConfig===I.value.routeConfig);void 0!==m?(m.children.push(...h.children),i.add(m)):n.push(h)}for(const h of i){const m=gU(h.children);n.push(new xC(h.value,m))}return n.filter(h=>!i.has(h))}function yU(r){let n=r;for(;n._sourceSegment;)n=n._sourceSegment;return n}function mU(r){let n=r,i=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,i+=n._segmentIndexShift?n._segmentIndexShift:0;return i-1}function vU(r){return r.data||{}}function _U(r){return r.resolve||{}}function j6(r){return CT(n=>{const i=r(n);return i?f1(i).pipe(k_(()=>n)):s_(n)})}class bet extends class{shouldDetach(n){return!1}store(n,i){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,i){return n.routeConfig===i.routeConfig}}{}const V6=new p_("ROUTES");class bU{constructor(n,i,h,m){this.loader=n,this.compiler=i,this.onLoadStartListener=h,this.onLoadEndListener=m}load(n,i){if(i._loader$)return i._loader$;this.onLoadStartListener&&this.onLoadStartListener(i);const m=this.loadModuleFactory(i.loadChildren).pipe(k_(I=>{this.onLoadEndListener&&this.onLoadEndListener(i);const z=I.create(n);return new P6(PH(z.injector.get(V6,void 0,M0.Self|M0.Optional)).map(L6),z)}),rS(I=>{throw i._loader$=void 0,I}));return i._loader$=new pS(m,()=>new W_).pipe(jE()),i._loader$}loadModuleFactory(n){return"string"==typeof n?f1(this.loader.load(n)):DA(n()).pipe(m1(i=>i instanceof QV?s_(i):f1(this.compiler.compileModuleAsync(i))))}}class wet{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new iI,this.attachRef=null}}class iI{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const h=this.getOrCreateContext(n);h.outlet=i,this.contexts.set(n,h)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new wet,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}class Eet{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}}function Aet(r){throw r}function Cet(r,n,i){return n.parse("/")}function wU(r,n){return s_(null)}const Tet={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Det={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rE=(()=>{class r{constructor(i,h,m,I,z,X,_r,ga){this.rootComponentType=i,this.urlSerializer=h,this.rootContexts=m,this.location=I,this.config=ga,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new W_,this.errorHandler=Aet,this.malformedUriErrorHandler=Cet,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wU,afterPreactivation:wU},this.urlHandlingStrategy=new Eet,this.routeReuseStrategy=new bet,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=z.get(EA),this.console=z.get(P3);const ey=z.get(Y1);this.isNgZoneEnabled=ey instanceof Y1&&Y1.isInAngularZone(),this.resetConfig(ga),this.currentUrlTree=new iS(new C_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bU(X,_r,ay=>this.triggerEvent(new IH(ay)),ay=>this.triggerEvent(new kH(ay))),this.routerState=$H(this.currentUrlTree,this.rootComponentType),this.transitions=new W2({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var i;return null===(i=this.location.getState())||void 0===i?void 0:i.\u0275routerPageId}setupNavigations(i){const h=this.events;return i.pipe(eI(m=>0!==m.id),k_(m=>Object.assign(Object.assign({},m),{extractedUrl:this.urlHandlingStrategy.extract(m.rawUrl)})),CT(m=>{let I=!1,z=!1;return s_(m).pipe(PE(X=>{this.currentNavigation={id:X.id,initialUrl:X.currentRawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),CT(X=>{const _r=this.browserUrlTree.toString(),ga=!this.navigated||X.extractedUrl.toString()!==_r||_r!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ga)&&this.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return PL(X.source)&&(this.browserUrlTree=X.extractedUrl),s_(X).pipe(CT(od=>{const ey=this.transitions.getValue();return h.next(new E6(od.id,this.serializeUrl(od.extractedUrl),od.source,od.restoredState)),ey!==this.transitions.getValue()?tI:Promise.resolve(od)}),function(r,n,i,h){return CT(m=>function(r,n,i,h,m){return new Gtt(r,n,i,h,m).apply()}(r,n,i,m.extractedUrl,h).pipe(k_(I=>Object.assign(Object.assign({},m),{urlAfterRedirects:I}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),PE(od=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:od.urlAfterRedirects})}),function(r,n,i,h,m){return m1(I=>function(r,n,i,h,m="emptyOnly",I="legacy"){try{const z=new uet(r,n,i,h,m,I).recognize();return null===z?dU(new set):s_(z)}catch(z){return dU(z)}}(r,n,I.urlAfterRedirects,i(I.urlAfterRedirects),h,m).pipe(k_(z=>Object.assign(Object.assign({},I),{targetSnapshot:z}))))}(this.rootComponentType,this.config,od=>this.serializeUrl(od),this.paramsInheritanceStrategy,this.relativeLinkResolution),PE(od=>{"eager"===this.urlUpdateStrategy&&(od.extras.skipLocationChange||this.setBrowserUrl(od.urlAfterRedirects,od),this.browserUrlTree=od.urlAfterRedirects);const ey=new BJ(od.id,this.serializeUrl(od.extractedUrl),this.serializeUrl(od.urlAfterRedirects),od.targetSnapshot);h.next(ey)}));if(ga&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ey,extractedUrl:ay,source:vy,restoredState:Iy,extras:xy}=X,Zy=new E6(ey,this.serializeUrl(ay),vy,Iy);h.next(Zy);const Py=$H(ay,this.rootComponentType).snapshot;return s_(Object.assign(Object.assign({},X),{targetSnapshot:Py,urlAfterRedirects:ay,extras:Object.assign(Object.assign({},xy),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=X.rawUrl,this.browserUrlTree=X.urlAfterRedirects,X.resolve(null),tI}),j6(X=>{const{targetSnapshot:_r,id:ga,extractedUrl:_h,rawUrl:od,extras:{skipLocationChange:ey,replaceUrl:ay}}=X;return this.hooks.beforePreactivation(_r,{navigationId:ga,appliedUrlTree:_h,rawUrlTree:od,skipLocationChange:!!ey,replaceUrl:!!ay})}),PE(X=>{const _r=new zJ(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(_r)}),k_(X=>Object.assign(Object.assign({},X),{guards:Ytt(X.targetSnapshot,X.currentSnapshot,this.rootContexts)})),function(r,n){return m1(i=>{const{targetSnapshot:h,currentSnapshot:m,guards:{canActivateChecks:I,canDeactivateChecks:z}}=i;return 0===z.length&&0===I.length?s_(Object.assign(Object.assign({},i),{guardsResult:!0})):function(r,n,i,h){return f1(r).pipe(m1(m=>function(r,n,i,h,m){const I=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return I&&0!==I.length?s_(I.map(X=>{const _r=NL(X,n,m);let ga;if(function(r){return r&&DT(r.canDeactivate)}(_r))ga=DA(_r.canDeactivate(r,n,i,h));else{if(!DT(_r))throw new Error("Invalid CanDeactivate guard");ga=DA(_r(r,n,i,h))}return ga.pipe(nI())})).pipe(lN()):s_(!0)}(m.component,m.route,i,n,h)),nI(m=>!0!==m,!0))}(z,h,m,r).pipe(m1(X=>X&&function(r){return"boolean"==typeof r}(X)?function(r,n,i,h){return f1(n).pipe(nN(m=>_6(function(r,n){return null!==r&&n&&n(new qJ(r)),s_(!0)}(m.route.parent,h),function(r,n){return null!==r&&n&&n(new YJ(r)),s_(!0)}(m.route,h),function(r,n,i){const h=n[n.length-1],I=n.slice(0,n.length-1).reverse().map(z=>function(r){const n=r.routeConfig?r.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:r,guards:n}:null}(z)).filter(z=>null!==z).map(z=>AH(()=>s_(z.guards.map(_r=>{const ga=NL(_r,z.node,i);let _h;if(function(r){return r&&DT(r.canActivateChild)}(ga))_h=DA(ga.canActivateChild(h,r));else{if(!DT(ga))throw new Error("Invalid CanActivateChild guard");_h=DA(ga(h,r))}return _h.pipe(nI())})).pipe(lN())));return s_(I).pipe(lN())}(r,m.path,i),function(r,n,i){const h=n.routeConfig?n.routeConfig.canActivate:null;if(!h||0===h.length)return s_(!0);const m=h.map(I=>AH(()=>{const z=NL(I,n,i);let X;if(function(r){return r&&DT(r.canActivate)}(z))X=DA(z.canActivate(n,r));else{if(!DT(z))throw new Error("Invalid CanActivate guard");X=DA(z(n,r))}return X.pipe(nI())}));return s_(m).pipe(lN())}(r,m.route,i))),nI(m=>!0!==m,!0))}(h,I,r,n):s_(X)),k_(X=>Object.assign(Object.assign({},i),{guardsResult:X})))})}(this.ngModule.injector,X=>this.triggerEvent(X)),PE(X=>{if(aS(X.guardsResult)){const ga=A6(`Redirecting to "${this.serializeUrl(X.guardsResult)}"`);throw ga.url=X.guardsResult,ga}const _r=new HJ(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.triggerEvent(_r)}),eI(X=>!!X.guardsResult||(this.restoreHistory(X),this.cancelNavigationTransition(X,""),!1)),j6(X=>{if(X.guards.canActivateChecks.length)return s_(X).pipe(PE(_r=>{const ga=new UJ(_r.id,this.serializeUrl(_r.extractedUrl),this.serializeUrl(_r.urlAfterRedirects),_r.targetSnapshot);this.triggerEvent(ga)}),CT(_r=>{let ga=!1;return s_(_r).pipe(function(r,n){return m1(i=>{const{targetSnapshot:h,guards:{canActivateChecks:m}}=i;if(!m.length)return s_(i);let I=0;return f1(m).pipe(nN(z=>function(r,n,i,h){return function(r,n,i,h){const m=Object.keys(r);if(0===m.length)return s_({});const I={};return f1(m).pipe(m1(z=>function(r,n,i,h){const m=NL(r,n,h);return DA(m.resolve?m.resolve(n,i):m(n,i))}(r[z],n,i,h).pipe(PE(X=>{I[z]=X}))),x6(1),m1(()=>Object.keys(I).length===m.length?s_(I):tI))}(r._resolve,r,n,h).pipe(k_(I=>(r._resolvedData=I,r.data=Object.assign(Object.assign({},r.data),KH(r,i).resolve),null)))}(z.route,h,r,n)),PE(()=>I++),x6(1),m1(z=>I===m.length?s_(i):tI))})}(this.paramsInheritanceStrategy,this.ngModule.injector),PE({next:()=>ga=!0,complete:()=>{ga||(this.restoreHistory(_r),this.cancelNavigationTransition(_r,"At least one route resolver didn't emit any value."))}}))}),PE(_r=>{const ga=new GJ(_r.id,this.serializeUrl(_r.extractedUrl),this.serializeUrl(_r.urlAfterRedirects),_r.targetSnapshot);this.triggerEvent(ga)}))}),j6(X=>{const{targetSnapshot:_r,id:ga,extractedUrl:_h,rawUrl:od,extras:{skipLocationChange:ey,replaceUrl:ay}}=X;return this.hooks.afterPreactivation(_r,{navigationId:ga,appliedUrlTree:_h,rawUrlTree:od,skipLocationChange:!!ey,replaceUrl:!!ay})}),k_(X=>{const _r=function(r,n,i){const h=TL(r,n._root,i?i._root:void 0);return new YH(h,n)}(this.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return Object.assign(Object.assign({},X),{targetRouterState:_r})}),PE(X=>{this.currentUrlTree=X.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),this.routerState=X.targetRouterState,"deferred"===this.urlUpdateStrategy&&(X.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,X),this.browserUrlTree=X.urlAfterRedirects)}),((r,n,i)=>k_(h=>(new Stt(n,h.targetRouterState,h.currentRouterState,i).activate(r),h)))(this.rootContexts,this.routeReuseStrategy,X=>this.triggerEvent(X)),PE({next(){I=!0},complete(){I=!0}}),function(r){return n=>n.lift(new FJ(r))}(()=>{var X;if(!I&&!z){const _r=`Navigation ID ${m.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(m),this.cancelNavigationTransition(m,_r)):this.cancelNavigationTransition(m,_r)}(null===(X=this.currentNavigation)||void 0===X?void 0:X.id)===m.id&&(this.currentNavigation=null)}),rS(X=>{if(z=!0,function(r){return r&&r[RH]}(X)){const _r=aS(X.url);_r||(this.navigated=!0,this.restoreHistory(m,!0));const ga=new MH(m.id,this.serializeUrl(m.extractedUrl),X.message);h.next(ga),_r?setTimeout(()=>{const _h=this.urlHandlingStrategy.merge(X.url,this.rawUrlTree),od={skipLocationChange:m.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PL(m.source)};this.scheduleNavigation(_h,"imperative",null,od,{resolve:m.resolve,reject:m.reject,promise:m.promise})},0):m.resolve(!1)}else{this.restoreHistory(m,!0);const _r=new VJ(m.id,this.serializeUrl(m.extractedUrl),X);h.next(_r);try{m.resolve(this.errorHandler(X))}catch(ga){m.reject(ga)}}return tI}))}))}resetRootComponentType(i){this.rootComponentType=i,this.routerState.root.component=this.rootComponentType}getTransition(){const i=this.transitions.value;return i.urlAfterRedirects=this.browserUrlTree,i}setTransition(i){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),i))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const h=this.extractLocationChangeInfoFromEvent(i);this.shouldScheduleNavigation(this.lastLocationChangeInfo,h)&&setTimeout(()=>{const{source:m,state:I,urlTree:z}=h,X={replaceUrl:!0};if(I){const _r=Object.assign({},I);delete _r.navigationId,delete _r.\u0275routerPageId,0!==Object.keys(_r).length&&(X.state=_r)}this.scheduleNavigation(z,m,I,X)},0),this.lastLocationChangeInfo=h}))}extractLocationChangeInfoFromEvent(i){var h;return{source:"popstate"===i.type?"popstate":"hashchange",urlTree:this.parseUrl(i.url),state:(null===(h=i.state)||void 0===h?void 0:h.navigationId)?i.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(i,h){if(!i)return!0;const m=h.urlTree.toString()===i.urlTree.toString();return h.transitionId!==i.transitionId||!m||!("hashchange"===h.source&&"popstate"===i.source||"popstate"===h.source&&"hashchange"===i.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(i){this.events.next(i)}resetConfig(i){sU(i),this.config=i.map(L6),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,h={}){const{relativeTo:m,queryParams:I,fragment:z,queryParamsHandling:X,preserveFragment:_r}=h,ga=m||this.routerState.root,_h=_r?this.currentUrlTree.fragment:z;let od=null;switch(X){case"merge":od=Object.assign(Object.assign({},this.currentUrlTree.queryParams),I);break;case"preserve":od=this.currentUrlTree.queryParams;break;default:od=I||null}return null!==od&&(od=this.removeEmptyProps(od)),function(r,n,i,h,m){if(0===i.length)return O6(n.root,n.root,n,h,m);const I=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new tU(!0,0,r);let n=0,i=!1;const h=r.reduce((m,I,z)=>{if("object"==typeof I&&null!=I){if(I.outlets){const X={};return Ex(I.outlets,(_r,ga)=>{X[ga]="string"==typeof _r?_r.split("/"):_r}),[...m,{outlets:X}]}if(I.segmentPath)return[...m,I.segmentPath]}return"string"!=typeof I?[...m,I]:0===z?(I.split("/").forEach((X,_r)=>{0==_r&&"."===X||(0==_r&&""===X?i=!0:".."===X?n++:""!=X&&m.push(X))}),m):[...m,I]},[]);return new tU(i,n,h)}(i);if(I.toRoot())return O6(n.root,new C_([],{}),n,h,m);const z=function(r,n,i){if(r.isAbsolute)return new R6(n.root,!0,0);if(-1===i.snapshot._lastPathIndex){const I=i.snapshot._urlSegment;return new R6(I,I===n.root,0)}const h=DL(r.commands[0])?0:1;return function(r,n,i){let h=r,m=n,I=i;for(;I>m;){if(I-=m,h=h.parent,!h)throw new Error("Invalid number of '../'");m=h.segments.length}return new R6(h,!1,m-I)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+h,r.numberOfDoubleDots)}(I,n,r),X=z.processChildren?SL(z.segmentGroup,z.index,I.commands):eU(z.segmentGroup,z.index,I.commands);return O6(z.segmentGroup,X,n,h,m)}(ga,this.currentUrlTree,i,od,null!=_h?_h:null)}navigateByUrl(i,h={skipLocationChange:!1}){const m=aS(i)?i:this.parseUrl(i),I=this.urlHandlingStrategy.merge(m,this.rawUrlTree);return this.scheduleNavigation(I,"imperative",null,h)}navigate(i,h={skipLocationChange:!1}){return function(r){for(let n=0;n<r.length;n++){const i=r[n];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${n}`)}}(i),this.navigateByUrl(this.createUrlTree(i,h),h)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let h;try{h=this.urlSerializer.parse(i)}catch(m){h=this.malformedUriErrorHandler(m,this.urlSerializer,i)}return h}isActive(i,h){let m;if(m=!0===h?Object.assign({},Tet):!1===h?Object.assign({},Det):h,aS(i))return jH(this.currentUrlTree,i,m);const I=this.parseUrl(i);return jH(this.currentUrlTree,I,m)}removeEmptyProps(i){return Object.keys(i).reduce((h,m)=>{const I=i[m];return null!=I&&(h[m]=I),h},{})}processNavigations(){this.navigations.subscribe(i=>{this.navigated=!0,this.lastSuccessfulId=i.id,this.currentPageId=i.targetPageId,this.events.next(new rN(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,i.resolve(!0)},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}scheduleNavigation(i,h,m,I,z){var X,_r;if(this.disposed)return Promise.resolve(!1);const ga=this.getTransition(),_h=PL(h)&&ga&&!PL(ga.source),ay=(this.lastSuccessfulId===ga.id||this.currentNavigation?ga.rawUrl:ga.urlAfterRedirects).toString()===i.toString();if(_h&&ay)return Promise.resolve(!0);let vy,Iy,xy;z?(vy=z.resolve,Iy=z.reject,xy=z.promise):xy=new Promise((f0,D0)=>{vy=f0,Iy=D0});const Zy=++this.navigationId;let Py;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(m=this.location.getState()),Py=m&&m.\u0275routerPageId?m.\u0275routerPageId:I.replaceUrl||I.skipLocationChange?null!==(X=this.browserPageId)&&void 0!==X?X:0:(null!==(_r=this.browserPageId)&&void 0!==_r?_r:0)+1):Py=0,this.setTransition({id:Zy,targetPageId:Py,source:h,restoredState:m,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:i,extras:I,resolve:vy,reject:Iy,promise:xy,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xy.catch(f0=>Promise.reject(f0))}setBrowserUrl(i,h){const m=this.urlSerializer.serialize(i),I=Object.assign(Object.assign({},h.extras.state),this.generateNgRouterState(h.id,h.targetPageId));this.location.isCurrentPathEqualTo(m)||h.extras.replaceUrl?this.location.replaceState(m,"",I):this.location.go(m,"",I)}restoreHistory(i,h=!1){var m,I;if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-i.targetPageId;"popstate"!==i.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(m=this.currentNavigation)||void 0===m?void 0:m.finalUrl)||0===z?this.currentUrlTree===(null===(I=this.currentNavigation)||void 0===I?void 0:I.finalUrl)&&0===z&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(z)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(i,h){const m=new MH(i.id,this.serializeUrl(i.extractedUrl),h);this.triggerEvent(m),i.resolve(!1)}generateNgRouterState(i,h){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:h}:{navigationId:i}}}return r.\u0275fac=function(i){return new(i||r)(l0(oD),l0(C6),l0(iI),l0(qR),l0(j_),l0(F3),l0(QD),l0(void 0))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function PL(r){return"imperative"!==r}let LL=(()=>{class r{constructor(i,h,m){this.router=i,this.route=h,this.locationStrategy=m,this.commands=[],this.onChanges=new W_,this.subscription=i.events.subscribe(I=>{I instanceof rN&&this.updateTargetUrlAndHref()})}set routerLink(i){this.commands=null!=i?Array.isArray(i)?i:[i]:[]}ngOnChanges(i){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(i,h,m,I,z){if(0!==i||h||m||I||z||"string"==typeof this.target&&"_self"!=this.target)return!0;const X={skipLocationChange:oI(this.skipLocationChange),replaceUrl:oI(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,X),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:oI(this.preserveFragment)})}}return r.\u0275fac=function(i){return new(i||r)(jy(rE),jy(sS),jy(XM))},r.\u0275dir=Ey({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(i,h){1&i&&Qx("click",function(I){return h.onClick(I.button,I.ctrlKey,I.shiftKey,I.altKey,I.metaKey)}),2&i&&(wF("href",h.href,tM),x1("target",h.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[G1]}),r})();function oI(r){return""===r||!!r}let z6=(()=>{class r{constructor(i,h,m,I,z){this.parentContexts=i,this.location=h,this.resolver=m,this.changeDetector=z,this.activated=null,this._activatedRoute=null,this.activateEvents=new Uw,this.deactivateEvents=new Uw,this.name=I||v_,i.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const i=this.parentContexts.getContext(this.name);i&&i.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,i}attach(i,h){this.activated=i,this._activatedRoute=h,this.location.insert(i.hostView)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,h){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=i;const z=(h=h||this.resolver).resolveComponentFactory(i._futureSnapshot.routeConfig.component),X=this.parentContexts.getOrCreateContext(this.name).children,_r=new Oet(i,X,this.location.injector);this.activated=this.location.createComponent(z,this.location.length,_r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(i){return new(i||r)(jy(iI),jy(j2),jy(KD),function(r){return function(r,n){if("class"===n)return r.classes;if("style"===n)return r.styles;const i=r.attrs;if(i){const h=i.length;let m=0;for(;m<h;){const I=i[m];if(RI(I))break;if(0===I)m+=2;else if("number"==typeof I)for(m++;m<h&&"string"==typeof i[m];)m++;else{if(I===n)return i[m+1];m+=2}}}return null}(_1(),r)}("name"),jy(kF))},r.\u0275dir=Ey({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class Oet{constructor(n,i,h){this.route=n,this.childContexts=i,this.parent=h}get(n,i){return n===sS?this.route:n===iI?this.childContexts:this.parent.get(n,i)}}class xU{}class EU{preload(n,i){return s_(null)}}let AU=(()=>{class r{constructor(i,h,m,I,z){this.router=i,this.injector=I,this.preloadingStrategy=z,this.loader=new bU(h,m,ga=>i.triggerEvent(new IH(ga)),ga=>i.triggerEvent(new kH(ga)))}setUpPreloading(){this.subscription=this.router.events.pipe(eI(i=>i instanceof rN),nN(()=>this.preload())).subscribe(()=>{})}preload(){const i=this.injector.get(EA);return this.processRoutes(i,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,h){const m=[];for(const I of h)if(I.loadChildren&&!I.canLoad&&I._loadedConfig){const z=I._loadedConfig;m.push(this.processRoutes(z.module,z.routes))}else I.loadChildren&&!I.canLoad?m.push(this.preloadConfig(i,I)):I.children&&m.push(this.processRoutes(i,I.children));return f1(m).pipe(yE(),k_(I=>{}))}preloadConfig(i,h){return this.preloadingStrategy.preload(h,()=>(h._loadedConfig?s_(h._loadedConfig):this.loader.load(i.injector,h)).pipe(m1(I=>(h._loadedConfig=I,this.processRoutes(I.module,I.routes)))))}}return r.\u0275fac=function(i){return new(i||r)(l0(rE),l0(F3),l0(QD),l0(j_),l0(xU))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})(),H6=(()=>{class r{constructor(i,h,m={}){this.router=i,this.viewportScroller=h,this.options=m,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},m.scrollPositionRestoration=m.scrollPositionRestoration||"disabled",m.anchorScrolling=m.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(i=>{i instanceof E6?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof rN&&(this.lastId=i.id,this.scheduleScrollEvent(i,this.router.parseUrl(i.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(i=>{i instanceof OH&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,h){this.router.triggerEvent(new OH(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(i){return new(i||r)(l0(rE),l0(u7),l0(void 0))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();const uS=new p_("ROUTER_CONFIGURATION"),CU=new p_("ROUTER_FORROOT_GUARD"),Net=[qR,{provide:C6,useClass:HH},{provide:rE,useFactory:function(r,n,i,h,m,I,z,X={},_r,ga){const _h=new rE(null,r,n,i,h,m,I,PH(z));return _r&&(_h.urlHandlingStrategy=_r),ga&&(_h.routeReuseStrategy=ga),function(r,n){r.errorHandler&&(n.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(n.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(n.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(n.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(n.urlUpdateStrategy=r.urlUpdateStrategy)}(X,_h),X.enableTracing&&_h.events.subscribe(od=>{var ey,ay;null===(ey=console.group)||void 0===ey||ey.call(console,`Router Event: ${od.constructor.name}`),console.log(od.toString()),console.log(od),null===(ay=console.groupEnd)||void 0===ay||ay.call(console)}),_h},deps:[C6,iI,qR,j_,F3,QD,V6,uS,[class{},new gx],[class{},new gx]]},iI,{provide:sS,useFactory:function(r){return r.routerState.root},deps:[rE]},{provide:F3,useClass:k$},AU,EU,class{preload(n,i){return i().pipe(rS(()=>s_(null)))}},{provide:uS,useValue:{enableTracing:!1}}];function Pet(){return new f5("Router",rE)}let TU=(()=>{class r{constructor(i,h){}static forRoot(i,h){return{ngModule:r,providers:[Net,DU(i),{provide:CU,useFactory:jet,deps:[[rE,new gx,new cA]]},{provide:uS,useValue:h||{}},{provide:XM,useFactory:Fet,deps:[eS,[new tC(M5),new gx],uS]},{provide:H6,useFactory:Let,deps:[rE,u7,uS]},{provide:xU,useExisting:h&&h.preloadingStrategy?h.preloadingStrategy:EU},{provide:f5,multi:!0,useFactory:Pet},[U6,{provide:WM,multi:!0,useFactory:Het,deps:[U6]},{provide:SU,useFactory:Uet,deps:[U6]},{provide:ez,multi:!0,useExisting:SU}]]}}static forChild(i){return{ngModule:r,providers:[DU(i)]}}}return r.\u0275fac=function(i){return new(i||r)(l0(CU,8),l0(rE,8))},r.\u0275mod=py({type:r}),r.\u0275inj=U1({}),r})();function Let(r,n,i){return i.scrollOffset&&n.setOffset(i.scrollOffset),new H6(r,n,i)}function Fet(r,n,i={}){return i.useHash?new XK(r,n):new qz(r,n)}function jet(r){return"guarded"}function DU(r){return[{provide:RN,multi:!0,useValue:r},{provide:V6,multi:!0,useValue:r}]}let U6=(()=>{class r{constructor(i){this.injector=i,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new W_}appInitializer(){return this.injector.get($K,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let h=null;const m=new Promise(X=>h=X),I=this.injector.get(rE),z=this.injector.get(uS);return"disabled"===z.initialNavigation?(I.setUpLocationChangeListener(),h(!0)):"enabled"===z.initialNavigation||"enabledBlocking"===z.initialNavigation?(I.hooks.afterPreactivation=()=>this.initNavigation?s_(null):(this.initNavigation=!0,h(!0),this.resultOfPreactivationDone),I.initialNavigation()):h(!0),m})}bootstrapListener(i){const h=this.injector.get(uS),m=this.injector.get(AU),I=this.injector.get(H6),z=this.injector.get(rE),X=this.injector.get($M);i===X.components[0]&&(("enabledNonBlocking"===h.initialNavigation||void 0===h.initialNavigation)&&z.initialNavigation(),m.setUpPreloading(),I.init(),z.resetRootComponentType(X.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(i){return new(i||r)(l0(j_))},r.\u0275prov=K0({token:r,factory:r.\u0275fac}),r})();function Het(r){return r.appInitializer.bind(r)}function Uet(r){return r.bootstrapListener.bind(r)}const SU=new p_("Router Initializer");var lS=d(378);const Yet=["map"];function $et(r,n){1&r&&(X0(0,"div",3),X0(1,"div",4),X0(2,"span",5),fE(3,"Loading..."),P0(),P0(),P0())}let MU=(()=>{class r{constructor(){this.mapIsRendered=!1}ngOnInit(){}ngAfterViewInit(){if(!this.map&&this.mapDiv){const h=new lS.Z.service.Platform({apikey:"X0kJRAs2exJdsfcZqqLPh-dNb5PuqQbp-JPPcYG8YZs"}).createDefaultLayers(),m=new lS.Z.Map(this.mapDiv.nativeElement,h.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:{lat:this.agency.lat,lng:this.agency.lon},zoom:15});m.addEventListener("render",I=>{console.log("rendered",this.agency.agencia)}),function(r,n){var i=document.createElement("iframe"),h=document.documentMode<11&&"pointerEvents"in i.style;i.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;pointer-events:none;"+(h?"":"visibility:hidden;"),i.onload=function(){i.contentWindow.onresize=function(){m.getViewPort().resize()}},r.appendChild(i)}(this.mapDiv.nativeElement),new lS.Z.mapevents.Behavior(new lS.Z.mapevents.MapEvents(m)),this.map=m,this.listenRenderingState(m),this.addMarkerInTheMap()}}addMarkerInTheMap(){const i={lat:this.agency.lat,lng:this.agency.lon},h=new lS.Z.map.Icon('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37.14 76.7"><defs><style>.cls-1{fill:#414242;}.cls-2{fill:#209ec9;}.cls-3{fill:#dc9d0e;}.cls-4{fill:#f3ba26;}.cls-5{fill:#f9e8cc;}.cls-6{fill:#f8e7cc;}</style></defs><g id="Capa_2" data-name="Capa 2"><g id="content"><path class="cls-1" d="M15.19,68.33a5.46,5.46,0,0,1,4.92,0c1.35.79,1.35,2.06,0,2.84a5.46,5.46,0,0,1-4.92,0C13.83,70.39,13.83,69.12,15.19,68.33Z"/><path class="cls-1" d="M6.33,69.75c0,2,1.24,3.74,3.51,5a16,16,0,0,0,7.81,1.9,16,16,0,0,0,7.81-1.9c2.26-1.31,3.51-3.1,3.51-5s-1.25-3.74-3.51-5a17,17,0,0,0-15.62,0C7.57,66,6.33,67.8,6.33,69.75Zm1.86,0c0-1.26.91-2.48,2.58-3.44a14.08,14.08,0,0,1,6.88-1.64,14.14,14.14,0,0,1,6.88,1.64c1.66,1,2.58,2.18,2.58,3.44s-.92,2.48-2.58,3.44a15.23,15.23,0,0,1-13.76,0C9.1,72.23,8.19,71,8.19,69.75Z"/><path class="cls-2" d="M15.19,66.47a5.4,5.4,0,0,1,4.92,0c1.35.78,1.35,2,0,2.84a5.46,5.46,0,0,1-4.92,0C13.83,68.52,13.83,67.25,15.19,66.47Z"/><path class="cls-2" d="M6.33,67.89c0,2,1.24,3.74,3.51,5a16,16,0,0,0,7.81,1.89,16,16,0,0,0,7.81-1.89c2.26-1.31,3.51-3.1,3.51-5s-1.25-3.74-3.51-5a17,17,0,0,0-15.62,0C7.57,64.15,6.33,65.94,6.33,67.89Zm1.86,0c0-1.26.91-2.48,2.58-3.44a14,14,0,0,1,6.88-1.64,14,14,0,0,1,6.88,1.64c1.66,1,2.58,2.18,2.58,3.44s-.92,2.48-2.58,3.44a15.23,15.23,0,0,1-13.76,0C9.1,70.37,8.19,69.14,8.19,67.89Z"/><path class="cls-3" d="M36.76,28.57C36.32,18,29.4,6.07,21.31,1.83,17.74,0,14.55-.08,12.12,1.35h0L5.16,5.46l5.31,2.83c-.07.64-.1,1.31-.11,2l-1.86.19L4.2,15.66,5.56,26.79l4.63,7.71L16.47,38l2.9-.41,1.16,2.71-.53.93-3.12,14,.63,2.89,6.83-4,.16-.1h0a2.87,2.87,0,0,0,.81-1l9.15-14.73a10.5,10.5,0,0,0,.73-1.17h0A16.86,16.86,0,0,0,36.76,28.57ZM19.27,15l5.21,9.55L23.07,32c-4.32-2.44-9-9.63-9-15.29a21.71,21.71,0,0,1,.65-3.81Z"/><path class="cls-1" d="M17.66,58.46a.32.32,0,0,1-.49-.21l-.66-3,0-.07L19.69,41l.45-.77-1-2.31-2.75.4-6.46-3.6L5.21,26.83,3.83,15.55l4.49-5.41L10,10c0-.52,0-1,.08-1.47l-5.65-3L12.07,1h0C14.67-.49,18-.3,21.47,1.52c8.18,4.28,15.2,16.41,15.64,27h0a17.84,17.84,0,0,1-1.36,8.19h0l-.27.52a10.51,10.51,0,0,1-.75,1.2L25.62,53.19a3.46,3.46,0,0,1-.92,1.11,1.19,1.19,0,0,1-.22.12Zm-.42-3.21,3.61-2.77,6.41-3.79a.51.51,0,0,0,.14-.08l-.14.08a3.32,3.32,0,0,0,.84-1l6.06-9.65a9.94,9.94,0,0,0,.62-1l.09-.17a16.62,16.62,0,0,0,1.53-8.35h0C36,18.18,29.12,6.32,21.14,2.15,17.84.42,14.7.24,12.3,1.66l-.14.08h0L5.89,5.45l5,2.64,0,.24c-.06.61-.1,1.27-.1,2v.32l-2,.21L4.57,15.77l1.34,10.9,4.54,7.57,6.09,3.38,3-.43,1.35,3.13-.6,1Zm6.09-22.69-.44-.25c-4.32-2.45-9.17-9.64-9.17-15.6a13.55,13.55,0,0,1,.51-3.17c.07-.29.14-.56.15-.66l0-.52,5.11,2.4,5.33,9.77ZM15,13.42c0,.09,0,.19-.07.3a12.35,12.35,0,0,0-.49,3c0,5.44,4.42,12.19,8.39,14.73l1.29-6.8L19,15.31Z"/><path class="cls-4" d="M36.77,28.57C36.33,18,29.42,6.07,21.33,1.83,17.76,0,14.56-.08,12.14,1.35h0l-7,4.11,5.31,2.83c-.07.64-.1,1.31-.11,2l2.07.41,2.45-.26,6.8,6.17,4.55,11.2.92,6.66L36.78,29C36.78,28.82,36.78,28.7,36.77,28.57Z"/><path class="cls-5" d="M36.29,31.75C35.85,21.21,28.94,9.25,20.85,5c-3.57-1.87-6.77-1.92-9.19-.49h0l-6,3.57a.6.6,0,0,0,0,1.05l4,2.14a.59.59,0,0,1,.32.58c0,.36-.05.72-.06,1.09a.61.61,0,0,0,.49.61l1.48.29a.55.55,0,0,0,.18,0l2.09-.22a.62.62,0,0,1,.47.15l6.5,5.9a.6.6,0,0,1,.16.22l4.46,11a.57.57,0,0,1,0,.14l.79,5.7a.61.61,0,0,0,.9.44L36,32.31Z"/><path class="cls-1" d="M26.89,35l-1-7.13-4.5-11.09-6.63-6-2.34.25L10,10.58v-.29c0-.63,0-1.23.09-1.79L4.78,5.65a.21.21,0,0,1,0-.36L12.09,1h0c2.6-1.46,5.93-1.27,9.4.55,8.18,4.28,15.19,16.41,15.64,27h0v.59ZM15,10.07l7,6.4,4.57,11.3.85,6.13,9-5.16v-.15h0C36,18.18,29.14,6.32,21.16,2.15A11.36,11.36,0,0,0,15.93.71L7.34,5.8l3.52,2.29,0,.24c-.06.52-.09,1.08-.1,1.67l1.73.34Z"/><path class="cls-6" d="M8.62,32.56l7.13-3.92A1.19,1.19,0,0,1,17.3,29c1.19,1.7,4.17,5.21,8.48,5.21L18,39.35l-5-.78Z"/><path class="cls-4" d="M2.75,28h0l0,.09q.38,1,.81,1.89L14.41,55.18a4.6,4.6,0,0,0,2,2.83,1.16,1.16,0,0,0,1.84-.83l9.15-14.73a10.35,10.35,0,0,0,.69-1.11l0-.06h0a16.82,16.82,0,0,0,1.57-8.52C29.24,22.22,22.32,10.25,14.23,6S-.06,6.89.38,17.43A32.86,32.86,0,0,0,2.75,28ZM7,20.89c-.24-5.77,3.16-8.57,7.59-6.25s8.23,8.88,8.47,14.65-3.16,8.58-7.59,6.26S7.24,26.67,7,20.89Z"/><path class="cls-1" d="M17.14,58.57a2,2,0,0,1-.9-.25,4.86,4.86,0,0,1-2.17-3L3.27,30.14c-.29-.62-.56-1.27-.81-1.9l-.57-1.5h0A33,33,0,0,1,0,17.45C-.21,11.78,1.47,7.37,4.65,5.35,7.3,3.67,10.76,3.8,14.4,5.7,22.58,10,29.59,22.11,30,32.74a18,18,0,0,1-1.36,8.19l-.27.54h0a11,11,0,0,1-.73,1.19L18.57,57.32a1.62,1.62,0,0,1-.85,1.12A1.34,1.34,0,0,1,17.14,58.57ZM3.11,28h0c.25.63.52,1.26.81,1.88L14.74,55a4.24,4.24,0,0,0,1.83,2.65,1,1,0,0,0,.85.11.94.94,0,0,0,.47-.7l.05-.1,9.15-14.74a11.05,11.05,0,0,0,.68-1.09l0-.05a16.7,16.7,0,0,0,1.54-8.35c-.44-10.4-7.28-22.26-15.26-26.44C10.66,4.55,7.45,4.42,5,6,2.07,7.83.51,12,.73,17.42A32.73,32.73,0,0,0,3.08,27.89Zm15.32,8.74a6.8,6.8,0,0,1-3.13-.85c-4.53-2.37-8.41-9.07-8.65-14.95h0c-.14-3.17.82-5.63,2.61-6.77,1.5-1,3.45-.88,5.5.19,4.52,2.36,8.41,9.07,8.65,15,.13,3.16-.82,5.63-2.61,6.76A4.33,4.33,0,0,1,18.43,36.71ZM7.36,20.88C7.59,26.53,11.3,33,15.63,35.23c1.81,1,3.52,1,4.79.22,1.57-1,2.4-3.24,2.28-6.14-.23-5.65-3.94-12.09-8.27-14.35-1.81-1-3.52-1-4.79-.22-1.57,1-2.41,3.24-2.28,6.14Z"/><rect class="cls-1" x="9.29" y="27.41" width="8.31" height="0.69" transform="translate(-11.84 10.09) rotate(-29.22)"/><rect class="cls-1" x="6.63" y="20.69" width="8.31" height="0.69" transform="translate(-8.9 7.94) rotate(-29.22)"/><polygon class="cls-1" points="23.41 49.52 23.07 48.91 30.32 44.86 29.93 45.87 23.41 49.52"/><polygon class="cls-1" points="6.99 21.36 7.34 17.95 7.91 16.17 9.82 14 14.19 14.19 14.24 17.31 6.99 21.36"/></g></g></svg>',{size:{w:29,h:56}}),m=new lS.Z.map.Marker(i,{data:i,icon:h});this.map.addObject(m)}listenRenderingState(i){i.getEngine().addEventListener("render",()=>{i.getEngine().getState()===lS.Z.map.render.RenderState.DONE&&(this.mapIsRendered=!0)})}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_c({type:r,selectors:[["app-agency-map"]],viewQuery:function(i,h){if(1&i&&RB(Yet,5),2&i){let m;k3(m=function(r,n){return r[19].queries[n].queryList}(Ky(),VC()))&&(h.mapDiv=m.first)}},inputs:{agency:"agency"},decls:3,vars:2,consts:[["id","map",3,"hidden"],["map",""],["class","d-flex justify-content-center align-items-center h-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","h-100"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(i,h){1&i&&(h1(0,"div",0,1),P2(2,$et,4,0,"div",2)),2&i&&(M_("hidden",!h.mapIsRendered),Rx(2),M_("ngIf",!h.mapIsRendered))},directives:[r7],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]}),r})(),Ket=(()=>{class r{constructor(i){this.router=i}ngOnInit(){}seeDetails(){this.router.navigateByUrl(`details/${this.index}`)}}return r.\u0275fac=function(i){return new(i||r)(jy(rE))},r.\u0275cmp=_c({type:r,selectors:[["app-agency-card"]],inputs:{agency:"agency",index:"index"},decls:14,vars:5,consts:[[1,"card","border-radius-card","ms-1","me-2","mb-2",2,"width","18rem"],[3,"agency"],[1,"card-body"],[1,"d-flex","flex-row","flex-wrap","align-items-center"],[1,"agency-image",3,"src"],[1,"card-title","ms-2","d-inline-block","text-truncate",2,"max-width","12rem"],[1,"card-text","d-flex","flex-column"],[1,"d-inline-block","text-truncate",2,"max-width","18rem"],[1,"d-inline-block","text-truncate","text-secondary",2,"max-width","18rem"],[1,"card-link",3,"click"]],template:function(i,h){1&i&&(X0(0,"div",0),h1(1,"app-agency-map",1),X0(2,"div",2),X0(3,"div",3),h1(4,"img",4),X0(5,"h5",5),fE(6),P0(),P0(),X0(7,"p",6),X0(8,"span",7),fE(9),P0(),X0(10,"span",8),fE(11),P0(),P0(),X0(12,"a",9),Qx("click",function(){return h.seeDetails()}),fE(13,"See details"),P0(),P0(),P0()),2&i&&(Rx(1),M_("agency",h.agency),Rx(3),vF("src","https://api.lorem.space/image/house?w=100&h=100&time="+h.index,tM),Rx(2),g3(h.agency.agencia),Rx(3),y3(" ",h.agency.direccion," "),Rx(2),g3(h.agency.distrito))},directives:[MU],styles:[".agency-image[_ngcontent-%COMP%]{object-fit:cover;width:45px;height:45px;border-radius:50%}.border-radius-card[_ngcontent-%COMP%]{border-radius:15px}  app-agency-card app-agency-map{height:180px;padding:10px}  app-agency-card app-agency-map #map{border-radius:15px;overflow:hidden}"]}),r})();function Zet(r,n){if(1&r&&h1(0,"app-agency-card",2),2&r){const h=n.index;M_("agency",n.$implicit)("index",h)}}const Xet=[{path:"",pathMatch:"full",redirectTo:"agencies"},{path:"agencies",component:(()=>{class r{constructor(){this.agencies=[],this.agencies=JSON.parse(localStorage.getItem("agenciesData"))}ngOnInit(){}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_c({type:r,selectors:[["app-agencies"]],decls:2,vars:1,consts:[[1,"d-flex","flex-row","flex-wrap","justify-content-center","mt-5"],[3,"agency","index",4,"ngFor","ngForOf"],[3,"agency","index"]],template:function(i,h){1&i&&(X0(0,"div",0),P2(1,Zet,1,2,"app-agency-card",1),P0()),2&i&&(Rx(1),M_("ngForOf",h.agencies))},directives:[e7,Ket],styles:[""]}),r})()},{path:"details/:id",component:(()=>{class r{constructor(i,h,m){this.fb=i,this.route=h,this.location=m,this.agencies=[],this.id=Number(this.route.snapshot.paramMap.get("id")),this.agencies=JSON.parse(localStorage.getItem("agenciesData")),this.agency=this.agencies[this.id]}ngOnInit(){this.buildingForm()}buildingForm(){const i=this.agencies[this.id];this.agencyForm=this.fb.group({agency:[i.agencia],district:[i.distrito],province:[i.provincia],department:[i.departamento],address:[i.direccion],lat:[i.lat],lon:[i.lon]})}update(){this.agencies[this.id]={agencia:this.agencyForm.value.agency,distrito:this.agencyForm.value.district,provincia:this.agencyForm.value.province,departamento:this.agencyForm.value.department,direccion:this.agencyForm.value.address,lat:this.agencyForm.value.lat,lon:this.agencyForm.value.lon},localStorage.setItem("agenciesData",JSON.stringify(this.agencies)),this.location.back()}}return r.\u0275fac=function(i){return new(i||r)(jy(sJ),jy(sS),jy(qR))},r.\u0275cmp=_c({type:r,selectors:[["app-agency-detail"]],decls:27,vars:2,consts:[[1,"container","mt-4"],[1,"d-block",3,"agency"],[3,"formGroup"],[1,"mt-2","mb-2"],[1,"mb-3"],["for","name-inpu",1,"form-label"],["type","text","id","name-input","formControlName","agency",1,"form-control"],["for","address-input",1,"form-label"],["type","text","id","address-input","formControlName","address",1,"form-control"],["type","text","id","district-input","formControlName","district",1,"form-control"],["for","latitude-input",1,"form-label"],["type","number","id","latitude-input","formControlName","lat",1,"form-control"],["for","longitude-input",1,"form-label"],["type","number","id","longitude-input","formControlName","lon",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,h){1&i&&(X0(0,"div",0),h1(1,"app-agency-map",1),X0(2,"form",2),X0(3,"h5",3),fE(4,"Agency information"),P0(),X0(5,"div",4),X0(6,"label",5),fE(7,"Agency's name:"),P0(),h1(8,"input",6),P0(),X0(9,"div",4),X0(10,"label",7),fE(11,"Address:"),P0(),h1(12,"input",8),P0(),X0(13,"div",4),X0(14,"label",7),fE(15,"District:"),P0(),h1(16,"input",9),P0(),X0(17,"div",4),X0(18,"label",10),fE(19,"Latitude:"),P0(),h1(20,"input",11),P0(),X0(21,"div",4),X0(22,"label",12),fE(23,"Longitude:"),P0(),h1(24,"input",13),P0(),X0(25,"button",14),Qx("click",function(){return h.update()}),fE(26," Update "),P0(),P0(),P0()),2&i&&(Rx(1),M_("agency",h.agency),Rx(1),M_("formGroup",h.agencyForm))},directives:[MU,iH,$7,vL,lL,Y7,g6,h6],styles:["app-agency-detail app-agency-map{height:180px}  app-agency-detail app-agency-map #map{border-radius:15px;overflow:hidden}"]}),r})()},{path:"**",pathMatch:"full",redirectTo:"agencies"}];let Qet=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r}),r.\u0275inj=U1({imports:[[TU.forRoot(Xet)],TU]}),r})(),Jet=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_c({type:r,selectors:[["app-nav-bar"]],decls:11,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","agencies",1,"navbar-brand"],["src","https://d31dn7nfpuwjnm.cloudfront.net/images/valoraciones/0034/1195/Credito_hipotecario_BCP_requisitos__tasas__simulador.png?1558976229","height","30px","alt",""],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","routerLink","agencies",1,"nav-link","active"]],template:function(i,h){1&i&&(X0(0,"nav",0),X0(1,"div",1),X0(2,"a",2),h1(3,"img",3),P0(),X0(4,"button",4),h1(5,"span",5),P0(),X0(6,"div",6),X0(7,"ul",7),X0(8,"li",8),X0(9,"a",9),fE(10," Agencies "),P0(),P0(),P0(),P0(),P0(),P0())},directives:[LL],styles:[""]}),r})(),tnt=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_c({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(i,h){1&i&&(h1(0,"app-nav-bar"),h1(1,"router-outlet"))},directives:[Jet,z6],styles:[""]}),r})();function ent(){return new Promise(r=>{setTimeout(()=>{localStorage.getItem("agenciesData")?r(!0):nnt(r)},800)})}const nnt=r=>{fetch("assets/data/agencies.json").then(n=>n.json()).then(n=>{localStorage.setItem("agenciesData",JSON.stringify(n)),r(!0)})};let rnt=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=py({type:r,bootstrap:[tnt]}),r.\u0275inj=U1({providers:[{provide:WM,useFactory:()=>ent,multi:!0}],imports:[[aQ,Qet,xH]]}),r})();(function(){if(uz)throw new Error("Cannot enable prod mode after platform setup.");az=!1})(),oQ().bootstrapModule(rnt).catch(r=>console.error(r))}},e=>{e(e.s=937)}]);